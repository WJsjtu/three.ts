{"version":3,"sources":["webpack://THREE/webpack/bootstrap","webpack://THREE/./es/Three.js","webpack://THREE/./es/audio/Audio.js","webpack://THREE/./es/audio/AudioAnalyser.js","webpack://THREE/./es/audio/AudioContext.js","webpack://THREE/./es/audio/AudioListener.js","webpack://THREE/./es/audio/PositionalAudio.js","webpack://THREE/./es/cameras/ArrayCamera.js","webpack://THREE/./es/cameras/Camera.js","webpack://THREE/./es/cameras/OrthographicCamera.js","webpack://THREE/./es/cameras/PerspectiveCamera.js","webpack://THREE/./es/constants.js","webpack://THREE/./es/core/BufferAttribute.js","webpack://THREE/./es/core/BufferGeometry.js","webpack://THREE/./es/core/Clock.js","webpack://THREE/./es/core/DirectGeometry.js","webpack://THREE/./es/core/EventDispatcher.js","webpack://THREE/./es/core/Face3.js","webpack://THREE/./es/core/Geometry.js","webpack://THREE/./es/core/InstancedBufferAttribute.js","webpack://THREE/./es/core/InstancedBufferGeometry.js","webpack://THREE/./es/core/InstancedInterleavedBufferAttribute.js","webpack://THREE/./es/core/InterleavedBufferAttribute.js","webpack://THREE/./es/core/Layers.js","webpack://THREE/./es/core/Object3D.js","webpack://THREE/./es/core/Raycaster.js","webpack://THREE/./es/extras/objects/ImmediateRenderObject.js","webpack://THREE/./es/geometries/BoxGeometry.js","webpack://THREE/./es/geometries/CircleGeometry.js","webpack://THREE/./es/geometries/ConeGeometry.js","webpack://THREE/./es/geometries/CylinderGeometry.js","webpack://THREE/./es/geometries/Geometries.js","webpack://THREE/./es/geometries/PlaneGeometry.js","webpack://THREE/./es/lights/AmbientLight.js","webpack://THREE/./es/lights/DirectionalLight.js","webpack://THREE/./es/lights/DirectionalLightShadow.js","webpack://THREE/./es/lights/HemisphereLight.js","webpack://THREE/./es/lights/Light.js","webpack://THREE/./es/lights/LightShadow.js","webpack://THREE/./es/lights/PointLight.js","webpack://THREE/./es/lights/RectAreaLight.js","webpack://THREE/./es/lights/SpotLight.js","webpack://THREE/./es/lights/SpotLightShadow.js","webpack://THREE/./es/materials/LineBasicMaterial.js","webpack://THREE/./es/materials/LineDashedMaterial.js","webpack://THREE/./es/materials/Material.js","webpack://THREE/./es/materials/Materials.js","webpack://THREE/./es/materials/MeshBasicMaterial.js","webpack://THREE/./es/materials/MeshDepthMaterial.js","webpack://THREE/./es/materials/MeshDistanceMaterial.js","webpack://THREE/./es/materials/MeshLambertMaterial.js","webpack://THREE/./es/materials/MeshNormalMaterial.js","webpack://THREE/./es/materials/MeshPhongMaterial.js","webpack://THREE/./es/materials/MeshPhysicalMaterial.js","webpack://THREE/./es/materials/MeshStandardMaterial.js","webpack://THREE/./es/materials/MeshToonMaterial.js","webpack://THREE/./es/materials/PointsMaterial.js","webpack://THREE/./es/materials/RawShaderMaterial.js","webpack://THREE/./es/materials/ShaderMaterial.js","webpack://THREE/./es/materials/ShadowMaterial.js","webpack://THREE/./es/materials/SpriteMaterial.js","webpack://THREE/./es/math/Box3.js","webpack://THREE/./es/math/Color.js","webpack://THREE/./es/math/Euler.js","webpack://THREE/./es/math/Frustum.js","webpack://THREE/./es/math/Line3.js","webpack://THREE/./es/math/Math.js","webpack://THREE/./es/math/Matrix2.js","webpack://THREE/./es/math/Matrix3.js","webpack://THREE/./es/math/Matrix4.js","webpack://THREE/./es/math/Plane.js","webpack://THREE/./es/math/Quaternion.js","webpack://THREE/./es/math/Ray.js","webpack://THREE/./es/math/Sphere.js","webpack://THREE/./es/math/Spherical.js","webpack://THREE/./es/math/Triangle.js","webpack://THREE/./es/math/Vector2.js","webpack://THREE/./es/math/Vector3.js","webpack://THREE/./es/math/Vector4.js","webpack://THREE/./es/objects/Bone.js","webpack://THREE/./es/objects/Group.js","webpack://THREE/./es/objects/LOD.js","webpack://THREE/./es/objects/Line.js","webpack://THREE/./es/objects/LineLoop.js","webpack://THREE/./es/objects/LineSegments.js","webpack://THREE/./es/objects/Mesh.js","webpack://THREE/./es/objects/Points.js","webpack://THREE/./es/objects/Skeleton.js","webpack://THREE/./es/objects/SkinnedMesh.js","webpack://THREE/./es/objects/Sprite.js","webpack://THREE/./es/renderers/WebGLRenderTarget.js","webpack://THREE/./es/renderers/WebGLRenderTargetCube.js","webpack://THREE/./es/renderers/WebGLRenderer.js","webpack://THREE/./es/renderers/shaders/ShaderChunk.js","webpack://THREE/./es/renderers/shaders/ShaderChunk/alphamap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/alphatest_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/aomap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/begin_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/bsdfs.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/color_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/color_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/color_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/color_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/common.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/dithering_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/dithering_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/encodings_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/envmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/envmap_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/fog_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/fog_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/fog_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/gradientmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lightmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_pars.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_template.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/map_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/map_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/map_particle_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/normal_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/packing.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/project_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/skinbase_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/skinning_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/specularmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv2_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/worldpos_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib.js","webpack://THREE/./es/renderers/shaders/ShaderLib/cube_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/cube_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/depth_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/depth_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/equirect_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/equirect_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/linedashed_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/linedashed_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshbasic_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshbasic_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshlambert_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshlambert_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshphong_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshphong_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshphysical_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshphysical_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/normal_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/normal_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/points_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/points_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/shadow_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/shadow_vert.glsl","webpack://THREE/./es/renderers/shaders/UniformsLib.js","webpack://THREE/./es/renderers/shaders/UniformsUtils.js","webpack://THREE/./es/renderers/webgl/WebGLAttributes.js","webpack://THREE/./es/renderers/webgl/WebGLBackground.js","webpack://THREE/./es/renderers/webgl/WebGLBufferRenderer.js","webpack://THREE/./es/renderers/webgl/WebGLCapabilities.js","webpack://THREE/./es/renderers/webgl/WebGLClipping.js","webpack://THREE/./es/renderers/webgl/WebGLExtensions.js","webpack://THREE/./es/renderers/webgl/WebGLGeometries.js","webpack://THREE/./es/renderers/webgl/WebGLIndexedBufferRenderer.js","webpack://THREE/./es/renderers/webgl/WebGLLights.js","webpack://THREE/./es/renderers/webgl/WebGLMorphtargets.js","webpack://THREE/./es/renderers/webgl/WebGLObjects.js","webpack://THREE/./es/renderers/webgl/WebGLProgram.js","webpack://THREE/./es/renderers/webgl/WebGLPrograms.js","webpack://THREE/./es/renderers/webgl/WebGLProperties.js","webpack://THREE/./es/renderers/webgl/WebGLRenderLists.js","webpack://THREE/./es/renderers/webgl/WebGLShader.js","webpack://THREE/./es/renderers/webgl/WebGLShadowMap.js","webpack://THREE/./es/renderers/webgl/WebGLSpriteRenderer.js","webpack://THREE/./es/renderers/webgl/WebGLState.js","webpack://THREE/./es/renderers/webgl/WebGLTextures.js","webpack://THREE/./es/renderers/webgl/WebGLUniforms.js","webpack://THREE/./es/renderers/webgl/WebGLUtils.js","webpack://THREE/./es/scenes/Fog.js","webpack://THREE/./es/scenes/FogExp2.js","webpack://THREE/./es/scenes/Scene.js","webpack://THREE/./es/textures/CanvasTexture.js","webpack://THREE/./es/textures/CompressedTexture.js","webpack://THREE/./es/textures/CubeTexture.js","webpack://THREE/./es/textures/DataTexture.js","webpack://THREE/./es/textures/DepthTexture.js","webpack://THREE/./es/textures/Texture.js","webpack://THREE/./es/textures/VideoTexture.js","webpack://THREE/./es/utils.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","_WebGLRenderTargetCube","_WebGLRenderTarget","_WebGLRenderer","_ShaderLib","_UniformsLib","_UniformsUtils","_ShaderChunk","_FogExp","_Fog","_Scene","_Sprite","_LOD","_SkinnedMesh","_Skeleton","_Bone","_Mesh","_LineSegments","_LineLoop","_Line","_Points","_Group","_VideoTexture","_DataTexture","_CompressedTexture","_CubeTexture","_CanvasTexture","_DepthTexture","_Texture","_Geometries","keys","forEach","key","_exportNames","_Materials","_SpotLightShadow","_SpotLight","_PointLight","_RectAreaLight","_HemisphereLight","_DirectionalLightShadow","_DirectionalLight","_AmbientLight","_LightShadow","_Light","_PerspectiveCamera","_OrthographicCamera","_ArrayCamera","_Camera","_AudioListener","_PositionalAudio","_AudioContext","_AudioAnalyser","_Audio","_InstancedBufferGeometry","_BufferGeometry","_Geometry","_InterleavedBufferAttribute","_InstancedInterleavedBufferAttribute","_InstancedBufferAttribute","_BufferAttribute","_Face","_Object3D","_Raycaster","_Layers","_EventDispatcher","_Clock","_Triangle","_Math","_Spherical","_Plane","_Frustum","_Sphere","_Ray","_Matrix","_Matrix2","_Matrix3","_Box","_Line2","_Euler","_Vector","_Vector2","_Vector3","_Quaternion","_Color","_ImmediateRenderObject","_WebGLUtils","_constants","_Object3D2","AudioWrapper","listener","_this","_classCallCheck","this","_possibleConstructorReturn","__proto__","getPrototypeOf","type","startTime","offset","isPlaying","hasPlaybackControl","sourceType","autoplay","buffer","loop","playbackRate","filters","context","gain","createGain","connect","getInput","audioNode","source","audioBuffer","play","console","warn","createBufferSource","onended","onEnded","bind","setValueAtTime","currentTime","start","stop","length","getOutput","disconnect","arguments","undefined","getFilters","filter","setFilters","AudioAnalyserWrapper","audio","fftSize","analyser","createAnalyser","data","Uint8Array","frequencyBinCount","getByteFrequencyData","getFrequencyData","AudioContextWrapper","window","AudioContext","webkitAudioContext","AudioListenerWrapper","getContext","destination","force","_get","position","Vector3","quaternion","Quaternion","scale","orientation","up","matrixWorld","decompose","set","applyQuaternion","positionX","x","positionY","y","positionZ","z","forwardX","forwardY","forwardZ","upX","upY","upZ","setPosition","setOrientation","PositionalAudio","panner","createPanner","refDistance","rolloffFactor","distanceModel","maxDistance","setFromMatrixPosition","_PerspectiveCamera2","ArrayCamera","cameras","Camera","matrixWorldInverse","Matrix4","projectionMatrix","getInverse","recursive","copy","constructor","worldQuaternion","_Camera2","OrthographicCamera","left","right","top","bottom","near","far","_left","_right","_top","_bottom","_zoom","_near","_far","_view","updateProjectionMatrix","fullWidth","fullHeight","width","height","enabled","offsetX","offsetY","view","dx","zoom","dy","cx","cy","zoomW","zoomH","scaleW","scaleH","makeOrthographic","assign","PerspectiveCamera","fov","aspect","focus","_fov","_aspect","_filmGauge","_filmOffset","focalLength","vExtentSlope","getFilmHeight","MathUtil","RAD2DEG","Math","atan","tan","DEG2RAD","filmGauge","min","max","skew","filmOffset","getFilmWidth","makePerspective","REVISION","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","BufferAttribute","array","itemSize","normalized","uuid","generateUUID","count","dynamic","updateRange","version","slice","index1","attribute","index2","colors","color","Color","g","b","vectors","vector","Vector2","Vector4","w","index","toLowerCase","replace","offsetMap","charAt","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","_utils","_DirectGeometry","_EventDispatcher2","bufferGeometryId","BufferGeometry","apply","id","attributes","morphAttributes","groups","boundingBox","boundingSphere","drawRange","Infinity","Array","isArray","arrayMax","setIndex","materialIndex","push","matrix","applyMatrixToBufferAttribute","needsUpdate","normal","normalMatrix","Matrix3","getNormalMatrix","computeBoundingBox","computeBoundingSphere","angle","applyMatrix","makeRotationX","makeRotationY","makeRotationZ","makeTranslation","makeScale","obj","Object3D","lookAt","updateMatrix","getCenter","negate","translate","geometry","positions","vertices","addAttribute","copyVector3sArray","copyColorsArray","lineDistances","copyArray","clone","fromGeometry","points","point","direct","directGeometry","elementsNeedUpdate","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","normals","uv","copyVector2sArray","uvs","lineDistancesNeedUpdate","lineDistance","computeGroups","DirectGeometry","fromDirectGeometry","uvs2","morphTargets","morphTarget","skinIndices","copyVector4sArray","skinWeights","Box3","setBoxFromBufferAttribute","makeEmpty","isNaN","error","Sphere","box","center","maxRadiusSquare","il","getProperty","distanceToSquared","radius","sqrt","vA","vB","vC","pA","pB","pC","cb","ab","indices","addGroup","j","jl","group","fromArray","sub","cross","normalizeNormals","normalize","setProperty","geometry2","array2","morphAttribute","dispatchEvent","Clock","autoStart","oldTime","elapsedTime","running","performance","Date","now","getElapsedTime","getDelta","diff","newTime","faces","face","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphNormals","morphNormalsLength","hasSkinIndices","hasSkinWeights","a","vertexNormals","vertexColors","vertexUvs","concat","morphNormal","EventDispatcher","_listeners","listeners","indexOf","listenerArray","splice","event","target","Face3","_Face2","GeometryFace","geometryId","Geometry","applyMatrix4","applyMatrix3","_this2","uv2","tempNormals","tempUVs","tempUVs2","addFace","computeFaceNormals","f","fl","areaWeighted","v","vl","add","originalFaceNormal","originalVertexNormals","tmpGeo","faceNormals","Triangle","computeVertexNormals","faceNormal","distanceTo","setFromPoints","materialIndexOffset","vertexOffset","thisVertices","thatVertices","thisFaces","thatFaces","thisUvs","thatUvs","thisColors","thatColors","vertexCopy","faceVertexNormals","faceVertexColors","faceCopy","uvCopy","mesh","matrixAutoUpdate","merge","verticesMap","unique","changes","precisionPoints","precision","pow","round","join","faceIndicesToRemove","idx","sort","uvs1","newUvs1","newUvs2","uvsCopy","k","kl","_BufferAttribute2","InstancedBufferAttribute","meshPerAttribute","_BufferGeometry2","InstancedBufferGeometry","maxInstancedCount","InstancedInterleavedBufferAttribute","stride","InterleavedBufferAttribute","Layers","mask","channel","layers","object3DId","parent","children","DefaultUp","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","rotation","Euler","modelViewMatrix","onBeforeRender","onAfterRender","compose","multiplyMatrices","updateMatrixWorld","raycaster","intersections","q","premultiply","axis","setFromAxisAngle","euler","setFromEuler","setFromRotationMatrix","multiply","rotateOnAxis","distance","vec","multiplyScalar","translateOnAxis","mat","remove","callback","traverse","traverseVisible","traverseAncestors","JSON","parse","stringify","result","setFromQuaternion","order","intersectObject","intersects","raycast","Raycaster","origin","direction","params","LOD","Line","Mesh","Points","threshold","Sprite","linePrecision","ray","Ray","coords","camera","unprojectVector3onCamera","transformDirection","objects","ImmediateRenderObject","material","_Geometry2","BoxGeometry","depth","widthSegments","heightSegments","depthSegments","parameters","BoxBufferGeometry","floor","numberOfVertices","groupStart","buildPlane","u","uDir","vDir","width2","height2","depth2","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","iy","ix","CircleGeometry","segments","thetaStart","thetaLength","fromBufferGeometry","CircleBufferGeometry","mergeVertices","PI","segment","cos","sin","_CylinderGeometry","ConeGeometry","radialSegments","openEnded","CylinderGeometry","_assertThisInitialized","ConeBufferGeometry","CylinderBufferGeometry","radiusTop","radiusBottom","indexArray","halfHeight","generateCap","centerIndexStart","centerIndexEnd","sign","theta","cosTheta","sinTheta","generateTorso","slope","indexRow","_PlaneGeometry","_ConeGeometry","_CircleGeometry","_BoxGeometry","PlaneGeometry","PlaneBufferGeometry","_Light2","AmbientLight","intensity","DirectionalLight","shadow","DirectionalLightShadow","_LightShadow2","HemisphereLight","skyColor","groundColor","Light","LightShadow","bias","mapSize","map","PointLight","decay","power","RectAreaLight","SpotLight","penumbra","SpotLightShadow","light","_Material2","LineBasicMaterial","setHex","lights","linecap","linejoin","linewidth","setValues","_LineBasicMaterial2","LineDashedMaterial","dashSize","gapSize","materialId","Material","alphaTest","blending","blendDst","blendDstAlpha","blendEquation","blendEquationAlpha","blendSrc","blendSrcAlpha","clipIntersection","clippingPlanes","clipShadows","colorWrite","depthFunc","depthTest","depthWrite","dithering","flatShading","fog","opacity","overdraw","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","premultipliedAlpha","side","transparent","values","newValue","currentValue","setStyle","Number","srcPlanes","dstPlanes","shadowSide","_ShadowMaterial","_SpriteMaterial","_RawShaderMaterial","_ShaderMaterial","_PointsMaterial","_MeshPhysicalMaterial","_MeshStandardMaterial","_MeshPhongMaterial","_MeshToonMaterial","_MeshNormalMaterial","_MeshLambertMaterial","_MeshDepthMaterial","_MeshDistanceMaterial","_MeshBasicMaterial","_LineDashedMaterial","_LineBasicMaterial","_Material","MeshBasicMaterial","alphaMap","aoMap","aoMapIntensity","combine","envMap","lightMap","lightMapIntensity","reflectivity","refractionRatio","skinning","specularMap","wireframe","wireframeLinecap","wireframeLinejoin","wireframeLinewidth","MeshDepthMaterial","depthPacking","displacementMap","displacementScale","displacementBias","MeshDistanceMaterial","farDistance","nearDistance","referencePosition","MeshLambertMaterial","emissive","emissiveIntensity","emissiveMap","MeshNormalMaterial","paramenters","bumpMap","bumpScale","normalMap","normalScale","MeshPhongMaterial","shininess","specular","MeshPhysicalMaterial","clearCoat","clearCoatRoughness","defines","PHYSICAL","MeshStandardMaterial","STANDARD","envMapIntensity","metalness","metalnessMap","roughness","roughnessMap","_MeshPhongMaterial2","MeshToonMaterial","TOON","gradientMap","PointsMaterial","size","sizeAttenuation","_ShaderMaterial2","RawShaderMaterial","ShaderMaterial","uniforms","vertexShader","fragmentShader","clipping","extensions","derivatives","drawBuffers","fragDepth","shaderTextureLOD","defaultAttributeValues","UniformsUtils","ShadowMaterial","SpriteMaterial","minX","minY","minZ","maxX","maxY","maxZ","expandByPoint","halfSize","expandByObject","isEmpty","scalar","addScalar","node","v1","vectorFromBufferAttribute","sphere","closestPoint","clampPoint","plane","constant","clamp","clampedPoint","getSize","equals","HUE_TO_RGB","t","setRGB","hex","h","euclideanModulo","style","matches","exec","components","parseInt","parseFloat","setHSL","ColorKeywords","gammaFactor","safeInverse","getHex","toString","hsl","hue","saturation","lightness","delta","getHSL","alpha","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","EulerOrder","_order","DefaultOrder","_x","_y","_z","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","XYZ","asin","abs","atan2","YXZ","ZXY","ZYX","YZX","XZY","makeRotationFromQuaternion","newOrder","Frustum","p0","Plane","p1","p2","p3","p4","p5","planes","frustum","me","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setPlane","intersectsSphere","sprite","negRadius","distanceToPoint","d1","d2","Line3","end","line","clampToLine","startP","startEnd","startEnd2","dot","startEndStartP","closestPointToPointParameter","lut","toUpperCase","d0","random","d3","a1","a2","b1","b2","low","high","range","degrees","radians","ceil","log","LN2","Matrix2","n11","n12","n21","n22","mat2","ae","be","a11","a12","a21","a22","b11","b12","b21","b22","tmp","n13","n23","n31","n32","n33","mat3","mat4","a13","a23","a31","a32","a33","b13","b23","b31","b32","b33","e","throwOnDegenerate","t11","t12","t13","det","msg","Error","identity","detInv","matrix4","setFromMatrix4","transpose","tx","ty","sx","sy","n14","n24","n34","n41","n42","n43","n44","xAxis","yAxis","zAxis","scaleX","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","eye","lengthSquared","matA","matB","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","sz","determinant","invSX","invSY","invSZ","v2","setFromNormalAndCoplanarPoint","inverseNormalLength","denominator","startSign","endSign","intersectsPlane","optionalNormalMatrix","referencePoint","coplanarPoint","_w","c1","c2","c3","s1","s2","s3","halfAngle","trace","vFrom","vTo","EPS","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","at","directionDistance","distanceSquaredToPoint","v0","optionalPointOnRay","optionalPointOnSegment","segCenter","segDir","segExtent","a01","b0","s0","sqrDist","extDet","invDet","tca","radius2","thc","t0","t1","distanceToPlane","isFinite","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectBox","triangle","backFaceCulling","edge1","edge2","DdN","DdQxE2","DdE1xQ","QdN","intersectTriangle","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSquared","expandByScalar","getMaxScaleOnAxis","Spherical","phi","other","vec3","acos","resultLengthSquared","setFromCoplanarPoints","dot00","dot01","dot02","dot11","dot12","denom","invDenom","barycoordFromPoint","projectedPoint","projectPoint","containsPoint","minDistance","edgeList","closestPointToPoint","divideScalar","qx","qy","qz","qw","iz","iw","ax","ay","az","bx","by","bz","planeNormal","projectOnVector","dz","sinPhiRadius","setFromMatrixColumn","epsilon","epsilon2","Bone","Group","levels","matrixPosition","getObjectForDistance","level","addLevel","precisionSquared","inverseMatrix","vStart","vEnd","interSegment","interRay","step","distSquared","distanceSquareToSegment","faceIndex","nbVertices","LineLoop","LineSegments","drawMode","morphTargetInfluences","morphTargetDictionary","updateMorphTargets","ml","String","intersectsBox","intersection","checkBufferGeometryIntersection","faceMaterial","fvA","fvB","fvC","tl","influence","targets","intersectionPoint","checkIntersection","uvsF","uvA","uvB","uvC","uvIntersection","uv1","uv3","baryCoord","intersect","intersectionPointWorld","testPoint","localThreshold","localThresholdSquare","rayPointDistanceSquare","intersectPoint","distanceToRay","offsetMatrix","identityMatrix","Skeleton","bones","boneInverses","boneMatrices","calculateInverses","inverse","bone","boneTexture","toArray","_Mesh2","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","initBones","skeleton","normalizeSkinWeights","gbone","pos","rotq","scl","pose","sw","manhattanLength","skinWeight","worldPosition","worldScale","setFromMatrixScale","guessSizeSq","WebGLRenderTarget","options","scissorTest","scissor","viewport","minFilter","texture","Texture","wrapS","wrapT","magFilter","format","anisotropy","encoding","depthBuffer","stencilBuffer","depthTexture","dispose","_WebGLRenderTarget2","WebGLRenderTargetCube","activeCubeFace","activeMipMapLevel","_WebGLUniforms","_WebGLShadowMap","_WebGLState","_WebGLClipping","_WebGLExtensions","_WebGLCapabilities","_WebGLProperties","_WebGLTextures","_WebGLAttributes","_WebGLGeometries","_WebGLObjects","_WebGLMorphtargets","_WebGLPrograms","_WebGLLights","_WebGLRenderLists","_WebGLBufferRenderer","_WebGLIndexedBufferRenderer","_WebGLSpriteRenderer","_WebGLBackground","WebGLRenderer","lightsArray","shadowsArray","spritesArray","currentRendererTarget","autoClear","autoClearColor","autoClearDepth","autoClearStencil","sortObjects","physicallyCorrectLights","toneMapping","toneMappingExposure","toneMappingWhitePoint","isContextLost","currentRenderTarget","currentFramebuffer","currentMaterialId","currentGeometryProgram","currentCamera","currentArrayCamera","currentViewport","currentScissor","currentScissorTest","usedTextureUnits","pixelRatio","WebGLClipping","clippingEnabled","localClippingEnabled","projScreenMatrix","tempVector3","infoMemory","geometries","textures","infoRender","frame","calls","info","render","memory","programs","autoReset","reset","onContextLost","preventDefault","onContextRestore","initGLContext","isAnimating","onAnimationFrame","time","requestAnimationFrame","onMaterialDispose","removeEventListener","deallocateMaterial","setTexture2DWarned","setTextureCubeWarned","domElement","canvas","document","createElementNS","stencil","antialias","preserveDrawingBuffer","powerPreference","contextAttributes","addEventListener","getShaderPrecisionFormat","rangeMin","rangeMax","message","shadowMap","WebGLShadowMap","capabilities","maxTextureSize","getContextAttributes","extension","loseContext","restoreContext","setSize","updateStyle","setViewport","state","setScissorTest","background","getClearColor","setClearColor","getClearAlpha","setClearAlpha","gl","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clear","renderTarget","setRenderTarget","renderLists","properties","WebGLExtensions","utils","WebGLUtils","WebGLCapabilities","WebGLState","WebGLProperties","WebGLTextures","WebGLAttributes","WebGLGeometries","WebGLObjects","morphtargets","WebGLMorphtargets","programCache","WebGLPrograms","WebGLLights","WebGLRenderLists","WebGLBackground","bufferRenderer","WebGLBufferRenderer","indexedBufferRenderer","WebGLIndexedBufferRenderer","spriteRenderer","WebGLSpriteRenderer","scene","setup","initMaterial","forceClear","autoUpdate","setFromMatrix","init","currentRenderList","projectObject","beginShadows","endShadows","opaqueObjects","opaque","transparentObjects","overrideMaterial","renderObjects","updateRenderTargetMipmap","buffers","setTest","setMask","setPolygonOffset","test","intersectsSprite","update","intersectsObject","groupMaterial","renderList","renderItem","camera2","bounds","renderObject","frontFaceCW","setMaterial","program","setProgram","renderObjectImmediate","renderBufferDirect","_this3","renderBufferImmediate","initAttributes","hasPositions","createBuffer","hasNormals","hasUvs","hasColors","programAttributes","getAttributes","bindBuffer","ARRAY_BUFFER","bufferData","positionArray","DYNAMIC_DRAW","enableAttribute","vertexAttribPointer","FLOAT","normalArray","nx","ny","nz","uvArray","colorArray","disableUnusedAttributes","drawArrays","TRIANGLES","geometryProgram","updateBuffers","rangeFactor","getWireframeAttribute","renderer","setupVertexAttributes","ELEMENT_ARRAY_BUFFER","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","setLineWidth","getTargetPixelRatio","setMode","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","lineWidth","LINE_LOOP","LINE_STRIP","POINTS","renderInstances","materialProperties","useCache","setState","lightsHash","hash","numClippingPlanes","numPlanes","numIntersection","refreshProgram","refreshMaterial","refreshLights","p_uniforms","getUniforms","m_uniforms","shader","useProgram","setValue","logarithmicDepthBuffer","uCamPos","cameraPosition","setOptional","floatVertexTextures","ceilPowerOfTwo","DataTexture","boneTextureSize","markUniformsLightsNeedsUpdate","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","refreshUniformsToon","refreshUniformsPhong","refreshUniformsPhysical","refreshUniformsStandard","refreshUniformsDepth","refreshUniformsDistance","refreshUniformsNormal","refreshUniformsLine","refreshUniformsDash","refreshUniformsPoints","WebGLUniformsWrapper","upload","uniformsList","startIndex","geometryAttributes","materialDefaultAttributeValues","programAttribute","geometryAttribute","bytesPerElement","enableAttributeAndDivisor","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","getParameters","code","getProgramCode","programChange","releaseMaterialProgramReference","shaderID","ShaderLib","onBeforeCompile","acquireProgram","numSupportedMorphTargets","maxMorphTargets","numSupportedMorphNormals","maxMorphNormals","uniform","ambientLightColor","ambient","directionalLights","directional","spotLights","spot","rectAreaLights","rectArea","pointLights","hemisphereLights","hemi","directionalShadowMap","directionalShadowMatrix","spotShadowMap","spotShadowMatrix","pointShadowMap","pointShadowMatrix","progUniforms","seqWithValue","seq","programInfo","releaseProgram","cullFace","frontFaceDirection","setCullFace","setFlipSided","textureUnit","maxTextures","unit","setTexture2D","cubeTexture","slot","image","setTextureCube","setTextureCubeDynamic","__webglFramebuffer","setupRenderTarget","framebuffer","isCube","bindFramebuffer","FRAMEBUFFER","textureProperties","framebufferTexture2D","COLOR_ATTACHMENT0","TEXTURE_CUBE_MAP_POSITIVE_X","__webglTexture","restore","textureFormat","textureType","convert","getParameter","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","internalFormat","copyTexImage2D","TEXTURE_2D","diffuse","flipEnvMap","CubeTexture","uvScaleMap","repeat","setUvTransform","uvTransform","totalSize","fogColor","fogNear","fogFar","fogDensity","density","_alphamap_fragment","_interopRequireDefault","_alphamap_pars_fragment","_alphatest_fragment","_aomap_fragment","_aomap_pars_fragment","_begin_vertex","_beginnormal_vertex","_bsdfs","_bumpmap_pars_fragment","_clipping_planes_fragment","_clipping_planes_pars_fragment","_clipping_planes_pars_vertex","_clipping_planes_vertex","_color_fragment","_color_pars_fragment","_color_pars_vertex","_color_vertex","_common","_cube_uv_reflection_fragment","_defaultnormal_vertex","_displacementmap_pars_vertex","_displacementmap_vertex","_emissivemap_fragment","_emissivemap_pars_fragment","_encodings_fragment","_encodings_pars_fragment","_envmap_fragment","_envmap_pars_fragment","_envmap_pars_vertex","_envmap_vertex","_fog_vertex","_fog_pars_vertex","_fog_fragment","_fog_pars_fragment","_gradientmap_pars_fragment","_lightmap_fragment","_lightmap_pars_fragment","_lights_lambert_vertex","_lights_pars","_lights_phong_fragment","_lights_phong_pars_fragment","_lights_physical_fragment","_lights_physical_pars_fragment","_lights_template","_logdepthbuf_fragment","_logdepthbuf_pars_fragment","_logdepthbuf_pars_vertex","_logdepthbuf_vertex","_map_fragment","_map_pars_fragment","_map_particle_fragment","_map_particle_pars_fragment","_metalnessmap_fragment","_metalnessmap_pars_fragment","_morphnormal_vertex","_morphtarget_pars_vertex","_morphtarget_vertex","_normal_fragment","_normalmap_pars_fragment","_packing","_premultiplied_alpha_fragment","_project_vertex","_dithering_fragment","_dithering_pars_fragment","_roughnessmap_fragment","_roughnessmap_pars_fragment","_shadowmap_pars_fragment","_shadowmap_pars_vertex","_shadowmap_vertex","_shadowmask_pars_fragment","_skinbase_vertex","_skinning_pars_vertex","_skinning_vertex","_skinnormal_vertex","_specularmap_fragment","_specularmap_pars_fragment","_tonemapping_fragment","_tonemapping_pars_fragment","_uv_pars_fragment","_uv_pars_vertex","_uv_vertex","_uv2_pars_fragment","_uv2_pars_vertex","_uv2_vertex","_worldpos_vertex","_cube_frag","_cube_vert","_depth_frag","_depth_vert","_distanceRGBA_frag","_distanceRGBA_vert","_equirect_frag","_equirect_vert","_linedashed_frag","_linedashed_vert","_meshbasic_frag","_meshbasic_vert","_meshlambert_frag","_meshlambert_vert","_meshphong_frag","_meshphong_vert","_meshphysical_frag","_meshphysical_vert","_normal_frag","_normal_vert","_points_frag","_points_vert","_shadow_frag","_shadow_vert","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_template","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","__webpack_exports__","basic","UniformsLib","specularmap","envmap","aomap","lightmap","lambert","emissivemap","phong","bumpmap","normalmap","displacementmap","gradientmap","standard","roughnessmap","metalnessmap","dashed","cube","tCube","tFlip","equirect","tEquirect","distanceRGBA","physical","shadowBias","shadowRadius","shadowMapSize","coneCos","penumbraCos","shadowCameraNear","shadowCameraFar","merged","uniformsSrc","uniformsDst","parameterSrc","bufferType","usage","STATIC_DRAW","UNSIGNED_SHORT","SHORT","UNSIGNED_INT","INT","BYTE","UNSIGNED_BYTE","BYTES_PER_ELEMENT","bufferSubData","subarray","deleteBuffer","updateBuffer","clearColor","clearAlpha","setClear","boxMesh","removeAttribute","copyPosition","planeCamera","planeMesh","mode","drawArraysInstancedANGLE","maxVertexTextures","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","maxAnisotropy","maxPrecision","getMaxPrecision","MAX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","MAX_VERTEX_ATTRIBS","MAX_VERTEX_UNIFORM_VECTORS","MAX_VARYING_VECTORS","MAX_FRAGMENT_UNIFORM_VECTORS","getMaxAnisotropy","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","globalState","numGlobalPlanes","renderingShadows","dstOffset","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","viewNormalMatrix","i4","enableLocalClipping","projectPlanes","resetGlobalState","cache","fromCache","nGlobal","lGlobal","clippingState","getExtension","wireframeAttributes","bufferGeometry","onGeometryDispose","setFromObject","drawElements","drawElementsInstancedANGLE","LightUniformsCache","halfWidth","shadows","vector3","matrix42","directionalLength","pointLength","spotLength","rectAreaLength","hemisphereLength","extractRotation","influencesList","morphInfluences","objectInfluences","influences","updateList","updateFromObject","_WebGLShader","generateDefines","chunks","generateExtensions","rendererExtensions","envMapCubeUV","filterEmptyLine","getToneMappingFunction","functionName","toneMappingName","str","getEncodingComponents","getTexelDecodingFunction","getTexelEncodingFunction","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","parseIncludes","match","include","unrollLoops","pattern","snippet","unroll","fetchAttributeLocations","getProgramParameter","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","programIdCount","WebGLProgramWrapper","usedTimes","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","mapping","gammaFactorDefine","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","supportsVertexTextures","maxBones","useFog","fogExp","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","numClipIntersection","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","vertexGlsl","fragmentGlsl","glVertexShader","WebGLShaderWrapper","glFragmentShader","attachShader","index0AttributeName","bindAttribLocation","linkProgram","programLog","getProgramInfoLog","trim","vertexLog","getShaderInfoLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","cachedAttributes","cachedUniforms","deleteProgram","_WebGLProgram","getTextureEncodingFromMap","gammaOverrideLinear","nVertexUniforms","nVertexMatrices","nClipPlanes","nClipIntersection","shaderIDs","allocateBones","getRenderTarget","gammaOutput","gammaInput","envMapMode","parameterNames","pl","pop","destroy","WebGLRenderList","renderItems","renderItemsIndex","lists","list","addLineNumbers","lines","split","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","lookTarget","lightPositionWorld","morphingFlag","skinningFlag","numberOfMaterialVariants","depthMaterials","distanceMaterials","materialCache","maxShadowMapSize","0","1","2","cubeDirections","cubeUps","cube2DViewPorts","useMorphing","useSkinning","depthMaterial","distanceMaterial","isPointLight","materialVariants","customMaterial","customDepthMaterial","customDistanceMaterial","variantIndex","keyA","keyB","materialsForVariant","cachedMaterial","disable","BLEND","faceCount","shadowCamera","vpWidth","vpHeight","pars","shadowMatrix","vpDimensions","getDepthMaterial","_Three","vertexBuffer","elementBuffer","uvOffset","getUniformLocation","uvScale","fogType","fogDepth","fillStyle","fillRect","CanvasTexture","sprites","CULL_FACE","enable","uniformMatrix4fv","activeTexture","TEXTURE0","uniform1i","oldFogType","sceneFogType","uniform3f","uniform1f","spritePosition","spriteRotation","spriteScale","uniform2f","uniform2fv","setBlending","ColorBuffer","locked","currentColorMask","currentColorClear","colorMask","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","depthMask","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","stencilFail","stencilZFail","stencilZPass","stencilOp","clearStencil","lineWidthAvailable","emptyTextures","currentFlipSided","currentCullFace","currentBlending","currentPremultipledAlpha","currentBlendEquation","currentBlendEquationAlpha","currentBlendSrc","currentBlendDst","currentBlendSrcAlpha","currentBlendDstAlpha","compressedTextureFormats","currentProgram","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","currentTextureSlot","currentBoundTextures","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","MAX_COMBINED_TEXTURE_IMAGE_UNITS","VERSION","createTexture","TEXTURE_CUBE_MAP","setFunc","frontFace","CW","CCW","BACK","FRONT","FRONT_AND_BACK","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","SRC_COLOR","disableVertexAttribArray","enableVertexAttribArray","vertexAttribDivisorANGLE","formats","COMPRESSED_TEXTURE_FORMATS","factor","units","POLYGON_OFFSET_FILL","SCISSOR_TEST","boundTexture","bindTexture","internalformat","border","compressedTexImage2D","pixels","texImage2D","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","RGBA","clampToMaxSize","maxSize","HTMLImageElement","HTMLCanvasElement","ImageBitmap","drawImage","isPowerOfTwo","makePowerOfTwo","floorPowerOfTwo","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","generateMipmaps","videoTextures","onTextureDispose","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","LINEAR","__image__webglTextureCube","deleteTexture","__webglInit","renderTargetProperties","deleteFramebuffer","__webglDepthbuffer","deleteRenderbuffer","pixelStorei","UNPACK_FLIP_Y_WEBGL","flipY","UNPACK_PREMULTIPLY_ALPHA_WEBGL","premultiplyAlpha","UNPACK_ALIGNMENT","unpackAlignment","isPowerOfTwoImage","glFormat","glType","setTextureParameters","mipmap","mipmaps","DEPTH_COMPONENT","DEPTH_STENCIL","getCompressedTextureFormats","generateMipmap","__version","updateVideoTexture","complete","uploadTexture","isCompressed","isDataTexture","cubeImage","TEXTURE_WRAP_S","TEXTURE_WRAP_T","CLAMP_TO_EDGE","filterFallback","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","attachment","textureTarget","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","DepthTexture","webglDepthTexture","setupDepthTexture","createRenderbuffer","setupRenderBufferStorage","isTargetPowerOfTwo","createFramebuffer","setupFrameBufferTexture","setupDepthRenderbuffer","webglTexture","emptyTexture","emptyCubeTexture","UniformSetter","activeInfo","addr","setValue1f","setValue1i","setValue2fv","setValue3fv","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","mat2array","uniformMatrix2fv","setValue3fm","mat3array","uniformMatrix3fv","setValue4fm","mat4array","setValueT1","allocTextureUnit","setValueT6","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","flatten","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","allocTexUnits","setValueT6a","arrayCacheI32","nBlocks","blockSize","arrayCacheF32","SingleUniformSetter","PureArrayUniformSetter","UniformContainer","StructuredUniformSetter","RePathPart","ACTIVE_UNIFORMS","getActiveUniform","path","parseUniform","container","pathLength","lastIndex","matchEnd","idIsIndex","subscript","addUniform","next","uniformObject","parameter","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","RGB","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","Fog","FogExp2","Scene","_Texture2","DEFAULT_IMAGE","CompressedTexture","images","textureId","DEFAULT_MAPPING","VideoTexture","video","readyState","HAVE_CURRENT_DATA","arrayMin"],"mappings":"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,sDACA,IAAAkkE,aAAA5G,uBAAAt9D,uDAAA,wIACA,IAAMmkE,aACFC,6CACAC,uDACAC,+CACAC,uCACAC,iDACAC,mCACAC,+CACAC,qBACAC,qDACAC,2DACAC,qEACAC,iEACAC,uDACAC,uCACAC,iDACAC,6CACAC,mCACAC,uBACAC,iEACAC,mDACAC,iEACAC,uDACAC,mDACAC,6DACAC,+CACAC,yDACAC,yCACAC,mDACAC,+CACAC,qCACAC,+BACAC,yCACAC,mCACAC,6CACAC,6DACAC,6CACAC,uDACAC,qDACAC,iCACAC,qDACAC,+DACAC,2DACAC,qEACAC,yCACAC,mDACAC,6DACAC,yDACAC,+CACAC,mCACAC,6CACAC,qDACAC,+DACAC,qDACAC,+DACAC,+CACAC,yDACAC,+CACAC,yCACAC,yDACAC,yBACAC,mEACAC,uCACAC,+CACAC,yDACAC,qDACAC,+DACAC,yDACAC,qDACAC,2CACAC,2DACAC,yCACAC,mDACAC,yCACAC,6CACAC,mDACAC,6DACAC,mDACAC,6DACAC,2CACAC,uCACAC,6BACAC,6CACAC,yCACAC,+BACAC,yCACAC,6BACAC,6BACAC,+BACAC,+BACAC,6CACAC,6CACAC,qCACAC,qCACAC,yCACAC,yCACAC,uCACAC,uCACAC,2CACAC,2CACAC,uCACAC,uCACAC,6CACAC,6CACAC,iCACAC,iCACAC,iCACAC,iCACAC,iCACAC;;;;;;;;4BC1NJC,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;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","file":"three.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./es/Three.js\");\n","export { WebGLRenderTargetCube } from \"./renderers/WebGLRenderTargetCube\";\nexport { WebGLRenderTarget } from \"./renderers/WebGLRenderTarget\";\nexport { WebGLRenderer } from \"./renderers/WebGLRenderer\";\n// export { WebGL2Renderer } from './renderers/WebGL2Renderer';\nexport { ShaderLib } from \"./renderers/shaders/ShaderLib\";\nexport { UniformsLib } from \"./renderers/shaders/UniformsLib\";\nexport { UniformsUtils } from \"./renderers/shaders/UniformsUtils\";\nexport { ShaderChunk } from \"./renderers/shaders/ShaderChunk\";\nexport { FogExp2 } from \"./scenes/FogExp2\";\nexport { Fog } from \"./scenes/Fog\";\nexport { Scene } from \"./scenes/Scene\";\nexport { Sprite } from \"./objects/Sprite\";\nexport { LOD } from \"./objects/LOD\";\nexport { SkinnedMesh } from \"./objects/SkinnedMesh\";\nexport { Skeleton } from \"./objects/Skeleton\";\nexport { Bone } from \"./objects/Bone\";\nexport { Mesh } from \"./objects/Mesh\";\nexport { LineSegments } from \"./objects/LineSegments\";\nexport { LineLoop } from \"./objects/LineLoop\";\nexport { Line } from \"./objects/Line\";\nexport { Points } from \"./objects/Points\";\nexport { Group } from \"./objects/Group\";\nexport { VideoTexture } from \"./textures/VideoTexture\";\nexport { DataTexture } from \"./textures/DataTexture\";\nexport { CompressedTexture } from \"./textures/CompressedTexture\";\nexport { CubeTexture } from \"./textures/CubeTexture\";\nexport { CanvasTexture } from \"./textures/CanvasTexture\";\nexport { DepthTexture } from \"./textures/DepthTexture\";\nexport { Texture } from \"./textures/Texture\";\nexport * from \"./geometries/Geometries\";\nexport * from \"./materials/Materials\";\n/*\nexport { CompressedTextureLoader } from './loaders/CompressedTextureLoader';\nexport { DataTextureLoader } from './loaders/DataTextureLoader';\nexport { CubeTextureLoader } from './loaders/CubeTextureLoader';\nexport { TextureLoader } from './loaders/TextureLoader';\nexport { ObjectLoader } from './loaders/ObjectLoader';\nexport { MaterialLoader } from './loaders/MaterialLoader';\nexport { BufferGeometryLoader } from './loaders/BufferGeometryLoader';\nexport { DefaultLoadingManager, LoadingManager } from './loaders/LoadingManager';\nexport { JSONLoader } from './loaders/JSONLoader';\nexport { ImageLoader } from './loaders/ImageLoader';\nexport { ImageBitmapLoader } from './loaders/ImageBitmapLoader';\nexport { FontLoader } from './loaders/FontLoader';\nexport { FileLoader } from './loaders/FileLoader';\nexport { Loader } from './loaders/Loader';\nexport { LoaderUtils } from './loaders/LoaderUtils';\nexport { Cache } from './loaders/Cache';\nexport { AudioLoader } from './loaders/AudioLoader';\n*/\nexport { SpotLightShadow } from \"./lights/SpotLightShadow\";\nexport { SpotLight } from \"./lights/SpotLight\";\nexport { PointLight } from \"./lights/PointLight\";\nexport { RectAreaLight } from \"./lights/RectAreaLight\";\nexport { HemisphereLight } from \"./lights/HemisphereLight\";\nexport { DirectionalLightShadow } from \"./lights/DirectionalLightShadow\";\nexport { DirectionalLight } from \"./lights/DirectionalLight\";\nexport { AmbientLight } from \"./lights/AmbientLight\";\nexport { LightShadow } from \"./lights/LightShadow\";\nexport { Light } from \"./lights/Light\";\n//export { StereoCamera } from './cameras/StereoCamera';\nexport { PerspectiveCamera } from \"./cameras/PerspectiveCamera\";\nexport { OrthographicCamera } from \"./cameras/OrthographicCamera\";\n//export { CubeCamera } from './cameras/CubeCamera';\nexport { ArrayCamera } from \"./cameras/ArrayCamera\";\nexport { Camera } from \"./cameras/Camera\";\nexport { AudioListenerWrapper as AudioListener } from \"./audio/AudioListener\";\nexport { PositionalAudio } from \"./audio/PositionalAudio\";\nexport { AudioContextWrapper as AudioContext } from \"./audio/AudioContext\";\nexport { AudioAnalyserWrapper as AudioAnalyser } from \"./audio/AudioAnalyser\";\nexport { AudioWrapper as Audio } from \"./audio/Audio\";\n/*\nexport { VectorKeyframeTrack } from './animation/tracks/VectorKeyframeTrack';\nexport { StringKeyframeTrack } from './animation/tracks/StringKeyframeTrack';\nexport { QuaternionKeyframeTrack } from './animation/tracks/QuaternionKeyframeTrack';\nexport { NumberKeyframeTrack } from './animation/tracks/NumberKeyframeTrack';\nexport { ColorKeyframeTrack } from './animation/tracks/ColorKeyframeTrack';\nexport { BooleanKeyframeTrack } from './animation/tracks/BooleanKeyframeTrack';\nexport { PropertyMixer } from './animation/PropertyMixer';\nexport { PropertyBinding } from './animation/PropertyBinding';\nexport { KeyframeTrack } from './animation/KeyframeTrack';\nexport { AnimationUtils } from './animation/AnimationUtils';\nexport { AnimationObjectGroup } from './animation/AnimationObjectGroup';\nexport { AnimationMixer } from './animation/AnimationMixer';\nexport { AnimationClip } from './animation/AnimationClip';\n*/\nexport { InstancedBufferGeometry } from \"./core/InstancedBufferGeometry\";\nexport { BufferGeometry } from \"./core/BufferGeometry\";\nexport { Geometry } from \"./core/Geometry\";\nexport { InterleavedBufferAttribute } from \"./core/InterleavedBufferAttribute\";\nexport { InstancedInterleavedBufferAttribute } from \"./core/InstancedInterleavedBufferAttribute\";\nexport { InstancedBufferAttribute } from \"./core/InstancedBufferAttribute\";\nexport * from \"./core/BufferAttribute\";\nexport { Face3 } from \"./core/Face3\";\nexport { Object3D } from \"./core/Object3D\";\nexport { Raycaster } from \"./core/Raycaster\";\nexport { Layers } from \"./core/Layers\";\nexport { EventDispatcher } from \"./core/EventDispatcher\";\nexport { Clock } from \"./core/Clock\";\n/*\nexport { QuaternionLinearInterpolant } from './math/interpolants/QuaternionLinearInterpolant';\nexport { LinearInterpolant } from './math/interpolants/LinearInterpolant';\nexport { DiscreteInterpolant } from './math/interpolants/DiscreteInterpolant';\nexport { CubicInterpolant } from './math/interpolants/CubicInterpolant';\nexport { Interpolant } from './math/Interpolant';\n*/\nexport { Triangle } from \"./math/Triangle\";\nexport { MathUtil as Math } from \"./math/Math\";\nexport { Spherical } from \"./math/Spherical\";\n//export { Cylindrical } from './math/Cylindrical';\nexport { Plane } from \"./math/Plane\";\nexport { Frustum } from \"./math/Frustum\";\nexport { Sphere } from \"./math/Sphere\";\nexport { Ray } from \"./math/Ray\";\nexport { Matrix2 } from \"./math/Matrix2\";\nexport { Matrix3 } from \"./math/Matrix3\";\nexport { Matrix4 } from \"./math/Matrix4\";\nexport { Box3 } from \"./math/Box3\";\n//export { Box2 } from './math/Box2';\nexport { Line3 } from \"./math/Line3\";\nexport { Euler } from \"./math/Euler\";\nexport { Vector4 } from \"./math/Vector4\";\nexport { Vector3 } from \"./math/Vector3\";\nexport { Vector2 } from \"./math/Vector2\";\nexport { Quaternion } from \"./math/Quaternion\";\nexport { Color } from \"./math/Color\";\nexport { ImmediateRenderObject } from \"./extras/objects/ImmediateRenderObject\";\n/*\nexport { VertexNormalsHelper } from './helpers/VertexNormalsHelper';\nexport { SpotLightHelper } from './helpers/SpotLightHelper';\nexport { SkeletonHelper } from './helpers/SkeletonHelper';\nexport { PointLightHelper } from './helpers/PointLightHelper';\nexport { RectAreaLightHelper } from './helpers/RectAreaLightHelper';\nexport { HemisphereLightHelper } from './helpers/HemisphereLightHelper';\nexport { GridHelper } from './helpers/GridHelper';\nexport { PolarGridHelper } from './helpers/PolarGridHelper';\nexport { FaceNormalsHelper } from './helpers/FaceNormalsHelper';\nexport { DirectionalLightHelper } from './helpers/DirectionalLightHelper';\nexport { CameraHelper } from './helpers/CameraHelper';\nexport { BoxHelper } from './helpers/BoxHelper';\nexport { Box3Helper } from './helpers/Box3Helper';\nexport { PlaneHelper } from './helpers/PlaneHelper';\nexport { ArrowHelper } from './helpers/ArrowHelper';\nexport { AxesHelper } from './helpers/AxesHelper';\nexport * from './extras/curves/Curves';\nexport { Shape } from './extras/core/Shape';\nexport { Path } from './extras/core/Path';\nexport { ShapePath } from './extras/core/ShapePath';\nexport { Font } from './extras/core/Font';\nexport { CurvePath } from './extras/core/CurvePath';\nexport { Curve } from './extras/core/Curve';\nexport { ShapeUtils } from './extras/ShapeUtils';\n*/\nexport { WebGLUtils } from \"./renderers/webgl/WebGLUtils\";\nexport * from \"./constants\";\n","import { Object3D } from \"../core/Object3D\";\nexport class AudioWrapper extends Object3D {\n    constructor(listener) {\n        super();\n        this.type = \"Audio\";\n        this.startTime = 0;\n        this.offset = 0;\n        this.isPlaying = false;\n        this.hasPlaybackControl = true;\n        this.sourceType = \"empty\";\n        this.autoplay = false;\n        this.buffer = null;\n        this.loop = false;\n        this.playbackRate = 1;\n        this.filters = [];\n        this.context = listener.context;\n        this.gain = this.context.createGain();\n        this.gain.connect(listener.getInput());\n    }\n    getOutput() {\n        return this.gain;\n    }\n    setNodeSource(audioNode) {\n        this.hasPlaybackControl = false;\n        this.source = audioNode;\n        this.sourceType = \"audioNode\";\n        this.connect();\n        return this;\n    }\n    setBuffer(audioBuffer) {\n        this.buffer = audioBuffer;\n        this.sourceType = \"buffer\";\n        if (this.autoplay)\n            this.play();\n        return this;\n    }\n    play() {\n        if (this.isPlaying === true) {\n            console.warn(`THREE.Audio: Audio is already playing.`);\n            return this;\n        }\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        const source = this.context.createBufferSource();\n        source.buffer = this.buffer;\n        source.loop = this.loop;\n        source.onended = this.onEnded.bind(this);\n        source.playbackRate.setValueAtTime(this.playbackRate, this.startTime);\n        this.startTime = this.context.currentTime;\n        source.start(this.startTime, this.offset);\n        this.isPlaying = true;\n        this.source = source;\n        return this.connect();\n    }\n    pause() {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        if (this.isPlaying === true) {\n            this.source.stop();\n            this.offset += (this.context.currentTime - this.startTime) * this.playbackRate;\n            this.isPlaying = false;\n        }\n        return this;\n    }\n    stop() {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        this.source.stop();\n        this.offset = 0;\n        this.isPlaying = false;\n        return this;\n    }\n    connect() {\n        if (this.filters.length > 0) {\n            this.source.connect(this.filters[0]);\n            for (let i = 1, l = this.filters.length; i < l; i++) {\n                this.filters[i - 1].connect(this.filters[i]);\n            }\n            this.filters[this.filters.length - 1].connect(this.getOutput());\n        }\n        else {\n            this.source.connect(this.getOutput());\n        }\n        return this;\n    }\n    disconnect() {\n        if (this.filters.length > 0) {\n            this.source.disconnect(this.filters[0]);\n            for (let i = 1, l = this.filters.length; i < l; i++) {\n                this.filters[i - 1].disconnect(this.filters[i]);\n            }\n            this.filters[this.filters.length - 1].disconnect(this.getOutput());\n        }\n        else {\n            this.source.disconnect(this.getOutput());\n        }\n        return this;\n    }\n    getFilters() {\n        return this.filters;\n    }\n    setFilters(value = []) {\n        if (this.isPlaying === true) {\n            this.disconnect();\n            this.filters = value;\n            this.connect();\n        }\n        else {\n            this.filters = value;\n        }\n        return this;\n    }\n    getFilter() {\n        return this.getFilters()[0];\n    }\n    setFilter(filter) {\n        return this.setFilters(filter ? [filter] : []);\n    }\n    setPlaybackRate(value) {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        this.playbackRate = value;\n        if (this.isPlaying === true) {\n            this.source.playbackRate.setValueAtTime(this.playbackRate, this.context.currentTime);\n        }\n        return this;\n    }\n    getPlaybackRate() {\n        return this.playbackRate;\n    }\n    onEnded() {\n        this.isPlaying = false;\n    }\n    getLoop() {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return false;\n        }\n        return this.loop;\n    }\n    setLoop(value) {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        this.loop = value;\n        if (this.isPlaying === true) {\n            this.source.loop = this.loop;\n        }\n        return this;\n    }\n    getVolume() {\n        return this.gain.gain.value;\n    }\n    setVolume(value) {\n        this.gain.gain.value = value;\n        return this;\n    }\n}\n","export class AudioAnalyserWrapper {\n    constructor(audio, fftSize = 2048) {\n        this.analyser = audio.context.createAnalyser();\n        this.analyser.fftSize = fftSize;\n        this.data = new Uint8Array(this.analyser.frequencyBinCount);\n        audio.getOutput().connect(this.analyser);\n    }\n    getFrequencyData() {\n        this.analyser.getByteFrequencyData(this.data);\n        return this.data;\n    }\n    getAverageFrequency() {\n        let value = 0;\n        const data = this.getFrequencyData();\n        for (let i = 0; i < data.length; i++) {\n            value += data[i];\n        }\n        return value / data.length;\n    }\n}\n","export class AudioContextWrapper {\n    static getContext() {\n        if (AudioContextWrapper.context === undefined) {\n            AudioContextWrapper.context = new (window.AudioContext ||\n                window.webkitAudioContext)();\n        }\n        return AudioContextWrapper.context;\n    }\n    static setContext(value) {\n        AudioContextWrapper.context = value;\n    }\n}\nAudioContextWrapper.context = undefined;\n","import { Object3D } from \"../core/Object3D\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { AudioContextWrapper } from \"./AudioContext\";\nexport class AudioListenerWrapper extends Object3D {\n    constructor() {\n        super();\n        this.type = \"AudioListener\";\n        this.context = AudioContextWrapper.getContext();\n        this.filter = null;\n        this.gain = this.context.createGain();\n        this.gain.connect(this.context.destination);\n    }\n    getInput() {\n        return this.gain;\n    }\n    removeFilter() {\n        if (this.filter !== null) {\n            this.gain.disconnect(this.filter);\n            this.filter.disconnect(this.context.destination);\n            this.gain.connect(this.context.destination);\n            this.filter = null;\n        }\n    }\n    getFilter() {\n        return this.filter;\n    }\n    setFilter(value) {\n        if (this.filter !== null) {\n            this.gain.disconnect(this.filter);\n            this.filter.disconnect(this.context.destination);\n        }\n        else {\n            this.gain.disconnect(this.context.destination);\n        }\n        this.filter = value;\n        this.gain.connect(this.filter);\n        this.filter.connect(this.context.destination);\n        return this;\n    }\n    getMasterVolume() {\n        return this.gain.gain.value;\n    }\n    setMasterVolume(value) {\n        this.gain.gain.value = value;\n        return this;\n    }\n    updateMatrixWorld(force = false) {\n        super.updateMatrixWorld(force);\n        const position = new Vector3();\n        const quaternion = new Quaternion();\n        const scale = new Vector3();\n        const orientation = new Vector3();\n        const listener = this.context.listener;\n        const up = this.up;\n        this.matrixWorld.decompose(position, quaternion, scale);\n        orientation.set(0, 0, -1).applyQuaternion(quaternion);\n        if (listener.positionX) {\n            listener.positionX.setValueAtTime(position.x, this.context.currentTime);\n            listener.positionY.setValueAtTime(position.y, this.context.currentTime);\n            listener.positionZ.setValueAtTime(position.z, this.context.currentTime);\n            listener.forwardX.setValueAtTime(orientation.x, this.context.currentTime);\n            listener.forwardY.setValueAtTime(orientation.y, this.context.currentTime);\n            listener.forwardZ.setValueAtTime(orientation.z, this.context.currentTime);\n            listener.upX.setValueAtTime(up.x, this.context.currentTime);\n            listener.upY.setValueAtTime(up.y, this.context.currentTime);\n            listener.upZ.setValueAtTime(up.z, this.context.currentTime);\n        }\n        else {\n            listener.setPosition(position.x, position.y, position.z);\n            listener.setOrientation(orientation.x, orientation.y, orientation.z, up.x, up.y, up.z);\n        }\n        return this;\n    }\n}\n","import { Vector3 } from \"../math/Vector3\";\nimport { AudioWrapper } from \"./Audio\";\nexport class PositionalAudio extends AudioWrapper {\n    constructor(listener) {\n        super(listener);\n        this.panner = this.context.createPanner();\n        this.panner.connect(this.gain);\n    }\n    getOutput() {\n        return this.panner;\n    }\n    getRefDistance() {\n        return this.panner.refDistance;\n    }\n    setRefDistance(value) {\n        this.panner.refDistance = value;\n    }\n    getRolloffFactor() {\n        return this.panner.rolloffFactor;\n    }\n    setRolloffFactor(value) {\n        this.panner.rolloffFactor = value;\n    }\n    getDistanceModel() {\n        return this.panner.distanceModel;\n    }\n    setDistanceModel(value) {\n        this.panner.distanceModel = value;\n    }\n    getMaxDistance() {\n        return this.panner.maxDistance;\n    }\n    setMaxDistance(value) {\n        this.panner.maxDistance = value;\n    }\n    updateMatrixWorld(force = false) {\n        super.updateMatrixWorld(force);\n        const position = new Vector3();\n        position.setFromMatrixPosition(this.matrixWorld);\n        this.panner.setPosition(position.x, position.y, position.z);\n        return this;\n    }\n}\n","import { PerspectiveCamera } from \"./PerspectiveCamera\";\nexport class ArrayCamera extends PerspectiveCamera {\n    constructor(cameras = []) {\n        super();\n        this.cameras = [];\n        this.cameras = cameras;\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class Camera extends Object3D {\n    constructor() {\n        super();\n        this.type = \"Camera\";\n        this.matrixWorldInverse = new Matrix4();\n        this.projectionMatrix = new Matrix4();\n    }\n    updateMatrixWorld(force = false) {\n        super.updateMatrixWorld(force);\n        this.matrixWorldInverse.getInverse(this.matrixWorld);\n        return this;\n    }\n    copy(source, recursive = true) {\n        super.copy(source, recursive);\n        this.matrixWorldInverse.copy(source.matrixWorldInverse);\n        this.projectionMatrix.copy(source.projectionMatrix);\n        return this;\n    }\n    get worldDirection() {\n        return new Vector3().set(0, 0, -1).applyQuaternion(this.worldQuaternion);\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Camera } from \"./Camera\";\nexport class OrthographicCamera extends Camera {\n    constructor(left = 0, right = 0, top = 0, bottom = 0, near = 0.1, far = 2000) {\n        super();\n        this.type = \"OrthographicCamera\";\n        this._left = 0;\n        this._right = 0;\n        this._top = 0;\n        this._bottom = 0;\n        this._zoom = 1;\n        this._near = 0.1;\n        this._far = 2000;\n        this._view = null;\n        this._left = left;\n        this._right = right;\n        this._top = top;\n        this._bottom = bottom;\n        this._near = near;\n        this._far = far;\n        this.updateProjectionMatrix();\n    }\n    get zoom() {\n        return this._zoom;\n    }\n    set zoom(_zoom) {\n        this._zoom = _zoom;\n        this.updateProjectionMatrix();\n    }\n    get near() {\n        return this._near;\n    }\n    set near(_near) {\n        this._near = _near;\n        this.updateProjectionMatrix();\n    }\n    get far() {\n        return this._far;\n    }\n    set far(_far) {\n        this._far = _far;\n        this.updateProjectionMatrix();\n    }\n    get left() {\n        return this._left;\n    }\n    set left(_left) {\n        this._left = _left;\n        this.updateProjectionMatrix();\n    }\n    get right() {\n        return this._right;\n    }\n    set right(_right) {\n        this._right = _right;\n        this.updateProjectionMatrix();\n    }\n    get top() {\n        return this._top;\n    }\n    set top(_top) {\n        this._top = _top;\n        this.updateProjectionMatrix();\n    }\n    get bottom() {\n        return this._bottom;\n    }\n    set bottom(_bottom) {\n        this._bottom = _bottom;\n        this.updateProjectionMatrix();\n    }\n    get view() {\n        return this._view;\n    }\n    setViewOffset(fullWidth, fullHeight, x, y, width, height) {\n        this._view = {\n            enabled: true,\n            fullHeight: fullHeight,\n            fullWidth: fullWidth,\n            height: height,\n            offsetX: x,\n            offsetY: y,\n            width: width,\n        };\n        return this.updateProjectionMatrix();\n    }\n    clearViewOffset() {\n        if (this.view !== null) {\n            this.view.enabled = false;\n        }\n        return this.updateProjectionMatrix();\n    }\n    updateProjectionMatrix() {\n        const dx = (this.right - this.left) / (2 * this.zoom);\n        const dy = (this.top - this.bottom) / (2 * this.zoom);\n        const cx = (this.right + this.left) / 2;\n        const cy = (this.top + this.bottom) / 2;\n        let left = cx - dx;\n        let right = cx + dx;\n        let top = cy + dy;\n        let bottom = cy - dy;\n        if (this.view !== null && this.view.enabled) {\n            const zoomW = this.zoom / (this.view.width / this.view.fullWidth);\n            const zoomH = this.zoom / (this.view.height / this.view.fullHeight);\n            const scaleW = (this.right - this.left) / this._view.width;\n            const scaleH = (this.top - this.bottom) / this._view.height;\n            left += scaleW * (this.view.offsetX / zoomW);\n            right = left + scaleW * (this.view.width / zoomW);\n            top -= scaleH * (this.view.offsetY / zoomH);\n            bottom = top - scaleH * (this.view.height / zoomH);\n        }\n        this.projectionMatrix.makeOrthographic(left, right, top, bottom, this.near, this.far);\n        return this;\n    }\n    copy(source) {\n        super.copy(source);\n        this._top = source.top;\n        this._bottom = source.bottom;\n        this._left = source.left;\n        this._right = source.right;\n        this._zoom = source.zoom;\n        this._near = source.near;\n        this._far = source.far;\n        this._view = source.view === null ? null : Object.assign({}, source.view);\n        return this.updateProjectionMatrix();\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { MathUtil } from \"../math/Math\";\nimport { Camera } from \"./Camera\";\nexport class PerspectiveCamera extends Camera {\n    constructor(fov = 50, aspect = 1, near = 0.1, far = 2000) {\n        super();\n        this.type = \"PerspectiveCamera\";\n        this.focus = 10;\n        this._fov = 50;\n        this._zoom = 1;\n        this._near = 0.1;\n        this._far = 2000;\n        this._aspect = 1;\n        this._view = null;\n        /**\n         * width of the film (default in millimeters)\n         * @type {number}\n         */\n        this._filmGauge = 35;\n        /**\n         * horizontal film offset (same unit as gauge)\n         * @type {number}\n         */\n        this._filmOffset = 0;\n        this._fov = fov;\n        this._aspect = aspect;\n        this._near = near;\n        this._far = far;\n        this.updateProjectionMatrix();\n    }\n    get fov() {\n        return this._fov;\n    }\n    set fov(_fov) {\n        this._fov = _fov;\n        this.updateProjectionMatrix();\n    }\n    get zoom() {\n        return this._zoom;\n    }\n    set zoom(_zoom) {\n        this._zoom = _zoom;\n        this.updateProjectionMatrix();\n    }\n    get near() {\n        return this._near;\n    }\n    set near(_near) {\n        this._near = _near;\n        this.updateProjectionMatrix();\n    }\n    get far() {\n        return this._far;\n    }\n    set far(_far) {\n        this._far = _far;\n        this.updateProjectionMatrix();\n    }\n    get aspect() {\n        return this._aspect;\n    }\n    set aspect(_aspect) {\n        this._aspect = _aspect;\n        this.updateProjectionMatrix();\n    }\n    get view() {\n        return this._view;\n    }\n    get filmGauge() {\n        return this._filmGauge;\n    }\n    set filmGauge(_filmGauge) {\n        this._filmGauge = _filmGauge;\n        this.updateProjectionMatrix();\n    }\n    get filmOffset() {\n        return this._filmOffset;\n    }\n    set filmOffset(_filmOffset) {\n        this._filmOffset = _filmOffset;\n        this.updateProjectionMatrix();\n    }\n    /**\n     * see http://www.bobatkins.com/photography/technical/field_of_view.html\n     * Sets the FOV by focal length in respect to the current .filmGauge.\n     *\n     * The default film gauge is 35, so that the focal length can be specified for\n     * a 35mm (full frame) camera.\n     *\n     * Values for focal length and film gauge must have the same unit.\n     * @param focalLength\n     * @returns {PerspectiveCamera}\n     */\n    setFocalLength(focalLength) {\n        const vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n        this._fov = MathUtil.RAD2DEG * 2 * Math.atan(vExtentSlope);\n        return this.updateProjectionMatrix();\n    }\n    getFocalLength() {\n        const vExtentSlope = Math.tan(MathUtil.DEG2RAD * 0.5 * this.fov);\n        return 0.5 * this.getFilmHeight() / vExtentSlope;\n    }\n    getEffectiveFOV() {\n        return MathUtil.RAD2DEG * 2 * Math.atan(Math.tan(MathUtil.DEG2RAD * 0.5 * this.fov) / this.zoom);\n    }\n    /**\n     * film not completely covered in portrait format (aspect < 1)\n     * @returns {number}\n     */\n    getFilmWidth() {\n        return this.filmGauge * Math.min(this.aspect, 1);\n    }\n    /**\n     * film not completely covered in landscape format (aspect > 1)\n     * @returns {number}\n     */\n    getFilmHeight() {\n        return this.filmGauge / Math.max(this.aspect, 1);\n    }\n    /**\n     * Sets an offset in a larger frustum. This is useful for multi-window or\n     * multi-monitor/multi-machine setups.\n     *\n     * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n     * the monitors are in grid like this\n     *\n     *   +---+---+---+\n     *   | A | B | C |\n     *   +---+---+---+\n     *   | D | E | F |\n     *   +---+---+---+\n     *\n     * then for each monitor you would call it like this\n     *\n     *   var w = 1920;\n     *   var h = 1080;\n     *   var fullWidth = w * 3;\n     *   var fullHeight = h * 2;\n     *\n     *   --A--\n     *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n     *   --B--\n     *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n     *   --C--\n     *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n     *   --D--\n     *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n     *   --E--\n     *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n     *   --F--\n     *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n     *\n     *   Note there is no reason monitors have to be the same size or in a grid.\n     */\n    setViewOffset(fullWidth, fullHeight, x, y, width, height) {\n        this._view = {\n            enabled: true,\n            fullHeight: fullHeight,\n            fullWidth: fullWidth,\n            height: height,\n            offsetX: x,\n            offsetY: y,\n            width: width,\n        };\n        return this.updateProjectionMatrix();\n    }\n    clearViewOffset() {\n        if (this.view !== null) {\n            this.view.enabled = false;\n        }\n        return this.updateProjectionMatrix();\n    }\n    updateProjectionMatrix() {\n        const near = this.near;\n        let top = near * Math.tan(MathUtil.DEG2RAD * 0.5 * this.fov) / this.zoom;\n        let height = 2 * top;\n        let width = this.aspect * height;\n        let left = -0.5 * width;\n        const view = this.view;\n        if (this.view !== null && this.view.enabled) {\n            const fullWidth = view.fullWidth, fullHeight = view.fullHeight;\n            left += view.offsetX * width / fullWidth;\n            top -= view.offsetY * height / fullHeight;\n            width *= view.width / fullWidth;\n            height *= view.height / fullHeight;\n        }\n        const skew = this.filmOffset;\n        if (skew !== 0)\n            left += near * skew / this.getFilmWidth();\n        this.projectionMatrix.makePerspective(left, left + width, top, top - height, near, this.far);\n        return this;\n    }\n    copy(source) {\n        super.copy(source);\n        this._fov = source.fov;\n        this._zoom = source.zoom;\n        this._near = source.near;\n        this._far = source.far;\n        this.focus = source.focus;\n        this._aspect = source.aspect;\n        this._view = source.view === null ? null : Object.assign({}, source.view);\n        this._filmGauge = source.filmGauge;\n        this._filmOffset = source.filmOffset;\n        return this.updateProjectionMatrix();\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","/* tslint:disable */\nexport const REVISION = \"90dev\";\nexport const MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\nexport const CullFaceNone = 0;\nexport const CullFaceBack = 1;\nexport const CullFaceFront = 2;\nexport const CullFaceFrontBack = 3;\nexport const FrontFaceDirectionCW = 0;\nexport const FrontFaceDirectionCCW = 1;\nexport const BasicShadowMap = 0;\nexport const PCFShadowMap = 1;\nexport const PCFSoftShadowMap = 2;\nexport const FrontSide = 0;\nexport const BackSide = 1;\nexport const DoubleSide = 2;\nexport const FlatShading = 1;\nexport const SmoothShading = 2;\nexport const NoColors = 0;\nexport const FaceColors = 1;\nexport const VertexColors = 2;\nexport const NoBlending = 0;\nexport const NormalBlending = 1;\nexport const AdditiveBlending = 2;\nexport const SubtractiveBlending = 3;\nexport const MultiplyBlending = 4;\nexport const CustomBlending = 5;\nexport const AddEquation = 100;\nexport const SubtractEquation = 101;\nexport const ReverseSubtractEquation = 102;\nexport const MinEquation = 103;\nexport const MaxEquation = 104;\nexport const ZeroFactor = 200;\nexport const OneFactor = 201;\nexport const SrcColorFactor = 202;\nexport const OneMinusSrcColorFactor = 203;\nexport const SrcAlphaFactor = 204;\nexport const OneMinusSrcAlphaFactor = 205;\nexport const DstAlphaFactor = 206;\nexport const OneMinusDstAlphaFactor = 207;\nexport const DstColorFactor = 208;\nexport const OneMinusDstColorFactor = 209;\nexport const SrcAlphaSaturateFactor = 210;\nexport const NeverDepth = 0;\nexport const AlwaysDepth = 1;\nexport const LessDepth = 2;\nexport const LessEqualDepth = 3;\nexport const EqualDepth = 4;\nexport const GreaterEqualDepth = 5;\nexport const GreaterDepth = 6;\nexport const NotEqualDepth = 7;\nexport const MultiplyOperation = 0;\nexport const MixOperation = 1;\nexport const AddOperation = 2;\nexport const NoToneMapping = 0;\nexport const LinearToneMapping = 1;\nexport const ReinhardToneMapping = 2;\nexport const Uncharted2ToneMapping = 3;\nexport const CineonToneMapping = 4;\nexport const UVMapping = 300;\nexport const CubeReflectionMapping = 301;\nexport const CubeRefractionMapping = 302;\nexport const EquirectangularReflectionMapping = 303;\nexport const EquirectangularRefractionMapping = 304;\nexport const SphericalReflectionMapping = 305;\nexport const CubeUVReflectionMapping = 306;\nexport const CubeUVRefractionMapping = 307;\nexport const RepeatWrapping = 1000;\nexport const ClampToEdgeWrapping = 1001;\nexport const MirroredRepeatWrapping = 1002;\nexport const NearestFilter = 1003;\nexport const NearestMipMapNearestFilter = 1004;\nexport const NearestMipMapLinearFilter = 1005;\nexport const LinearFilter = 1006;\nexport const LinearMipMapNearestFilter = 1007;\nexport const LinearMipMapLinearFilter = 1008;\nexport const UnsignedByteType = 1009;\nexport const ByteType = 1010;\nexport const ShortType = 1011;\nexport const UnsignedShortType = 1012;\nexport const IntType = 1013;\nexport const UnsignedIntType = 1014;\nexport const FloatType = 1015;\nexport const HalfFloatType = 1016;\nexport const UnsignedShort4444Type = 1017;\nexport const UnsignedShort5551Type = 1018;\nexport const UnsignedShort565Type = 1019;\nexport const UnsignedInt248Type = 1020;\nexport const AlphaFormat = 1021;\nexport const RGBFormat = 1022;\nexport const RGBAFormat = 1023;\nexport const LuminanceFormat = 1024;\nexport const LuminanceAlphaFormat = 1025;\nexport const RGBEFormat = RGBAFormat;\nexport const DepthFormat = 1026;\nexport const DepthStencilFormat = 1027;\nexport const RGB_S3TC_DXT1_Format = 33776;\nexport const RGBA_S3TC_DXT1_Format = 33777;\nexport const RGBA_S3TC_DXT3_Format = 33778;\nexport const RGBA_S3TC_DXT5_Format = 33779;\nexport const RGB_PVRTC_4BPPV1_Format = 35840;\nexport const RGB_PVRTC_2BPPV1_Format = 35841;\nexport const RGBA_PVRTC_4BPPV1_Format = 35842;\nexport const RGBA_PVRTC_2BPPV1_Format = 35843;\nexport const RGB_ETC1_Format = 36196;\nexport const RGBA_ASTC_4x4_Format = 37808;\nexport const RGBA_ASTC_5x4_Format = 37809;\nexport const RGBA_ASTC_5x5_Format = 37810;\nexport const RGBA_ASTC_6x5_Format = 37811;\nexport const RGBA_ASTC_6x6_Format = 37812;\nexport const RGBA_ASTC_8x5_Format = 37813;\nexport const RGBA_ASTC_8x6_Format = 37814;\nexport const RGBA_ASTC_8x8_Format = 37815;\nexport const RGBA_ASTC_10x5_Format = 37816;\nexport const RGBA_ASTC_10x6_Format = 37817;\nexport const RGBA_ASTC_10x8_Format = 37818;\nexport const RGBA_ASTC_10x10_Format = 37819;\nexport const RGBA_ASTC_12x10_Format = 37820;\nexport const RGBA_ASTC_12x12_Format = 37821;\nexport const LoopOnce = 2200;\nexport const LoopRepeat = 2201;\nexport const LoopPingPong = 2202;\nexport const InterpolateDiscrete = 2300;\nexport const InterpolateLinear = 2301;\nexport const InterpolateSmooth = 2302;\nexport const ZeroCurvatureEnding = 2400;\nexport const ZeroSlopeEnding = 2401;\nexport const WrapAroundEnding = 2402;\nexport const TrianglesDrawMode = 0;\nexport const TriangleStripDrawMode = 1;\nexport const TriangleFanDrawMode = 2;\nexport const LinearEncoding = 3000;\nexport const sRGBEncoding = 3001;\nexport const GammaEncoding = 3007;\nexport const RGBEEncoding = 3002;\nexport const LogLuvEncoding = 3003;\nexport const RGBM7Encoding = 3004;\nexport const RGBM16Encoding = 3005;\nexport const RGBDEncoding = 3006;\nexport const BasicDepthPacking = 3200;\nexport const RGBADepthPacking = 3201;\n","import { Color } from \"../math/Color\";\nimport { MathUtil } from \"../math/Math\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Vector4 } from \"../math/Vector4\";\nexport class BufferAttribute {\n    constructor(array, itemSize = 0, normalized = false) {\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.itemSize = 1;\n        this.count = 0;\n        this.normalized = false;\n        this.dynamic = false;\n        this.updateRange = { offset: 0, count: -1 };\n        this.version = 0;\n        this.array = array;\n        this.itemSize = itemSize;\n        this.count = array !== undefined ? array.length / itemSize : 0;\n        this.normalized = normalized;\n    }\n    set needsUpdate(value) {\n        if (value === true)\n            this.version++;\n    }\n    setArray(array) {\n        this.count = array !== undefined ? array.length / this.itemSize : 0;\n        this.array = array;\n        return this;\n    }\n    setDynamic(value) {\n        this.dynamic = value;\n        return this;\n    }\n    copy(source) {\n        this.array = new source.array.constructor();\n        this.itemSize = source.itemSize;\n        this.count = source.count;\n        this.normalized = source.normalized;\n        this.dynamic = source.dynamic;\n        return this;\n    }\n    set(value, offset = 0) {\n        this.array.set(value, offset);\n        return this;\n    }\n    get(offset = 0, length = 1) {\n        return this.array.slice(offset, length);\n    }\n    copyAt(index1, attribute, index2) {\n        index1 *= this.itemSize;\n        index2 *= attribute.itemSize;\n        for (let i = 0, l = this.itemSize; i < l; i++) {\n            this.array[index1 + i] = attribute.array[index2 + i];\n        }\n        return this;\n    }\n    copyArray(array) {\n        this.array.set(array);\n        return this;\n    }\n    copyColorsArray(colors) {\n        const array = this.array;\n        let offset = 0;\n        for (let i = 0, l = colors.length; i < l; i++) {\n            const color = colors[i] || new Color();\n            array[offset++] = color.r;\n            array[offset++] = color.g;\n            array[offset++] = color.b;\n        }\n        return this;\n    }\n    /**\n     * TODO question https://discourse.threejs.org/t/question-about-fromdirectgeometry-function-of-buffergeometry/1890/2\n     * @param indices\n     * @returns {BufferAttribute}\n     public copyIndicesArray(indices: Face3[]): BufferAttribute {\n        const array: TypedArray = this.array;\n        let offset: number = 0;\n        for (let i: number = 0, l: number = indices.length; i < l; i++) {\n            const index = indices[i];\n            array[offset++] = index.a;\n            array[offset++] = index.b;\n            array[offset++] = index.c;\n        }\n        return this;\n    }\n     */\n    copyVector2sArray(vectors) {\n        const array = this.array;\n        let offset = 0;\n        for (let i = 0, l = vectors.length; i < l; i++) {\n            const vector = vectors[i] || new Vector2();\n            array[offset++] = vector.x;\n            array[offset++] = vector.y;\n        }\n        return this;\n    }\n    copyVector3sArray(vectors) {\n        const array = this.array;\n        let offset = 0;\n        for (let i = 0, l = vectors.length; i < l; i++) {\n            const vector = vectors[i] || new Vector3();\n            array[offset++] = vector.x;\n            array[offset++] = vector.y;\n            array[offset++] = vector.z;\n        }\n        return this;\n    }\n    copyVector4sArray(vectors) {\n        const array = this.array;\n        let offset = 0;\n        for (let i = 0, l = vectors.length; i < l; i++) {\n            const vector = vectors[i] || new Vector4();\n            array[offset++] = vector.x;\n            array[offset++] = vector.y;\n            array[offset++] = vector.z;\n            array[offset++] = vector.w;\n        }\n        return this;\n    }\n    setProperty(index, property, value) {\n        property = property.toLowerCase();\n        if (property && property.length <= 4 && property.replace(/[xyzw]/g, \"\").length === 0) {\n            const offsetMap = { x: 0, y: 1, z: 2 };\n            if (property.length === 1 && typeof value === \"number\") {\n                this.array[index * this.itemSize + offsetMap[property.charAt(0)]] = value;\n            }\n            else if (property.length === 2 && value instanceof Vector2) {\n                this.array[index * this.itemSize + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.itemSize + offsetMap[property.charAt(1)]] = value.y;\n            }\n            else if (property.length === 3 && value instanceof Vector3) {\n                this.array[index * this.itemSize + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.itemSize + offsetMap[property.charAt(1)]] = value.y;\n                this.array[index * this.itemSize + offsetMap[property.charAt(2)]] = value.z;\n            }\n            else if (property.length === 4 && value instanceof Vector4) {\n                this.array[index * this.itemSize + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.itemSize + offsetMap[property.charAt(1)]] = value.y;\n                this.array[index * this.itemSize + offsetMap[property.charAt(2)]] = value.z;\n                this.array[index * this.itemSize + offsetMap[property.charAt(3)]] = value.w;\n            }\n        }\n        return this;\n    }\n    getProperty(index, property) {\n        property = property.toLowerCase();\n        if (property && property.length <= 4 && property.replace(/[xyzw]/g, \"\").length === 0) {\n            const offsetMap = { x: 0, y: 1, z: 2 };\n            if (property.length === 1) {\n                return this.array[index * this.itemSize + offsetMap[property.charAt(0)]];\n            }\n            else if (property.length === 2) {\n                return new Vector2(this.array[index * this.itemSize + offsetMap[property.charAt(0)]], this.array[index * this.itemSize + offsetMap[property.charAt(1)]]);\n            }\n            else if (property.length === 3) {\n                return new Vector3(this.array[index * this.itemSize + offsetMap[property.charAt(0)]], this.array[index * this.itemSize + offsetMap[property.charAt(1)]], this.array[index * this.itemSize + offsetMap[property.charAt(2)]]);\n            }\n            else if (property.length === 4) {\n                return new Vector4(this.array[index * this.itemSize + offsetMap[property.charAt(0)]], this.array[index * this.itemSize + offsetMap[property.charAt(1)]], this.array[index * this.itemSize + offsetMap[property.charAt(2)]], this.array[index * this.itemSize + offsetMap[property.charAt(3)]]);\n            }\n        }\n        return undefined;\n    }\n    clone() {\n        return new this.constructor(this.array, this.itemSize, true).copy(this);\n    }\n}\nexport class Int8BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Int8Array(array), itemSize, normalized);\n    }\n}\nexport class Uint8BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint8Array(array), itemSize, normalized);\n    }\n}\nexport class Uint8ClampedBufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint8ClampedArray(array), itemSize, normalized);\n    }\n}\nexport class Int16BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Int16Array(array), itemSize, normalized);\n    }\n}\nexport class Uint16BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint16Array(array), itemSize, normalized);\n    }\n}\nexport class Int32BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Int32Array(array), itemSize, normalized);\n    }\n}\nexport class Uint32BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint32Array(array), itemSize, normalized);\n    }\n}\nexport class Float32BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Float32Array(array), itemSize, normalized);\n    }\n}\nexport class Float64BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Float64Array(array), itemSize, normalized);\n    }\n}\n","import { Box3 } from \"../math/Box3\";\nimport { MathUtil } from \"../math/Math\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { applyMatrixToBufferAttribute, arrayMax, setBoxFromBufferAttribute } from \"../utils\";\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute, } from \"./BufferAttribute\";\nimport { DirectGeometry } from \"./DirectGeometry\";\nimport { EventDispatcher } from \"./EventDispatcher\";\nimport { Geometry } from \"./Geometry\";\nimport { Object3D } from \"./Object3D\";\nimport { Mesh } from \"../objects/Mesh\";\nimport { Line } from \"../objects/Line\";\nimport { Points } from \"../objects/Points\";\nlet bufferGeometryId = 1;\nexport class BufferGeometry extends EventDispatcher {\n    constructor() {\n        super(...arguments);\n        this.id = (bufferGeometryId += 2);\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.type = \"BufferGeometry\";\n        this.index = null;\n        this.attributes = {};\n        this.morphAttributes = {};\n        this.groups = [];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n        this.drawRange = { start: 0, count: Infinity };\n    }\n    setIndex(index) {\n        if (Array.isArray(index)) {\n            this.index = new (arrayMax(index) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(index, 1);\n        }\n        else {\n            this.index = index;\n        }\n        return this;\n    }\n    addAttribute(name, attribute) {\n        if (name === \"index\") {\n            this.setIndex(attribute);\n            return this;\n        }\n        this.attributes[name] = attribute;\n        return this;\n    }\n    getAttribute(name) {\n        return this.attributes[name];\n    }\n    removeAttribute(name) {\n        delete this.attributes[name];\n        return this;\n    }\n    addGroup(start, count, materialIndex = 0) {\n        this.groups.push({\n            count: count,\n            materialIndex: materialIndex,\n            start: start,\n        });\n        return this;\n    }\n    clearGroups() {\n        this.groups = [];\n        return this;\n    }\n    setDrawRange(start, count) {\n        this.drawRange.start = start;\n        this.drawRange.count = count;\n        return this;\n    }\n    applyMatrix(matrix) {\n        const position = this.attributes.position;\n        if (position !== undefined) {\n            applyMatrixToBufferAttribute(matrix, position);\n            position.needsUpdate = true;\n        }\n        const normal = this.attributes.normal;\n        if (normal !== undefined) {\n            const normalMatrix = new Matrix3().getNormalMatrix(matrix);\n            applyMatrixToBufferAttribute(normalMatrix, normal);\n            normal.needsUpdate = true;\n        }\n        if (this.boundingBox !== null) {\n            this.computeBoundingBox();\n        }\n        if (this.boundingSphere !== null) {\n            this.computeBoundingSphere();\n        }\n        return this;\n    }\n    rotateX(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationX(angle));\n    }\n    rotateY(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationY(angle));\n    }\n    rotateZ(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationZ(angle));\n    }\n    translate(x, y, z) {\n        return this.applyMatrix(new Matrix4().makeTranslation(x, y, z));\n    }\n    scale(x, y, z) {\n        return this.applyMatrix(new Matrix4().makeScale(x, y, z));\n    }\n    lookAt(vector) {\n        const obj = new Object3D().lookAt(vector);\n        obj.updateMatrix();\n        return this.applyMatrix(obj.matrix);\n    }\n    center() {\n        this.computeBoundingBox();\n        const offset = this.boundingBox.getCenter().negate();\n        this.translate(offset.x, offset.y, offset.z);\n        return offset;\n    }\n    /**\n     * Same as updateFromObject\n     * @param object\n     */\n    setFromObject(object) {\n        const geometry = object.geometry;\n        if (object instanceof Points || object instanceof Line) {\n            const positions = new Float32BufferAttribute(geometry.vertices.length * 3, 3);\n            const colors = new Float32BufferAttribute(geometry.colors.length * 3, 3);\n            this.addAttribute(\"position\", positions.copyVector3sArray(geometry.vertices));\n            this.addAttribute(\"color\", colors.copyColorsArray(geometry.colors));\n            if (geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length) {\n                const lineDistances = new Float32BufferAttribute(geometry.lineDistances.length, 1);\n                this.addAttribute(\"lineDistance\", lineDistances.copyArray(geometry.lineDistances));\n            }\n            if (geometry.boundingSphere !== null) {\n                this.boundingSphere = geometry.boundingSphere.clone();\n            }\n            if (geometry.boundingBox !== null) {\n                this.boundingBox = geometry.boundingBox.clone();\n            }\n        }\n        else if (object instanceof Mesh) {\n            this.fromGeometry(geometry);\n        }\n        return this;\n    }\n    setFromPoints(points) {\n        const position = [];\n        for (let i = 0, l = points.length; i < l; i++) {\n            const point = points[i];\n            position.push(point.x, point.y, point.z || 0);\n        }\n        this.addAttribute(\"position\", new Float32BufferAttribute(position, 3));\n        return this;\n    }\n    /**\n     * This function is a mess.\n     * The argument has implicit requirement for arg `object`\n     * Since the only use of this function is in `WebGLObjects`,\n     * and it requires the object's `geometry` property should be a `Geometry` instance,\n     * So we can/must assert the object.geometry as type `Geometry`.\n     * So the whole function is dealing with no BufferGeometry instance,\n     * which may be the reason why BufferGeometry is faster.\n     *\n     * @param object\n     * @returns {BufferGeometry}\n     */\n    updateFromObject(object) {\n        let geometry = object.geometry;\n        if (object instanceof Mesh) {\n            let direct = geometry.directGeometry;\n            if (geometry.elementsNeedUpdate === true) {\n                direct = undefined;\n                geometry.elementsNeedUpdate = false;\n            }\n            if (direct === undefined) {\n                // Geometry -> DirectGeometry -> BufferGeometry\n                return this.fromGeometry(geometry);\n            }\n            direct.verticesNeedUpdate = geometry.verticesNeedUpdate;\n            direct.normalsNeedUpdate = geometry.normalsNeedUpdate;\n            direct.colorsNeedUpdate = geometry.colorsNeedUpdate;\n            direct.uvsNeedUpdate = geometry.uvsNeedUpdate;\n            direct.groupsNeedUpdate = geometry.groupsNeedUpdate;\n            geometry.verticesNeedUpdate = false;\n            geometry.normalsNeedUpdate = false;\n            geometry.colorsNeedUpdate = false;\n            geometry.uvsNeedUpdate = false;\n            geometry.groupsNeedUpdate = false;\n            geometry = direct;\n        }\n        // Used by both Geometry and DirectGeometry\n        if (geometry.verticesNeedUpdate === true) {\n            const attribute = this.attributes.position;\n            if (attribute !== undefined) {\n                attribute.copyVector3sArray(geometry.vertices);\n                attribute.needsUpdate = true;\n            }\n            geometry.verticesNeedUpdate = false;\n        }\n        // Used only by DirectGeometry\n        if (geometry instanceof DirectGeometry && geometry.normalsNeedUpdate === true) {\n            const attribute = this.attributes.normal;\n            if (attribute !== undefined) {\n                attribute.copyVector3sArray(geometry.normals);\n                attribute.needsUpdate = true;\n            }\n            geometry.normalsNeedUpdate = false;\n        }\n        // Used by both Geometry and DirectGeometry\n        if (geometry.colorsNeedUpdate === true) {\n            const attribute = this.attributes.color;\n            if (attribute !== undefined) {\n                attribute.copyColorsArray(geometry.colors);\n                attribute.needsUpdate = true;\n            }\n            geometry.colorsNeedUpdate = false;\n        }\n        // Used only by DirectGeometry\n        if (geometry instanceof DirectGeometry && geometry.uvsNeedUpdate) {\n            const attribute = this.attributes.uv;\n            if (attribute !== undefined) {\n                attribute.copyVector2sArray(geometry.uvs);\n                attribute.needsUpdate = true;\n            }\n            geometry.uvsNeedUpdate = false;\n        }\n        // Used only by Geometry\n        if (geometry instanceof Geometry && geometry.lineDistancesNeedUpdate) {\n            const attribute = this.attributes.lineDistance;\n            if (attribute !== undefined) {\n                attribute.copyArray(geometry.lineDistances);\n                attribute.needsUpdate = true;\n            }\n            geometry.lineDistancesNeedUpdate = false;\n        }\n        // Used only by DirectGeometry\n        if (geometry instanceof DirectGeometry && geometry.groupsNeedUpdate) {\n            geometry.computeGroups(object.geometry);\n            this.groups = geometry.groups;\n            geometry.groupsNeedUpdate = false;\n        }\n        // Well, IMO!!\n        return this;\n    }\n    /**\n     * Geometry of a Mesh\n     * @param geometry\n     */\n    fromGeometry(geometry) {\n        geometry.directGeometry = new DirectGeometry().fromGeometry(geometry);\n        return this.fromDirectGeometry(geometry.directGeometry);\n    }\n    fromDirectGeometry(geometry) {\n        const positions = new Float32Array(geometry.vertices.length * 3);\n        this.addAttribute(\"position\", new BufferAttribute(positions, 3).copyVector3sArray(geometry.vertices));\n        if (geometry.normals.length > 0) {\n            const normals = new Float32Array(geometry.normals.length * 3);\n            this.addAttribute(\"normal\", new BufferAttribute(normals, 3).copyVector3sArray(geometry.normals));\n        }\n        if (geometry.colors.length > 0) {\n            const colors = new Float32Array(geometry.colors.length * 3);\n            this.addAttribute(\"color\", new BufferAttribute(colors, 3).copyColorsArray(geometry.colors));\n        }\n        if (geometry.uvs.length > 0) {\n            const uvs = new Float32Array(geometry.uvs.length * 2);\n            this.addAttribute(\"uv\", new BufferAttribute(uvs, 2).copyVector2sArray(geometry.uvs));\n        }\n        if (geometry.uvs2.length > 0) {\n            const uvs2 = new Float32Array(geometry.uvs2.length * 2);\n            this.addAttribute(\"uv2\", new BufferAttribute(uvs2, 2).copyVector2sArray(geometry.uvs2));\n        }\n        /**\n         * TODO question https://discourse.threejs.org/t/question-about-fromdirectgeometry-function-of-buffergeometry/1890/2\n         if (geometry.indices.length > 0) {\n            const indices: Uint32Array | Uint16Array = new (arrayMax(geometry.indices) > 65535 ? Uint32Array : Uint16Array)(geometry.indices.length * 3);\n            this.setIndex(new BufferAttribute(indices, 1).copyIndicesArray(geometry.indices));\n        }\n         */\n        // groups\n        this.groups = geometry.groups;\n        // morphs\n        for (const name in geometry.morphTargets) {\n            if (!geometry.morphTargets.hasOwnProperty(name))\n                continue;\n            const array = [];\n            const morphTargets = geometry.morphTargets[name];\n            for (let i = 0, l = morphTargets.length; i < l; i++) {\n                const morphTarget = morphTargets[i];\n                const attribute = new Float32BufferAttribute(new Array(morphTarget.length * 3), 3);\n                array.push(attribute.copyVector3sArray(morphTarget));\n            }\n            this.morphAttributes[name] = array;\n        }\n        // skinning\n        if (geometry.skinIndices.length > 0) {\n            const skinIndices = new Float32BufferAttribute(new Array(geometry.skinIndices.length * 4), 4);\n            this.addAttribute(\"skinIndex\", skinIndices.copyVector4sArray(geometry.skinIndices));\n        }\n        if (geometry.skinWeights.length > 0) {\n            const skinWeights = new Float32BufferAttribute(new Array(geometry.skinWeights.length * 4), 4);\n            this.addAttribute(\"skinWeight\", skinWeights.copyVector4sArray(geometry.skinWeights));\n        }\n        if (geometry.boundingSphere !== null) {\n            this.boundingSphere = geometry.boundingSphere.clone();\n        }\n        if (geometry.boundingBox !== null) {\n            this.boundingBox = geometry.boundingBox.clone();\n        }\n        return this;\n    }\n    computeBoundingBox() {\n        if (this.boundingBox === null) {\n            this.boundingBox = new Box3();\n        }\n        const position = this.attributes.position;\n        if (position !== undefined) {\n            setBoxFromBufferAttribute(this.boundingBox, position);\n        }\n        else {\n            this.boundingBox.makeEmpty();\n        }\n        if (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) {\n            console.error(`THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.`, this);\n        }\n    }\n    computeBoundingSphere() {\n        if (this.boundingSphere === null) {\n            this.boundingSphere = new Sphere();\n        }\n        const position = this.attributes.position;\n        if (position) {\n            const box = new Box3();\n            setBoxFromBufferAttribute(box, position);\n            const center = box.getCenter();\n            // hoping to find a boundingSphere with a radius smaller than the\n            // boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n            let maxRadiusSquare = 0;\n            for (let i = 0, il = position.count; i < il; i++) {\n                const vector = new Vector3();\n                vector.x = position.getProperty(i, \"x\");\n                vector.y = position.getProperty(i, \"y\");\n                vector.z = position.getProperty(i, \"z\");\n                maxRadiusSquare = Math.max(maxRadiusSquare, center.distanceToSquared(vector));\n            }\n            this.boundingSphere.radius = Math.sqrt(maxRadiusSquare);\n            if (isNaN(this.boundingSphere.radius)) {\n                console.error(`THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.`, this);\n            }\n        }\n    }\n    computeVertexNormals() {\n        const index = this.index;\n        const attributes = this.attributes;\n        const groups = this.groups;\n        if (attributes.position) {\n            const positions = attributes.position.array;\n            if (attributes.normal === undefined) {\n                this.addAttribute(\"normal\", new BufferAttribute(new Float32Array(positions.length), 3));\n            }\n            else {\n                // reset existing normals to zero\n                const array = attributes.normal.array;\n                for (let i = 0, il = array.length; i < il; i++) {\n                    array[i] = 0;\n                }\n            }\n            const normals = attributes.normal.array;\n            let vA, vB, vC;\n            const pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n            const cb = new Vector3(), ab = new Vector3();\n            // indexed elements\n            if (index) {\n                const indices = index.array;\n                if (groups.length === 0) {\n                    this.addGroup(0, indices.length);\n                }\n                for (let j = 0, jl = groups.length; j < jl; ++j) {\n                    const group = groups[j];\n                    const start = group.start;\n                    const count = group.count;\n                    for (let i = start, il = start + count; i < il; i += 3) {\n                        vA = indices[i] * 3;\n                        vB = indices[i + 1] * 3;\n                        vC = indices[i + 2] * 3;\n                        pA.fromArray(positions, vA);\n                        pB.fromArray(positions, vB);\n                        pC.fromArray(positions, vC);\n                        cb.copy(pC).sub(pB);\n                        ab.copy(pA).sub(pB);\n                        cb.cross(ab);\n                        normals[vA] += cb.x;\n                        normals[vA + 1] += cb.y;\n                        normals[vA + 2] += cb.z;\n                        normals[vB] += cb.x;\n                        normals[vB + 1] += cb.y;\n                        normals[vB + 2] += cb.z;\n                        normals[vC] += cb.x;\n                        normals[vC + 1] += cb.y;\n                        normals[vC + 2] += cb.z;\n                    }\n                }\n            }\n            else {\n                // non-indexed elements (unconnected triangle soup)\n                for (let i = 0, il = positions.length; i < il; i += 9) {\n                    pA.fromArray(positions, i);\n                    pB.fromArray(positions, i + 3);\n                    pC.fromArray(positions, i + 6);\n                    cb.copy(pC).sub(pB);\n                    ab.copy(pA).sub(pB);\n                    cb.cross(ab);\n                    normals[i] = cb.x;\n                    normals[i + 1] = cb.y;\n                    normals[i + 2] = cb.z;\n                    normals[i + 3] = cb.x;\n                    normals[i + 4] = cb.y;\n                    normals[i + 5] = cb.z;\n                    normals[i + 6] = cb.x;\n                    normals[i + 7] = cb.y;\n                    normals[i + 8] = cb.z;\n                }\n            }\n            this.normalizeNormals();\n            attributes.normal.needsUpdate = true;\n        }\n    }\n    normalizeNormals() {\n        const vector = new Vector3();\n        const normals = this.attributes.normal;\n        for (let i = 0, il = normals.count; i < il; i++) {\n            vector.x = normals.getProperty(i, \"x\");\n            vector.y = normals.getProperty(i, \"y\");\n            vector.z = normals.getProperty(i, \"z\");\n            vector.normalize();\n            normals.setProperty(i, \"xyz\", vector);\n        }\n    }\n    toNonIndexed() {\n        if (this.index === null) {\n            console.warn(`THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.`);\n            return this;\n        }\n        const geometry2 = new BufferGeometry();\n        const indices = this.index.array;\n        const attributes = this.attributes;\n        for (const name in attributes) {\n            if (!attributes.hasOwnProperty(name))\n                continue;\n            const attribute = attributes[name];\n            const array = attribute.array;\n            const itemSize = attribute.itemSize;\n            const array2 = new array.constructor(indices.length * itemSize);\n            let index = 0, index2 = 0;\n            for (let i = 0, l = indices.length; i < l; i++) {\n                index = indices[i] * itemSize;\n                for (let j = 0; j < itemSize; j++) {\n                    array2[index2++] = array[index++];\n                }\n            }\n            geometry2.addAttribute(name, new BufferAttribute(array2, itemSize));\n        }\n        return geometry2;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(source) {\n        // reset\n        this.index = null;\n        this.attributes = {};\n        this.morphAttributes = {};\n        this.groups = [];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n        // name\n        this.name = source.name;\n        // index\n        const index = source.index;\n        if (index !== null) {\n            this.setIndex(index.clone());\n        }\n        // attributes\n        const attributes = source.attributes;\n        for (const name in attributes) {\n            if (!attributes.hasOwnProperty(name))\n                continue;\n            const attribute = attributes[name];\n            this.addAttribute(name, attribute.clone());\n        }\n        // morph attributes\n        const morphAttributes = source.morphAttributes;\n        for (const name in morphAttributes) {\n            if (!attributes.hasOwnProperty(name))\n                continue;\n            const array = [];\n            const morphAttribute = morphAttributes[name]; // morphAttribute: array of Float32BufferAttributes\n            for (let i = 0, l = morphAttribute.length; i < l; i++) {\n                array.push(morphAttribute[i].clone());\n            }\n            this.morphAttributes[name] = array;\n        }\n        // groups\n        const groups = source.groups;\n        for (let i = 0, l = groups.length; i < l; i++) {\n            const group = groups[i];\n            this.addGroup(group.start, group.count, group.materialIndex);\n        }\n        // bounding box\n        const boundingBox = source.boundingBox;\n        if (boundingBox !== null) {\n            this.boundingBox = boundingBox.clone();\n        }\n        // bounding sphere\n        const boundingSphere = source.boundingSphere;\n        if (boundingSphere !== null) {\n            this.boundingSphere = boundingSphere.clone();\n        }\n        // draw range\n        this.drawRange.start = source.drawRange.start;\n        this.drawRange.count = source.drawRange.count;\n        return this;\n    }\n    dispose() {\n        this.dispatchEvent({ type: \"dispose\" });\n    }\n}\n","export class Clock {\n    constructor(autoStart = false) {\n        this.autoStart = false;\n        this.startTime = 0;\n        this.oldTime = 0;\n        this.elapsedTime = 0;\n        this.running = false;\n        this.autoStart = autoStart;\n    }\n    start() {\n        this.startTime = (typeof performance === \"undefined\" ? Date : performance).now(); // see #10732\n        this.oldTime = this.startTime;\n        this.elapsedTime = 0;\n        this.running = true;\n    }\n    stop() {\n        this.getElapsedTime();\n        this.running = false;\n        this.autoStart = false;\n    }\n    getElapsedTime() {\n        this.getDelta();\n        return this.elapsedTime;\n    }\n    getDelta() {\n        let diff = 0;\n        if (this.autoStart && !this.running) {\n            this.start();\n            return 0;\n        }\n        if (this.running) {\n            const newTime = (typeof performance === \"undefined\" ? Date : performance).now();\n            diff = (newTime - this.oldTime) / 1000;\n            this.oldTime = newTime;\n            this.elapsedTime += diff;\n        }\n        return diff;\n    }\n}\n","import { Vector2 } from \"../math/Vector2\";\nexport class DirectGeometry {\n    constructor() {\n        this.vertices = [];\n        this.normals = [];\n        this.colors = [];\n        this.uvs = [];\n        this.uvs2 = [];\n        this.groups = [];\n        this.morphTargets = {};\n        this.skinWeights = [];\n        this.skinIndices = [];\n        this.boundingSphere = null;\n        this.boundingBox = null;\n        this.verticesNeedUpdate = false;\n        this.uvsNeedUpdate = false;\n        this.normalsNeedUpdate = false;\n        this.colorsNeedUpdate = false;\n        this.groupsNeedUpdate = false;\n    }\n    computeGroups(geometry) {\n        let group;\n        const groups = [];\n        let materialIndex;\n        const faces = geometry.faces;\n        let i = 0;\n        for (; i < faces.length; i++) {\n            const face = faces[i];\n            // materials\n            if (face.materialIndex !== materialIndex) {\n                materialIndex = face.materialIndex;\n                if (group !== undefined) {\n                    group.count = i * 3 - group.start;\n                    groups.push(group);\n                }\n                group = {\n                    materialIndex: materialIndex,\n                    start: i * 3,\n                };\n            }\n        }\n        if (group !== undefined) {\n            group.count = i * 3 - group.start;\n            groups.push(group);\n        }\n        this.groups = groups;\n    }\n    fromGeometry(geometry) {\n        const faces = geometry.faces;\n        const vertices = geometry.vertices;\n        const faceVertexUvs = geometry.faceVertexUvs;\n        const hasFaceVertexUv = faceVertexUvs[0] && faceVertexUvs[0].length > 0;\n        const hasFaceVertexUv2 = faceVertexUvs[1] && faceVertexUvs[1].length > 0;\n        // morphs\n        const morphTargets = geometry.morphTargets;\n        const morphTargetsLength = morphTargets.length;\n        if (morphTargetsLength > 0) {\n            this.morphTargets.position = [];\n            for (let i = 0; i < morphTargetsLength; i++) {\n                this.morphTargets.position[i] = [];\n            }\n        }\n        const morphNormals = geometry.morphNormals;\n        const morphNormalsLength = morphNormals.length;\n        if (morphNormalsLength > 0) {\n            this.morphTargets.normal = [];\n            for (let i = 0; i < morphNormalsLength; i++) {\n                this.morphTargets.normal[i] = [];\n            }\n        }\n        // skins\n        const skinIndices = geometry.skinIndices;\n        const skinWeights = geometry.skinWeights;\n        const hasSkinIndices = skinIndices.length === vertices.length;\n        const hasSkinWeights = skinWeights.length === vertices.length;\n        for (let i = 0; i < faces.length; i++) {\n            const face = faces[i];\n            this.vertices.push(vertices[face.a], vertices[face.b], vertices[face.c]);\n            const vertexNormals = face.vertexNormals;\n            if (vertexNormals.length === 3) {\n                this.normals.push(vertexNormals[0], vertexNormals[1], vertexNormals[2]);\n            }\n            else {\n                const normal = face.normal;\n                this.normals.push(normal, normal, normal);\n            }\n            const vertexColors = face.vertexColors;\n            if (vertexColors.length === 3) {\n                this.colors.push(vertexColors[0], vertexColors[1], vertexColors[2]);\n            }\n            else {\n                const color = face.color;\n                this.colors.push(color, color, color);\n            }\n            if (hasFaceVertexUv === true) {\n                const vertexUvs = faceVertexUvs[0][i];\n                if (vertexUvs !== undefined) {\n                    this.uvs.push(vertexUvs[0], vertexUvs[1], vertexUvs[2]);\n                }\n                else {\n                    console.warn(`THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ${i}`);\n                    this.uvs.push(new Vector2(), new Vector2(), new Vector2());\n                }\n            }\n            if (hasFaceVertexUv2 === true) {\n                const vertexUvs = faceVertexUvs[1][i];\n                if (vertexUvs !== undefined) {\n                    this.uvs2.push(vertexUvs[0], vertexUvs[1], vertexUvs[2]);\n                }\n                else {\n                    console.warn(`THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ${i}`);\n                    this.uvs2.push(new Vector2(), new Vector2(), new Vector2());\n                }\n            }\n            // morphs\n            for (let j = 0; j < morphTargetsLength; j++) {\n                const morphTarget = morphTargets[j].vertices;\n                this.morphTargets.position[j].push(morphTarget[face.a], morphTarget[face.b], morphTarget[face.c]);\n            }\n            for (let j = 0; j < morphNormalsLength; j++) {\n                const morphNormal = morphNormals[j].vertexNormals[i];\n                this.morphTargets.normal[j].push(morphNormal.a, morphNormal.b, morphNormal.c);\n            }\n            // skins\n            if (hasSkinIndices) {\n                this.skinIndices.push(skinIndices[face.a], skinIndices[face.b], skinIndices[face.c]);\n            }\n            if (hasSkinWeights) {\n                this.skinWeights.push(skinWeights[face.a], skinWeights[face.b], skinWeights[face.c]);\n            }\n        }\n        if (geometry.boundingSphere !== null) {\n            this.boundingSphere = geometry.boundingSphere.clone();\n        }\n        if (geometry.boundingBox !== null) {\n            this.boundingBox = geometry.boundingBox.clone();\n        }\n        this.computeGroups(geometry);\n        this.verticesNeedUpdate = geometry.verticesNeedUpdate;\n        this.normalsNeedUpdate = geometry.normalsNeedUpdate;\n        this.colorsNeedUpdate = geometry.colorsNeedUpdate;\n        this.uvsNeedUpdate = geometry.uvsNeedUpdate;\n        this.groupsNeedUpdate = geometry.groupsNeedUpdate;\n        return this;\n    }\n}\n","export class EventDispatcher {\n    constructor() {\n        this._listeners = {};\n    }\n    addEventListener(type, listener) {\n        const listeners = this._listeners;\n        if (listeners[type] === undefined) {\n            listeners[type] = [];\n        }\n        if (listeners[type].indexOf(listener) === -1) {\n            listeners[type].push(listener);\n        }\n    }\n    hasEventListener(type, listener) {\n        if (this._listeners === undefined)\n            return false;\n        const listeners = this._listeners;\n        return listeners[type] !== undefined && listeners[type].indexOf(listener) !== -1;\n    }\n    removeEventListener(type, listener) {\n        if (this._listeners === undefined)\n            return;\n        const listeners = this._listeners;\n        const listenerArray = listeners[type];\n        if (listenerArray !== undefined) {\n            const index = listenerArray.indexOf(listener);\n            if (index !== -1) {\n                listenerArray.splice(index, 1);\n            }\n        }\n    }\n    dispatchEvent(event = {}) {\n        if (this._listeners === undefined)\n            return;\n        const listeners = this._listeners;\n        const listenerArray = listeners[event.type];\n        if (listenerArray !== undefined) {\n            event.target = this;\n            const array = listenerArray.slice(0);\n            for (let i = 0, l = array.length; i < l; i++) {\n                array[i].call(this, event);\n            }\n        }\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class Face3 {\n    constructor(a = 0, b = 0, c = 0, normal = new Vector3(), color = new Color(), materialIndex = 0) {\n        this.a = 0;\n        this.b = 0;\n        this.c = 0;\n        this.normal = new Vector3();\n        this.vertexNormals = [];\n        this.color = new Color();\n        this.vertexColors = [];\n        this.materialIndex = 0;\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        if (normal instanceof Vector3)\n            this.normal = normal;\n        if (Array.isArray(normal))\n            this.vertexNormals = normal;\n        if (color instanceof Color)\n            this.color = color;\n        if (Array.isArray(color))\n            this.vertexColors = color;\n        this.materialIndex = materialIndex;\n    }\n    copy(source) {\n        this.a = source.a;\n        this.b = source.b;\n        this.c = source.c;\n        this.normal.copy(source.normal);\n        this.color.copy(source.color);\n        this.materialIndex = source.materialIndex;\n        for (let i = 0, il = source.vertexNormals.length; i < il; i++) {\n            this.vertexNormals[i] = source.vertexNormals[i].clone();\n        }\n        for (let i = 0, il = source.vertexColors.length; i < il; i++) {\n            this.vertexColors[i] = source.vertexColors[i].clone();\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Box3 } from \"../math/Box3\";\nimport { Color } from \"../math/Color\";\nimport { MathUtil } from \"../math/Math\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Triangle } from \"../math/Triangle\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { EventDispatcher } from \"./EventDispatcher\";\nimport { Face3 } from \"./Face3\";\nimport { Object3D } from \"./Object3D\";\nexport class GeometryFace extends Face3 {\n}\nlet geometryId = 0;\nexport class Geometry extends EventDispatcher {\n    constructor() {\n        super(...arguments);\n        this.id = (geometryId += 2);\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.type = \"Geometry\";\n        this.vertices = [];\n        this.colors = [];\n        this.faces = [];\n        this.faceVertexUvs = [[]];\n        this.morphTargets = [];\n        this.morphNormals = [];\n        this.skinWeights = [];\n        this.skinIndices = [];\n        this.lineDistances = [];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n        this.elementsNeedUpdate = false;\n        this.verticesNeedUpdate = false;\n        this.uvsNeedUpdate = false;\n        this.normalsNeedUpdate = false;\n        this.colorsNeedUpdate = false;\n        this.lineDistancesNeedUpdate = false;\n        this.groupsNeedUpdate = false;\n    }\n    applyMatrix(matrix) {\n        const normalMatrix = new Matrix3().getNormalMatrix(matrix);\n        for (let i = 0, il = this.vertices.length; i < il; i++) {\n            this.vertices[i].applyMatrix4(matrix);\n        }\n        for (let i = 0, il = this.faces.length; i < il; i++) {\n            const face = this.faces[i];\n            face.normal.applyMatrix3(normalMatrix).normalize();\n            for (let j = 0, jl = face.vertexNormals.length; j < jl; j++) {\n                face.vertexNormals[j].applyMatrix3(normalMatrix).normalize();\n            }\n        }\n        if (this.boundingBox !== null) {\n            this.computeBoundingBox();\n        }\n        if (this.boundingSphere !== null) {\n            this.computeBoundingSphere();\n        }\n        this.verticesNeedUpdate = true;\n        this.normalsNeedUpdate = true;\n        return this;\n    }\n    rotateX(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationX(angle));\n    }\n    rotateY(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationY(angle));\n    }\n    rotateZ(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationZ(angle));\n    }\n    translate(x, y, z) {\n        return this.applyMatrix(new Matrix4().makeTranslation(x, y, z));\n    }\n    scale(x, y, z) {\n        return this.applyMatrix(new Matrix4().makeScale(x, y, z));\n    }\n    lookAt(vector) {\n        const obj = new Object3D().lookAt(vector);\n        obj.updateMatrix();\n        return this.applyMatrix(obj.matrix);\n    }\n    fromBufferGeometry(geometry) {\n        const indices = geometry.index !== null ? geometry.index.array : undefined;\n        const attributes = geometry.attributes;\n        const positions = attributes.position.array;\n        const normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n        const colors = attributes.color !== undefined ? attributes.color.array : undefined;\n        const uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n        const uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n        if (uvs2 !== undefined)\n            this.faceVertexUvs[1] = [];\n        const tempNormals = [];\n        const tempUVs = [];\n        const tempUVs2 = [];\n        for (let i = 0, j = 0; i < positions.length; i += 3, j += 2) {\n            this.vertices.push(new Vector3(positions[i], positions[i + 1], positions[i + 2]));\n            if (normals !== undefined) {\n                tempNormals.push(new Vector3(normals[i], normals[i + 1], normals[i + 2]));\n            }\n            if (colors !== undefined) {\n                this.colors.push(new Color(colors[i], colors[i + 1], colors[i + 2]));\n            }\n            if (uvs !== undefined) {\n                tempUVs.push(new Vector2(uvs[j], uvs[j + 1]));\n            }\n            if (uvs2 !== undefined) {\n                tempUVs2.push(new Vector2(uvs2[j], uvs2[j + 1]));\n            }\n        }\n        const addFace = (a, b, c, materialIndex) => {\n            const vertexNormals = normals !== undefined ? [tempNormals[a].clone(), tempNormals[b].clone(), tempNormals[c].clone()] : [];\n            const vertexColors = colors !== undefined ? [this.colors[a].clone(), this.colors[b].clone(), this.colors[c].clone()] : [];\n            const face = new Face3(a, b, c, vertexNormals, vertexColors, materialIndex);\n            this.faces.push(face);\n            if (uvs !== undefined) {\n                this.faceVertexUvs[0].push([tempUVs[a].clone(), tempUVs[b].clone(), tempUVs[c].clone()]);\n            }\n            if (uvs2 !== undefined) {\n                this.faceVertexUvs[1].push([tempUVs2[a].clone(), tempUVs2[b].clone(), tempUVs2[c].clone()]);\n            }\n        };\n        const groups = geometry.groups;\n        if (groups.length > 0) {\n            for (let i = 0; i < groups.length; i++) {\n                const group = groups[i];\n                const start = group.start;\n                const count = group.count;\n                for (let j = start, jl = start + count; j < jl; j += 3) {\n                    if (indices !== undefined) {\n                        addFace(indices[j], indices[j + 1], indices[j + 2], group.materialIndex);\n                    }\n                    else {\n                        addFace(j, j + 1, j + 2, group.materialIndex);\n                    }\n                }\n            }\n        }\n        else {\n            if (indices !== undefined) {\n                for (let i = 0; i < indices.length; i += 3) {\n                    addFace(indices[i], indices[i + 1], indices[i + 2]);\n                }\n            }\n            else {\n                for (let i = 0; i < positions.length / 3; i += 3) {\n                    addFace(i, i + 1, i + 2);\n                }\n            }\n        }\n        this.computeFaceNormals();\n        if (geometry.boundingBox !== null) {\n            this.boundingBox = geometry.boundingBox.clone();\n        }\n        if (geometry.boundingSphere !== null) {\n            this.boundingSphere = geometry.boundingSphere.clone();\n        }\n        return this;\n    }\n    center() {\n        this.computeBoundingBox();\n        const offset = this.boundingBox.getCenter().negate();\n        this.translate(offset.x, offset.y, offset.z);\n        return offset;\n    }\n    normalize() {\n        this.computeBoundingSphere();\n        const center = this.boundingSphere.center;\n        const radius = this.boundingSphere.radius;\n        const s = radius === 0 ? 1 : 1.0 / radius;\n        const matrix = new Matrix4();\n        matrix.set(s, 0, 0, -s * center.x, 0, s, 0, -s * center.y, 0, 0, s, -s * center.z, 0, 0, 0, 1);\n        return this.applyMatrix(matrix);\n    }\n    computeFaceNormals() {\n        const cb = new Vector3(), ab = new Vector3();\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            const vA = this.vertices[face.a];\n            const vB = this.vertices[face.b];\n            const vC = this.vertices[face.c];\n            cb.copy(vC).sub(vB);\n            ab.copy(vA).sub(vB);\n            cb.cross(ab);\n            cb.normalize();\n            face.normal.copy(cb);\n        }\n        return this;\n    }\n    computeVertexNormals(areaWeighted = true) {\n        const vertices = new Array(this.vertices.length);\n        for (let v = 0, vl = this.vertices.length; v < vl; v++) {\n            vertices[v] = new Vector3();\n        }\n        if (areaWeighted) {\n            // vertex normals weighted by triangle areas\n            // http://www.iquilezles.org/www/articles/normals/normals.htm\n            for (let f = 0, fl = this.faces.length; f < fl; f++) {\n                const face = this.faces[f];\n                const vA = this.vertices[face.a];\n                const vB = this.vertices[face.b];\n                const vC = this.vertices[face.c];\n                const cb = new Vector3().copy(vC).sub(vB);\n                const ab = new Vector3().copy(vA).sub(vB);\n                cb.cross(ab);\n                vertices[face.a].add(cb);\n                vertices[face.b].add(cb);\n                vertices[face.c].add(cb);\n            }\n        }\n        else {\n            this.computeFaceNormals();\n            for (let f = 0, fl = this.faces.length; f < fl; f++) {\n                const face = this.faces[f];\n                vertices[face.a].add(face.normal);\n                vertices[face.b].add(face.normal);\n                vertices[face.c].add(face.normal);\n            }\n        }\n        for (let v = 0, vl = this.vertices.length; v < vl; v++) {\n            vertices[v].normalize();\n        }\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            const vertexNormals = face.vertexNormals;\n            if (vertexNormals.length === 3) {\n                vertexNormals[0].copy(vertices[face.a]);\n                vertexNormals[1].copy(vertices[face.b]);\n                vertexNormals[2].copy(vertices[face.c]);\n            }\n            else {\n                vertexNormals[0] = vertices[face.a].clone();\n                vertexNormals[1] = vertices[face.b].clone();\n                vertexNormals[2] = vertices[face.c].clone();\n            }\n        }\n        if (this.faces.length > 0) {\n            this.normalsNeedUpdate = true;\n        }\n        return this;\n    }\n    computeFlatVertexNormals() {\n        this.computeFaceNormals();\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            const vertexNormals = face.vertexNormals;\n            if (vertexNormals.length === 3) {\n                vertexNormals[0].copy(face.normal);\n                vertexNormals[1].copy(face.normal);\n                vertexNormals[2].copy(face.normal);\n            }\n            else {\n                vertexNormals[0] = face.normal.clone();\n                vertexNormals[1] = face.normal.clone();\n                vertexNormals[2] = face.normal.clone();\n            }\n        }\n        if (this.faces.length > 0) {\n            this.normalsNeedUpdate = true;\n        }\n        return this;\n    }\n    computeMorphNormals() {\n        // save original normals\n        // - create temp variables on first access\n        //   otherwise just copy (for faster repeated calls)\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            if (!face.originalFaceNormal) {\n                face.originalFaceNormal = face.normal.clone();\n            }\n            else {\n                face.originalFaceNormal.copy(face.normal);\n            }\n            if (!face.originalVertexNormals)\n                face.originalVertexNormals = [];\n            for (let i = 0, il = face.vertexNormals.length; i < il; i++) {\n                if (!face.originalVertexNormals[i]) {\n                    face.originalVertexNormals[i] = face.vertexNormals[i].clone();\n                }\n                else {\n                    face.originalVertexNormals[i].copy(face.vertexNormals[i]);\n                }\n            }\n        }\n        // use temp geometry to compute face and vertex normals for each morph\n        const tmpGeo = new Geometry();\n        tmpGeo.faces = this.faces;\n        for (let i = 0, il = this.morphTargets.length; i < il; i++) {\n            // create on first access\n            if (!this.morphNormals[i]) {\n                this.morphNormals[i] = {\n                    faceNormals: [],\n                    vertexNormals: [],\n                };\n                for (let f = 0, fl = this.faces.length; f < fl; f++) {\n                    this.morphNormals[i].faceNormals.push(new Vector3());\n                    this.morphNormals[i].vertexNormals.push(new Triangle());\n                }\n            }\n            const morphNormals = this.morphNormals[i];\n            // set vertices to morph target\n            tmpGeo.vertices = this.morphTargets[i].vertices;\n            // compute morph normals\n            tmpGeo.computeFaceNormals();\n            tmpGeo.computeVertexNormals();\n            // store morph normals\n            for (let f = 0, fl = this.faces.length; f < fl; f++) {\n                const face = this.faces[f];\n                const faceNormal = morphNormals.faceNormals[f];\n                const vertexNormals = morphNormals.vertexNormals[f];\n                faceNormal.copy(face.normal);\n                vertexNormals.a.copy(face.vertexNormals[0]);\n                vertexNormals.b.copy(face.vertexNormals[1]);\n                vertexNormals.c.copy(face.vertexNormals[2]);\n            }\n        }\n        // restore original normals\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            face.normal = face.originalFaceNormal;\n            face.vertexNormals = face.originalVertexNormals;\n        }\n        return this;\n    }\n    computeLineDistances() {\n        let d = 0;\n        const vertices = this.vertices;\n        for (let i = 0, il = vertices.length; i < il; i++) {\n            if (i > 0) {\n                d += vertices[i].distanceTo(vertices[i - 1]);\n            }\n            this.lineDistances[i] = d;\n        }\n        return this;\n    }\n    computeBoundingBox() {\n        if (this.boundingBox === null) {\n            this.boundingBox = new Box3();\n        }\n        this.boundingBox.setFromPoints(this.vertices);\n        return this;\n    }\n    computeBoundingSphere() {\n        if (this.boundingSphere === null) {\n            this.boundingSphere = new Sphere();\n        }\n        this.boundingSphere.setFromPoints(this.vertices);\n        return this;\n    }\n    merge(geometry, matrix, materialIndexOffset = 0) {\n        let normalMatrix;\n        const vertexOffset = this.vertices.length, thisVertices = this.vertices, thatVertices = geometry.vertices, thisFaces = this.faces, thatFaces = geometry.faces, thisUvs = this.faceVertexUvs[0], thatUvs = geometry.faceVertexUvs[0], thisColors = this.colors, thatColors = geometry.colors;\n        if (matrix !== undefined) {\n            normalMatrix = new Matrix3().getNormalMatrix(matrix);\n        }\n        // vertices\n        for (let i = 0, il = thatVertices.length; i < il; i++) {\n            const vertexCopy = thatVertices[i].clone();\n            if (matrix !== undefined)\n                vertexCopy.applyMatrix4(matrix);\n            thisVertices.push(vertexCopy);\n        }\n        // colors\n        for (let i = 0, il = thatColors.length; i < il; i++) {\n            thisColors.push(thatColors[i].clone());\n        }\n        // faces\n        for (let i = 0, il = thatFaces.length; i < il; i++) {\n            const face = thatFaces[i], faceVertexNormals = face.vertexNormals, faceVertexColors = face.vertexColors;\n            const faceCopy = new GeometryFace(face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset);\n            faceCopy.normal.copy(face.normal);\n            if (normalMatrix !== undefined) {\n                faceCopy.normal.applyMatrix3(normalMatrix).normalize();\n            }\n            for (let j = 0, jl = faceVertexNormals.length; j < jl; j++) {\n                const normal = faceVertexNormals[j].clone();\n                if (normalMatrix !== undefined) {\n                    normal.applyMatrix3(normalMatrix).normalize();\n                }\n                faceCopy.vertexNormals.push(normal);\n            }\n            faceCopy.color.copy(face.color);\n            for (let j = 0, jl = faceVertexColors.length; j < jl; j++) {\n                const color = faceVertexColors[j];\n                faceCopy.vertexColors.push(color.clone());\n            }\n            faceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n            thisFaces.push(faceCopy);\n        }\n        // uvs\n        for (let i = 0, il = thatUvs.length; i < il; i++) {\n            const uv = thatUvs[i], uvCopy = [];\n            if (uv === undefined) {\n                continue;\n            }\n            for (let j = 0, jl = uv.length; j < jl; j++) {\n                uvCopy.push(uv[j].clone());\n            }\n            thisUvs.push(uvCopy);\n        }\n        return this;\n    }\n    mergeMesh(mesh) {\n        if (mesh.geometry instanceof Geometry) {\n            if (mesh.matrixAutoUpdate) {\n                mesh.updateMatrix();\n            }\n            this.merge(mesh.geometry, mesh.matrix);\n        }\n        else {\n            console.error(`THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.`, mesh.geometry);\n        }\n    }\n    /**\n     * Checks for duplicate vertices with hashmap.\n     * Duplicated vertices are removed\n     * and faces' vertices are updated.\n     * @returns {number}\n     */\n    mergeVertices() {\n        /**\n         * Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n         * @type {{}}\n         */\n        const verticesMap = {};\n        const unique = [], changes = [];\n        /**\n         * number of decimal points, e.g. 4 for epsilon of 0.0001\n         * @type {number}\n         */\n        const precisionPoints = 4;\n        const precision = Math.pow(10, precisionPoints);\n        for (let i = 0, il = this.vertices.length; i < il; i++) {\n            const v = this.vertices[i];\n            const key = [\n                Math.round(v.x * precision),\n                Math.round(v.y * precision),\n                Math.round(v.z * precision),\n            ].join(\"_\");\n            if (verticesMap[key] === undefined) {\n                verticesMap[key] = i;\n                unique.push(this.vertices[i]);\n                changes[i] = unique.length - 1;\n            }\n            else {\n                // console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n                changes[i] = changes[verticesMap[key]];\n            }\n        }\n        // if faces are completely degenerate after merging vertices, we\n        // have to remove them from the geometry.\n        const faceIndicesToRemove = [];\n        for (let i = 0, il = this.faces.length; i < il; i++) {\n            const face = this.faces[i];\n            face.a = changes[face.a];\n            face.b = changes[face.b];\n            face.c = changes[face.c];\n            const indices = [face.a, face.b, face.c];\n            // if any duplicate vertices are found in a Face3\n            // we have to remove the face as nothing can be saved\n            for (let n = 0; n < 3; n++) {\n                if (indices[n] === indices[(n + 1) % 3]) {\n                    faceIndicesToRemove.push(i);\n                    break;\n                }\n            }\n        }\n        for (let i = faceIndicesToRemove.length - 1; i >= 0; i--) {\n            const idx = faceIndicesToRemove[i];\n            this.faces.splice(idx, 1);\n            for (let j = 0, jl = this.faceVertexUvs.length; j < jl; j++) {\n                this.faceVertexUvs[j].splice(idx, 1);\n            }\n        }\n        // Use unique set of vertices\n        const diff = this.vertices.length - unique.length;\n        this.vertices = unique;\n        return diff;\n    }\n    setFromPoints(points) {\n        this.vertices = [];\n        for (let i = 0, l = points.length; i < l; i++) {\n            const point = points[i];\n            this.vertices.push(new Vector3(point.x, point.y, point.z || 0));\n        }\n        return this;\n    }\n    sortFacesByMaterialIndex() {\n        const faces = this.faces;\n        const length = faces.length;\n        // tag faces\n        for (let i = 0; i < length; i++) {\n            faces[i].id = i;\n        }\n        // sort faces\n        faces.sort((a, b) => {\n            return a.materialIndex - b.materialIndex;\n        });\n        // sort uvs\n        const uvs1 = this.faceVertexUvs[0];\n        const uvs2 = this.faceVertexUvs[1];\n        let newUvs1, newUvs2;\n        if (uvs1 && uvs1.length === length)\n            newUvs1 = [];\n        if (uvs2 && uvs2.length === length)\n            newUvs2 = [];\n        for (let i = 0; i < length; i++) {\n            const id = faces[i].id;\n            if (newUvs1)\n                newUvs1.push(uvs1[id]);\n            if (newUvs2)\n                newUvs2.push(uvs2[id]);\n        }\n        if (newUvs1)\n            this.faceVertexUvs[0] = newUvs1;\n        if (newUvs2)\n            this.faceVertexUvs[1] = newUvs2;\n        return this;\n    }\n    copy(source) {\n        // reset\n        this.vertices = [];\n        this.colors = [];\n        this.faces = [];\n        this.faceVertexUvs = [[]];\n        this.morphTargets = [];\n        this.morphNormals = [];\n        this.skinWeights = [];\n        this.skinIndices = [];\n        this.lineDistances = [];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n        // name\n        this.name = source.name;\n        // vertices\n        const vertices = source.vertices;\n        for (let i = 0, il = vertices.length; i < il; i++) {\n            this.vertices.push(vertices[i].clone());\n        }\n        // colors\n        const colors = source.colors;\n        for (let i = 0, il = colors.length; i < il; i++) {\n            this.colors.push(colors[i].clone());\n        }\n        // faces\n        const faces = source.faces;\n        for (let i = 0, il = faces.length; i < il; i++) {\n            this.faces.push(faces[i].clone());\n        }\n        // face vertex uvs\n        for (let i = 0, il = source.faceVertexUvs.length; i < il; i++) {\n            const faceVertexUvs = source.faceVertexUvs[i];\n            if (this.faceVertexUvs[i] === undefined) {\n                this.faceVertexUvs[i] = [];\n            }\n            for (let j = 0, jl = faceVertexUvs.length; j < jl; j++) {\n                const uvs = faceVertexUvs[j];\n                const uvsCopy = [];\n                for (let k = 0, kl = uvs.length; k < kl; k++) {\n                    uvsCopy.push(uvs[k].clone());\n                }\n                this.faceVertexUvs[i].push(uvsCopy);\n            }\n        }\n        // morph targets\n        const morphTargets = source.morphTargets;\n        for (let i = 0, il = morphTargets.length; i < il; i++) {\n            const morphTarget = { name: morphTargets[i].name };\n            // vertices\n            if (morphTargets[i].vertices !== undefined) {\n                morphTarget.vertices = [];\n                for (let j = 0, jl = morphTargets[i].vertices.length; j < jl; j++) {\n                    morphTarget.vertices.push(morphTargets[i].vertices[j].clone());\n                }\n            }\n            // normals\n            if (morphTargets[i].normals !== undefined) {\n                morphTarget.normals = [];\n                for (let j = 0, jl = morphTargets[i].normals.length; j < jl; j++) {\n                    morphTarget.normals.push(morphTargets[i].normals[j].clone());\n                }\n            }\n            this.morphTargets.push(morphTarget);\n        }\n        // morph normals\n        const morphNormals = source.morphNormals;\n        for (let i = 0, il = morphNormals.length; i < il; i++) {\n            const morphNormal = {};\n            // vertex normals\n            if (morphNormals[i].vertexNormals !== undefined) {\n                morphNormal.vertexNormals = [];\n                for (let j = 0, jl = morphNormals[i].vertexNormals.length; j < jl; j++) {\n                    morphNormal.vertexNormals.push(morphNormals[i].vertexNormals[j].clone());\n                }\n            }\n            // face normals\n            if (morphNormals[i].faceNormals !== undefined) {\n                morphNormal.faceNormals = [];\n                for (let j = 0, jl = morphNormals[i].faceNormals.length; j < jl; j++) {\n                    morphNormal.faceNormals.push(morphNormals[i].faceNormals[j].clone());\n                }\n            }\n            this.morphNormals.push(morphNormal);\n        }\n        // skin weights\n        const skinWeights = source.skinWeights;\n        for (let i = 0, il = skinWeights.length; i < il; i++) {\n            this.skinWeights.push(skinWeights[i].clone());\n        }\n        // skin indices\n        const skinIndices = source.skinIndices;\n        for (let i = 0, il = skinIndices.length; i < il; i++) {\n            this.skinIndices.push(skinIndices[i].clone());\n        }\n        // line distances\n        const lineDistances = source.lineDistances;\n        for (let i = 0, il = lineDistances.length; i < il; i++) {\n            this.lineDistances.push(lineDistances[i]);\n        }\n        // bounding box\n        const boundingBox = source.boundingBox;\n        if (boundingBox !== null) {\n            this.boundingBox = boundingBox.clone();\n        }\n        // bounding sphere\n        const boundingSphere = source.boundingSphere;\n        if (boundingSphere !== null) {\n            this.boundingSphere = boundingSphere.clone();\n        }\n        // update flags\n        this.elementsNeedUpdate = source.elementsNeedUpdate;\n        this.verticesNeedUpdate = source.verticesNeedUpdate;\n        this.uvsNeedUpdate = source.uvsNeedUpdate;\n        this.normalsNeedUpdate = source.normalsNeedUpdate;\n        this.colorsNeedUpdate = source.colorsNeedUpdate;\n        this.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n        this.groupsNeedUpdate = source.groupsNeedUpdate;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { BufferAttribute } from \"./BufferAttribute\";\nexport class InstancedBufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized = false, meshPerAttribute = 1) {\n        super(array, itemSize, normalized);\n        this.meshPerAttribute = 1;\n        this.meshPerAttribute = meshPerAttribute;\n    }\n    copy(source) {\n        super.copy(source);\n        this.meshPerAttribute = source.meshPerAttribute;\n        return this;\n    }\n}\n","import { BufferGeometry } from \"./BufferGeometry\";\nexport class InstancedBufferGeometry extends BufferGeometry {\n    constructor() {\n        super(...arguments);\n        this.type = \"InstancedBufferGeometry\";\n    }\n    copy(source) {\n        super.copy(source);\n        this.maxInstancedCount = source.maxInstancedCount;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { InterleavedBufferAttribute } from \"./InterleavedBufferAttribute\";\nexport class InstancedInterleavedBufferAttribute extends InterleavedBufferAttribute {\n    constructor(array, stride, itemSize, offset, normalized = false, meshPerAttribute = 1) {\n        super(array, stride, itemSize, offset, normalized);\n        this.meshPerAttribute = 1;\n        this.meshPerAttribute = meshPerAttribute;\n    }\n    copy(source) {\n        super.copy(source);\n        this.meshPerAttribute = source.meshPerAttribute;\n        return this;\n    }\n}\n","import { MathUtil } from \"../math/Math\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Vector4 } from \"../math/Vector4\";\nexport class InterleavedBufferAttribute {\n    constructor(array, stride, itemSize, offset, normalized = false) {\n        this.uuid = MathUtil.generateUUID();\n        this.array = undefined;\n        this.stride = 1;\n        this.count = 0;\n        this.dynamic = false;\n        this.updateRange = { offset: 0, count: -1 };\n        this.version = 0;\n        this.normalized = false;\n        this.array = array;\n        this.stride = stride;\n        this.count = array !== undefined ? array.length / stride : 0;\n        this.itemSize = itemSize;\n        this.offset = offset;\n        this.normalized = normalized;\n    }\n    set needsUpdate(value) {\n        if (value === true)\n            this.version++;\n    }\n    setArray(array) {\n        this.count = array !== undefined ? array.length / this.stride : 0;\n        this.array = array;\n        return this;\n    }\n    setDynamic(value) {\n        this.dynamic = value;\n        return this;\n    }\n    copy(source) {\n        this.array = new source.array.constructor(source.array);\n        this.stride = source.stride;\n        this.count = source.count;\n        this.dynamic = source.dynamic;\n        return this;\n    }\n    set(value, offset = 0) {\n        this.array.set(value, offset);\n        return this;\n    }\n    get(offset = 0, length = 1) {\n        return this.array.slice(offset, length);\n    }\n    copyAt(index1, attribute, index2) {\n        index1 *= this.stride;\n        index2 *= attribute.stride;\n        for (let i = 0, l = this.stride; i < l; i++) {\n            this.array[index1 + i] = attribute.array[index2 + i];\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor(this.array, this.stride).copy(this);\n    }\n    setProperty(index, property, value) {\n        property = property.toLowerCase();\n        if (property && property.length <= 4 && property.replace(/[xyzw]/g, \"\").length === 0) {\n            const offsetMap = { x: 0, y: 1, z: 2 };\n            if (property.length === 1 && typeof value === \"number\") {\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]] = value;\n            }\n            else if (property.length === 2 && value instanceof Vector2) {\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]] = value.y;\n            }\n            else if (property.length === 3 && value instanceof Vector3) {\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]] = value.y;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(2)]] = value.z;\n            }\n            else if (property.length === 4 && value instanceof Vector4) {\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]] = value.y;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(2)]] = value.z;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(3)]] = value.w;\n            }\n        }\n        return this;\n    }\n    getProperty(index, property) {\n        property = property.toLowerCase();\n        if (property && property.length <= 4 && property.replace(/[xyzw]/g, \"\").length === 0) {\n            const offsetMap = { x: 0, y: 1, z: 2 };\n            if (property.length === 1) {\n                return this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]];\n            }\n            else if (property.length === 2) {\n                return new Vector2(this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]]);\n            }\n            else if (property.length === 3) {\n                return new Vector3(this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(2)]]);\n            }\n            else if (property.length === 4) {\n                return new Vector4(this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(2)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(3)]]);\n            }\n        }\n        return undefined;\n    }\n}\n","export class Layers {\n    constructor() {\n        this.mask = 1 | 0;\n    }\n    set(channel) {\n        this.mask = (1 << channel) | 0;\n    }\n    enable(channel) {\n        this.mask |= (1 << channel) | 0;\n    }\n    toggle(channel) {\n        this.mask ^= (1 << channel) | 0;\n    }\n    disable(channel) {\n        this.mask &= ~((1 << channel) | 0);\n    }\n    test(layers) {\n        return (this.mask & layers.mask) !== 0;\n    }\n}\n","import { Camera } from \"../cameras/Camera\";\nimport { Euler } from \"../math/Euler\";\nimport { MathUtil } from \"../math/Math\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { EventDispatcher } from \"./EventDispatcher\";\nimport { Layers } from \"./Layers\";\nlet object3DId = 0;\nexport class Object3D extends EventDispatcher {\n    constructor() {\n        super(...arguments);\n        this.id = object3DId++;\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.type = \"Object3D\";\n        this.parent = null;\n        this.children = [];\n        this.up = new Vector3().copy(Object3D.DefaultUp);\n        this.matrix = new Matrix4();\n        this.matrixWorld = new Matrix4();\n        this.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n        this.matrixWorldNeedsUpdate = false;\n        this.layers = new Layers();\n        this.visible = true;\n        this.castShadow = false;\n        this.receiveShadow = false;\n        this.frustumCulled = true;\n        this.renderOrder = 0;\n        this.userData = {};\n        this.position = new Vector3();\n        this.rotation = new Euler();\n        this.quaternion = new Quaternion();\n        this.scale = new Vector3(1, 1, 1);\n        this.modelViewMatrix = new Matrix4();\n        this.normalMatrix = new Matrix3();\n        this.onBeforeRender = function () { };\n        this.onAfterRender = function () { };\n    }\n    updateMatrix() {\n        this.matrix.compose(this.position, this.quaternion, this.scale);\n        this.matrixWorldNeedsUpdate = true;\n        return this;\n    }\n    updateMatrixWorld(force = false) {\n        if (this.matrixAutoUpdate) {\n            return this.updateMatrix();\n        }\n        if (this.matrixWorldNeedsUpdate || force) {\n            if (this.parent === null) {\n                this.matrixWorld.copy(this.matrix);\n            }\n            else {\n                this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n            }\n            this.matrixWorldNeedsUpdate = false;\n            force = true;\n        }\n        // update children\n        const children = this.children;\n        for (let i = 0, l = children.length; i < l; i++) {\n            children[i].updateMatrixWorld(force);\n        }\n        return this;\n    }\n    raycast(raycaster, intersections) { }\n    applyMatrix(matrix) {\n        this.matrix.multiplyMatrices(matrix, this.matrix);\n        this.matrix.decompose(this.position, this.quaternion, this.scale);\n        return this;\n    }\n    applyQuaternion(q) {\n        this.quaternion.premultiply(q);\n        return this;\n    }\n    /**\n     * assumes axis is normalized\n     * @param axis\n     * @param angle\n     * @returns {Object3D}\n     */\n    setRotationFromAxisAngle(axis, angle) {\n        this.quaternion.setFromAxisAngle(axis, angle);\n        return this;\n    }\n    setRotationFromEuler(euler) {\n        this.quaternion.setFromEuler(euler);\n        return this;\n    }\n    /**\n     * assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n     * @param m\n     * @returns {Object3D}\n     */\n    setRotationFromMatrix(m) {\n        this.quaternion.setFromRotationMatrix(m);\n        return this;\n    }\n    /**\n     * assumes q is normalized\n     * @param q\n     * @returns {Object3D}\n     */\n    setRotationFromQuaternion(q) {\n        this.quaternion.copy(q);\n        return this;\n    }\n    rotateOnAxis(axis, angle) {\n        const q = new Quaternion();\n        q.setFromAxisAngle(axis, angle);\n        this.quaternion.multiply(q);\n        return this;\n    }\n    /**\n     * rotate object on axis in world space\n     * axis is assumed to be normalized\n     * method assumes no rotated parent\n     * @param axis\n     * @param angle\n     * @returns {Object3D}\n     */\n    rotateOnWorldAxis(axis, angle) {\n        const q = new Quaternion();\n        q.setFromAxisAngle(axis, angle);\n        this.quaternion.premultiply(q);\n        return this;\n    }\n    rotateX(angle) {\n        return this.rotateOnAxis(new Vector3(1, 0, 0), angle);\n    }\n    rotateY(angle) {\n        return this.rotateOnAxis(new Vector3(0, 1, 0), angle);\n    }\n    rotateZ(angle) {\n        return this.rotateOnAxis(new Vector3(0, 0, 1), angle);\n    }\n    /**\n     * translate object by distance along axis in object space\n     * axis is assumed to be normalized\n     * @param axis\n     * @param distance\n     * @returns {Object3D}\n     */\n    translateOnAxis(axis, distance) {\n        const vec = new Vector3();\n        vec.copy(axis).applyQuaternion(this.quaternion);\n        this.position.add(vec.multiplyScalar(distance));\n        return this;\n    }\n    translateX(distance) {\n        return this.translateOnAxis(new Vector3(1, 0, 0), distance);\n    }\n    translateY(distance) {\n        return this.translateOnAxis(new Vector3(0, 1, 0), distance);\n    }\n    translateZ(distance) {\n        return this.translateOnAxis(new Vector3(0, 0, 1), distance);\n    }\n    localToWorld(vector) {\n        return vector.applyMatrix4(this.matrixWorld);\n    }\n    worldToLocal(vector) {\n        return vector.applyMatrix4(new Matrix4().getInverse(this.matrixWorld));\n    }\n    lookAt(vec) {\n        const mat = new Matrix4();\n        const vector = new Vector3();\n        if (this instanceof Camera) {\n            mat.lookAt(this.position, vector, this.up);\n        }\n        else {\n            mat.lookAt(vector, this.position, this.up);\n        }\n        this.quaternion.setFromRotationMatrix(mat);\n        return this;\n    }\n    add(object, ...objects) {\n        if (objects.length > 1) {\n            for (let i = 0; i < objects.length; i++) {\n                this.add(objects[i]);\n            }\n            return this;\n        }\n        if (object === this) {\n            console.error(`THREE.Object3D.add: object can't be added as a child of itself. ${object}`);\n            return this;\n        }\n        if (object.parent !== null) {\n            object.parent.remove(object);\n        }\n        object.parent = this;\n        object.dispatchEvent({ type: \"added\" });\n        this.children.push(object);\n        return this;\n    }\n    remove(object, ...objects) {\n        if (objects.length > 1) {\n            for (let i = 0; i < objects.length; i++) {\n                this.remove(objects[i]);\n            }\n            return this;\n        }\n        const index = this.children.indexOf(object);\n        if (index !== -1) {\n            object.parent = null;\n            object.dispatchEvent({ type: \"removed\" });\n            this.children.splice(index, 1);\n        }\n        return this;\n    }\n    get worldPosition() {\n        this.updateMatrixWorld(true);\n        return new Vector3().setFromMatrixPosition(this.matrixWorld);\n    }\n    get worldQuaternion() {\n        const position = new Vector3();\n        const scale = new Vector3();\n        const result = new Quaternion();\n        this.updateMatrixWorld(true);\n        this.matrixWorld.decompose(position, result, scale);\n        return result;\n    }\n    get worldRotation() {\n        return new Euler().setFromQuaternion(this.worldQuaternion, this.rotation.order);\n    }\n    get worldScale() {\n        const position = new Vector3();\n        const quaternion = new Quaternion();\n        const result = new Vector3();\n        this.updateMatrixWorld(true);\n        this.matrixWorld.decompose(position, quaternion, result);\n        return result;\n    }\n    get worldDirection() {\n        return new Vector3().set(0, 0, 1).applyQuaternion(this.worldQuaternion);\n    }\n    traverse(callback) {\n        callback(this);\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].traverse(callback);\n        }\n    }\n    traverseVisible(callback) {\n        if (this.visible === false)\n            return;\n        callback(this);\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].traverseVisible(callback);\n        }\n    }\n    traverseAncestors(callback) {\n        if (this.parent !== null) {\n            callback(this.parent);\n            this.parent.traverseAncestors(callback);\n        }\n    }\n    clone(recursive = false) {\n        return new this.constructor().copy(this, recursive);\n    }\n    copy(source, recursive = true) {\n        this.name = source.name;\n        this.up.copy(source.up);\n        this.position.copy(source.position);\n        this.quaternion.copy(source.quaternion);\n        this.scale.copy(source.scale);\n        this.matrix.copy(source.matrix);\n        this.matrixWorld.copy(source.matrixWorld);\n        this.matrixAutoUpdate = source.matrixAutoUpdate;\n        this.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n        this.layers.mask = source.layers.mask;\n        this.visible = source.visible;\n        this.castShadow = source.castShadow;\n        this.receiveShadow = source.receiveShadow;\n        this.frustumCulled = source.frustumCulled;\n        this.renderOrder = source.renderOrder;\n        this.userData = JSON.parse(JSON.stringify(source.userData));\n        if (recursive === true) {\n            for (let i = 0; i < source.children.length; i++) {\n                this.add(source.children[i].clone());\n            }\n        }\n        return this;\n    }\n}\nObject3D.DefaultUp = new Vector3(0, 1, 0);\nObject3D.DefaultMatrixAutoUpdate = true;\n","import { OrthographicCamera } from \"../cameras/OrthographicCamera\";\nimport { PerspectiveCamera } from \"../cameras/PerspectiveCamera\";\nimport { Ray } from \"../math/Ray\";\nimport { unprojectVector3onCamera } from \"../utils\";\nfunction intersectObject(object, raycaster, intersects, recursive = false) {\n    if (object.visible === false)\n        return;\n    object.raycast(raycaster, intersects);\n    if (recursive === true) {\n        const children = object.children;\n        for (let i = 0, l = children.length; i < l; i++) {\n            intersectObject(children[i], raycaster, intersects, true);\n        }\n    }\n}\nexport class Raycaster {\n    constructor(origin, direction, near = 0, far = Infinity) {\n        this.params = {\n            LOD: {},\n            Line: {},\n            Mesh: {},\n            Points: { threshold: 1 },\n            Sprite: {},\n        };\n        this.near = 0;\n        this.far = Infinity;\n        this.linePrecision = 1;\n        this.ray = new Ray(origin, direction);\n        this.near = near;\n        this.far = far;\n    }\n    set(origin, direction) {\n        this.ray.set(origin, direction);\n        return this;\n    }\n    setFromCamera(coords, camera) {\n        if (camera && camera instanceof PerspectiveCamera) {\n            this.ray.origin.setFromMatrixPosition(camera.matrixWorld);\n            this.ray.direction.set(coords.x, coords.y, 0.5);\n            unprojectVector3onCamera(this.ray.direction, camera);\n            this.ray.direction.sub(this.ray.origin).normalize();\n        }\n        else if (camera && camera instanceof OrthographicCamera) {\n            this.ray.origin.set(coords.x, coords.y, (camera.near + camera.far) / (camera.near - camera.far));\n            unprojectVector3onCamera(this.ray.origin, camera); // set origin in plane of camera\n            this.ray.direction.set(0, 0, -1).transformDirection(camera.matrixWorld);\n        }\n        else {\n            console.error(`THREE.Raycaster: Unsupported camera type.`);\n        }\n        return this;\n    }\n    intersectObject(object, recursive = false) {\n        const intersects = [];\n        intersectObject(object, this, intersects, recursive);\n        intersects.sort((a, b) => a.distance - b.distance);\n        return intersects;\n    }\n    intersectObjects(objects, recursive = false) {\n        const intersects = [];\n        for (let i = 0, l = objects.length; i < l; i++) {\n            intersectObject(objects[i], this, intersects, recursive);\n        }\n        intersects.sort((a, b) => a.distance - b.distance);\n        return intersects;\n    }\n}\n","import { Object3D } from \"../../core/Object3D\";\nexport class ImmediateRenderObject extends Object3D {\n    constructor(material) {\n        super();\n        this.material = material;\n    }\n}\n","import { Float32BufferAttribute } from \"../core/BufferAttribute\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class BoxGeometry extends Geometry {\n    constructor(width, height, depth, widthSegments, heightSegments, depthSegments) {\n        super();\n        this.type = \"BoxGeometry\";\n        this.parameters = {\n            depth: depth,\n            depthSegments: depthSegments,\n            height: height,\n            heightSegments: heightSegments,\n            width: width,\n            widthSegments: widthSegments,\n        };\n    }\n}\nexport class BoxBufferGeometry extends BufferGeometry {\n    constructor(width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1) {\n        super();\n        this.type = \"BoxBufferGeometry\";\n        this.parameters = {\n            depth: depth,\n            depthSegments: depthSegments,\n            height: height,\n            heightSegments: heightSegments,\n            width: width,\n            widthSegments: widthSegments,\n        };\n        widthSegments = Math.floor(widthSegments);\n        heightSegments = Math.floor(heightSegments);\n        depthSegments = Math.floor(depthSegments);\n        // buffers\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        // helper variables\n        let numberOfVertices = 0;\n        let groupStart = 0;\n        const buildPlane = (u, v, w, uDir, vDir, width2, height2, depth2, gridX, gridY, materialIndex) => {\n            const segmentWidth = width2 / gridX;\n            const segmentHeight = height2 / gridY;\n            const widthHalf = width2 / 2;\n            const heightHalf = height2 / 2;\n            const depthHalf = depth2 / 2;\n            const gridX1 = gridX + 1;\n            const gridY1 = gridY + 1;\n            let vertexCounter = 0;\n            let groupCount = 0;\n            // generate vertices, normals and uvs\n            for (let iy = 0; iy < gridY1; iy++) {\n                const y = iy * segmentHeight - heightHalf;\n                for (let ix = 0; ix < gridX1; ix++) {\n                    const x = ix * segmentWidth - widthHalf;\n                    const vector = new Vector3();\n                    // set values to correct vector component\n                    vector[u] = x * uDir;\n                    vector[v] = y * vDir;\n                    vector[w] = depthHalf;\n                    // now apply vector to vertex buffer\n                    vertices.push(vector.x, vector.y, vector.z);\n                    // set values to correct vector component\n                    vector[u] = 0;\n                    vector[v] = 0;\n                    vector[w] = depth2 > 0 ? 1 : -1;\n                    // now apply vector to normal buffer\n                    normals.push(vector.x, vector.y, vector.z);\n                    // uvs\n                    uvs.push(ix / gridX);\n                    uvs.push(1 - iy / gridY);\n                    // counters\n                    vertexCounter += 1;\n                }\n            }\n            // indices\n            // 1. you need three indices to draw a single face\n            // 2. a single segment consists of two faces\n            // 3. so we need to generate six (2*3) indices per segment\n            for (let iy = 0; iy < gridY; iy++) {\n                for (let ix = 0; ix < gridX; ix++) {\n                    const a = numberOfVertices + ix + gridX1 * iy;\n                    const b = numberOfVertices + ix + gridX1 * (iy + 1);\n                    const c = numberOfVertices + (ix + 1) + gridX1 * (iy + 1);\n                    const d = numberOfVertices + (ix + 1) + gridX1 * iy;\n                    // faces\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n                    // increase counter\n                    groupCount += 6;\n                }\n            }\n            // add a group to the geometry. this will ensure multi material support\n            this.addGroup(groupStart, groupCount, materialIndex);\n            // calculate new start value for groups\n            groupStart += groupCount;\n            // update total number of vertices\n            numberOfVertices += vertexCounter;\n        };\n        // build each side of the box geometry\n        buildPlane(\"z\", \"y\", \"x\", -1, -1, depth, height, width, depthSegments, heightSegments, 0); // px\n        buildPlane(\"z\", \"y\", \"x\", 1, -1, depth, height, -width, depthSegments, heightSegments, 1); // nx\n        buildPlane(\"x\", \"z\", \"y\", 1, 1, width, depth, height, widthSegments, depthSegments, 2); // py\n        buildPlane(\"x\", \"z\", \"y\", 1, -1, width, depth, -height, widthSegments, depthSegments, 3); // ny\n        buildPlane(\"x\", \"y\", \"z\", 1, -1, width, height, depth, widthSegments, heightSegments, 4); // pz\n        buildPlane(\"x\", \"y\", \"z\", -1, -1, width, height, -depth, widthSegments, heightSegments, 5); // nz\n        // build geometry\n        this.setIndex(indices);\n        this.addAttribute(\"position\", new Float32BufferAttribute(vertices, 3));\n        this.addAttribute(\"normal\", new Float32BufferAttribute(normals, 3));\n        this.addAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\n    }\n}\n","import { Float32BufferAttribute } from \"../core/BufferAttribute\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nexport class CircleGeometry extends Geometry {\n    constructor(radius, segments, thetaStart, thetaLength) {\n        super();\n        this.type = \"CircleGeometry\";\n        this.parameters = {\n            radius: radius,\n            segments: segments,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n        this.fromBufferGeometry(new CircleBufferGeometry(radius, segments, thetaStart, thetaLength));\n        this.mergeVertices();\n    }\n}\nexport class CircleBufferGeometry extends BufferGeometry {\n    constructor(radius = 1, segments, thetaStart = 0, thetaLength = Math.PI * 2) {\n        super();\n        this.type = \"CircleBufferGeometry\";\n        this.parameters = {\n            radius: radius,\n            segments: segments,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n        segments = segments !== undefined ? Math.max(3, segments) : 8;\n        // buffers\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        // center point\n        vertices.push(0, 0, 0);\n        normals.push(0, 0, 1);\n        uvs.push(0.5, 0.5);\n        for (let s = 0, i = 3; s <= segments; s++, i += 3) {\n            const segment = thetaStart + s / segments * thetaLength;\n            // vertex\n            vertices.push(radius * Math.cos(segment), radius * Math.sin(segment), 0);\n            // normal\n            normals.push(0, 0, 1);\n            // uvs\n            uvs.push((vertices[i] / radius + 1) / 2, (vertices[i + 1] / radius + 1) / 2);\n        }\n        // indices\n        for (let i = 1; i <= segments; i++) {\n            indices.push(i, i + 1, 0);\n        }\n        // build geometry\n        this.setIndex(indices);\n        this.addAttribute(\"position\", new Float32BufferAttribute(vertices, 3));\n        this.addAttribute(\"normal\", new Float32BufferAttribute(normals, 3));\n        this.addAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\n    }\n}\n","import { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { CylinderBufferGeometry, CylinderGeometry } from \"./CylinderGeometry\";\nexport class ConeGeometry extends Geometry {\n    constructor(radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength) {\n        super();\n        this.type = \"ConeGeometry\";\n        CylinderGeometry.call(this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength);\n        this.parameters = {\n            height: height,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            radialSegments: radialSegments,\n            radius: radius,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n    }\n}\nexport class ConeBufferGeometry extends BufferGeometry {\n    constructor(radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength) {\n        super();\n        this.type = \"ConeBufferGeometry\";\n        CylinderBufferGeometry.call(this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength);\n        this.parameters = {\n            height: height,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            radialSegments: radialSegments,\n            radius: radius,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n    }\n}\n","import { Float32BufferAttribute } from \"../core/BufferAttribute\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class CylinderGeometry extends Geometry {\n    constructor(radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength) {\n        super();\n        this.type = \"CylinderGeometry\";\n        this.parameters = {\n            height: height,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            radialSegments: radialSegments,\n            radiusBottom: radiusBottom,\n            radiusTop: radiusTop,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n        this.fromBufferGeometry(new CylinderBufferGeometry(radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength));\n        this.mergeVertices();\n    }\n}\nexport class CylinderBufferGeometry extends BufferGeometry {\n    constructor(radiusTop = 1, radiusBottom = 1, height = 1, radialSegments = 9, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2) {\n        super();\n        this.type = \"CylinderBufferGeometry\";\n        this.parameters = {\n            height: height,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            radialSegments: radialSegments,\n            radiusBottom: radiusBottom,\n            radiusTop: radiusTop,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n        radialSegments = Math.floor(radialSegments);\n        heightSegments = Math.floor(heightSegments);\n        // buffers\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        // helper variables\n        let index = 0;\n        const indexArray = [];\n        const halfHeight = height / 2;\n        let groupStart = 0;\n        const generateCap = (top) => {\n            let centerIndexStart, centerIndexEnd;\n            let groupCount = 0;\n            const radius = top ? radiusTop : radiusBottom;\n            const sign = top ? 1 : -1;\n            // save the index of the first center vertex\n            centerIndexStart = index;\n            // first we generate the center vertex data of the cap.\n            // because the geometry needs one set of uvs per face,\n            // we must generate a center vertex per face/segment\n            for (let x = 1; x <= radialSegments; x++) {\n                // vertex\n                vertices.push(0, halfHeight * sign, 0);\n                // normal\n                normals.push(0, sign, 0);\n                // uv\n                uvs.push(0.5, 0.5);\n                // increase index\n                index++;\n            }\n            // save the index of the last center vertex\n            centerIndexEnd = index;\n            // now we generate the surrounding vertices, normals and uvs\n            for (let x = 0; x <= radialSegments; x++) {\n                const u = x / radialSegments;\n                const theta = u * thetaLength + thetaStart;\n                const cosTheta = Math.cos(theta);\n                const sinTheta = Math.sin(theta);\n                // vertex\n                vertices.push(radius * sinTheta, halfHeight * sign, radius * cosTheta);\n                // normal\n                normals.push(0, sign, 0);\n                // uv\n                uvs.push(cosTheta * 0.5 + 0.5, sinTheta * 0.5 * sign + 0.5);\n                // increase index\n                index++;\n            }\n            // generate indices\n            for (let x = 0; x < radialSegments; x++) {\n                const c = centerIndexStart + x;\n                const i = centerIndexEnd + x;\n                if (top) {\n                    // face top\n                    indices.push(i, i + 1, c);\n                }\n                else {\n                    // face bottom\n                    indices.push(i + 1, i, c);\n                }\n                groupCount += 3;\n            }\n            // add a group to the geometry. this will ensure multi material support\n            this.addGroup(groupStart, groupCount, top === true ? 1 : 2);\n            // calculate new start value for groups\n            groupStart += groupCount;\n        };\n        const generateTorso = () => {\n            let groupCount = 0;\n            // this will be used to calculate the normal\n            const slope = (radiusBottom - radiusTop) / height;\n            // generate vertices, normals and uvs\n            for (let y = 0; y <= heightSegments; y++) {\n                const indexRow = [];\n                const v = y / heightSegments;\n                // calculate the radius of the current row\n                const radius = v * (radiusBottom - radiusTop) + radiusTop;\n                for (let x = 0; x <= radialSegments; x++) {\n                    const u = x / radialSegments;\n                    const theta = u * thetaLength + thetaStart;\n                    const sinTheta = Math.sin(theta);\n                    const cosTheta = Math.cos(theta);\n                    // vertex\n                    vertices.push(radius * sinTheta, -v * height + halfHeight, radius * cosTheta);\n                    // normal\n                    const normal = new Vector3();\n                    normal.set(sinTheta, slope, cosTheta).normalize();\n                    normals.push(normal.x, normal.y, normal.z);\n                    // uv\n                    uvs.push(u, 1 - v);\n                    // save index of vertex in respective row\n                    indexRow.push(index++);\n                }\n                // now save vertices of the row in our index array\n                indexArray.push(indexRow);\n            }\n            // generate indices\n            for (let x = 0; x < radialSegments; x++) {\n                for (let y = 0; y < heightSegments; y++) {\n                    // we use the index array to access the correct indices\n                    const a = indexArray[y][x];\n                    const b = indexArray[y + 1][x];\n                    const c = indexArray[y + 1][x + 1];\n                    const d = indexArray[y][x + 1];\n                    // faces\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n                    // update group counter\n                    groupCount += 6;\n                }\n            }\n            // add a group to the geometry. this will ensure multi material support\n            this.addGroup(groupStart, groupCount, 0);\n            // calculate new start value for groups\n            groupStart += groupCount;\n        };\n        // generate geometry\n        generateTorso();\n        if (openEnded === false) {\n            if (radiusTop > 0)\n                generateCap(true);\n            if (radiusBottom > 0)\n                generateCap(false);\n        }\n        // build geometry\n        this.setIndex(indices);\n        this.addAttribute(\"position\", new Float32BufferAttribute(vertices, 3));\n        this.addAttribute(\"normal\", new Float32BufferAttribute(normals, 3));\n        this.addAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\n    }\n}\n","/*\nexport { WireframeGeometry } from './WireframeGeometry';\nexport { ParametricGeometry, ParametricBufferGeometry } from './ParametricGeometry';\nexport { TetrahedronGeometry, TetrahedronBufferGeometry } from './TetrahedronGeometry';\nexport { OctahedronGeometry, OctahedronBufferGeometry } from './OctahedronGeometry';\nexport { IcosahedronGeometry, IcosahedronBufferGeometry } from './IcosahedronGeometry';\nexport { DodecahedronGeometry, DodecahedronBufferGeometry } from './DodecahedronGeometry';\nexport { PolyhedronGeometry, PolyhedronBufferGeometry } from './PolyhedronGeometry';\nexport { TubeGeometry, TubeBufferGeometry } from './TubeGeometry';\nexport { TorusKnotGeometry, TorusKnotBufferGeometry } from './TorusKnotGeometry';\nexport { TorusGeometry, TorusBufferGeometry } from './TorusGeometry';\nexport { TextGeometry, TextBufferGeometry } from './TextGeometry';\nexport { SphereGeometry, SphereBufferGeometry } from './SphereGeometry';\nexport { RingGeometry, RingBufferGeometry } from './RingGeometry';\nexport { LatheGeometry, LatheBufferGeometry } from './LatheGeometry';\nexport { ShapeGeometry, ShapeBufferGeometry } from './ShapeGeometry';\nexport { ExtrudeGeometry, ExtrudeBufferGeometry } from './ExtrudeGeometry';\nexport { EdgesGeometry } from './EdgesGeometry';\n*/\nexport { PlaneGeometry, PlaneBufferGeometry } from \"./PlaneGeometry\";\nexport { ConeGeometry, ConeBufferGeometry } from \"./ConeGeometry\";\nexport { CylinderGeometry, CylinderBufferGeometry } from \"./CylinderGeometry\";\nexport { CircleGeometry, CircleBufferGeometry } from \"./CircleGeometry\";\nexport { BoxGeometry, BoxBufferGeometry } from \"./BoxGeometry\";\n","import { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Float32BufferAttribute } from \"../core/BufferAttribute\";\nexport class PlaneGeometry extends Geometry {\n    constructor(width, height, widthSegments, heightSegments) {\n        super();\n        this.type = \"PlaneGeometry\";\n        this.parameters = {\n            width: width,\n            height: height,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments,\n        };\n        this.fromBufferGeometry(new PlaneBufferGeometry(width, height, widthSegments, heightSegments));\n        this.mergeVertices();\n    }\n}\nexport class PlaneBufferGeometry extends BufferGeometry {\n    constructor(width = 1, height = 1, widthSegments = 1, heightSegments = 1) {\n        super();\n        this.type = \"PlaneBufferGeometry\";\n        this.parameters = {\n            width: width,\n            height: height,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments,\n        };\n        const widthHalf = width / 2;\n        const heightHalf = height / 2;\n        const gridX = Math.floor(widthSegments) || 1;\n        const gridY = Math.floor(heightSegments) || 1;\n        const gridX1 = gridX + 1;\n        const gridY1 = gridY + 1;\n        const segmentWidth = width / gridX;\n        const segmentHeight = height / gridY;\n        // buffers\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        // generate vertices, normals and uvs\n        for (let iy = 0; iy < gridY1; iy++) {\n            const y = iy * segmentHeight - heightHalf;\n            for (let ix = 0; ix < gridX1; ix++) {\n                const x = ix * segmentWidth - widthHalf;\n                vertices.push(x, -y, 0);\n                normals.push(0, 0, 1);\n                uvs.push(ix / gridX);\n                uvs.push(1 - iy / gridY);\n            }\n        }\n        // indices\n        for (let iy = 0; iy < gridY; iy++) {\n            for (let ix = 0; ix < gridX; ix++) {\n                const a = ix + gridX1 * iy;\n                const b = ix + gridX1 * (iy + 1);\n                const c = ix + 1 + gridX1 * (iy + 1);\n                const d = ix + 1 + gridX1 * iy;\n                // faces\n                indices.push(a, b, d);\n                indices.push(b, c, d);\n            }\n        }\n        // build geometry\n        this.setIndex(indices);\n        this.addAttribute(\"position\", new Float32BufferAttribute(vertices, 3));\n        this.addAttribute(\"normal\", new Float32BufferAttribute(normals, 3));\n        this.addAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\n    }\n}\n","import { Light } from \"./Light\";\nexport class AmbientLight extends Light {\n    constructor(color, intensity) {\n        super(color, intensity);\n        this.type = \"AmbientLight\";\n        this.castShadow = false;\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { DirectionalLightShadow } from \"./DirectionalLightShadow\";\nimport { Light } from \"./Light\";\nexport class DirectionalLight extends Light {\n    constructor(color, intensity) {\n        super(color, intensity);\n        this.type = \"DirectionalLight\";\n        this.target = new Object3D();\n        this.shadow = new DirectionalLightShadow();\n        this.position = Object3D.DefaultUp.clone();\n        this.updateMatrix();\n    }\n    copy(source) {\n        super.copy(source);\n        this.target = source.target.clone();\n        this.shadow = source.shadow.clone();\n        return this;\n    }\n}\n","import { OrthographicCamera } from \"../cameras/OrthographicCamera\";\nimport { LightShadow } from \"./LightShadow\";\nexport class DirectionalLightShadow extends LightShadow {\n    constructor() {\n        super(new OrthographicCamera(-5, 5, 5, -5, 0.5, 500));\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Light } from \"./Light\";\nexport class HemisphereLight extends Light {\n    constructor(skyColor, groundColor, intensity) {\n        super(skyColor, intensity);\n        this.type = \"HemisphereLight\";\n        this.castShadow = false;\n        this.groundColor = groundColor;\n        this.position = Object3D.DefaultUp.clone();\n        this.updateMatrix();\n    }\n    copy(source) {\n        super.copy(source);\n        this.groundColor.copy(source.groundColor);\n        return this;\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Color } from \"../math/Color\";\nexport class Light extends Object3D {\n    constructor(color = new Color(), intensity = 1) {\n        super();\n        this.type = \"Light\";\n        this.intensity = 1;\n        this.receiveShadow = false;\n        this.color = color;\n        this.intensity = intensity;\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.intensity = source.intensity;\n        return this;\n    }\n}\n","import { Matrix4 } from \"../math/Matrix4\";\nimport { Vector2 } from \"../math/Vector2\";\nexport class LightShadow {\n    constructor(camera) {\n        this.bias = 0;\n        this.radius = 1;\n        this.mapSize = new Vector2(512, 512);\n        this.map = null;\n        this.matrix = new Matrix4();\n        this.camera = camera;\n    }\n    copy(source) {\n        this.camera = source.camera.clone();\n        this.bias = source.bias;\n        this.radius = source.radius;\n        this.mapSize.copy(source.mapSize);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { PerspectiveCamera } from \"../cameras/PerspectiveCamera\";\nimport { Light } from \"./Light\";\nimport { LightShadow } from \"./LightShadow\";\nexport class PointLight extends Light {\n    constructor(color, intensity, distance = 0, decay = 1) {\n        super(color, intensity);\n        this.type = \"PointLight\";\n        this.distance = 0;\n        this.decay = 1;\n        this.distance = distance;\n        this.decay = decay;\n        this.shadow = new LightShadow(new PerspectiveCamera(90, 1, 0.5, 500));\n    }\n    /**\n     * ntensity = power per solid angle.\n     * ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n     * @returns {number}\n     */\n    get power() {\n        return this.intensity * 4 * Math.PI;\n    }\n    set power(power) {\n        this.intensity = power / (4 * Math.PI);\n    }\n    copy(source) {\n        super.copy(source);\n        this.distance = source.distance;\n        this.decay = source.decay;\n        this.shadow = source.shadow.clone();\n        return this;\n    }\n}\n","import { Light } from \"./Light\";\nexport class RectAreaLight extends Light {\n    constructor(color, intensity, width = 10, height = 10) {\n        super(color, intensity);\n        this.type = \"RectAreaLight\";\n        this.width = 10;\n        this.height = 10;\n        this.width = width;\n        this.height = height;\n    }\n    copy(source) {\n        super.copy(source);\n        this.width = source.width;\n        this.height = source.height;\n        return this;\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Light } from \"./Light\";\nimport { SpotLightShadow } from \"./SpotLightShadow\";\nexport class SpotLight extends Light {\n    constructor(color, intensity, distance = 0, angle = Math.PI / 3, penumbra = 0, decay = 1) {\n        super(color, intensity);\n        this.type = \"SpotLight\";\n        this.target = new Object3D();\n        this.distance = 0;\n        this.angle = Math.PI / 3;\n        this.penumbra = 0;\n        this.decay = 0;\n        this.position = Object3D.DefaultUp.clone();\n        this.updateMatrix();\n        this.distance = distance;\n        this.angle = angle;\n        this.penumbra = penumbra;\n        this.decay = decay;\n        this.shadow = new SpotLightShadow();\n    }\n    get power() {\n        return this.intensity * Math.PI;\n    }\n    set power(power) {\n        this.intensity = power / Math.PI;\n    }\n    copy(source) {\n        super.copy(source);\n        this.distance = source.distance;\n        this.angle = source.angle;\n        this.penumbra = source.penumbra;\n        this.decay = source.decay;\n        this.target = source.target.clone();\n        this.shadow = source.shadow.clone();\n        return this;\n    }\n}\n","import { PerspectiveCamera } from \"../cameras/PerspectiveCamera\";\nimport { MathUtil } from \"../math/Math\";\nimport { LightShadow } from \"./LightShadow\";\nexport class SpotLightShadow extends LightShadow {\n    constructor() {\n        super(new PerspectiveCamera(50, 1, 0.5, 500));\n    }\n    update(light) {\n        const camera = this.camera;\n        const fov = MathUtil.RAD2DEG * 2 * light.angle;\n        const aspect = this.mapSize.width / this.mapSize.height;\n        const far = light.distance || camera.far;\n        if (fov !== camera.fov || aspect !== camera.aspect || far !== camera.far) {\n            camera.fov = fov;\n            camera.aspect = aspect;\n            camera.far = far;\n        }\n        return this;\n    }\n    clone() {\n        return super.clone();\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class LineBasicMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"LineBasicMaterial\";\n        this.color = new Color().setHex(0xffffff);\n        this.lights = false;\n        this.linecap = \"round\";\n        this.linejoin = \"round\";\n        this.linewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.linewidth = source.linewidth;\n        this.linecap = source.linecap;\n        this.linejoin = source.linejoin;\n        return this;\n    }\n}\n","import { LineBasicMaterial } from \"./LineBasicMaterial\";\nexport class LineDashedMaterial extends LineBasicMaterial {\n    constructor(parameters) {\n        super(parameters);\n        this.type = \"LineDashedMaterial\";\n        this.dashSize = 3;\n        this.gapSize = 1;\n        this.scale = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        this.scale = source.scale;\n        this.dashSize = source.dashSize;\n        this.gapSize = source.gapSize;\n        return this;\n    }\n}\n","import { AddEquation, FlatShading, FrontSide, LessEqualDepth, NoColors, NormalBlending, OneMinusSrcAlphaFactor, SrcAlphaFactor, } from \"../constants\";\nimport { EventDispatcher } from \"../core/EventDispatcher\";\nimport { Color } from \"../math/Color\";\nimport { MathUtil } from \"../math/Math\";\nimport { Vector3 } from \"../math/Vector3\";\nlet materialId = 0;\nexport class Material extends EventDispatcher {\n    constructor() {\n        super(...arguments);\n        this.id = materialId++;\n        this.uuid = MathUtil.generateUUID();\n        this.type = \"Material\";\n        this.alphaTest = 0;\n        this.blending = NormalBlending;\n        this.blendDst = OneMinusSrcAlphaFactor;\n        this.blendDstAlpha = null;\n        this.blendEquation = AddEquation;\n        this.blendEquationAlpha = null;\n        this.blendSrc = SrcAlphaFactor;\n        this.blendSrcAlpha = null;\n        this.clipIntersection = false;\n        this.clippingPlanes = null;\n        this.clipShadows = false;\n        this.colorWrite = true;\n        this.depthFunc = LessEqualDepth;\n        this.depthTest = true;\n        this.depthWrite = true;\n        this.dithering = false;\n        this.flatShading = false;\n        this.fog = true;\n        this.lights = true;\n        /**\n         * For mesh type extension\n         */\n        this.morphTargets = false;\n        this.name = \"\";\n        this.needsUpdate = true;\n        this.opacity = 1;\n        this.overdraw = 0;\n        this.polygonOffset = false;\n        this.polygonOffsetFactor = 0;\n        this.polygonOffsetUnits = 0;\n        this.premultipliedAlpha = false;\n        this.side = FrontSide;\n        this.transparent = false;\n        this.userData = {};\n        /**\n         * THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n         */\n        this.vertexColors = NoColors;\n        /**\n         * Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n         * @type {number}\n         */\n        this.visible = true;\n    }\n    setValues(values) {\n        if (values === undefined)\n            return this;\n        for (const key in values) {\n            if (!values.hasOwnProperty(key))\n                continue;\n            const newValue = values[key];\n            if (newValue === undefined) {\n                console.warn(`THREE.Material: \"${key}\" parameter is undefined.`);\n                continue;\n            }\n            /**\n             * for backward compatability if shading is set in the constructor\n             */\n            if (key === \"shading\") {\n                console.warn(`THREE.${this.type}: .shading has been removed. Use the boolean .flatShading instead.`);\n                this.flatShading = newValue === FlatShading;\n                continue;\n            }\n            const currentValue = this[key];\n            if (currentValue === undefined) {\n                console.warn(`THREE.${this.type}: \"${key}\" is not a property of this material.`);\n                continue;\n            }\n            if (currentValue && currentValue instanceof Color) {\n                if (newValue instanceof Color)\n                    currentValue.copy(newValue);\n                else if (typeof newValue === \"number\") {\n                    currentValue.setHex(newValue);\n                }\n                else if (typeof newValue === \"string\") {\n                    currentValue.setStyle(newValue);\n                }\n            }\n            else if (currentValue && currentValue instanceof Vector3 && (newValue && newValue instanceof Vector3)) {\n                currentValue.copy(newValue);\n            }\n            else if (key === \"overdraw\") {\n                /**\n                 * ensure overdraw is backwards-compatible with legacy boolean type\n                 * @type {Number}\n                 */\n                this[key] = Number(newValue);\n            }\n            else {\n                this[key] = newValue;\n            }\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(source) {\n        this.name = source.name;\n        this.fog = source.fog;\n        this.lights = source.lights;\n        this.blending = source.blending;\n        this.side = source.side;\n        this.flatShading = source.flatShading;\n        this.vertexColors = source.vertexColors;\n        this.opacity = source.opacity;\n        this.transparent = source.transparent;\n        this.blendSrc = source.blendSrc;\n        this.blendDst = source.blendDst;\n        this.blendEquation = source.blendEquation;\n        this.blendSrcAlpha = source.blendSrcAlpha;\n        this.blendDstAlpha = source.blendDstAlpha;\n        this.blendEquationAlpha = source.blendEquationAlpha;\n        this.depthFunc = source.depthFunc;\n        this.depthTest = source.depthTest;\n        this.depthWrite = source.depthWrite;\n        this.colorWrite = source.colorWrite;\n        this.precision = source.precision;\n        this.polygonOffset = source.polygonOffset;\n        this.polygonOffsetFactor = source.polygonOffsetFactor;\n        this.polygonOffsetUnits = source.polygonOffsetUnits;\n        this.dithering = source.dithering;\n        this.alphaTest = source.alphaTest;\n        this.premultipliedAlpha = source.premultipliedAlpha;\n        this.overdraw = source.overdraw;\n        this.visible = source.visible;\n        this.userData = JSON.parse(JSON.stringify(source.userData));\n        this.clipShadows = source.clipShadows;\n        this.clipIntersection = source.clipIntersection;\n        const srcPlanes = source.clippingPlanes;\n        let dstPlanes = null;\n        if (srcPlanes !== null) {\n            const n = srcPlanes.length;\n            dstPlanes = new Array(n);\n            for (let i = 0; i !== n; ++i) {\n                dstPlanes[i] = srcPlanes[i].clone();\n            }\n        }\n        this.clippingPlanes = dstPlanes;\n        this.shadowSide = source.shadowSide;\n        return this;\n    }\n    dispose() {\n        this.dispatchEvent({ type: \"dispose\" });\n    }\n}\n","export { ShadowMaterial } from \"./ShadowMaterial\";\nexport { SpriteMaterial } from \"./SpriteMaterial\";\nexport { RawShaderMaterial } from \"./RawShaderMaterial\";\nexport { ShaderMaterial } from \"./ShaderMaterial\";\nexport { PointsMaterial } from \"./PointsMaterial\";\nexport { MeshPhysicalMaterial } from \"./MeshPhysicalMaterial\";\nexport { MeshStandardMaterial } from \"./MeshStandardMaterial\";\nexport { MeshPhongMaterial } from \"./MeshPhongMaterial\";\nexport { MeshToonMaterial } from \"./MeshToonMaterial\";\nexport { MeshNormalMaterial } from \"./MeshNormalMaterial\";\nexport { MeshLambertMaterial } from \"./MeshLambertMaterial\";\nexport { MeshDepthMaterial } from \"./MeshDepthMaterial\";\nexport { MeshDistanceMaterial } from \"./MeshDistanceMaterial\";\nexport { MeshBasicMaterial } from \"./MeshBasicMaterial\";\nexport { LineDashedMaterial } from \"./LineDashedMaterial\";\nexport { LineBasicMaterial } from \"./LineBasicMaterial\";\nexport { Material } from \"./Material\";\n","import { MultiplyOperation } from \"../constants\";\nimport { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class MeshBasicMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshBasicMaterial\";\n        this.alphaMap = null;\n        this.aoMap = null;\n        this.aoMapIntensity = 1.0;\n        this.color = new Color().setHex(0xffffff);\n        this.combine = MultiplyOperation;\n        this.envMap = null;\n        this.lights = false;\n        this.lightMap = null;\n        this.lightMapIntensity = 1.0;\n        this.map = null;\n        this.morphTargets = false;\n        this.reflectivity = 1;\n        this.refractionRatio = 0.98;\n        this.skinning = false;\n        this.specularMap = null;\n        this.wireframe = false;\n        this.wireframeLinecap = \"round\";\n        this.wireframeLinejoin = \"round\";\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.map = source.map;\n        this.lightMap = source.lightMap;\n        this.lightMapIntensity = source.lightMapIntensity;\n        this.aoMap = source.aoMap;\n        this.aoMapIntensity = source.aoMapIntensity;\n        this.specularMap = source.specularMap;\n        this.alphaMap = source.alphaMap;\n        this.envMap = source.envMap;\n        this.combine = source.combine;\n        this.reflectivity = source.reflectivity;\n        this.refractionRatio = source.refractionRatio;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.wireframeLinecap = source.wireframeLinecap;\n        this.wireframeLinejoin = source.wireframeLinejoin;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        return this;\n    }\n}\n","import { BasicDepthPacking } from \"../constants\";\nimport { Material } from \"./Material\";\nexport class MeshDepthMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshDepthMaterial\";\n        this.alphaMap = null;\n        this.depthPacking = BasicDepthPacking;\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.displacementBias = 0;\n        this.fog = false;\n        this.lights = false;\n        this.map = null;\n        this.morphTargets = false;\n        this.skinning = false;\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.depthPacking = source.depthPacking;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.map = source.map;\n        this.alphaMap = source.alphaMap;\n        this.displacementMap = source.displacementMap;\n        this.displacementScale = source.displacementScale;\n        this.displacementBias = source.displacementBias;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        return this;\n    }\n}\n","import { Vector3 } from \"../math/Vector3\";\nimport { Material } from \"./Material\";\nexport class MeshDistanceMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshDepthMaterial\";\n        this.alphaMap = null;\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.displacementBias = 0;\n        this.farDistance = 1;\n        this.fog = false;\n        this.lights = false;\n        this.map = null;\n        this.morphTargets = false;\n        this.nearDistance = 1;\n        this.referencePosition = new Vector3();\n        this.skinning = false;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.referencePosition.copy(source.referencePosition);\n        this.nearDistance = source.nearDistance;\n        this.farDistance = source.farDistance;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.map = source.map;\n        this.alphaMap = source.alphaMap;\n        this.displacementMap = source.displacementMap;\n        this.displacementScale = source.displacementScale;\n        this.displacementBias = source.displacementBias;\n        return this;\n    }\n}\n","import { MultiplyOperation } from \"../constants\";\nimport { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class MeshLambertMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshLambertMaterial\";\n        this.aoMap = null;\n        this.aoMapIntensity = 1;\n        this.alphaMap = null;\n        this.color = new Color().setHex(0xffffff);\n        this.combine = MultiplyOperation;\n        this.emissive = new Color().setHex(0x000000);\n        this.emissiveIntensity = 1;\n        this.emissiveMap = null;\n        this.envMap = null;\n        this.map = null;\n        this.morphNormals = true;\n        this.morphTargets = true;\n        this.lightMap = null;\n        this.lightMapIntensity = 1;\n        this.skinning = false;\n        this.specularMap = null;\n        this.reflectivity = 1;\n        this.refractionRatio = 0.98;\n        this.wireframe = false;\n        this.wireframeLinecap = \"round\";\n        this.wireframeLinejoin = \"round\";\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.map = source.map;\n        this.lightMap = source.lightMap;\n        this.lightMapIntensity = source.lightMapIntensity;\n        this.aoMap = source.aoMap;\n        this.aoMapIntensity = source.aoMapIntensity;\n        this.emissive.copy(source.emissive);\n        this.emissiveMap = source.emissiveMap;\n        this.emissiveIntensity = source.emissiveIntensity;\n        this.specularMap = source.specularMap;\n        this.alphaMap = source.alphaMap;\n        this.envMap = source.envMap;\n        this.combine = source.combine;\n        this.reflectivity = source.reflectivity;\n        this.refractionRatio = source.refractionRatio;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.wireframeLinecap = source.wireframeLinecap;\n        this.wireframeLinejoin = source.wireframeLinejoin;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.morphNormals = source.morphNormals;\n        return this;\n    }\n}\n","import { Vector2 } from \"../math/Vector2\";\nimport { Material } from \"./Material\";\nexport class MeshNormalMaterial extends Material {\n    constructor(paramenters) {\n        super();\n        this.type = \"MeshNormalMaterial\";\n        this.bumpMap = null;\n        this.bumpScale = 1;\n        this.normalMap = null;\n        this.normalScale = new Vector2(1, 1);\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.displacementBias = 0;\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n        this.fog = false;\n        this.lights = false;\n        this.skinning = false;\n        this.morphTargets = false;\n        this.morphNormals = false;\n        this.setValues(paramenters);\n    }\n}\n","import { MultiplyOperation } from \"../constants\";\nimport { Color } from \"../math/Color\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Material } from \"./Material\";\n/**\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\nexport class MeshPhongMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshPhongMaterial\";\n        this.alphaMap = null;\n        this.aoMap = null;\n        this.aoMapIntensity = 1.0;\n        this.bumpMap = null;\n        this.bumpScale = 1;\n        this.color = new Color().setHex(0xffffff);\n        this.combine = MultiplyOperation;\n        this.displacementBias = 0;\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.emissive = new Color().setHex(0x000000);\n        this.emissiveIntensity = 1.0;\n        this.emissiveMap = null;\n        this.envMap = null;\n        this.lightMap = null;\n        this.lightMapIntensity = 1.0;\n        this.map = null;\n        this.morphNormals = false;\n        this.morphTargets = false;\n        this.normalMap = null;\n        this.normalScale = new Vector2(1, 1);\n        this.reflectivity = 1;\n        this.refractionRatio = 0.98;\n        this.shininess = 30;\n        this.skinning = false;\n        this.specular = new Color().setHex(0x111111);\n        this.specularMap = null;\n        this.wireframe = false;\n        this.wireframeLinecap = \"round\";\n        this.wireframeLinejoin = \"round\";\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.specular.copy(source.specular);\n        this.shininess = source.shininess;\n        this.map = source.map;\n        this.lightMap = source.lightMap;\n        this.lightMapIntensity = source.lightMapIntensity;\n        this.aoMap = source.aoMap;\n        this.aoMapIntensity = source.aoMapIntensity;\n        this.emissive.copy(source.emissive);\n        this.emissiveMap = source.emissiveMap;\n        this.emissiveIntensity = source.emissiveIntensity;\n        this.bumpMap = source.bumpMap;\n        this.bumpScale = source.bumpScale;\n        this.normalMap = source.normalMap;\n        this.normalScale.copy(source.normalScale);\n        this.displacementMap = source.displacementMap;\n        this.displacementScale = source.displacementScale;\n        this.displacementBias = source.displacementBias;\n        this.specularMap = source.specularMap;\n        this.alphaMap = source.alphaMap;\n        this.envMap = source.envMap;\n        this.combine = source.combine;\n        this.reflectivity = source.reflectivity;\n        this.refractionRatio = source.refractionRatio;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.wireframeLinecap = source.wireframeLinecap;\n        this.wireframeLinejoin = source.wireframeLinejoin;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.morphNormals = source.morphNormals;\n        return this;\n    }\n}\n","import { Material } from \"./Material\";\nexport class MeshPhysicalMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshPhysicalMaterial\";\n        // maps to F0 = 0.04\n        this.clearCoat = 0.0;\n        this.clearCoatRoughness = 0.0;\n        this.defines = { PHYSICAL: \"\" };\n        this.reflectivity = 0.5;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        this.defines = { PHYSICAL: \"\" };\n        this.reflectivity = source.reflectivity;\n        this.clearCoat = source.clearCoat;\n        this.clearCoatRoughness = source.clearCoatRoughness;\n        return this;\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Material } from \"./Material\";\n/**\n *\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\nexport class MeshStandardMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshStandardMaterial\";\n        this.alphaMap = null;\n        this.aoMap = null;\n        this.aoMapIntensity = 1.0;\n        this.bumpMap = null;\n        this.bumpScale = 1;\n        this.color = new Color().setHex(0xffffff);\n        this.defines = { STANDARD: \"\" };\n        this.displacementBias = 0;\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.emissive = new Color().setHex(0x000000);\n        this.emissiveIntensity = 1.0;\n        this.emissiveMap = null;\n        this.envMap = null;\n        this.envMapIntensity = 1.0;\n        this.lightMap = null;\n        this.lightMapIntensity = 1.0;\n        this.map = null;\n        this.metalness = 0.5;\n        this.metalnessMap = null;\n        this.morphNormals = false;\n        this.morphTargets = false;\n        this.normalMap = null;\n        this.normalScale = new Vector2(1, 1);\n        this.refractionRatio = 0.98;\n        this.roughness = 0.5;\n        this.roughnessMap = null;\n        this.skinning = false;\n        this.wireframe = false;\n        this.wireframeLinecap = \"round\";\n        this.wireframeLinejoin = \"round\";\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.defines = { STANDARD: \"\" };\n        this.color.copy(source.color);\n        this.roughness = source.roughness;\n        this.metalness = source.metalness;\n        this.map = source.map;\n        this.lightMap = source.lightMap;\n        this.lightMapIntensity = source.lightMapIntensity;\n        this.aoMap = source.aoMap;\n        this.aoMapIntensity = source.aoMapIntensity;\n        this.emissive.copy(source.emissive);\n        this.emissiveMap = source.emissiveMap;\n        this.emissiveIntensity = source.emissiveIntensity;\n        this.bumpMap = source.bumpMap;\n        this.bumpScale = source.bumpScale;\n        this.normalMap = source.normalMap;\n        this.normalScale.copy(source.normalScale);\n        this.displacementMap = source.displacementMap;\n        this.displacementScale = source.displacementScale;\n        this.displacementBias = source.displacementBias;\n        this.roughnessMap = source.roughnessMap;\n        this.metalnessMap = source.metalnessMap;\n        this.alphaMap = source.alphaMap;\n        this.envMap = source.envMap;\n        this.envMapIntensity = source.envMapIntensity;\n        this.refractionRatio = source.refractionRatio;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.wireframeLinecap = source.wireframeLinecap;\n        this.wireframeLinejoin = source.wireframeLinejoin;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.morphNormals = source.morphNormals;\n        return this;\n    }\n}\n","import { MeshPhongMaterial } from \"./MeshPhongMaterial\";\nexport class MeshToonMaterial extends MeshPhongMaterial {\n    constructor(parameters) {\n        super(parameters);\n        this.type = \"MeshToonMaterial\";\n        this.defines = { TOON: \"\" };\n        this.gradientMap = null;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.gradientMap = source.gradientMap;\n        return this;\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class PointsMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"PointsMaterial\";\n        this.color = new Color().setHex(0xffffff);\n        this.lights = false;\n        this.map = null;\n        this.size = 1;\n        this.sizeAttenuation = true;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.map = source.map;\n        this.size = source.size;\n        this.sizeAttenuation = source.sizeAttenuation;\n        return this;\n    }\n}\n","import { ShaderMaterial } from \"./ShaderMaterial\";\nexport class RawShaderMaterial extends ShaderMaterial {\n}\n","import { UniformsUtils } from \"../renderers/shaders/UniformsUtils\";\nimport { Material } from \"./Material\";\nexport class ShaderMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"ShaderMaterial\";\n        this.defines = {};\n        this.uniforms = {};\n        this.vertexShader = `void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}`;\n        this.fragmentShader = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n        this.linewidth = 1;\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n        this.fog = false; // set to use scene fog\n        this.lights = false; // set to use scene lights\n        this.clipping = false; // set to use user-defined clipping planes\n        this.skinning = false; // set to use skinning attribute streams\n        this.morphTargets = false; // set to use morph targets\n        this.morphNormals = false; // set to use morph normals\n        this.extensions = {\n            derivatives: false,\n            drawBuffers: false,\n            fragDepth: false,\n            shaderTextureLOD: false,\n        };\n        // When rendered geometry doesn't include these attributes but the material does,\n        // use these default values in WebGL. This avoids errors when buffer data is missing.\n        this.defaultAttributeValues = {\n            color: [1, 1, 1],\n            uv: [0, 0],\n            uv2: [0, 0],\n        };\n        this.setValues(parameters);\n    }\n    copy(source) {\n        this.fragmentShader = source.fragmentShader;\n        this.vertexShader = source.vertexShader;\n        this.uniforms = UniformsUtils.clone(source.uniforms);\n        this.defines = source.defines;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.lights = source.lights;\n        this.clipping = source.clipping;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.morphNormals = source.morphNormals;\n        this.extensions = source.extensions;\n        return this;\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class ShadowMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"ShadowMaterial\";\n        this.color = new Color().setHex(0x000000);\n        this.transparent = true;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        return this;\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class SpriteMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"SpriteMaterial\";\n        this.color = new Color().setHex(0xffffff);\n        this.fog = false;\n        this.lights = false;\n        this.map = null;\n        this.rotation = 0;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.map = source.map;\n        this.rotation = source.rotation;\n        return this;\n    }\n}\n","import { Sphere } from \"./Sphere\";\nimport { Vector3 } from \"./Vector3\";\nimport { vectorFromBufferAttribute } from \"../utils\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nexport class Box3 {\n    constructor(min = new Vector3(+Infinity, +Infinity, +Infinity), max = new Vector3(-Infinity, -Infinity, -Infinity)) {\n        this.min = new Vector3(+Infinity, +Infinity, +Infinity);\n        this.max = new Vector3(-Infinity, -Infinity, -Infinity);\n        this.max = max;\n        this.min = min;\n    }\n    set(min, max) {\n        this.min.copy(min);\n        this.max.copy(max);\n        return this;\n    }\n    setFromArray(array) {\n        let minX = +Infinity, minY = +Infinity, minZ = +Infinity;\n        let maxX = -Infinity, maxY = -Infinity, maxZ = -Infinity;\n        for (let i = 0, l = array.length; i < l; i += 3) {\n            const x = array[i], y = array[i + 1], z = array[i + 2];\n            if (x < minX)\n                minX = x;\n            if (y < minY)\n                minY = y;\n            if (z < minZ)\n                minZ = z;\n            if (x > maxX)\n                maxX = x;\n            if (y > maxY)\n                maxY = y;\n            if (z > maxZ)\n                maxZ = z;\n        }\n        this.min.set(minX, minY, minZ);\n        this.max.set(maxX, maxY, maxZ);\n        return this;\n    }\n    setFromPoints(points) {\n        this.makeEmpty();\n        for (let i = 0, il = points.length; i < il; i++) {\n            this.expandByPoint(points[i]);\n        }\n        return this;\n    }\n    setFromCenterAndSize(center, size) {\n        const halfSize = new Vector3().copy(size).multiplyScalar(0.5);\n        this.min.copy(center).sub(halfSize);\n        this.max.copy(center).add(halfSize);\n        return this;\n    }\n    setFromObject(object) {\n        this.makeEmpty();\n        return this.expandByObject(object);\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(box) {\n        this.min.copy(box.min);\n        this.max.copy(box.max);\n        return this;\n    }\n    makeEmpty() {\n        this.min.x = this.min.y = this.min.z = +Infinity;\n        this.max.x = this.max.y = this.max.z = -Infinity;\n        return this;\n    }\n    /**\n     * this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n     * @returns {boolean}\n     */\n    isEmpty() {\n        return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;\n    }\n    getCenter() {\n        const result = new Vector3();\n        return this.isEmpty()\n            ? result.set(0, 0, 0)\n            : result\n                .copy(this.min)\n                .add(this.max)\n                .multiplyScalar(0.5);\n    }\n    getSize() {\n        const result = new Vector3();\n        return this.isEmpty() ? result.set(0, 0, 0) : result.copy(this.max).sub(this.min);\n    }\n    expandByPoint(point) {\n        this.min.min(point);\n        this.max.max(point);\n        return this;\n    }\n    expandByVector(vector) {\n        this.min.sub(vector);\n        this.max.add(vector);\n        return this;\n    }\n    expandByScalar(scalar) {\n        this.min.addScalar(-scalar);\n        this.max.addScalar(scalar);\n        return this;\n    }\n    /**\n     * TODO expandByObject\n     * @param object\n     * @returns {Box3}\n     */\n    expandByObject(object) {\n        // Computes the world-axis-aligned bounding box of an object (including its children),\n        // accounting for both the object's, and children's, world transforms\n        const traverse = (node) => {\n            const geometry = node.geometry;\n            if (geometry !== undefined) {\n                if (geometry instanceof Geometry) {\n                    const vertices = geometry.vertices;\n                    for (let i = 0, l = vertices.length; i < l; i++) {\n                        const v1 = new Vector3().copy(vertices[i]);\n                        v1.applyMatrix4(node.matrixWorld);\n                        this.expandByPoint(v1);\n                    }\n                }\n                else if (geometry instanceof BufferGeometry) {\n                    const attribute = geometry.attributes.position;\n                    if (attribute !== undefined) {\n                        for (let i = 0, l = attribute.count; i < l; i++) {\n                            const v1 = vectorFromBufferAttribute(new Vector3(), attribute, i).applyMatrix4(node.matrixWorld);\n                            this.expandByPoint(v1);\n                        }\n                    }\n                }\n            }\n        };\n        object.updateMatrixWorld(true);\n        object.traverse(traverse);\n        return this;\n    }\n    containsPoint(point) {\n        return !(point.x < this.min.x ||\n            point.x > this.max.x ||\n            point.y < this.min.y ||\n            point.y > this.max.y ||\n            point.z < this.min.z ||\n            point.z > this.max.z);\n    }\n    containsBox(box) {\n        return (this.min.x <= box.min.x &&\n            box.max.x <= this.max.x &&\n            this.min.y <= box.min.y &&\n            box.max.y <= this.max.y &&\n            this.min.z <= box.min.z &&\n            box.max.z <= this.max.z);\n    }\n    /**\n     * This can potentially have a divide by zero if the box has a size dimension of 0.\n     * @param point\n     * @returns {Vector3}\n     */\n    getParameter(point) {\n        const result = new Vector3();\n        return result.set((point.x - this.min.x) / (this.max.x - this.min.x), (point.y - this.min.y) / (this.max.y - this.min.y), (point.z - this.min.z) / (this.max.z - this.min.z));\n    }\n    /**\n     * using 6 splitting planes to rule out intersections\n     * @param box\n     * @returns {boolean}\n     */\n    intersectsBox(box) {\n        return !(box.max.x < this.min.x ||\n            box.min.x > this.max.x ||\n            box.max.y < this.min.y ||\n            box.min.y > this.max.y ||\n            box.max.z < this.min.z ||\n            box.min.z > this.max.z);\n    }\n    /**\n     * Find the point on the AABB closest to the sphere center.\n     * If that point is inside the sphere, the AABB and sphere intersect.\n     * @param sphere\n     * @returns {boolean}\n     */\n    intersectsSphere(sphere) {\n        const closestPoint = this.clampPoint(sphere.center);\n        return closestPoint.distanceToSquared(sphere.center) <= sphere.radius * sphere.radius;\n    }\n    /**\n     * We compute the minimum and maximum dot product values. If those values\n     * are on the same side (back or front) of the plane, then there is no intersection.\n     * @param plane\n     * @returns {boolean}\n     */\n    intersectsPlane(plane) {\n        let min, max;\n        if (plane.normal.x > 0) {\n            min = plane.normal.x * this.min.x;\n            max = plane.normal.x * this.max.x;\n        }\n        else {\n            min = plane.normal.x * this.max.x;\n            max = plane.normal.x * this.min.x;\n        }\n        if (plane.normal.y > 0) {\n            min += plane.normal.y * this.min.y;\n            max += plane.normal.y * this.max.y;\n        }\n        else {\n            min += plane.normal.y * this.max.y;\n            max += plane.normal.y * this.min.y;\n        }\n        if (plane.normal.z > 0) {\n            min += plane.normal.z * this.min.z;\n            max += plane.normal.z * this.max.z;\n        }\n        else {\n            min += plane.normal.z * this.max.z;\n            max += plane.normal.z * this.min.z;\n        }\n        return min <= plane.constant && max >= plane.constant;\n    }\n    clampPoint(point) {\n        return new Vector3().copy(point).clamp(this.min, this.max);\n    }\n    distanceToPoint(point) {\n        const clampedPoint = new Vector3().copy(point).clamp(this.min, this.max);\n        return clampedPoint.sub(point).length();\n    }\n    getBoundingSphere() {\n        const result = new Sphere();\n        result.center = this.getCenter();\n        result.radius = this.getSize().length() * 0.5;\n        return result;\n    }\n    intersect(box) {\n        this.min.max(box.min);\n        this.max.min(box.max);\n        // ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n        if (this.isEmpty())\n            this.makeEmpty();\n        return this;\n    }\n    union(box) {\n        this.min.min(box.min);\n        this.max.max(box.max);\n        return this;\n    }\n    applyMatrix4(matrix) {\n        // transform of empty box is an empty box.\n        if (this.isEmpty())\n            return this;\n        const points = [\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n        ];\n        // NOTE: I am using a binary pattern to specify all 2^3 combinations below\n        points[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(matrix); // 000\n        points[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(matrix); // 001\n        points[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(matrix); // 010\n        points[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(matrix); // 011\n        points[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(matrix); // 100\n        points[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(matrix); // 101\n        points[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(matrix); // 110\n        points[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(matrix); // 111\n        this.setFromPoints(points);\n        return this;\n    }\n    translate(offset) {\n        this.min.add(offset);\n        this.max.add(offset);\n        return this;\n    }\n    equals(box) {\n        return box.min.equals(this.min) && box.max.equals(this.max);\n    }\n}\n","import { MathUtil } from \"./Math\";\nfunction HUE_TO_RGB(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * 6 * (2 / 3 - t);\n    return p;\n}\nexport class Color {\n    constructor(r = 0, g = 0, b = 0) {\n        this.r = 1;\n        this.g = 1;\n        this.b = 1;\n        this.setRGB(r, g, b);\n    }\n    copy(color) {\n        this.r = color.r;\n        this.g = color.g;\n        this.b = color.b;\n        return this;\n    }\n    setScalar(scalar) {\n        this.r = scalar;\n        this.g = scalar;\n        this.b = scalar;\n        return this;\n    }\n    setHex(hex) {\n        hex = Math.floor(hex);\n        this.r = ((hex >> 16) & 255) / 255;\n        this.g = ((hex >> 8) & 255) / 255;\n        this.b = (hex & 255) / 255;\n        return this;\n    }\n    setRGB(r, g, b) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        return this;\n    }\n    /**\n     * HSL\n     * H: Hue  SSaturation  L Lightness \n     * @param h\n     * @param s\n     * @param l\n     * @returns {Color}\n     */\n    setHSL(h, s, l) {\n        // h,s,l ranges are in 0.0 - 1.0\n        h = MathUtil.euclideanModulo(h, 1);\n        s = MathUtil.clamp(s, 0, 1);\n        l = MathUtil.clamp(l, 0, 1);\n        if (s === 0) {\n            this.r = this.g = this.b = l;\n        }\n        else {\n            const p = l <= 0.5 ? l * (1 + s) : l + s - l * s;\n            const q = 2 * l - p;\n            this.r = HUE_TO_RGB(q, p, h + 1 / 3);\n            this.g = HUE_TO_RGB(q, p, h);\n            this.b = HUE_TO_RGB(q, p, h - 1 / 3);\n        }\n        return this;\n    }\n    setStyle(style) {\n        let matches;\n        /**\n         * rgb || hsl\n         */\n        if ((matches = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(style))) {\n            let color;\n            const name = matches[1];\n            const components = matches[2];\n            switch (name) {\n                case \"rgb\":\n                case \"rgba\":\n                    if ((color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components))) {\n                        // rgb(255,0,0) rgba(255,0,0,0.5)\n                        this.r = Math.min(255, parseInt(color[1], 10)) / 255;\n                        this.g = Math.min(255, parseInt(color[2], 10)) / 255;\n                        this.b = Math.min(255, parseInt(color[3], 10)) / 255;\n                        // handleAlpha(color[5]);\n                        return this;\n                    }\n                    if ((color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components))) {\n                        // rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n                        this.r = Math.min(100, parseInt(color[1], 10)) / 100;\n                        this.g = Math.min(100, parseInt(color[2], 10)) / 100;\n                        this.b = Math.min(100, parseInt(color[3], 10)) / 100;\n                        // handleAlpha(color[5]);\n                        return this;\n                    }\n                    break;\n                case \"hsl\":\n                case \"hsla\":\n                    if ((color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components))) {\n                        // hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n                        const h = parseFloat(color[1]) / 360;\n                        const s = parseInt(color[2], 10) / 100;\n                        const l = parseInt(color[3], 10) / 100;\n                        // handleAlpha(color[5]);\n                        return this.setHSL(h, s, l);\n                    }\n                    break;\n            }\n        }\n        else if ((matches = /^\\#([A-Fa-f0-9]+)$/.exec(style))) {\n            // hex color\n            const hex = matches[1];\n            const size = hex.length;\n            if (size === 3) {\n                // #ff0\n                this.r = parseInt(hex.charAt(0) + hex.charAt(0), 16) / 255;\n                this.g = parseInt(hex.charAt(1) + hex.charAt(1), 16) / 255;\n                this.b = parseInt(hex.charAt(2) + hex.charAt(2), 16) / 255;\n                return this;\n            }\n            else if (size === 6) {\n                // #ff0000\n                this.r = parseInt(hex.charAt(0) + hex.charAt(1), 16) / 255;\n                this.g = parseInt(hex.charAt(2) + hex.charAt(3), 16) / 255;\n                this.b = parseInt(hex.charAt(4) + hex.charAt(5), 16) / 255;\n                return this;\n            }\n        }\n        if (style && style.length > 0) {\n            // color keywords\n            const hex = Color.ColorKeywords[style];\n            if (hex !== undefined) {\n                // red\n                this.setHex(hex);\n            }\n            else {\n                console.warn(\"THREE.Color: Unknown color \" + style);\n            }\n        }\n        return this;\n    }\n    convertGammaToLinear(color, gammaFactor = 2.0) {\n        return this.setRGB(Math.pow(color.r, gammaFactor), Math.pow(color.g, gammaFactor), Math.pow(color.b, gammaFactor));\n    }\n    convertLinearToGamma(color, gammaFactor = 2.0) {\n        const safeInverse = gammaFactor > 0 ? 1.0 / gammaFactor : 1.0;\n        return this.setRGB(Math.pow(color.r, safeInverse), Math.pow(color.g, safeInverse), Math.pow(color.b, safeInverse));\n    }\n    getHex() {\n        return ((this.r * 255) << 16) ^ ((this.g * 255) << 8) ^ ((this.b * 255) << 0);\n    }\n    getHexString() {\n        return (\"000000\" + this.getHex().toString(16)).slice(-6);\n    }\n    getHSL(hsl = { h: 0, s: 0, l: 0 }) {\n        // h,s,l ranges are in 0.0 - 1.0\n        const { r, g, b } = this;\n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        let hue, saturation;\n        const lightness = (min + max) / 2.0;\n        if (min === max) {\n            hue = 0;\n            saturation = 0;\n        }\n        else {\n            const delta = max - min;\n            saturation = lightness <= 0.5 ? delta / (max + min) : delta / (2 - max - min);\n            switch (max) {\n                case r:\n                    hue = (g - b) / delta + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    hue = (b - r) / delta + 2;\n                    break;\n                case b:\n                    hue = (r - g) / delta + 4;\n                    break;\n            }\n            hue /= 6;\n        }\n        hsl.h = hue;\n        hsl.s = saturation;\n        hsl.l = lightness;\n        return hsl;\n    }\n    getStyle() {\n        const { r, g, b } = this;\n        return \"rgb(\" + ((r * 255) | 0) + \",\" + ((g * 255) | 0) + \",\" + ((b * 255) | 0) + \")\";\n    }\n    offsetHSL(h, s, l) {\n        const hsl = this.getHSL();\n        hsl.h += h;\n        hsl.s += s;\n        hsl.l += l;\n        return this.setHSL(hsl.h, hsl.s, hsl.l);\n    }\n    add(color) {\n        this.r = Math.min(1, this.r + color.r);\n        this.g = Math.min(1, this.g + color.g);\n        this.b = Math.min(1, this.b + color.b);\n        return this;\n    }\n    addScalar(scalar) {\n        this.r = Math.min(1, this.r + scalar);\n        this.g = Math.min(1, this.g + scalar);\n        this.b = Math.min(1, this.b + scalar);\n        return this;\n    }\n    sub(color) {\n        this.r = Math.max(0, this.r - color.r);\n        this.g = Math.max(0, this.g - color.g);\n        this.b = Math.max(0, this.b - color.b);\n        return this;\n    }\n    subScalar(scalar) {\n        this.r = Math.min(1, this.r - scalar);\n        this.g = Math.min(1, this.g - scalar);\n        this.b = Math.min(1, this.b - scalar);\n        return this;\n    }\n    multiply(color) {\n        this.r *= color.r;\n        this.g *= color.g;\n        this.b *= color.b;\n        return this;\n    }\n    multiplyScalar(scalar) {\n        this.r = Math.min(1, this.r * scalar);\n        this.g = Math.min(1, this.g * scalar);\n        this.b = Math.min(1, this.b * scalar);\n        return this;\n    }\n    lerp(color, alpha) {\n        this.r += (color.r - this.r) * alpha;\n        this.g += (color.g - this.g) * alpha;\n        this.b += (color.b - this.b) * alpha;\n        return this;\n    }\n    equals(c) {\n        return c.r === this.r && c.g === this.g && c.b === this.b;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\nColor.ColorKeywords = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32,\n};\n","import { MathUtil } from \"./Math\";\nimport { Matrix4 } from \"./Matrix4\";\nimport { Quaternion } from \"./Quaternion\";\nexport var EulerOrder;\n(function (EulerOrder) {\n    EulerOrder[EulerOrder[\"XYZ\"] = 0] = \"XYZ\";\n    EulerOrder[EulerOrder[\"YZX\"] = 1] = \"YZX\";\n    EulerOrder[EulerOrder[\"ZXY\"] = 2] = \"ZXY\";\n    EulerOrder[EulerOrder[\"XZY\"] = 3] = \"XZY\";\n    EulerOrder[EulerOrder[\"YXZ\"] = 4] = \"YXZ\";\n    EulerOrder[EulerOrder[\"ZYX\"] = 5] = \"ZYX\";\n})(EulerOrder || (EulerOrder = {}));\n/**\n * TODO: setFromVector3\n */\nexport class Euler {\n    constructor(x = 0, y = 0, z = 0) {\n        this._order = Euler.DefaultOrder;\n        this._x = x;\n        this._y = y;\n        this._z = z;\n    }\n    get x() {\n        return this._x;\n    }\n    set x(x) {\n        this._x = x;\n    }\n    get y() {\n        return this._y;\n    }\n    set y(y) {\n        this._y = y;\n    }\n    get z() {\n        return this._z;\n    }\n    set z(z) {\n        this._z = z;\n    }\n    get order() {\n        return this._order;\n    }\n    set order(_order) {\n        this._order = _order;\n    }\n    set(x, y, z, order) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._order = order;\n        return this;\n    }\n    copy(euler) {\n        return this.set(euler.x, euler.y, euler.z, euler.order);\n    }\n    /**\n     * assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n     * @param m\n     * @param order\n     * @returns {Euler}\n     */\n    setFromRotationMatrix(m, order = this.order) {\n        const clamp = MathUtil.clamp;\n        const te = m.elements;\n        const m11 = te[0], m12 = te[4], m13 = te[8];\n        const m21 = te[1], m22 = te[5], m23 = te[9];\n        const m31 = te[2], m32 = te[6], m33 = te[10];\n        if (order === EulerOrder.XYZ) {\n            this._y = Math.asin(clamp(m13, -1, 1));\n            if (Math.abs(m13) < 0.99999) {\n                this._x = Math.atan2(-m23, m33);\n                this._z = Math.atan2(-m12, m11);\n            }\n            else {\n                this._x = Math.atan2(m32, m22);\n                this._z = 0;\n            }\n        }\n        else if (order === EulerOrder.YXZ) {\n            this._x = Math.asin(-clamp(m23, -1, 1));\n            if (Math.abs(m23) < 0.99999) {\n                this._y = Math.atan2(m13, m33);\n                this._z = Math.atan2(m21, m22);\n            }\n            else {\n                this._y = Math.atan2(-m31, m11);\n                this._z = 0;\n            }\n        }\n        else if (order === EulerOrder.ZXY) {\n            this._x = Math.asin(clamp(m32, -1, 1));\n            if (Math.abs(m32) < 0.99999) {\n                this._y = Math.atan2(-m31, m33);\n                this._z = Math.atan2(-m12, m22);\n            }\n            else {\n                this._y = 0;\n                this._z = Math.atan2(m21, m11);\n            }\n        }\n        else if (order === EulerOrder.ZYX) {\n            this._y = Math.asin(-clamp(m31, -1, 1));\n            if (Math.abs(m31) < 0.99999) {\n                this._x = Math.atan2(m32, m33);\n                this._z = Math.atan2(m21, m11);\n            }\n            else {\n                this._x = 0;\n                this._z = Math.atan2(-m12, m22);\n            }\n        }\n        else if (order === EulerOrder.YZX) {\n            this._z = Math.asin(clamp(m21, -1, 1));\n            if (Math.abs(m21) < 0.99999) {\n                this._x = Math.atan2(-m23, m22);\n                this._y = Math.atan2(-m31, m11);\n            }\n            else {\n                this._x = 0;\n                this._y = Math.atan2(m13, m33);\n            }\n        }\n        else if (order === EulerOrder.XZY) {\n            this._z = Math.asin(-clamp(m12, -1, 1));\n            if (Math.abs(m12) < 0.99999) {\n                this._x = Math.atan2(m32, m22);\n                this._y = Math.atan2(m13, m11);\n            }\n            else {\n                this._x = Math.atan2(-m23, m33);\n                this._y = 0;\n            }\n        }\n        this.order = order;\n        return this;\n    }\n    setFromQuaternion(q, order) {\n        const matrix = new Matrix4();\n        matrix.makeRotationFromQuaternion(q);\n        return this.setFromRotationMatrix(matrix, order);\n    }\n    /**\n     * this discards revolution information -bhouston\n     * @param newOrder\n     * @returns {Euler}\n     */\n    reorder(newOrder) {\n        const q = new Quaternion();\n        q.setFromEuler(this);\n        return this.setFromQuaternion(q, newOrder);\n    }\n    equals(euler) {\n        return euler.x === this.x && euler.y === this.y && euler.z === this.z && euler.order === this.order;\n    }\n    fromArray(array) {\n        return this.set(array[0], array[1], array[2], array[3] || this.order);\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        array[offset + 2] = this.z;\n        array[offset + 3] = this.order;\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\nEuler.DefaultOrder = EulerOrder.XYZ;\n","import { Plane } from \"./Plane\";\nimport { Sphere } from \"./Sphere\";\nimport { Vector3 } from \"./Vector3\";\nexport class Frustum {\n    constructor(p0 = new Plane(), p1 = new Plane(), p2 = new Plane(), p3 = new Plane(), p4 = new Plane(), p5 = new Plane()) {\n        this.planes = [p0, p1, p2, p3, p4, p5];\n    }\n    set(p0, p1, p2, p3, p4, p5) {\n        const planes = this.planes;\n        planes[0].copy(p0);\n        planes[1].copy(p1);\n        planes[2].copy(p2);\n        planes[3].copy(p3);\n        planes[4].copy(p4);\n        planes[5].copy(p5);\n        return this;\n    }\n    copy(frustum) {\n        const planes = this.planes;\n        for (let i = 0; i < 6; i++) {\n            planes[i].copy(frustum.planes[i]);\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    setFromMatrix(m) {\n        const planes = this.planes;\n        const me = m.elements;\n        const me0 = me[0], me1 = me[1], me2 = me[2], me3 = me[3];\n        const me4 = me[4], me5 = me[5], me6 = me[6], me7 = me[7];\n        const me8 = me[8], me9 = me[9], me10 = me[10], me11 = me[11];\n        const me12 = me[12], me13 = me[13], me14 = me[14], me15 = me[15];\n        const setPlane = (plane, x, y, z, w) => {\n            plane.normal.set(x, y, z);\n            plane.constant = w;\n            plane.normalize();\n        };\n        setPlane(planes[0], me3 - me0, me7 - me4, me11 - me8, me15 - me12);\n        setPlane(planes[1], me3 + me0, me7 + me4, me11 + me8, me15 + me12);\n        setPlane(planes[2], me3 + me1, me7 + me5, me11 + me9, me15 + me13);\n        setPlane(planes[3], me3 - me1, me7 - me5, me11 - me9, me15 - me13);\n        setPlane(planes[4], me3 - me2, me7 - me6, me11 - me10, me15 - me14);\n        setPlane(planes[5], me3 + me2, me7 + me6, me11 + me10, me15 + me14);\n        return this;\n    }\n    intersectsObject(object) {\n        const geometry = object.geometry;\n        if (geometry.boundingSphere === null) {\n            geometry.computeBoundingSphere();\n        }\n        const sphere = new Sphere().copy(geometry.boundingSphere).applyMatrix4(object.matrixWorld);\n        return this.intersectsSphere(sphere);\n    }\n    intersectsSprite(sprite) {\n        const sphere = new Sphere();\n        sphere.center.set(0, 0, 0);\n        sphere.radius = 0.7071067811865476;\n        sphere.applyMatrix4(sprite.matrixWorld);\n        return this.intersectsSphere(sphere);\n    }\n    intersectsSphere(sphere) {\n        const planes = this.planes;\n        const center = sphere.center;\n        const negRadius = -sphere.radius;\n        for (let i = 0; i < 6; i++) {\n            const distance = planes[i].distanceToPoint(center);\n            if (distance < negRadius) {\n                return false;\n            }\n        }\n        return true;\n    }\n    intersectsBox(box) {\n        const p1 = new Vector3(), p2 = new Vector3();\n        const planes = this.planes;\n        for (let i = 0; i < 6; i++) {\n            const plane = planes[i];\n            p1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n            p2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n            p1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n            p2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n            p1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n            p2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n            const d1 = plane.distanceToPoint(p1);\n            const d2 = plane.distanceToPoint(p2);\n            // if both outside plane, no intersection\n            if (d1 < 0 && d2 < 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n    containsPoint(point) {\n        const planes = this.planes;\n        for (let i = 0; i < 6; i++) {\n            if (planes[i].distanceToPoint(point) < 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n","import { MathUtil } from \"./Math\";\nimport { Vector3 } from \"./Vector3\";\nexport class Line3 {\n    constructor(start = new Vector3(), end = new Vector3()) {\n        this.start = new Vector3();\n        this.end = new Vector3();\n        this.start = start;\n        this.end = end;\n    }\n    set(start, end) {\n        this.start.copy(start);\n        this.end.copy(end);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(line) {\n        this.start.copy(line.start);\n        this.end.copy(line.end);\n        return this;\n    }\n    getCenter() {\n        return new Vector3()\n            .copy(this.start)\n            .add(this.end)\n            .multiplyScalar(0.5);\n    }\n    delta() {\n        return new Vector3().copy(this.end).sub(this.start);\n    }\n    distanceSquared() {\n        return this.start.distanceToSquared(this.end);\n    }\n    distance() {\n        return this.start.distanceTo(this.end);\n    }\n    at(t) {\n        return this.delta()\n            .multiplyScalar(t)\n            .add(this.start);\n    }\n    closestPointToPointParameter(point, clampToLine = false) {\n        const startP = new Vector3();\n        const startEnd = new Vector3();\n        startP.copy(point).sub(this.start);\n        startEnd.copy(this.end).sub(this.start);\n        const startEnd2 = startEnd.dot(startEnd);\n        const startEndStartP = startEnd.dot(startP);\n        let t = startEndStartP / startEnd2;\n        if (clampToLine) {\n            t = MathUtil.clamp(t, 0, 1);\n        }\n        return t;\n    }\n    closestPointToPoint(point, clampToLine = false) {\n        const t = this.closestPointToPointParameter(point, clampToLine);\n        return this.delta()\n            .multiplyScalar(t)\n            .add(this.start);\n    }\n    applyMatrix4(matrix) {\n        this.start.applyMatrix4(matrix);\n        this.end.applyMatrix4(matrix);\n        return this;\n    }\n    equals(line) {\n        return line.start.equals(this.start) && line.end.equals(this.end);\n    }\n}\n","const lut = [];\nfor (let i = 0; i < 256; i++) {\n    lut[i] = (i < 16 ? \"0\" : \"\") + i.toString(16).toUpperCase();\n}\n/**\n * Finished\n */\nexport class MathUtil {\n    /**\n     * UUIDUUID\n     * http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n     * @returns {string}\n     */\n    static generateUUID() {\n        const d0 = (Math.random() * 0xffffffff) | 0;\n        const d1 = (Math.random() * 0xffffffff) | 0;\n        const d2 = (Math.random() * 0xffffffff) | 0;\n        const d3 = (Math.random() * 0xffffffff) | 0;\n        return (lut[d0 & 0xff] +\n            lut[(d0 >> 8) & 0xff] +\n            lut[(d0 >> 16) & 0xff] +\n            lut[(d0 >> 24) & 0xff] +\n            \"-\" +\n            lut[d1 & 0xff] +\n            lut[(d1 >> 8) & 0xff] +\n            \"-\" +\n            lut[((d1 >> 16) & 0x0f) | 0x40] +\n            lut[(d1 >> 24) & 0xff] +\n            \"-\" +\n            lut[(d2 & 0x3f) | 0x80] +\n            lut[(d2 >> 8) & 0xff] +\n            \"-\" +\n            lut[(d2 >> 16) & 0xff] +\n            lut[(d2 >> 24) & 0xff] +\n            lut[d3 & 0xff] +\n            lut[(d3 >> 8) & 0xff] +\n            lut[(d3 >> 16) & 0xff] +\n            lut[(d3 >> 24) & 0xff]);\n    }\n    /**\n     * value\n     * @param value\n     * @param min\n     * @param max\n     * @returns {number}\n     */\n    static clamp(value, min, max) {\n        return Math.max(min, Math.min(max, value));\n    }\n    /**\n     * \n     *  https://en.wikipedia.org/wiki/Modulo_operation\n     * +m\n     * @param n\n     * @param m\n     * @returns {number}\n     */\n    static euclideanModulo(n, m) {\n        return (n % m + m) % m;\n    }\n    /**\n     * xab\n     * @param x\n     * @param a1\n     * @param a2\n     * @param b1\n     * @param b2\n     * @returns {number}\n     */\n    static mapLinear(x, a1, a2, b1, b2) {\n        return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n    }\n    /**\n     * \n     * https://en.wikipedia.org/wiki/Linear_interpolation\n     * @param x\n     * @param y\n     * @param t\n     * @returns {number}\n     */\n    static lerp(x, y, t) {\n        return (1 - t) * x + t * y;\n    }\n    /**\n     * f(x) = 3 * x^2 - 2 * x^3\n     * f\"(x) = 6 * x - 6 * x^2 x \\in [0, 1] \\geq 0\n     * f(x)[0, 1]\n     * f(x)[0, 0.5][0.5 , 1]\n     * \n     * http://en.wikipedia.org/wiki/Smoothstep\n     * @param x\n     * @param min\n     * @param max\n     * @returns {number}\n     */\n    static smoothstep(x, min, max) {\n        if (x <= min)\n            return 0;\n        if (x >= max)\n            return 1;\n        x = (x - min) / (max - min);\n        return x * x * (3 - 2 * x);\n    }\n    /**\n     * \n     * @param x\n     * @param min\n     * @param max\n     * @returns {number}\n     */\n    static smootherstep(x, min, max) {\n        if (x <= min)\n            return 0;\n        if (x >= max)\n            return 1;\n        x = (x - min) / (max - min);\n        return x * x * x * (x * (x * 6 - 15) + 10);\n    }\n    /**\n     * \n     * @param low\n     * @param high\n     * @returns {number}\n     */\n    static randInt(low, high) {\n        return low + Math.floor(Math.random() * (high - low + 1));\n    }\n    /**\n     * \n     * @param low\n     * @param high\n     * @returns {number}\n     */\n    static randFloat(low, high) {\n        return low + Math.random() * (high - low);\n    }\n    /**\n     * [-range/2, range/2]\n     * @param range\n     * @returns {number}\n     */\n    static randFloatSpread(range) {\n        return range * (0.5 - Math.random());\n    }\n    /*****************************  *******************************/\n    static degToRad(degrees) {\n        return degrees * MathUtil.DEG2RAD;\n    }\n    static radToDeg(radians) {\n        return radians * MathUtil.RAD2DEG;\n    }\n    /**\n     * \n     * @param value\n     * @returns {boolean}\n     */\n    static isPowerOfTwo(value) {\n        return (value & (value - 1)) === 0 && value !== 0;\n    }\n    static ceilPowerOfTwo(value) {\n        return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));\n    }\n    static floorPowerOfTwo(value) {\n        return Math.pow(2, Math.floor(Math.log(value) / Math.LN2));\n    }\n}\n/**\n * /\n * @type {number}\n */\nMathUtil.DEG2RAD = Math.PI / 180;\n/**\n * /\n * @type {number}\n */\nMathUtil.RAD2DEG = 180 / Math.PI;\n","export class Matrix2 {\n    constructor() {\n        this.elements = [1, 0, 0, 1];\n    }\n    set(n11, n12, n21, n22) {\n        const te = this.elements;\n        te[0] = n11;\n        te[1] = n21;\n        te[3] = n12;\n        te[4] = n22;\n        return this;\n    }\n    identity() {\n        return this.set(1, 0, 0, 1);\n    }\n    copy(mat2) {\n        const te = this.elements;\n        const me = mat2.elements;\n        te[0] = me[0];\n        te[1] = me[1];\n        te[2] = me[2];\n        te[3] = me[3];\n        return this;\n    }\n    setFromMatrix4(mat2) {\n        const me = mat2.elements;\n        return this.set(me[0], me[2], me[1], me[3]);\n    }\n    multiply(mat2) {\n        return this.multiplyMatrices(this, mat2);\n    }\n    premultiply(m) {\n        return this.multiplyMatrices(m, this);\n    }\n    multiplyMatrices(a, b) {\n        const ae = a.elements;\n        const be = b.elements;\n        const te = this.elements;\n        const a11 = ae[0], a12 = ae[2];\n        const a21 = ae[1], a22 = ae[3];\n        const b11 = be[0], b12 = be[2];\n        const b21 = be[1], b22 = be[3];\n        te[0] = a11 * b11 + a12 * b21;\n        te[2] = a11 * b12 + a12 * b22;\n        te[1] = a21 * b11 + a22 * b21;\n        te[3] = a21 * b12 + a22 * b22;\n        return this;\n    }\n    multiplyScalar(s) {\n        const te = this.elements;\n        te[0] *= s;\n        te[2] *= s;\n        te[1] *= s;\n        te[3] *= s;\n        return this;\n    }\n    determinant() {\n        const te = this.elements;\n        const a = te[0], b = te[1], c = te[2], d = te[3];\n        return a * d - b * c;\n    }\n    // getInverse\n    transpose() {\n        let tmp;\n        const m = this.elements;\n        tmp = m[1];\n        m[1] = m[2];\n        m[2] = tmp;\n        return this;\n    }\n    equals(matrix) {\n        const te = this.elements;\n        const me = matrix.elements;\n        for (let i = 0; i < 4; i++) {\n            if (te[i] !== me[i])\n                return false;\n        }\n        return true;\n    }\n    fromArray(array, offset = 0) {\n        for (let i = 0; i < 4; i++) {\n            this.elements[i] = array[i + offset];\n        }\n        return this;\n    }\n    toArray(array = [], offset = 0) {\n        const te = this.elements;\n        array[offset] = te[0];\n        array[offset + 1] = te[1];\n        array[offset + 2] = te[2];\n        array[offset + 3] = te[3];\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","export class Matrix3 {\n    constructor() {\n        this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    }\n    set(n11, n12, n13, n21, n22, n23, n31, n32, n33) {\n        const te = this.elements;\n        te[0] = n11;\n        te[1] = n21;\n        te[2] = n31;\n        te[3] = n12;\n        te[4] = n22;\n        te[5] = n32;\n        te[6] = n13;\n        te[7] = n23;\n        te[8] = n33;\n        return this;\n    }\n    identity() {\n        return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1);\n    }\n    copy(mat3) {\n        const te = this.elements;\n        const me = mat3.elements;\n        te[0] = me[0];\n        te[1] = me[1];\n        te[2] = me[2];\n        te[3] = me[3];\n        te[4] = me[4];\n        te[5] = me[5];\n        te[6] = me[6];\n        te[7] = me[7];\n        te[8] = me[8];\n        return this;\n    }\n    setFromMatrix4(mat4) {\n        const me = mat4.elements;\n        return this.set(me[0], me[4], me[8], me[1], me[5], me[9], me[2], me[6], me[10]);\n    }\n    multiply(mat3) {\n        return this.multiplyMatrices(this, mat3);\n    }\n    premultiply(m) {\n        return this.multiplyMatrices(m, this);\n    }\n    multiplyMatrices(a, b) {\n        const ae = a.elements;\n        const be = b.elements;\n        const te = this.elements;\n        const a11 = ae[0], a12 = ae[3], a13 = ae[6];\n        const a21 = ae[1], a22 = ae[4], a23 = ae[7];\n        const a31 = ae[2], a32 = ae[5], a33 = ae[8];\n        const b11 = be[0], b12 = be[3], b13 = be[6];\n        const b21 = be[1], b22 = be[4], b23 = be[7];\n        const b31 = be[2], b32 = be[5], b33 = be[8];\n        te[0] = a11 * b11 + a12 * b21 + a13 * b31;\n        te[3] = a11 * b12 + a12 * b22 + a13 * b32;\n        te[6] = a11 * b13 + a12 * b23 + a13 * b33;\n        te[1] = a21 * b11 + a22 * b21 + a23 * b31;\n        te[4] = a21 * b12 + a22 * b22 + a23 * b32;\n        te[7] = a21 * b13 + a22 * b23 + a23 * b33;\n        te[2] = a31 * b11 + a32 * b21 + a33 * b31;\n        te[5] = a31 * b12 + a32 * b22 + a33 * b32;\n        te[8] = a31 * b13 + a32 * b23 + a33 * b33;\n        return this;\n    }\n    multiplyScalar(s) {\n        const te = this.elements;\n        te[0] *= s;\n        te[3] *= s;\n        te[6] *= s;\n        te[1] *= s;\n        te[4] *= s;\n        te[7] *= s;\n        te[2] *= s;\n        te[5] *= s;\n        te[8] *= s;\n        return this;\n    }\n    determinant() {\n        const te = this.elements;\n        const a = te[0], b = te[1], c = te[2], d = te[3], e = te[4], f = te[5], g = te[6], h = te[7], i = te[8];\n        return a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n    }\n    getInverse(matrix, throwOnDegenerate = false) {\n        const me = matrix.elements, te = this.elements, n11 = me[0], n21 = me[1], n31 = me[2], n12 = me[3], n22 = me[4], n32 = me[5], n13 = me[6], n23 = me[7], n33 = me[8], t11 = n33 * n22 - n32 * n23, t12 = n32 * n13 - n33 * n12, t13 = n23 * n12 - n22 * n13, det = n11 * t11 + n21 * t12 + n31 * t13;\n        if (det === 0) {\n            const msg = `THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0`;\n            if (throwOnDegenerate === true) {\n                throw new Error(msg);\n            }\n            else {\n                console.warn(msg);\n            }\n            return this.identity();\n        }\n        const detInv = 1 / det;\n        te[0] = t11 * detInv;\n        te[1] = (n31 * n23 - n33 * n21) * detInv;\n        te[2] = (n32 * n21 - n31 * n22) * detInv;\n        te[3] = t12 * detInv;\n        te[4] = (n33 * n11 - n31 * n13) * detInv;\n        te[5] = (n31 * n12 - n32 * n11) * detInv;\n        te[6] = t13 * detInv;\n        te[7] = (n21 * n13 - n23 * n11) * detInv;\n        te[8] = (n22 * n11 - n21 * n12) * detInv;\n        return this;\n    }\n    transpose() {\n        let tmp;\n        const m = this.elements;\n        tmp = m[1];\n        m[1] = m[3];\n        m[3] = tmp;\n        tmp = m[2];\n        m[2] = m[6];\n        m[6] = tmp;\n        tmp = m[5];\n        m[5] = m[7];\n        m[7] = tmp;\n        return this;\n    }\n    getNormalMatrix(matrix4) {\n        return this.setFromMatrix4(matrix4)\n            .getInverse(this)\n            .transpose();\n    }\n    setUvTransform(tx, ty, sx, sy, rotation, cx, cy) {\n        const c = Math.cos(rotation);\n        const s = Math.sin(rotation);\n        return this.set(sx * c, sx * s, -sx * (c * cx + s * cy) + cx + tx, -sy * s, sy * c, -sy * (-s * cx + c * cy) + cy + ty, 0, 0, 1);\n    }\n    scale(sx, sy) {\n        const te = this.elements;\n        te[0] *= sx;\n        te[3] *= sx;\n        te[6] *= sx;\n        te[1] *= sy;\n        te[4] *= sy;\n        te[7] *= sy;\n        return this;\n    }\n    rotate(theta) {\n        const c = Math.cos(theta);\n        const s = Math.sin(theta);\n        const te = this.elements;\n        const a11 = te[0], a12 = te[3], a13 = te[6];\n        const a21 = te[1], a22 = te[4], a23 = te[7];\n        te[0] = c * a11 + s * a21;\n        te[3] = c * a12 + s * a22;\n        te[6] = c * a13 + s * a23;\n        te[1] = -s * a11 + c * a21;\n        te[4] = -s * a12 + c * a22;\n        te[7] = -s * a13 + c * a23;\n        return this;\n    }\n    translate(tx, ty) {\n        const te = this.elements;\n        te[0] += tx * te[2];\n        te[3] += tx * te[5];\n        te[6] += tx * te[8];\n        te[1] += ty * te[2];\n        te[4] += ty * te[5];\n        te[7] += ty * te[8];\n        return this;\n    }\n    equals(matrix) {\n        const te = this.elements;\n        const me = matrix.elements;\n        for (let i = 0; i < 9; i++) {\n            if (te[i] !== me[i])\n                return false;\n        }\n        return true;\n    }\n    fromArray(array, offset = 0) {\n        for (let i = 0; i < 9; i++) {\n            this.elements[i] = array[i + offset];\n        }\n        return this;\n    }\n    toArray(array = [], offset = 0) {\n        const te = this.elements;\n        array[offset] = te[0];\n        array[offset + 1] = te[1];\n        array[offset + 2] = te[2];\n        array[offset + 3] = te[3];\n        array[offset + 4] = te[4];\n        array[offset + 5] = te[5];\n        array[offset + 6] = te[6];\n        array[offset + 7] = te[7];\n        array[offset + 8] = te[8];\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { EulerOrder } from \"./Euler\";\nimport { Vector3 } from \"./Vector3\";\n/**\n * TODO: applyToBufferAttribute\n */\nexport class Matrix4 {\n    constructor() {\n        this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    }\n    copy(mat4) {\n        const te = this.elements;\n        const me = mat4.elements;\n        te[0] = me[0];\n        te[1] = me[1];\n        te[2] = me[2];\n        te[3] = me[3];\n        te[4] = me[4];\n        te[5] = me[5];\n        te[6] = me[6];\n        te[7] = me[7];\n        te[8] = me[8];\n        te[9] = me[9];\n        te[10] = me[10];\n        te[11] = me[11];\n        te[12] = me[12];\n        te[13] = me[13];\n        te[14] = me[14];\n        te[15] = me[15];\n        return this;\n    }\n    set(n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\n        const te = this.elements;\n        te[0] = n11;\n        te[4] = n12;\n        te[8] = n13;\n        te[12] = n14;\n        te[1] = n21;\n        te[5] = n22;\n        te[9] = n23;\n        te[13] = n24;\n        te[2] = n31;\n        te[6] = n32;\n        te[10] = n33;\n        te[14] = n34;\n        te[3] = n41;\n        te[7] = n42;\n        te[11] = n43;\n        te[15] = n44;\n        return this;\n    }\n    identity() {\n        return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    copyPosition(m) {\n        const te = this.elements, me = m.elements;\n        te[12] = me[12];\n        te[13] = me[13];\n        te[14] = me[14];\n        return this;\n    }\n    extractBasis(xAxis, yAxis, zAxis) {\n        xAxis.fromArray(this.elements, 0);\n        yAxis.fromArray(this.elements, 4);\n        zAxis.fromArray(this.elements, 8);\n        return this;\n    }\n    makeBasis(xAxis, yAxis, zAxis) {\n        return this.set(xAxis.x, yAxis.x, zAxis.x, 0, xAxis.y, yAxis.y, zAxis.y, 0, xAxis.z, yAxis.z, zAxis.z, 0, 0, 0, 0, 1);\n    }\n    extractRotation(mat4) {\n        const vec = new Vector3();\n        const te = this.elements;\n        const me = mat4.elements;\n        const scaleX = 1 / vec.fromArray(mat4.elements, 0).length();\n        const scaleY = 1 / vec.fromArray(mat4.elements, 4).length();\n        const scaleZ = 1 / vec.fromArray(mat4.elements, 8).length();\n        te[0] = me[0] * scaleX;\n        te[1] = me[1] * scaleX;\n        te[2] = me[2] * scaleX;\n        te[4] = me[4] * scaleY;\n        te[5] = me[5] * scaleY;\n        te[6] = me[6] * scaleY;\n        te[8] = me[8] * scaleZ;\n        te[9] = me[9] * scaleZ;\n        te[10] = me[10] * scaleZ;\n        return this;\n    }\n    makeRotationFromEuler(euler) {\n        const te = this.elements;\n        const x = euler.x, y = euler.y, z = euler.z;\n        const a = Math.cos(x), b = Math.sin(x);\n        const c = Math.cos(y), d = Math.sin(y);\n        const e = Math.cos(z), f = Math.sin(z);\n        if (euler.order === EulerOrder.XYZ) {\n            const ae = a * e, af = a * f, be = b * e, bf = b * f;\n            te[0] = c * e;\n            te[4] = -c * f;\n            te[8] = d;\n            te[1] = af + be * d;\n            te[5] = ae - bf * d;\n            te[9] = -b * c;\n            te[2] = bf - ae * d;\n            te[6] = be + af * d;\n            te[10] = a * c;\n        }\n        else if (euler.order === EulerOrder.YXZ) {\n            const ce = c * e, cf = c * f, de = d * e, df = d * f;\n            te[0] = ce + df * b;\n            te[4] = de * b - cf;\n            te[8] = a * d;\n            te[1] = a * f;\n            te[5] = a * e;\n            te[9] = -b;\n            te[2] = cf * b - de;\n            te[6] = df + ce * b;\n            te[10] = a * c;\n        }\n        else if (euler.order === EulerOrder.ZXY) {\n            const ce = c * e, cf = c * f, de = d * e, df = d * f;\n            te[0] = ce - df * b;\n            te[4] = -a * f;\n            te[8] = de + cf * b;\n            te[1] = cf + de * b;\n            te[5] = a * e;\n            te[9] = df - ce * b;\n            te[2] = -a * d;\n            te[6] = b;\n            te[10] = a * c;\n        }\n        else if (euler.order === EulerOrder.ZYX) {\n            const ae = a * e, af = a * f, be = b * e, bf = b * f;\n            te[0] = c * e;\n            te[4] = be * d - af;\n            te[8] = ae * d + bf;\n            te[1] = c * f;\n            te[5] = bf * d + ae;\n            te[9] = af * d - be;\n            te[2] = -d;\n            te[6] = b * c;\n            te[10] = a * c;\n        }\n        else if (euler.order === EulerOrder.YZX) {\n            const ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n            te[0] = c * e;\n            te[4] = bd - ac * f;\n            te[8] = bc * f + ad;\n            te[1] = f;\n            te[5] = a * e;\n            te[9] = -b * e;\n            te[2] = -d * e;\n            te[6] = ad * f + bc;\n            te[10] = ac - bd * f;\n        }\n        else if (euler.order === EulerOrder.XZY) {\n            const ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n            te[0] = c * e;\n            te[4] = -f;\n            te[8] = d * e;\n            te[1] = ac * f + bd;\n            te[5] = a * e;\n            te[9] = ad * f - bc;\n            te[2] = bc * f - ad;\n            te[6] = b * e;\n            te[10] = bd * f + ac;\n        }\n        // last column\n        te[3] = 0;\n        te[7] = 0;\n        te[11] = 0;\n        // bottom row\n        te[12] = 0;\n        te[13] = 0;\n        te[14] = 0;\n        te[15] = 1;\n        return this;\n    }\n    makeRotationFromQuaternion(quaternion) {\n        const te = this.elements;\n        const x = quaternion.x, y = quaternion.y, z = quaternion.z, w = quaternion.w;\n        const x2 = x + x, y2 = y + y, z2 = z + z;\n        const xx = x * x2, xy = x * y2, xz = x * z2;\n        const yy = y * y2, yz = y * z2, zz = z * z2;\n        const wx = w * x2, wy = w * y2, wz = w * z2;\n        te[0] = 1 - (yy + zz);\n        te[4] = xy - wz;\n        te[8] = xz + wy;\n        te[1] = xy + wz;\n        te[5] = 1 - (xx + zz);\n        te[9] = yz - wx;\n        te[2] = xz - wy;\n        te[6] = yz + wx;\n        te[10] = 1 - (xx + yy);\n        // last column\n        te[3] = 0;\n        te[7] = 0;\n        te[11] = 0;\n        // bottom row\n        te[12] = 0;\n        te[13] = 0;\n        te[14] = 0;\n        te[15] = 1;\n        return this;\n    }\n    lookAt(eye, target, up) {\n        const x = new Vector3();\n        const y = new Vector3();\n        const z = new Vector3();\n        const te = this.elements;\n        z.copy(eye).cross(target);\n        if (z.lengthSquared() === 0) {\n            // eye and target are in the same position\n            z.z = 1;\n        }\n        z.normalize();\n        x.copy(up).cross(z);\n        if (x.lengthSquared() === 0) {\n            // up and z are parallel\n            if (Math.abs(up.z) === 1) {\n                z.x += 0.0001;\n            }\n            else {\n                z.z += 0.0001;\n            }\n            z.normalize();\n            x.copy(up).cross(z);\n        }\n        x.normalize();\n        y.copy(z).cross(x);\n        te[0] = x.x;\n        te[4] = y.x;\n        te[8] = z.x;\n        te[1] = x.y;\n        te[5] = y.y;\n        te[9] = z.y;\n        te[2] = x.z;\n        te[6] = y.z;\n        te[10] = z.z;\n        return this;\n    }\n    multiply(mat) {\n        return this.multiplyMatrices(this, mat);\n    }\n    premultiply(mat) {\n        return this.multiplyMatrices(mat, this);\n    }\n    multiplyMatrices(matA, matB) {\n        const ae = matA.elements;\n        const be = matB.elements;\n        const te = this.elements;\n        const a11 = ae[0], a12 = ae[4], a13 = ae[8], a14 = ae[12];\n        const a21 = ae[1], a22 = ae[5], a23 = ae[9], a24 = ae[13];\n        const a31 = ae[2], a32 = ae[6], a33 = ae[10], a34 = ae[14];\n        const a41 = ae[3], a42 = ae[7], a43 = ae[11], a44 = ae[15];\n        const b11 = be[0], b12 = be[4], b13 = be[8], b14 = be[12];\n        const b21 = be[1], b22 = be[5], b23 = be[9], b24 = be[13];\n        const b31 = be[2], b32 = be[6], b33 = be[10], b34 = be[14];\n        const b41 = be[3], b42 = be[7], b43 = be[11], b44 = be[15];\n        te[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n        te[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n        te[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n        te[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n        te[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n        te[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n        te[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n        te[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n        te[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n        te[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n        te[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n        te[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n        te[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n        te[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n        te[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n        te[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n        return this;\n    }\n    multiplyScalar(s) {\n        const te = this.elements;\n        te[0] *= s;\n        te[4] *= s;\n        te[8] *= s;\n        te[12] *= s;\n        te[1] *= s;\n        te[5] *= s;\n        te[9] *= s;\n        te[13] *= s;\n        te[2] *= s;\n        te[6] *= s;\n        te[10] *= s;\n        te[14] *= s;\n        te[3] *= s;\n        te[7] *= s;\n        te[11] *= s;\n        te[15] *= s;\n        return this;\n    }\n    /**\n     * http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n     * @returns {number}\n     */\n    determinant() {\n        const te = this.elements;\n        const n11 = te[0], n12 = te[4], n13 = te[8], n14 = te[12];\n        const n21 = te[1], n22 = te[5], n23 = te[9], n24 = te[13];\n        const n31 = te[2], n32 = te[6], n33 = te[10], n34 = te[14];\n        const n41 = te[3], n42 = te[7], n43 = te[11], n44 = te[15];\n        return (n41 *\n            (+n14 * n23 * n32 -\n                n13 * n24 * n32 -\n                n14 * n22 * n33 +\n                n12 * n24 * n33 +\n                n13 * n22 * n34 -\n                n12 * n23 * n34) +\n            n42 *\n                (+n11 * n23 * n34 -\n                    n11 * n24 * n33 +\n                    n14 * n21 * n33 -\n                    n13 * n21 * n34 +\n                    n13 * n24 * n31 -\n                    n14 * n23 * n31) +\n            n43 *\n                (+n11 * n24 * n32 -\n                    n11 * n22 * n34 -\n                    n14 * n21 * n32 +\n                    n12 * n21 * n34 +\n                    n14 * n22 * n31 -\n                    n12 * n24 * n31) +\n            n44 *\n                (-n13 * n22 * n31 -\n                    n11 * n23 * n32 +\n                    n11 * n22 * n33 +\n                    n13 * n21 * n32 -\n                    n12 * n21 * n33 +\n                    n12 * n23 * n31));\n    }\n    transpose() {\n        const te = this.elements;\n        let tmp;\n        tmp = te[1];\n        te[1] = te[4];\n        te[4] = tmp;\n        tmp = te[2];\n        te[2] = te[8];\n        te[8] = tmp;\n        tmp = te[6];\n        te[6] = te[9];\n        te[9] = tmp;\n        tmp = te[3];\n        te[3] = te[12];\n        te[12] = tmp;\n        tmp = te[7];\n        te[7] = te[13];\n        te[13] = tmp;\n        tmp = te[11];\n        te[11] = te[14];\n        te[14] = tmp;\n        return this;\n    }\n    setPosition(v) {\n        const te = this.elements;\n        te[12] = v.x;\n        te[13] = v.y;\n        te[14] = v.z;\n        return this;\n    }\n    /**\n     * http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n     * @param m\n     * @param throwOnDegenerate\n     * @returns {Matrix4}\n     */\n    getInverse(m, throwOnDegenerate = false) {\n        const te = this.elements, me = m.elements;\n        const n11 = me[0], n21 = me[1], n31 = me[2], n41 = me[3], n12 = me[4], n22 = me[5], n32 = me[6], n42 = me[7], n13 = me[8], n23 = me[9], n33 = me[10], n43 = me[11], n14 = me[12], n24 = me[13], n34 = me[14], n44 = me[15], t11 = n23 * n34 * n42 -\n            n24 * n33 * n42 +\n            n24 * n32 * n43 -\n            n22 * n34 * n43 -\n            n23 * n32 * n44 +\n            n22 * n33 * n44, t12 = n14 * n33 * n42 -\n            n13 * n34 * n42 -\n            n14 * n32 * n43 +\n            n12 * n34 * n43 +\n            n13 * n32 * n44 -\n            n12 * n33 * n44, t13 = n13 * n24 * n42 -\n            n14 * n23 * n42 +\n            n14 * n22 * n43 -\n            n12 * n24 * n43 -\n            n13 * n22 * n44 +\n            n12 * n23 * n44, t14 = n14 * n23 * n32 -\n            n13 * n24 * n32 -\n            n14 * n22 * n33 +\n            n12 * n24 * n33 +\n            n13 * n22 * n34 -\n            n12 * n23 * n34;\n        const det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n        if (det === 0) {\n            const msg = `THREE.Matrix4: .getInverse() can\"t invert matrix, determinant is 0`;\n            if (throwOnDegenerate === true) {\n                throw new Error(msg);\n            }\n            else {\n                console.warn(msg);\n            }\n            return this.identity();\n        }\n        const detInv = 1 / det;\n        te[0] = t11 * detInv;\n        te[1] =\n            (n24 * n33 * n41 -\n                n23 * n34 * n41 -\n                n24 * n31 * n43 +\n                n21 * n34 * n43 +\n                n23 * n31 * n44 -\n                n21 * n33 * n44) *\n                detInv;\n        te[2] =\n            (n22 * n34 * n41 -\n                n24 * n32 * n41 +\n                n24 * n31 * n42 -\n                n21 * n34 * n42 -\n                n22 * n31 * n44 +\n                n21 * n32 * n44) *\n                detInv;\n        te[3] =\n            (n23 * n32 * n41 -\n                n22 * n33 * n41 -\n                n23 * n31 * n42 +\n                n21 * n33 * n42 +\n                n22 * n31 * n43 -\n                n21 * n32 * n43) *\n                detInv;\n        te[4] = t12 * detInv;\n        te[5] =\n            (n13 * n34 * n41 -\n                n14 * n33 * n41 +\n                n14 * n31 * n43 -\n                n11 * n34 * n43 -\n                n13 * n31 * n44 +\n                n11 * n33 * n44) *\n                detInv;\n        te[6] =\n            (n14 * n32 * n41 -\n                n12 * n34 * n41 -\n                n14 * n31 * n42 +\n                n11 * n34 * n42 +\n                n12 * n31 * n44 -\n                n11 * n32 * n44) *\n                detInv;\n        te[7] =\n            (n12 * n33 * n41 -\n                n13 * n32 * n41 +\n                n13 * n31 * n42 -\n                n11 * n33 * n42 -\n                n12 * n31 * n43 +\n                n11 * n32 * n43) *\n                detInv;\n        te[8] = t13 * detInv;\n        te[9] =\n            (n14 * n23 * n41 -\n                n13 * n24 * n41 -\n                n14 * n21 * n43 +\n                n11 * n24 * n43 +\n                n13 * n21 * n44 -\n                n11 * n23 * n44) *\n                detInv;\n        te[10] =\n            (n12 * n24 * n41 -\n                n14 * n22 * n41 +\n                n14 * n21 * n42 -\n                n11 * n24 * n42 -\n                n12 * n21 * n44 +\n                n11 * n22 * n44) *\n                detInv;\n        te[11] =\n            (n13 * n22 * n41 -\n                n12 * n23 * n41 -\n                n13 * n21 * n42 +\n                n11 * n23 * n42 +\n                n12 * n21 * n43 -\n                n11 * n22 * n43) *\n                detInv;\n        te[12] = t14 * detInv;\n        te[13] =\n            (n13 * n24 * n31 -\n                n14 * n23 * n31 +\n                n14 * n21 * n33 -\n                n11 * n24 * n33 -\n                n13 * n21 * n34 +\n                n11 * n23 * n34) *\n                detInv;\n        te[14] =\n            (n14 * n22 * n31 -\n                n12 * n24 * n31 -\n                n14 * n21 * n32 +\n                n11 * n24 * n32 +\n                n12 * n21 * n34 -\n                n11 * n22 * n34) *\n                detInv;\n        te[15] =\n            (n12 * n23 * n31 -\n                n13 * n22 * n31 +\n                n13 * n21 * n32 -\n                n11 * n23 * n32 -\n                n12 * n21 * n33 +\n                n11 * n22 * n33) *\n                detInv;\n        return this;\n    }\n    scale(v) {\n        const te = this.elements;\n        const x = v.x, y = v.y, z = v.z;\n        te[0] *= x;\n        te[4] *= y;\n        te[8] *= z;\n        te[1] *= x;\n        te[5] *= y;\n        te[9] *= z;\n        te[2] *= x;\n        te[6] *= y;\n        te[10] *= z;\n        te[3] *= x;\n        te[7] *= y;\n        te[11] *= z;\n        return this;\n    }\n    getMaxScaleOnAxis() {\n        const te = this.elements;\n        const scaleXSq = te[0] * te[0] + te[1] * te[1] + te[2] * te[2];\n        const scaleYSq = te[4] * te[4] + te[5] * te[5] + te[6] * te[6];\n        const scaleZSq = te[8] * te[8] + te[9] * te[9] + te[10] * te[10];\n        return Math.sqrt(Math.max(scaleXSq, scaleYSq, scaleZSq));\n    }\n    makeTranslation(x, y, z) {\n        return this.set(1, 0, 0, x, 0, 1, 0, y, 0, 0, 1, z, 0, 0, 0, 1);\n    }\n    makeRotationX(theta) {\n        const c = Math.cos(theta), s = Math.sin(theta);\n        return this.set(1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1);\n    }\n    makeRotationY(theta) {\n        const c = Math.cos(theta), s = Math.sin(theta);\n        return this.set(c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1);\n    }\n    makeRotationZ(theta) {\n        const c = Math.cos(theta), s = Math.sin(theta);\n        return this.set(c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    /**\n     * http://www.gamedev.net/reference/articles/article1199.asp\n     * @param axis\n     * @param angle\n     * @returns {Matrix4}\n     */\n    makeRotationAxis(axis, angle) {\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        const t = 1 - c;\n        const x = axis.x, y = axis.y, z = axis.z;\n        const tx = t * x, ty = t * y;\n        return this.set(tx * x + c, tx * y - s * z, tx * z + s * y, 0, tx * y + s * z, ty * y + c, ty * z - s * x, 0, tx * z - s * y, ty * z + s * x, t * z * z + c, 0, 0, 0, 0, 1);\n    }\n    makeScale(x, y, z) {\n        return this.set(x, 0, 0, 0, 0, y, 0, 0, 0, 0, z, 0, 0, 0, 0, 1);\n    }\n    makeShear(x, y, z) {\n        return this.set(1, y, z, 0, x, 1, z, 0, x, y, 1, 0, 0, 0, 0, 1);\n    }\n    compose(position, quaternion, scale) {\n        this.makeRotationFromQuaternion(quaternion);\n        this.scale(scale);\n        this.setPosition(position);\n        return this;\n    }\n    decompose(position, quaternion, scale) {\n        const vector = new Vector3();\n        const matrix = new Matrix4();\n        const te = this.elements;\n        let sx = vector.set(te[0], te[1], te[2]).length();\n        const sy = vector.set(te[4], te[5], te[6]).length();\n        const sz = vector.set(te[8], te[9], te[10]).length();\n        // if determine is negative, we need to invert one scale\n        const det = this.determinant();\n        if (det < 0)\n            sx = -sx;\n        position.x = te[12];\n        position.y = te[13];\n        position.z = te[14];\n        // scale the rotation part\n        matrix.copy(this);\n        const invSX = 1 / sx;\n        const invSY = 1 / sy;\n        const invSZ = 1 / sz;\n        matrix.elements[0] *= invSX;\n        matrix.elements[1] *= invSX;\n        matrix.elements[2] *= invSX;\n        matrix.elements[4] *= invSY;\n        matrix.elements[5] *= invSY;\n        matrix.elements[6] *= invSY;\n        matrix.elements[8] *= invSZ;\n        matrix.elements[9] *= invSZ;\n        matrix.elements[10] *= invSZ;\n        quaternion.setFromRotationMatrix(matrix);\n        scale.set(sx, sy, sz);\n        return this;\n    }\n    makePerspective(left, right, top, bottom, near, far) {\n        return this.set(2 * near / (right - left), 0, (right + left) / (right - left), 0, 0, 2 * near / (top - bottom), (top + bottom) / (top - bottom), 0, 0, 0, -(far + near) / (far - near), -2 * far * near / (far - near), 0, 0, -1, 0);\n    }\n    makeOrthographic(left, right, top, bottom, near, far) {\n        const w = 1.0 / (right - left);\n        const h = 1.0 / (top - bottom);\n        const p = 1.0 / (far - near);\n        const x = (right + left) * w;\n        const y = (top + bottom) * h;\n        const z = (far + near) * p;\n        return this.set(2 * w, 0, 0, -x, 0, 2 * h, 0, -y, 0, 0, -2 * p, -z, 0, 0, 0, 1);\n    }\n    equals(matrix) {\n        const me = matrix.elements;\n        for (let i = 0; i < 16; i++) {\n            if (this.elements[i] !== me[i])\n                return false;\n        }\n        return true;\n    }\n    fromArray(array, offset = 0) {\n        for (let i = 0; i < 16; i++) {\n            this.elements[i] = array[i + offset];\n        }\n        return this;\n    }\n    toArray(array = [], offset = 0) {\n        const te = this.elements;\n        array[offset] = te[0];\n        array[offset + 1] = te[1];\n        array[offset + 2] = te[2];\n        array[offset + 3] = te[3];\n        array[offset + 4] = te[4];\n        array[offset + 5] = te[5];\n        array[offset + 6] = te[6];\n        array[offset + 7] = te[7];\n        array[offset + 8] = te[8];\n        array[offset + 9] = te[9];\n        array[offset + 10] = te[10];\n        array[offset + 11] = te[11];\n        array[offset + 12] = te[12];\n        array[offset + 13] = te[13];\n        array[offset + 14] = te[14];\n        array[offset + 15] = te[15];\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Matrix3 } from \"./Matrix3\";\nimport { Vector3 } from \"./Vector3\";\nexport class Plane {\n    constructor(normal = new Vector3(1, 0, 0), constant = 0) {\n        this.normal = new Vector3(1, 0, 0);\n        this.constant = 0;\n        this.normal = normal;\n        this.constant = constant;\n    }\n    set(normal, constant) {\n        this.normal.copy(normal);\n        this.constant = constant;\n        return this;\n    }\n    setFromNormalAndCoplanarPoint(normal, point) {\n        this.normal.copy(normal);\n        this.constant = -point.dot(this.normal);\n        return this;\n    }\n    setFromCoplanarPoints(a, b, c) {\n        const v1 = new Vector3();\n        const v2 = new Vector3();\n        const normal = v1\n            .copy(c)\n            .sub(b)\n            .cross(v2.copy(a).sub(b))\n            .normalize();\n        // Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n        this.setFromNormalAndCoplanarPoint(normal, a);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(plane) {\n        this.normal.copy(plane.normal);\n        this.constant = plane.constant;\n        return this;\n    }\n    /**\n     * Note: will lead to a divide by zero if the plane is invalid\n     * @returns {Plane}\n     */\n    normalize() {\n        const inverseNormalLength = 1.0 / this.normal.length();\n        this.normal.multiplyScalar(inverseNormalLength);\n        this.constant *= inverseNormalLength;\n        return this;\n    }\n    negate() {\n        this.constant *= -1;\n        this.normal.negate();\n        return this;\n    }\n    distanceToPoint(point) {\n        return this.normal.dot(point) + this.constant;\n    }\n    distanceToSphere(sphere) {\n        return this.distanceToPoint(sphere.center) - sphere.radius;\n    }\n    projectPoint(point) {\n        return new Vector3()\n            .copy(this.normal)\n            .multiplyScalar(-this.distanceToPoint(point))\n            .add(point);\n    }\n    intersectLine(line) {\n        const direction = line.delta();\n        const denominator = this.normal.dot(direction);\n        if (denominator === 0) {\n            // line is coplanar, return origin\n            if (this.distanceToPoint(line.start) === 0) {\n                return new Vector3().copy(line.start);\n            }\n            // Unsure if this is the correct method to handle this case.\n            return undefined;\n        }\n        const t = -(line.start.dot(this.normal) + this.constant) / denominator;\n        if (t < 0 || t > 1) {\n            return undefined;\n        }\n        return new Vector3()\n            .copy(direction)\n            .multiplyScalar(t)\n            .add(line.start);\n    }\n    intersectsLine(line) {\n        // Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n        const startSign = this.distanceToPoint(line.start);\n        const endSign = this.distanceToPoint(line.end);\n        return (startSign < 0 && endSign > 0) || (endSign < 0 && startSign > 0);\n    }\n    intersectsBox(box) {\n        return box.intersectsPlane(this);\n    }\n    intersectsSphere(sphere) {\n        return sphere.intersectsPlane(this);\n    }\n    coplanarPoint() {\n        return new Vector3().copy(this.normal).multiplyScalar(-this.constant);\n    }\n    applyMatrix4(matrix, optionalNormalMatrix) {\n        const normalMatrix = optionalNormalMatrix || new Matrix3().getNormalMatrix(matrix);\n        const referencePoint = this.coplanarPoint().applyMatrix4(matrix);\n        const normal = this.normal.applyMatrix3(normalMatrix).normalize();\n        this.constant = -referencePoint.dot(normal);\n        return this;\n    }\n    translate(offset) {\n        this.constant -= offset.dot(this.normal);\n        return this;\n    }\n    equals(plane) {\n        return plane.normal.equals(this.normal) && plane.constant === this.constant;\n    }\n}\n","import { EulerOrder } from \"./Euler\";\nimport { Vector3 } from \"./Vector3\";\nexport class Quaternion {\n    constructor(x = 0, y = 0, z = 0, w = 1) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n    }\n    get x() {\n        return this._x;\n    }\n    set x(_x) {\n        this._x = _x;\n    }\n    get y() {\n        return this._y;\n    }\n    set y(_y) {\n        this._y = _y;\n    }\n    get z() {\n        return this._z;\n    }\n    set z(_z) {\n        this._z = _z;\n    }\n    get w() {\n        return this._w;\n    }\n    set w(_w) {\n        this._w = _w;\n    }\n    set(x, y, z, w) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n        return this;\n    }\n    copy(quaternion) {\n        return this.set(quaternion.x, quaternion.y, quaternion.z, quaternion.w);\n    }\n    setFromEuler(euler) {\n        const { x, y, z, order } = euler;\n        const cos = Math.cos;\n        const sin = Math.sin;\n        const c1 = cos(x / 2);\n        const c2 = cos(y / 2);\n        const c3 = cos(z / 2);\n        const s1 = sin(x / 2);\n        const s2 = sin(y / 2);\n        const s3 = sin(z / 2);\n        if (order === EulerOrder.XYZ) {\n            return this.set(s1 * c2 * c3 + c1 * s2 * s3, c1 * s2 * c3 - s1 * c2 * s3, c1 * c2 * s3 + s1 * s2 * c3, c1 * c2 * c3 - s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.YXZ) {\n            return this.set(s1 * c2 * c3 + c1 * s2 * s3, c1 * s2 * c3 - s1 * c2 * s3, c1 * c2 * s3 - s1 * s2 * c3, c1 * c2 * c3 + s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.ZXY) {\n            return this.set(s1 * c2 * c3 - c1 * s2 * s3, c1 * s2 * c3 + s1 * c2 * s3, c1 * c2 * s3 + s1 * s2 * c3, c1 * c2 * c3 - s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.ZYX) {\n            return this.set(s1 * c2 * c3 - c1 * s2 * s3, c1 * s2 * c3 + s1 * c2 * s3, c1 * c2 * s3 - s1 * s2 * c3, c1 * c2 * c3 + s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.YZX) {\n            return this.set(s1 * c2 * c3 + c1 * s2 * s3, c1 * s2 * c3 + s1 * c2 * s3, c1 * c2 * s3 - s1 * s2 * c3, c1 * c2 * c3 - s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.XZY) {\n            return this.set(s1 * c2 * c3 - c1 * s2 * s3, c1 * s2 * c3 - s1 * c2 * s3, c1 * c2 * s3 + s1 * s2 * c3, c1 * c2 * c3 + s1 * s2 * s3);\n        }\n        return this;\n    }\n    /**\n     * !!! assumes axis is normalized\n     * http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n     * @param axis\n     * @param angle\n     * @returns {Quaternion}\n     */\n    setFromAxisAngle(axis, angle) {\n        const halfAngle = angle / 2, s = Math.sin(halfAngle);\n        return this.set(axis.x * s, axis.y * s, axis.z * s, Math.cos(halfAngle));\n    }\n    /**\n     * !!! assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n     * http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n     * @param m\n     * @returns {Quaternion}\n     */\n    setFromRotationMatrix(m) {\n        const te = m.elements, m11 = te[0], m12 = te[4], m13 = te[8], m21 = te[1], m22 = te[5], m23 = te[9], m31 = te[2], m32 = te[6], m33 = te[10], trace = m11 + m22 + m33;\n        let s;\n        if (trace > 0) {\n            s = 0.5 / Math.sqrt(trace + 1.0);\n            return this.set((m32 - m23) * s, (m13 - m31) * s, (m21 - m12) * s, 0.25 / s);\n        }\n        else if (m11 > m22 && m11 > m33) {\n            s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n            return this.set(0.25 * s, (m12 + m21) / s, (m13 + m31) / s, (m32 - m23) / s);\n        }\n        else if (m22 > m33) {\n            s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n            return this.set((m12 + m21) / s, 0.25 * s, (m23 + m32) / s, (m13 - m31) / s);\n        }\n        else {\n            s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n            return this.set((m13 + m31) / s, (m23 + m32) / s, 0.25 * s, (m21 - m12) / s);\n        }\n    }\n    /**\n     * !! assumes direction vectors vFrom and vTo are normalized\n     * @param vFrom\n     * @param vTo\n     * @returns {Quaternion}\n     */\n    setFromUnitVectors(vFrom, vTo) {\n        const vec = new Vector3();\n        const EPS = 0.000001;\n        let r = vFrom.dot(vTo) + 1;\n        if (r < EPS) {\n            r = 0;\n            if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n                vec.set(-vFrom.y, vFrom.x, 0);\n            }\n            else {\n                vec.set(0, -vFrom.z, vFrom.y);\n            }\n        }\n        else {\n            vec.copy(vFrom).cross(vTo);\n        }\n        this._x = vec.x;\n        this._y = vec.y;\n        this._z = vec.z;\n        this._w = r;\n        return this.normalize();\n    }\n    inverse() {\n        return this.conjugate().normalize();\n    }\n    conjugate() {\n        return this.set(this.x * -1, this.y * -1, this.z * -1, this.w);\n    }\n    dot(vec) {\n        return this.x * vec.x + this.y * vec.y + this.z * vec.z + this.w * vec.w;\n    }\n    lengthSquared() {\n        const { x, y, z, w } = this;\n        return x * x + y * y + z * z + w * w;\n    }\n    length() {\n        return Math.sqrt(this.lengthSquared());\n    }\n    normalize() {\n        let l = this.length();\n        if (l === 0) {\n            return this.set(0, 0, 0, 1);\n        }\n        else {\n            l = 1 / l;\n            return this.set(this.x * l, this.y * l, this.z * l, this.w * l);\n        }\n    }\n    multiply(quaternion) {\n        return this.multiplyQuaternions(this, quaternion);\n    }\n    premultiply(quaternion) {\n        return this.multiplyQuaternions(quaternion, this);\n    }\n    /**\n     * http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n     * @param a\n     * @param b\n     * @returns {Quaternion}\n     */\n    multiplyQuaternions(a, b) {\n        const qax = a.x, qay = a.y, qaz = a.z, qaw = a.w;\n        const qbx = b.x, qby = b.y, qbz = b.z, qbw = b.w;\n        return this.set(qax * qbw + qaw * qbx + qay * qbz - qaz * qby, qay * qbw + qaw * qby + qaz * qbx - qax * qbz, qaz * qbw + qaw * qbz + qax * qby - qay * qbx, qaw * qbw - qax * qbx - qay * qby - qaz * qbz);\n    }\n    /**\n     * http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n     * @param qb\n     * @param t\n     * @returns {Quaternion}\n     */\n    slerp(qb, t) {\n        if (t === 0)\n            return this;\n        if (t === 1)\n            return this.copy(qb);\n        const { x, y, z, w } = this;\n        let cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;\n        if (cosHalfTheta < 0) {\n            this.set(-qb.x, -qb.y, -qb.z, -qb.w);\n            cosHalfTheta = -cosHalfTheta;\n        }\n        else {\n            this.copy(qb);\n        }\n        if (cosHalfTheta >= 1.0) {\n            return this.set(x, y, z, w);\n        }\n        const sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n        if (Math.abs(sinHalfTheta) < 0.001) {\n            return this.set(0.5 * (x + this.x), 0.5 * (y + this.y), 0.5 * (z + this.z), 0.5 * (w + this.w));\n        }\n        const halfTheta = Math.atan2(sinHalfTheta, cosHalfTheta);\n        const ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta, ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n        return this.set(x * ratioA + this.x * ratioB, y * ratioA + this.y * ratioB, z * ratioA + this.z * ratioB, w * ratioA + this.w * ratioB);\n    }\n    equals(quaternion) {\n        const { x, y, z, w } = this;\n        return quaternion.x === x && quaternion.y === y && quaternion.z === z && quaternion.w === w;\n    }\n    fromArray(array, offset = 0) {\n        return this.set(array[offset], array[offset + 1], array[offset + 2], array[offset + 3]);\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        array[offset + 2] = this.z;\n        array[offset + 3] = this.w;\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Vector3 } from \"./Vector3\";\nexport class Ray {\n    constructor(origin = new Vector3(), direction = new Vector3()) {\n        this.origin = new Vector3();\n        this.direction = new Vector3();\n        this.origin = origin;\n        this.direction = direction;\n    }\n    set(origin, direction) {\n        this.origin.copy(origin);\n        this.direction.copy(direction);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(ray) {\n        this.origin.copy(ray.origin);\n        this.direction.copy(ray.direction);\n        return this;\n    }\n    at(t) {\n        return new Vector3()\n            .copy(this.direction)\n            .multiplyScalar(t)\n            .add(this.origin);\n    }\n    lookAt(v) {\n        this.direction\n            .copy(v)\n            .sub(this.origin)\n            .normalize();\n        return this;\n    }\n    recast(t) {\n        this.origin.copy(this.at(t));\n        return this;\n    }\n    closestPointToPoint(point) {\n        const result = new Vector3().copy(point).sub(this.origin);\n        const directionDistance = result.dot(this.direction);\n        if (directionDistance < 0) {\n            return result.copy(this.origin);\n        }\n        return result\n            .copy(this.direction)\n            .multiplyScalar(directionDistance)\n            .add(this.origin);\n    }\n    distanceToPoint(point) {\n        return Math.sqrt(this.distanceSquaredToPoint(point));\n    }\n    distanceSquaredToPoint(point) {\n        const directionDistance = new Vector3()\n            .copy(point)\n            .sub(this.origin)\n            .dot(this.direction);\n        // point behind the ray\n        if (directionDistance < 0) {\n            return this.origin.distanceToSquared(point);\n        }\n        return new Vector3()\n            .copy(this.direction)\n            .multiplyScalar(directionDistance)\n            .add(this.origin)\n            .distanceToSquared(point);\n    }\n    distanceSquareToSegment(v0, v1, optionalPointOnRay, optionalPointOnSegment) {\n        const segCenter = new Vector3();\n        const segDir = new Vector3();\n        const diff = new Vector3();\n        // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n        // It returns the min distance between the ray and the segment\n        // defined by v0 and v1\n        // It can also set two optional targets :\n        // - The closest point on the ray\n        // - The closest point on the segment\n        segCenter\n            .copy(v0)\n            .add(v1)\n            .multiplyScalar(0.5);\n        segDir\n            .copy(v1)\n            .sub(v0)\n            .normalize();\n        diff.copy(this.origin).sub(segCenter);\n        const segExtent = v0.distanceTo(v1) * 0.5;\n        const a01 = -this.direction.dot(segDir);\n        const b0 = diff.dot(this.direction);\n        const b1 = -diff.dot(segDir);\n        const c = diff.lengthSquared();\n        const det = Math.abs(1 - a01 * a01);\n        let s0, s1, sqrDist, extDet;\n        if (det > 0) {\n            // The ray and segment are not parallel.\n            s0 = a01 * b1 - b0;\n            s1 = a01 * b0 - b1;\n            extDet = segExtent * det;\n            if (s0 >= 0) {\n                if (s1 >= -extDet) {\n                    if (s1 <= extDet) {\n                        // region 0\n                        // Minimum at interior points of ray and segment.\n                        const invDet = 1 / det;\n                        s0 *= invDet;\n                        s1 *= invDet;\n                        sqrDist = s0 * (s0 + a01 * s1 + 2 * b0) + s1 * (a01 * s0 + s1 + 2 * b1) + c;\n                    }\n                    else {\n                        // region 1\n                        s1 = segExtent;\n                        s0 = Math.max(0, -(a01 * s1 + b0));\n                        sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n                    }\n                }\n                else {\n                    // region 5\n                    s1 = -segExtent;\n                    s0 = Math.max(0, -(a01 * s1 + b0));\n                    sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n                }\n            }\n            else {\n                if (s1 <= -extDet) {\n                    // region 4\n                    s0 = Math.max(0, -(-a01 * segExtent + b0));\n                    s1 = s0 > 0 ? -segExtent : Math.min(Math.max(-segExtent, -b1), segExtent);\n                    sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n                }\n                else if (s1 <= extDet) {\n                    // region 3\n                    s0 = 0;\n                    s1 = Math.min(Math.max(-segExtent, -b1), segExtent);\n                    sqrDist = s1 * (s1 + 2 * b1) + c;\n                }\n                else {\n                    // region 2\n                    s0 = Math.max(0, -(a01 * segExtent + b0));\n                    s1 = s0 > 0 ? segExtent : Math.min(Math.max(-segExtent, -b1), segExtent);\n                    sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n                }\n            }\n        }\n        else {\n            // Ray and segment are parallel.\n            s1 = a01 > 0 ? -segExtent : segExtent;\n            s0 = Math.max(0, -(a01 * s1 + b0));\n            sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n        }\n        if (optionalPointOnRay) {\n            optionalPointOnRay\n                .copy(this.direction)\n                .multiplyScalar(s0)\n                .add(this.origin);\n        }\n        if (optionalPointOnSegment) {\n            optionalPointOnSegment\n                .copy(segDir)\n                .multiplyScalar(s1)\n                .add(segCenter);\n        }\n        return sqrDist;\n    }\n    intersectSphere(sphere) {\n        const vec = new Vector3().copy(sphere.center).sub(this.origin);\n        const tca = vec.dot(this.direction);\n        const d2 = vec.dot(vec) - tca * tca;\n        const radius2 = sphere.radius * sphere.radius;\n        if (d2 > radius2)\n            return null;\n        const thc = Math.sqrt(radius2 - d2);\n        // t0 = first intersect point - entrance on front of sphere\n        const t0 = tca - thc;\n        // t1 = second intersect point - exit point on back of sphere\n        const t1 = tca + thc;\n        // test to see if both t0 and t1 are behind the ray - if so, return null\n        if (t0 < 0 && t1 < 0)\n            return null;\n        // test to see if t0 is behind the ray:\n        // if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n        // in order to always return an intersect point that is in front of the ray.\n        if (t0 < 0)\n            return this.at(t1);\n        // else t0 is in front of the ray, so return the first collision point scaled by t0\n        return this.at(t0);\n    }\n    intersectsSphere(sphere) {\n        return this.distanceToPoint(sphere.center) <= sphere.radius;\n    }\n    distanceToPlane(plane) {\n        const denominator = plane.normal.dot(this.direction);\n        if (denominator === 0) {\n            // line is coplanar, return origin\n            if (plane.distanceToPoint(this.origin) === 0) {\n                return 0;\n            }\n            // Null is preferable to undefined since undefined means.... it is undefined\n            return Infinity;\n        }\n        const t = -(this.origin.dot(plane.normal) + plane.constant) / denominator;\n        // Return if the ray never intersects the plane\n        return t >= 0 ? t : Infinity;\n    }\n    intersectPlane(plane) {\n        const t = this.distanceToPlane(plane);\n        if (!isFinite(t)) {\n            return null;\n        }\n        return this.at(t);\n    }\n    intersectsPlane(plane) {\n        // check if the ray lies on the plane first\n        const distToPoint = plane.distanceToPoint(this.origin);\n        if (distToPoint === 0) {\n            return true;\n        }\n        const denominator = plane.normal.dot(this.direction);\n        if (denominator * distToPoint < 0) {\n            return true;\n        }\n        // ray origin is behind the plane (and is pointing behind it)\n        return false;\n    }\n    intersectBox(box) {\n        let tmin, tmax, tymin, tymax, tzmin, tzmax;\n        const invdirx = 1 / this.direction.x, invdiry = 1 / this.direction.y, invdirz = 1 / this.direction.z;\n        const origin = this.origin;\n        if (invdirx >= 0) {\n            tmin = (box.min.x - origin.x) * invdirx;\n            tmax = (box.max.x - origin.x) * invdirx;\n        }\n        else {\n            tmin = (box.max.x - origin.x) * invdirx;\n            tmax = (box.min.x - origin.x) * invdirx;\n        }\n        if (invdiry >= 0) {\n            tymin = (box.min.y - origin.y) * invdiry;\n            tymax = (box.max.y - origin.y) * invdiry;\n        }\n        else {\n            tymin = (box.max.y - origin.y) * invdiry;\n            tymax = (box.min.y - origin.y) * invdiry;\n        }\n        if (tmin > tymax || tymin > tmax)\n            return null;\n        // These lines also handle the case where tmin or tmax is NaN\n        // (result of 0 * Infinity). x !== x returns true if x is NaN\n        if (tymin > tmin || tmin !== tmin)\n            tmin = tymin;\n        if (tymax < tmax || tmax !== tmax)\n            tmax = tymax;\n        if (invdirz >= 0) {\n            tzmin = (box.min.z - origin.z) * invdirz;\n            tzmax = (box.max.z - origin.z) * invdirz;\n        }\n        else {\n            tzmin = (box.max.z - origin.z) * invdirz;\n            tzmax = (box.min.z - origin.z) * invdirz;\n        }\n        if (tmin > tzmax || tzmin > tmax)\n            return null;\n        if (tzmin > tmin || tmin !== tmin)\n            tmin = tzmin;\n        if (tzmax < tmax || tmax !== tmax)\n            tmax = tzmax;\n        // return point closest to the ray (positive side)\n        if (tmax < 0)\n            return null;\n        return this.at(tmin >= 0 ? tmin : tmax);\n    }\n    intersectsBox(box) {\n        return this.intersectBox(box) !== null;\n    }\n    intersectTriangle(triangle, backFaceCulling = false) {\n        // Compute the offset origin, edges, and normal.\n        const a = triangle.a, b = triangle.b, c = triangle.c;\n        const edge1 = new Vector3().copy(b).sub(a);\n        const edge2 = new Vector3().copy(c).sub(a);\n        const normal = new Vector3().copy(edge1).cross(edge2);\n        // Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n        // E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n        //   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n        //   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n        //   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n        let DdN = this.direction.dot(normal);\n        let sign;\n        if (DdN > 0) {\n            if (backFaceCulling)\n                return null;\n            sign = 1;\n        }\n        else if (DdN < 0) {\n            sign = -1;\n            DdN = -DdN;\n        }\n        else {\n            return null;\n        }\n        const diff = new Vector3().copy(this.origin).sub(a);\n        const DdQxE2 = sign * this.direction.dot(edge2.copy(diff).cross(edge2));\n        // b1 < 0, no intersection\n        if (DdQxE2 < 0) {\n            return null;\n        }\n        const DdE1xQ = sign * this.direction.dot(edge1.cross(diff));\n        // b2 < 0, no intersection\n        if (DdE1xQ < 0) {\n            return null;\n        }\n        // b1+b2 > 1, no intersection\n        if (DdQxE2 + DdE1xQ > DdN) {\n            return null;\n        }\n        // Line intersects triangle, check if ray does.\n        const QdN = -sign * diff.dot(normal);\n        // t < 0, no intersection\n        if (QdN < 0) {\n            return null;\n        }\n        // Ray intersects triangle.\n        return this.at(QdN / DdN);\n    }\n    intersectsTriangle(triangle) {\n        return this.intersectTriangle(triangle) !== null;\n    }\n    applyMatrix4(matrix4) {\n        this.origin.applyMatrix4(matrix4);\n        this.direction.transformDirection(matrix4);\n        return this;\n    }\n    equals(ray) {\n        return ray.origin.equals(this.origin) && ray.direction.equals(this.direction);\n    }\n}\n","import { Box3 } from \"./Box3\";\nimport { Vector3 } from \"./Vector3\";\nexport class Sphere {\n    constructor(center = new Vector3(), radius = 0) {\n        this.center = new Vector3();\n        this.radius = 0;\n        this.center = center;\n        this.radius = radius;\n    }\n    set(center, radius) {\n        this.center.copy(center);\n        this.radius = radius;\n        return this;\n    }\n    setFromPoints(points, optionalCenter) {\n        if (optionalCenter !== undefined) {\n            this.center.copy(optionalCenter);\n        }\n        else {\n            this.center = new Box3().setFromPoints(points).getCenter();\n        }\n        let maxRadiusSq = 0;\n        for (let i = 0, il = points.length; i < il; i++) {\n            maxRadiusSq = Math.max(maxRadiusSq, this.center.distanceToSquared(points[i]));\n        }\n        this.radius = Math.sqrt(maxRadiusSq);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(sphere) {\n        this.center.copy(sphere.center);\n        this.radius = sphere.radius;\n        return this;\n    }\n    empty() {\n        return this.radius <= 0;\n    }\n    containsPoint(point) {\n        return point.distanceToSquared(this.center) <= this.radius * this.radius;\n    }\n    distanceToPoint(point) {\n        return point.distanceTo(this.center) - this.radius;\n    }\n    intersectsSphere(sphere) {\n        const radiusSum = this.radius + sphere.radius;\n        return sphere.center.distanceToSquared(this.center) <= radiusSum * radiusSum;\n    }\n    intersectsBox(box) {\n        return box.intersectsSphere(this);\n    }\n    intersectsPlane(plane) {\n        return Math.abs(plane.distanceToPoint(this.center)) <= this.radius;\n    }\n    clampPoint(point) {\n        const deltaLengthSquared = this.center.distanceToSquared(point);\n        const result = new Vector3().copy(point);\n        if (deltaLengthSquared > this.radius * this.radius) {\n            result.sub(this.center).normalize();\n            result.multiplyScalar(this.radius).add(this.center);\n        }\n        return result;\n    }\n    getBoundingBox() {\n        return new Box3().set(this.center, this.center).expandByScalar(this.radius);\n    }\n    applyMatrix4(matrix) {\n        this.center.applyMatrix4(matrix);\n        this.radius = this.radius * matrix.getMaxScaleOnAxis();\n        return this;\n    }\n    translate(offset) {\n        this.center.add(offset);\n        return this;\n    }\n    equals(sphere) {\n        return sphere.center.equals(this.center) && sphere.radius === this.radius;\n    }\n}\n","import { MathUtil } from \"./Math\";\nexport class Spherical {\n    constructor(radius = 1.0, phi = 0, theta = 0) {\n        this.radius = radius;\n        this.phi = phi;\n        this.theta = theta;\n    }\n    set(radius, phi, theta) {\n        this.radius = radius;\n        this.phi = phi;\n        this.theta = theta;\n        return this;\n    }\n    copy(other) {\n        this.radius = other.radius;\n        this.phi = other.phi;\n        this.theta = other.theta;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    // restrict phi to be betwee EPS and PI-EPS\n    makeSafe() {\n        const EPS = 0.000001;\n        this.phi = Math.max(EPS, Math.min(Math.PI - EPS, this.phi));\n        return this;\n    }\n    setFromVector3(vec3) {\n        this.radius = vec3.length();\n        if (this.radius === 0) {\n            this.theta = 0;\n            this.phi = 0;\n        }\n        else {\n            this.theta = Math.atan2(vec3.x, vec3.z); // equator angle around y-up axis\n            this.phi = Math.acos(MathUtil.clamp(vec3.y / this.radius, -1, 1)); // polar angle\n        }\n        return this;\n    }\n}\n","import { Line3 } from \"./Line3\";\nimport { Plane } from \"./Plane\";\nimport { Vector3 } from \"./Vector3\";\nexport class Triangle {\n    constructor(a = new Vector3(), b = new Vector3(), c = new Vector3()) {\n        this.a = new Vector3();\n        this.b = new Vector3();\n        this.c = new Vector3();\n        this.a = a;\n        this.b = b;\n        this.c = c;\n    }\n    set(a, b, c) {\n        this.a.copy(a);\n        this.b.copy(b);\n        this.c.copy(c);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(triangle) {\n        this.a.copy(triangle.a);\n        this.b.copy(triangle.b);\n        this.c.copy(triangle.c);\n        return this;\n    }\n    area() {\n        const v0 = new Vector3().copy(this.c).sub(this.b);\n        const v1 = new Vector3().copy(this.a).sub(this.b);\n        return v0.cross(v1).length() * 0.5;\n    }\n    midpoint() {\n        return new Vector3()\n            .copy(this.a)\n            .add(this.b)\n            .add(this.c)\n            .multiplyScalar(1 / 3);\n    }\n    normal() {\n        const vec = new Vector3().copy(this.a).sub(this.b);\n        const result = new Vector3()\n            .copy(this.c)\n            .sub(this.b)\n            .cross(vec);\n        const resultLengthSquared = result.lengthSquared();\n        if (resultLengthSquared > 0) {\n            return result.multiplyScalar(1 / Math.sqrt(resultLengthSquared));\n        }\n        return result.set(0, 0, 0);\n    }\n    plane() {\n        return new Plane().setFromCoplanarPoints(this.a, this.b, this.c);\n    }\n    /**\n     * based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n     * @param point\n     */\n    barycoordFromPoint(point) {\n        const v0 = new Vector3().copy(this.c).sub(this.a);\n        const v1 = new Vector3().copy(this.b).sub(this.a);\n        const v2 = new Vector3().copy(point).sub(this.a);\n        const dot00 = v0.dot(v0);\n        const dot01 = v0.dot(v1);\n        const dot02 = v0.dot(v2);\n        const dot11 = v1.dot(v1);\n        const dot12 = v1.dot(v2);\n        const denom = dot00 * dot11 - dot01 * dot01;\n        // collinear or singular triangle\n        if (denom === 0) {\n            // arbitrary location outside of triangle?\n            // not sure if this is the best idea, maybe should be returning undefined\n            return new Vector3().set(-2, -1, -1);\n        }\n        const invDenom = 1 / denom;\n        const u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n        const v = (dot00 * dot12 - dot01 * dot02) * invDenom;\n        // barycentric coordinates must always sum to 1\n        return new Vector3().set(1 - u - v, v, u);\n    }\n    containsPoint(point) {\n        const result = this.barycoordFromPoint(point);\n        return result.x >= 0 && result.y >= 0 && result.x + result.y <= 1;\n    }\n    closestPointToPoint(point) {\n        // project the point onto the plane of the triangle\n        const plane = new Plane().setFromCoplanarPoints(this.a, this.b, this.c);\n        const projectedPoint = plane.projectPoint(point);\n        // check if the projection lies within the triangle\n        if (this.containsPoint(projectedPoint) === true) {\n            // if so, this is the closest point\n            return new Vector3().copy(projectedPoint);\n        }\n        else {\n            const result = new Vector3();\n            let minDistance = Infinity;\n            // if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\n            const edgeList = [new Line3(this.a, this.b), new Line3(this.b, this.c), new Line3(this.c, this.a)];\n            for (let i = 0; i < edgeList.length; i++) {\n                const closestPoint = edgeList[i].closestPointToPoint(projectedPoint, true);\n                const distance = projectedPoint.distanceToSquared(closestPoint);\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    result.copy(closestPoint);\n                }\n            }\n            return result;\n        }\n    }\n    equals(triangle) {\n        return triangle.a.equals(this.a) && triangle.b.equals(this.b) && triangle.c.equals(this.c);\n    }\n}\n","export class Vector2 {\n    get x() {\n        return this._x;\n    }\n    set x(x) {\n        this._x = x;\n    }\n    get y() {\n        return this._y;\n    }\n    set y(y) {\n        this._y = y;\n    }\n    get width() {\n        return this.x;\n    }\n    set width(width) {\n        this._x = width;\n    }\n    get height() {\n        return this.y;\n    }\n    set height(height) {\n        this._y = height;\n    }\n    constructor(x = 0, y = 0) {\n        this._x = x;\n        this._y = y;\n    }\n    set(x, y) {\n        this._x = x;\n        this._y = y;\n        return this;\n    }\n    setScalar(scalar) {\n        return this.set(scalar, scalar);\n    }\n    copy(v) {\n        return this.set(v.x, v.y);\n    }\n    add(v) {\n        return this.set(this.x + v.x, this.y + v.y);\n    }\n    addScalar(s) {\n        return this.set(this.x + s, this.y + s);\n    }\n    sub(v) {\n        return this.set(this.x - v.x, this.y - v.y);\n    }\n    subScalar(s) {\n        return this.set(this.x - s, this.y - s);\n    }\n    multiply(v) {\n        return this.set(this.x * v.x, this.y * v.y);\n    }\n    multiplyScalar(s) {\n        return this.set(this.x * s, this.y * s);\n    }\n    divide(v) {\n        return this.set(this.x / v.x, this.y / v.y);\n    }\n    divideScalar(s) {\n        return this.set(this.x / s, this.y / s);\n    }\n    applyMatrix3(m) {\n        const x = this.x, y = this.y;\n        const e = m.elements;\n        return this.set(e[0] * x + e[3] * y + e[6], e[1] * x + e[4] * y + e[7]);\n    }\n    min(v) {\n        this.x = Math.min(this.x, v.x);\n        this.y = Math.min(this.y, v.y);\n        return this;\n    }\n    max(v) {\n        this.x = Math.max(this.x, v.x);\n        this.y = Math.max(this.y, v.y);\n        return this;\n    }\n    clamp(min, max) {\n        return this.set(Math.max(min.x, Math.min(max.x, this.x)), Math.max(min.y, Math.min(max.y, this.y)));\n    }\n    negate() {\n        return this.set(-this.x, -this.y);\n    }\n    dot(v) {\n        return this.x * v.x + this.y * v.y;\n    }\n    lengthSquared() {\n        return this.x * this.x + this.y * this.y;\n    }\n    length() {\n        return Math.sqrt(this.lengthSquared());\n    }\n    manhattanLength() {\n        return Math.abs(this.x) + Math.abs(this.y);\n    }\n    normalize() {\n        return this.divideScalar(this.length() || 1);\n    }\n    setLength(length) {\n        return this.normalize().multiplyScalar(length);\n    }\n    lerp(v, alpha) {\n        return this.set(this.x + (v.x - this.x) * alpha, this.y + (v.y - this.y) * alpha);\n    }\n    lerpVectors(v1, v2, alpha) {\n        return this.copy(v2)\n            .sub(v1)\n            .multiplyScalar(alpha)\n            .add(v1);\n    }\n    equals(v) {\n        return v.x === this.x && v.y === this.y;\n    }\n    fromArray(array, offset = 0) {\n        return this.set(array[offset], array[offset + 1]);\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        return array;\n    }\n    rotateAround(center, angle) {\n        const c = Math.cos(angle), s = Math.sin(angle);\n        const x = this.x - center.x;\n        const y = this.y - center.y;\n        return this.set(x * c - y * s + center.x, x * s + y * c + center.y);\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { MathUtil } from \"./Math\";\nimport { Quaternion } from \"./Quaternion\";\nexport class Vector3 {\n    constructor(x = 0, y = 0, z = 0) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n    }\n    get x() {\n        return this._x;\n    }\n    set x(x) {\n        this._x = x;\n    }\n    get y() {\n        return this._y;\n    }\n    set y(y) {\n        this._y = y;\n    }\n    get z() {\n        return this._z;\n    }\n    set z(z) {\n        this._z = z;\n    }\n    set(x, y, z) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        return this;\n    }\n    setScalar(scalar) {\n        return this.set(scalar, scalar, scalar);\n    }\n    copy(vec) {\n        return this.set(vec.x, vec.y, vec.z);\n    }\n    add(vec) {\n        return this.set(this.x + vec.x, this.y + vec.y, this.z + vec.z);\n    }\n    addScalar(scalar) {\n        return this.set(this.x + scalar, this.y + scalar, this.z + scalar);\n    }\n    sub(vec) {\n        return this.set(this.x - vec.x, this.y - vec.y, this.z - vec.z);\n    }\n    subScalar(scalar) {\n        return this.set(this.x - scalar, this.y - scalar, this.z - scalar);\n    }\n    multiply(vec) {\n        return this.set(this.x * vec.x, this.y * vec.y, this.z * vec.z);\n    }\n    multiplyScalar(scalar) {\n        return this.set(this.x * scalar, this.y * scalar, this.z * scalar);\n    }\n    divide(vec) {\n        return this.set(this.x / vec.x, this.y / vec.y, this.z / vec.z);\n    }\n    divideScalar(scalar) {\n        return this.set(this.x / scalar, this.y / scalar, this.z / scalar);\n    }\n    applyEuler(euler) {\n        const quaternion = new Quaternion();\n        return this.applyQuaternion(quaternion.setFromEuler(euler));\n    }\n    applyAxisAngle(axis, angle) {\n        const quaternion = new Quaternion();\n        return this.applyQuaternion(quaternion.setFromAxisAngle(axis, angle));\n    }\n    applyMatrix3(m) {\n        const x = this.x, y = this.y, z = this.z;\n        const e = m.elements;\n        return this.set(e[0] * x + e[3] * y + e[6] * z, e[1] * x + e[4] * y + e[7] * z, e[2] * x + e[5] * y + e[8] * z);\n    }\n    applyMatrix4(matrix) {\n        const x = this.x, y = this.y, z = this.z;\n        const e = matrix.elements;\n        const w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n        return this.set((e[0] * x + e[4] * y + e[8] * z + e[12]) * w, (e[1] * x + e[5] * y + e[9] * z + e[13]) * w, (e[2] * x + e[6] * y + e[10] * z + e[14]) * w);\n    }\n    applyQuaternion(quaternion) {\n        const x = this.x, y = this.y, z = this.z;\n        const qx = quaternion.x, qy = quaternion.y, qz = quaternion.z, qw = quaternion.w;\n        // calculate quat * vector\n        const ix = qw * x + qy * z - qz * y;\n        const iy = qw * y + qz * x - qx * z;\n        const iz = qw * z + qx * y - qy * x;\n        const iw = -qx * x - qy * y - qz * z;\n        // calculate result * inverse quat\n        return this.set(ix * qw + iw * -qx + iy * -qz - iz * -qy, iy * qw + iw * -qy + iz * -qx - ix * -qz, iz * qw + iw * -qz + ix * -qy - iy * -qx);\n    }\n    transformDirection(mat4) {\n        const x = this.x, y = this.y, z = this.z;\n        const e = mat4.elements;\n        return this.set(e[0] * x + e[4] * y + e[8] * z, e[1] * x + e[5] * y + e[9] * z, e[2] * x + e[6] * y + e[10] * z).normalize();\n    }\n    min(vec) {\n        return this.set(Math.min(this.x, vec.x), Math.min(this.y, vec.y), Math.min(this.z, vec.z));\n    }\n    max(vec) {\n        return this.set(Math.max(this.x, vec.x), Math.max(this.y, vec.y), Math.max(this.z, vec.z));\n    }\n    clamp(min, max) {\n        return this.set(Math.max(min.x, Math.min(max.x, this.x)), Math.max(min.y, Math.min(max.y, this.y)), Math.max(min.z, Math.min(max.z, this.z)));\n    }\n    negate() {\n        return this.set(-this.x, -this.y, -this.z);\n    }\n    dot(v) {\n        return this.x * v.x + this.y * v.y + this.z * v.z;\n    }\n    lengthSquared() {\n        const x = this.x, y = this.y, z = this.z;\n        return x * x + y * y + z * z;\n    }\n    length() {\n        const x = this.x, y = this.y, z = this.z;\n        return Math.sqrt(x * x + y * y + z * z);\n    }\n    setLength(length) {\n        return this.normalize().multiplyScalar(length);\n    }\n    manhattanLength() {\n        const x = this.x, y = this.y, z = this.z;\n        return Math.abs(x) + Math.abs(y) + Math.abs(z);\n    }\n    normalize() {\n        return this.divideScalar(this.length() || 1);\n    }\n    lerp(vec, alpha) {\n        return this.set((vec.x - this.x) * alpha, (vec.y - this.y) * alpha, (vec.z - this.z) * alpha);\n    }\n    lerpVectors(v1, v2, alpha) {\n        return this.set(v2.x - v1.x, v2.y - v1.y, v2.z - v1.z)\n            .multiplyScalar(alpha)\n            .add(v1);\n    }\n    cross(vec) {\n        const ax = this.x, ay = this.y, az = this.z;\n        const bx = vec.x, by = vec.y, bz = vec.z;\n        return this.set(ay * bz - az * by, az * bx - ax * bz, ax * by - ay * bx);\n    }\n    projectOnVector(vector) {\n        const scalar = vector.dot(this) / vector.lengthSquared();\n        return this.copy(vector).multiplyScalar(scalar);\n    }\n    projectOnPlane(planeNormal) {\n        const vec = new Vector3();\n        vec.copy(this).projectOnVector(planeNormal);\n        return this.sub(vec);\n    }\n    /**\n     * reflect incident vector off plane orthogonal to normal\n     * normal is assumed to have unit length\n     * @param normal\n     * @returns {Vector3}\n     */\n    reflect(normal) {\n        const vec = new Vector3();\n        return this.sub(vec.copy(normal).multiplyScalar(2 * this.dot(normal)));\n    }\n    angleTo(v) {\n        const theta = this.dot(v) / Math.sqrt(this.lengthSquared() * v.lengthSquared());\n        return Math.acos(MathUtil.clamp(theta, -1, 1));\n    }\n    distanceTo(vec) {\n        return Math.sqrt(this.distanceToSquared(vec));\n    }\n    distanceToSquared(vec) {\n        const dx = this.x - vec.x, dy = this.y - vec.y, dz = this.z - vec.z;\n        return dx * dx + dy * dy + dz * dz;\n    }\n    equals(vec) {\n        return vec.x === this.x && vec.y === this.y && vec.z === this.z;\n    }\n    setFromSpherical(s) {\n        const sinPhiRadius = Math.sin(s.phi) * s.radius;\n        this.x = sinPhiRadius * Math.sin(s.theta);\n        this.y = Math.cos(s.phi) * s.radius;\n        this.z = sinPhiRadius * Math.cos(s.theta);\n        return this;\n    }\n    setFromMatrixPosition(m) {\n        const e = m.elements;\n        return this.set(e[12], e[13], e[14]);\n    }\n    setFromMatrixScale(m) {\n        const sx = this.setFromMatrixColumn(m, 0).length();\n        const sy = this.setFromMatrixColumn(m, 1).length();\n        const sz = this.setFromMatrixColumn(m, 2).length();\n        this.x = sx;\n        this.y = sy;\n        this.z = sz;\n        return this;\n    }\n    setFromMatrixColumn(m, index) {\n        return this.fromArray(m.elements, index * 4);\n    }\n    fromArray(array, offset = 0) {\n        return this.set(array[offset], array[offset + 1], array[offset + 2]);\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        array[offset + 2] = this.z;\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","export class Vector4 {\n    constructor(x = 0, y = 0, z = 0, w = 0) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n    }\n    get x() {\n        return this._x;\n    }\n    set x(x) {\n        this._x = x;\n    }\n    get y() {\n        return this._y;\n    }\n    set y(y) {\n        this._y = y;\n    }\n    get z() {\n        return this._z;\n    }\n    set z(z) {\n        this._z = z;\n    }\n    get w() {\n        return this._w;\n    }\n    set w(w) {\n        this._w = w;\n    }\n    set(x, y, z, w) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n        return this;\n    }\n    setScalar(scalar) {\n        return this.set(scalar, scalar, scalar, scalar);\n    }\n    copy(v) {\n        return this.set(v.x, v.y, v.z, (v instanceof Vector4 ? v.w : undefined) || 1);\n    }\n    add(v) {\n        return this.set(this.x + v.x, this.y + v.y, this.z + v.z, this.w + v.w);\n    }\n    addScalar(s) {\n        return this.set(this.x + s, this.y + s, this.z + s, this.w + s);\n    }\n    sub(v) {\n        return this.set(this.x - v.x, this.y - v.y, this.z - v.z, this.w - v.w);\n    }\n    subScalar(s) {\n        return this.set(this.x - s, this.y - s, this.z - s, this.w - s);\n    }\n    multiplyScalar(s) {\n        return this.set(this.x * s, this.y * s, this.z * s, this.w * s);\n    }\n    divideScalar(s) {\n        return this.set(this.x / s, this.y / s, this.z / s, this.w / s);\n    }\n    applyMatrix4(m) {\n        const x = this.x, y = this.y, z = this.z, w = this.w;\n        const e = m.elements;\n        return this.set(e[0] * x + e[4] * y + e[8] * z + e[12] * w, e[1] * x + e[5] * y + e[9] * z + e[13] * w, e[2] * x + e[6] * y + e[10] * z + e[14] * w, e[3] * x + e[7] * y + e[11] * z + e[15] * w);\n    }\n    /**\n     * http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n     * q is assumed to be normalized\n     * @param q\n     * @returns {Vector4}\n     */\n    setAxisAngleFromQuaternion(q) {\n        const s = Math.sqrt(1 - q.w * q.w);\n        if (s < 0.0001) {\n            return this.set(1, 0, 0, 2 * Math.acos(q.w));\n        }\n        else {\n            return this.set(q.x / s, q.y / s, q.z / s, 2 * Math.acos(q.w));\n        }\n    }\n    /**\n     * http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n     * @param m\n     * @returns {Vector4}\n     */\n    setAxisAngleFromRotationMatrix(m) {\n        // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n        let angle, x, y, z; // variables for result\n        const epsilon = 0.01, // margin to allow for rounding errors\n        epsilon2 = 0.1, // margin to distinguish between 0 and 180 degrees\n        te = m.elements, m11 = te[0], m12 = te[4], m13 = te[8], m21 = te[1], m22 = te[5], m23 = te[9], m31 = te[2], m32 = te[6], m33 = te[10];\n        if (Math.abs(m12 - m21) < epsilon && Math.abs(m13 - m31) < epsilon && Math.abs(m23 - m32) < epsilon) {\n            // singularity found\n            // first check for identity matrix which must have +1 for all terms\n            // in leading diagonal and zero in other terms\n            if (Math.abs(m12 + m21) < epsilon2 &&\n                Math.abs(m13 + m31) < epsilon2 &&\n                Math.abs(m23 + m32) < epsilon2 &&\n                Math.abs(m11 + m22 + m33 - 3) < epsilon2) {\n                // this singularity is identity matrix so angle = 0\n                // zero angle, arbitrary axis\n                return this.set(1, 0, 0, 0);\n            }\n            // otherwise this singularity is angle = 180\n            angle = Math.PI;\n            const xx = (m11 + 1) / 2;\n            const yy = (m22 + 1) / 2;\n            const zz = (m33 + 1) / 2;\n            const xy = (m12 + m21) / 4;\n            const xz = (m13 + m31) / 4;\n            const yz = (m23 + m32) / 4;\n            if (xx > yy && xx > zz) {\n                // m11 is the largest diagonal term\n                if (xx < epsilon) {\n                    x = 0;\n                    y = 0.707106781;\n                    z = 0.707106781;\n                }\n                else {\n                    x = Math.sqrt(xx);\n                    y = xy / x;\n                    z = xz / x;\n                }\n            }\n            else if (yy > zz) {\n                // m22 is the largest diagonal term\n                if (yy < epsilon) {\n                    x = 0.707106781;\n                    y = 0;\n                    z = 0.707106781;\n                }\n                else {\n                    y = Math.sqrt(yy);\n                    x = xy / y;\n                    z = yz / y;\n                }\n            }\n            else {\n                // m33 is the largest diagonal term so base result on this\n                if (zz < epsilon) {\n                    x = 0.707106781;\n                    y = 0.707106781;\n                    z = 0;\n                }\n                else {\n                    z = Math.sqrt(zz);\n                    x = xz / z;\n                    y = yz / z;\n                }\n            }\n            // return 180 deg rotation\n            return this.set(x, y, z, angle);\n        }\n        // as we have reached here there are no singularities so we can handle normally\n        let s = Math.sqrt((m32 - m23) * (m32 - m23) + (m13 - m31) * (m13 - m31) + (m21 - m12) * (m21 - m12)); // used to normalize\n        if (Math.abs(s) < 0.001)\n            s = 1;\n        // prevent divide by zero, should not happen if matrix is orthogonal and should be\n        // caught by singularity test above, but I\"ve left it in just in case\n        return this.set((m32 - m23) / s, (m13 - m31) / s, (m21 - m12) / s, Math.acos((m11 + m22 + m33 - 1) / 2));\n    }\n    min(v) {\n        return this.set(Math.min(this.x, v.x), Math.min(this.y, v.y), Math.min(this.z, v.z), Math.min(this.w, v.w));\n    }\n    max(v) {\n        return this.set(Math.max(this.x, v.x), Math.max(this.y, v.y), Math.max(this.z, v.z), Math.max(this.w, v.w));\n    }\n    clamp(min, max) {\n        return this.set(Math.max(min.x, Math.min(max.x, this.x)), Math.max(min.y, Math.min(max.y, this.y)), Math.max(min.z, Math.min(max.z, this.z)), Math.max(min.w, Math.min(max.w, this.w)));\n    }\n    negate() {\n        return this.set(-this.x, -this.y, -this.z, -this.w);\n    }\n    dot(v) {\n        return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n    }\n    lengthSquared() {\n        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n    }\n    length() {\n        return Math.sqrt(this.lengthSquared());\n    }\n    manhattanLength() {\n        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);\n    }\n    normalize() {\n        return this.divideScalar(this.length() || 1);\n    }\n    setLength(length) {\n        return this.normalize().multiplyScalar(length);\n    }\n    lerp(v, alpha) {\n        return this.set(this.x + (v.x - this.x) * alpha, this.y + (v.y - this.y) * alpha, this.z + (v.z - this.z) * alpha, this.w + (v.w - this.w) * alpha);\n    }\n    lerpVectors(v1, v2, alpha) {\n        return this.copy(v2)\n            .sub(v1)\n            .multiplyScalar(alpha)\n            .add(v1);\n    }\n    equals(v) {\n        return v.x === this.x && v.y === this.y && v.z === this.z && v.w === this.w;\n    }\n    fromArray(array, offset = 0) {\n        return this.set(array[offset], array[offset + 1], array[offset + 2], array[offset + 3]);\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        array[offset + 2] = this.z;\n        array[offset + 3] = this.w;\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nexport class Bone extends Object3D {\n    constructor() {\n        super(...arguments);\n        this.type = \"Bone\";\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nexport class Group extends Object3D {\n    constructor() {\n        super(...arguments);\n        this.type = \"IGroup\";\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class LOD extends Object3D {\n    constructor() {\n        super(...arguments);\n        this.type = \"LOD\";\n        this.levels = [];\n    }\n    addLevel(object, distance = 0) {\n        const levels = this.levels;\n        distance = Math.abs(distance);\n        let l = 0;\n        for (; l < levels.length; l++) {\n            if (distance < levels[l].distance) {\n                break;\n            }\n        }\n        levels.splice(l, 0, { distance: distance, object: object });\n        this.add(object);\n        return this;\n    }\n    getObjectForDistance(distance) {\n        const levels = this.levels;\n        let i = 1;\n        for (const l = levels.length; i < l; i++) {\n            if (distance < levels[i].distance) {\n                break;\n            }\n        }\n        return levels[i - 1].object;\n    }\n    raycast(raycaster, intersects = []) {\n        const matrixPosition = new Vector3().setFromMatrixPosition(this.matrixWorld);\n        const distance = raycaster.ray.origin.distanceTo(matrixPosition);\n        this.getObjectForDistance(distance).raycast(raycaster, intersects);\n        return intersects;\n    }\n    update(camera) {\n        const levels = this.levels;\n        if (levels.length > 1) {\n            const v1 = new Vector3().setFromMatrixPosition(camera.matrixWorld);\n            const v2 = new Vector3().setFromMatrixPosition(this.matrixWorld);\n            const distance = v1.distanceTo(v2);\n            levels[0].object.visible = true;\n            let i = 1;\n            const l = levels.length;\n            for (; i < l; i++) {\n                if (distance >= levels[i].distance) {\n                    levels[i - 1].object.visible = false;\n                    levels[i].object.visible = true;\n                }\n                else {\n                    break;\n                }\n            }\n            for (; i < l; i++) {\n                levels[i].object.visible = false;\n            }\n        }\n        return this;\n    }\n    copy(source) {\n        super.copy(source);\n        const levels = source.levels;\n        for (let i = 0, l = levels.length; i < l; i++) {\n            const level = levels[i];\n            this.addLevel(level.object.clone(), level.distance);\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Object3D } from \"../core/Object3D\";\nimport { LineBasicMaterial } from \"../materials/LineBasicMaterial\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Ray } from \"../math/Ray\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Vector3 } from \"../math/Vector3\";\n// import { LineSegments } from \"./LineSegments\";\nexport class Line extends Object3D {\n    constructor(geometry = new BufferGeometry(), material = new LineBasicMaterial({\n        color: Math.random() * 0xffffff,\n    })) {\n        super();\n        this.type = \"Line\";\n        this.geometry = geometry;\n        this.material = material;\n    }\n    raycast(raycaster, intersects) {\n        const precision = raycaster.linePrecision;\n        const precisionSquared = precision * precision;\n        const geometry = this.geometry;\n        const matrixWorld = this.matrixWorld;\n        // Checking boundingSphere distance to ray\n        if (geometry.boundingSphere === null)\n            geometry.computeBoundingSphere();\n        const sphere = new Sphere().copy(geometry.boundingSphere);\n        sphere.applyMatrix4(matrixWorld);\n        if (raycaster.ray.intersectsSphere(sphere) === false)\n            return;\n        const inverseMatrix = new Matrix4().getInverse(matrixWorld);\n        const ray = new Ray();\n        ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);\n        const vStart = new Vector3();\n        const vEnd = new Vector3();\n        const interSegment = new Vector3();\n        const interRay = new Vector3();\n        //const step: number = this instanceof LineSegments ? 2 : 1;\n        const step = 1;\n        if (geometry instanceof BufferGeometry) {\n            const index = geometry.index;\n            const attributes = geometry.attributes;\n            const positions = attributes.position.array;\n            if (index !== null) {\n                const indices = index.array;\n                for (let i = 0, l = indices.length - 1; i < l; i += step) {\n                    const a = indices[i];\n                    const b = indices[i + 1];\n                    vStart.fromArray(positions, a * 3);\n                    vEnd.fromArray(positions, b * 3);\n                    const distSquared = ray.distanceSquareToSegment(vStart, vEnd, interRay, interSegment);\n                    if (distSquared > precisionSquared)\n                        continue;\n                    interRay.applyMatrix4(this.matrixWorld); // Move back to world space for distance calculation\n                    const distance = raycaster.ray.origin.distanceTo(interRay);\n                    if (distance < raycaster.near || distance > raycaster.far) {\n                        continue;\n                    }\n                    intersects.push({\n                        distance: distance,\n                        index: i,\n                        object: this,\n                        // What do we want? intersection point on the ray or on the segment??\n                        // point: raycaster.ray.at( distance ),\n                        point: interSegment.clone().applyMatrix4(this.matrixWorld),\n                    });\n                }\n            }\n            else {\n                for (let i = 0, l = positions.length / 3 - 1; i < l; i += step) {\n                    vStart.fromArray(positions, 3 * i);\n                    vEnd.fromArray(positions, 3 * i + 3);\n                    const distSquared = ray.distanceSquareToSegment(vStart, vEnd, interRay, interSegment);\n                    if (distSquared > precisionSquared)\n                        continue;\n                    interRay.applyMatrix4(this.matrixWorld); // Move back to world space for distance calculation\n                    const distance = raycaster.ray.origin.distanceTo(interRay);\n                    if (distance < raycaster.near || distance > raycaster.far) {\n                        continue;\n                    }\n                    intersects.push({\n                        distance: distance,\n                        face: null,\n                        faceIndex: null,\n                        index: i,\n                        object: this,\n                        // What do we want? intersection point on the ray or on the segment??\n                        // point: raycaster.ray.at( distance ),\n                        point: interSegment.clone().applyMatrix4(this.matrixWorld),\n                    });\n                }\n            }\n        }\n        else if (geometry instanceof Geometry) {\n            const vertices = geometry.vertices;\n            const nbVertices = vertices.length;\n            for (let i = 0; i < nbVertices - 1; i += step) {\n                const distSquared = ray.distanceSquareToSegment(vertices[i], vertices[i + 1], interRay, interSegment);\n                if (distSquared > precisionSquared)\n                    continue;\n                interRay.applyMatrix4(this.matrixWorld); // Move back to world space for distance calculation\n                const distance = raycaster.ray.origin.distanceTo(interRay);\n                if (distance < raycaster.near || distance > raycaster.far) {\n                    continue;\n                }\n                intersects.push({\n                    distance: distance,\n                    face: null,\n                    faceIndex: null,\n                    index: i,\n                    object: this,\n                    // What do we want? intersection point on the ray or on the segment??\n                    // point: raycaster.ray.at( distance ),\n                    point: interSegment.clone().applyMatrix4(this.matrixWorld),\n                });\n            }\n        }\n    }\n    clone() {\n        return new this.constructor(this.geometry, this.material).copy(this);\n    }\n}\n","import { Line } from \"./Line\";\nexport class LineLoop extends Line {\n    constructor() {\n        super(...arguments);\n        this.type = \"LineLoop\";\n    }\n}\n","import { Line } from \"./Line\";\nexport class LineSegments extends Line {\n    constructor() {\n        super(...arguments);\n        this.type = \"LineSegments\";\n    }\n}\n","import { BackSide, DoubleSide, TrianglesDrawMode } from \"../constants\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Face3 } from \"../core/Face3\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Object3D } from \"../core/Object3D\";\nimport { MeshBasicMaterial } from \"../materials/MeshBasicMaterial\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Ray } from \"../math/Ray\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Triangle } from \"../math/Triangle\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { vectorFromBufferAttribute } from \"../utils\";\nexport class Mesh extends Object3D {\n    constructor(geometry = new BufferGeometry(), material = new MeshBasicMaterial({\n        color: Math.random() * 0xffffff,\n    })) {\n        super();\n        this.type = \"Mesh\";\n        this.drawMode = TrianglesDrawMode;\n        this.morphTargetInfluences = [];\n        this.morphTargetDictionary = {};\n        this.geometry = geometry;\n        this.material = material;\n        this.updateMorphTargets();\n    }\n    static uvIntersection(point, triangle, uv1, uv2, uv3) {\n        const baryCoord = triangle.barycoordFromPoint(point);\n        uv1.multiplyScalar(baryCoord.x);\n        uv2.multiplyScalar(baryCoord.y);\n        uv3.multiplyScalar(baryCoord.z);\n        uv1.add(uv2).add(uv3);\n        return uv1.clone();\n    }\n    static checkIntersection(object, material, raycaster, ray, pA, pB, pC, point) {\n        let intersect;\n        const intersectionPointWorld = new Vector3();\n        if (material.side === BackSide) {\n            intersect = ray.intersectTriangle(new Triangle(pC, pB, pA), true);\n        }\n        else {\n            intersect = ray.intersectTriangle(new Triangle(pC, pB, pA), material.side !== DoubleSide);\n        }\n        if (intersect === null)\n            return null;\n        point.copy(intersect);\n        intersectionPointWorld.copy(point);\n        intersectionPointWorld.applyMatrix4(object.matrixWorld);\n        const distance = raycaster.ray.origin.distanceTo(intersectionPointWorld);\n        if (distance < raycaster.near || distance > raycaster.far)\n            return null;\n        return {\n            distance: distance,\n            object: object,\n            point: intersectionPointWorld.clone(),\n        };\n    }\n    static checkBufferGeometryIntersection(object, raycaster, ray, position, uv, a, b, c) {\n        const intersectionPoint = new Vector3();\n        const vA = vectorFromBufferAttribute(new Vector3(), position, a);\n        const vB = vectorFromBufferAttribute(new Vector3(), position, b);\n        const vC = vectorFromBufferAttribute(new Vector3(), position, c);\n        const triangle = new Triangle(vectorFromBufferAttribute(new Vector3(), position, a), vectorFromBufferAttribute(new Vector3(), position, b), vectorFromBufferAttribute(new Vector3(), position, c));\n        const intersection = Mesh.checkIntersection(object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint);\n        if (intersection) {\n            if (uv) {\n                const uvA = vectorFromBufferAttribute(new Vector2(), uv, a);\n                const uvB = vectorFromBufferAttribute(new Vector2(), uv, b);\n                const uvC = vectorFromBufferAttribute(new Vector2(), uv, c);\n                intersection.uv = Mesh.uvIntersection(intersectionPoint, triangle, uvA, uvB, uvC);\n            }\n            intersection.face = new Face3(a, b, c, triangle.normal());\n            intersection.faceIndex = a;\n        }\n        return intersection;\n    }\n    setDrawMode(value) {\n        this.drawMode = value;\n        return this;\n    }\n    updateMorphTargets() {\n        const geometry = this.geometry;\n        if (geometry instanceof BufferGeometry) {\n            const morphAttributes = geometry.morphAttributes;\n            const keys = Object.keys(morphAttributes);\n            if (keys.length > 0) {\n                const morphAttribute = morphAttributes[keys[0]];\n                if (morphAttribute !== undefined) {\n                    for (let m = 0, ml = morphAttribute.length; m < ml; m++) {\n                        const name = morphAttribute[m].name || String(m);\n                        this.morphTargetInfluences.push(0);\n                        this.morphTargetDictionary[name] = m;\n                    }\n                }\n            }\n        }\n        else if (geometry instanceof Geometry) {\n            const morphTargets = geometry.morphTargets;\n            if (morphTargets !== undefined && morphTargets.length > 0) {\n                for (let m = 0, ml = morphTargets.length; m < ml; m++) {\n                    const name = morphTargets[m].name || String(m);\n                    this.morphTargetInfluences.push(0);\n                    this.morphTargetDictionary[name] = m;\n                }\n            }\n        }\n        return this;\n    }\n    raycast(raycaster, intersects) {\n        const geometry = this.geometry;\n        const material = this.material;\n        const matrixWorld = this.matrixWorld;\n        if (material === undefined)\n            return;\n        // Checking boundingSphere distance to ray\n        if (geometry.boundingSphere === null)\n            geometry.computeBoundingSphere();\n        const sphere = new Sphere().copy(geometry.boundingSphere).applyMatrix4(matrixWorld);\n        if (raycaster.ray.intersectsSphere(sphere) === false)\n            return;\n        const inverseMatrix = new Matrix4().getInverse(matrixWorld);\n        const ray = new Ray().copy(raycaster.ray).applyMatrix4(inverseMatrix);\n        // Check boundingBox before continuing\n        if (geometry.boundingBox !== null) {\n            if (ray.intersectsBox(geometry.boundingBox) === false)\n                return;\n        }\n        if (geometry instanceof BufferGeometry) {\n            const index = geometry.index;\n            const position = geometry.attributes.position;\n            const uv = geometry.attributes.uv;\n            if (index !== null) {\n                // indexed buffer geometry\n                for (let i = 0, l = index.count; i < l; i += 3) {\n                    const a = index.getProperty(i, \"x\");\n                    const b = index.getProperty(i + 1, \"x\");\n                    const c = index.getProperty(i + 2, \"x\");\n                    const intersection = Mesh.checkBufferGeometryIntersection(this, raycaster, ray, position, uv, a, b, c);\n                    if (intersection) {\n                        intersection.faceIndex = Math.floor(i / 3); // triangle number in indices buffer semantics\n                        intersects.push(intersection);\n                    }\n                }\n            }\n            else if (position !== undefined) {\n                // non-indexed buffer geometry\n                for (let i = 0, l = position.count; i < l; i += 3) {\n                    const a = i;\n                    const b = i + 1;\n                    const c = i + 2;\n                    const intersection = Mesh.checkBufferGeometryIntersection(this, raycaster, ray, position, uv, a, b, c);\n                    if (intersection) {\n                        intersection.index = a; // triangle number in positions buffer semantics\n                        intersects.push(intersection);\n                    }\n                }\n            }\n        }\n        else if (geometry instanceof Geometry) {\n            const vertices = geometry.vertices;\n            const faces = geometry.faces;\n            let uvs;\n            const faceVertexUvs = geometry.faceVertexUvs[0];\n            if (faceVertexUvs.length > 0)\n                uvs = faceVertexUvs;\n            for (let f = 0, fl = faces.length; f < fl; f++) {\n                const face = faces[f];\n                const faceMaterial = Array.isArray(material) ? material[face.materialIndex] : material;\n                if (faceMaterial === undefined)\n                    continue;\n                let fvA = vertices[face.a];\n                let fvB = vertices[face.b];\n                let fvC = vertices[face.c];\n                if (faceMaterial.morphTargets === true) {\n                    const morphTargets = geometry.morphTargets;\n                    const vA = new Vector3(), vB = new Vector3(), vC = new Vector3();\n                    for (let t = 0, tl = morphTargets.length; t < tl; t++) {\n                        const influence = this.morphTargetInfluences[t];\n                        if (influence === 0)\n                            continue;\n                        const targets = morphTargets[t].vertices;\n                        vA.add(new Vector3()\n                            .copy(targets[face.a])\n                            .sub(fvA)\n                            .multiplyScalar(influence));\n                        vB.add(new Vector3()\n                            .copy(targets[face.b])\n                            .sub(fvB)\n                            .multiplyScalar(influence));\n                        vC.add(new Vector3()\n                            .copy(targets[face.c])\n                            .sub(fvC)\n                            .multiplyScalar(influence));\n                    }\n                    vA.add(fvA);\n                    vB.add(fvB);\n                    vC.add(fvC);\n                    fvA = vA;\n                    fvB = vB;\n                    fvC = vC;\n                }\n                const intersectionPoint = new Vector3();\n                const intersection = Mesh.checkIntersection(this, faceMaterial, raycaster, ray, fvA, fvB, fvC, intersectionPoint);\n                if (intersection) {\n                    if (uvs && uvs[f]) {\n                        const uvsF = uvs[f];\n                        const uvA = new Vector2().copy(uvsF[0]);\n                        const uvB = new Vector2().copy(uvsF[1]);\n                        const uvC = new Vector2().copy(uvsF[2]);\n                        intersection.uv = Mesh.uvIntersection(intersectionPoint, new Triangle(fvA, fvB, fvC), uvA, uvB, uvC);\n                    }\n                    intersection.face = face;\n                    intersection.faceIndex = f;\n                    intersects.push(intersection);\n                }\n            }\n        }\n    }\n    clone() {\n        return new this.constructor(this.geometry, this.material).copy(this);\n    }\n}\n","import { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Object3D } from \"../core/Object3D\";\nimport { PointsMaterial } from \"../materials/PointsMaterial\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Ray } from \"../math/Ray\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class Points extends Object3D {\n    constructor(geometry = new BufferGeometry(), material = new PointsMaterial({\n        color: Math.random() * 0xffffff,\n    })) {\n        super();\n        this.type = \"Points\";\n        this.geometry = geometry;\n        this.material = material;\n    }\n    raycast(raycaster, intersects) {\n        const geometry = this.geometry;\n        const matrixWorld = this.matrixWorld;\n        const threshold = raycaster.params.Points.threshold;\n        // Checking boundingSphere distance to ray\n        if (geometry.boundingSphere === null)\n            geometry.computeBoundingSphere();\n        const sphere = new Sphere().copy(geometry.boundingSphere);\n        sphere.applyMatrix4(matrixWorld);\n        sphere.radius += threshold;\n        if (raycaster.ray.intersectsSphere(sphere) === false)\n            return;\n        const inverseMatrix = new Matrix4().getInverse(matrixWorld);\n        const ray = new Ray().copy(raycaster.ray).applyMatrix4(inverseMatrix);\n        const testPoint = (point, index2) => {\n            const localThreshold = threshold / ((this.scale.x + this.scale.y + this.scale.z) / 3);\n            const localThresholdSquare = localThreshold * localThreshold;\n            const rayPointDistanceSquare = ray.distanceSquaredToPoint(point);\n            if (rayPointDistanceSquare < localThresholdSquare) {\n                const intersectPoint = ray.closestPointToPoint(point);\n                intersectPoint.applyMatrix4(matrixWorld);\n                const distance = raycaster.ray.origin.distanceTo(intersectPoint);\n                if (distance < raycaster.near || distance > raycaster.far) {\n                    return;\n                }\n                intersects.push({\n                    distance: distance,\n                    distanceToRay: Math.sqrt(rayPointDistanceSquare),\n                    face: null,\n                    index: index2,\n                    object: this,\n                    point: intersectPoint.clone(),\n                });\n            }\n        };\n        if (geometry instanceof BufferGeometry) {\n            const position = new Vector3();\n            const index = geometry.index;\n            const positions = geometry.attributes.position.array;\n            if (index !== null) {\n                const indices = index.array;\n                for (let i = 0, il = indices.length; i < il; i++) {\n                    const a = indices[i];\n                    position.fromArray(positions, a * 3);\n                    testPoint(position, a);\n                }\n            }\n            else {\n                for (let i = 0, l = positions.length / 3; i < l; i++) {\n                    position.fromArray(positions, i * 3);\n                    testPoint(position, i);\n                }\n            }\n        }\n        else if (geometry instanceof Geometry) {\n            const vertices = geometry.vertices;\n            for (let i = 0, l = vertices.length; i < l; i++) {\n                testPoint(vertices[i], i);\n            }\n        }\n    }\n    clone() {\n        return new this.constructor(this.geometry, this.material).copy(this);\n    }\n}\n","import { Matrix4 } from \"../math/Matrix4\";\nimport { Bone } from \"./Bone\";\nconst offsetMatrix = new Matrix4();\nconst identityMatrix = new Matrix4();\nexport class Skeleton {\n    constructor(bones = [], boneInverses) {\n        this.bones = [];\n        this.boneInverses = [];\n        this.bones = bones.slice(0);\n        this.boneMatrices = new Float32Array(this.bones.length * 16);\n        if (boneInverses === undefined) {\n            this.calculateInverses();\n        }\n        else {\n            if (this.bones.length === boneInverses.length) {\n                this.boneInverses = boneInverses.slice(0);\n            }\n            else {\n                console.warn(\"THREE.Skeleton boneInverses is the wrong length.\");\n                for (let i = 0, il = this.bones.length; i < il; i++) {\n                    this.boneInverses.push(new Matrix4());\n                }\n            }\n        }\n    }\n    calculateInverses() {\n        this.boneInverses = [];\n        for (let i = 0, il = this.bones.length; i < il; i++) {\n            const inverse = new Matrix4();\n            if (this.bones[i]) {\n                inverse.getInverse(this.bones[i].matrixWorld);\n            }\n            this.boneInverses.push(inverse);\n        }\n    }\n    pose() {\n        // recover the bind-time world matrices\n        for (let i = 0, il = this.bones.length; i < il; i++) {\n            const bone = this.bones[i];\n            if (bone) {\n                bone.matrixWorld.getInverse(this.boneInverses[i]);\n            }\n        }\n        // compute the local matrices, positions, rotations and scales\n        for (let i = 0, il = this.bones.length; i < il; i++) {\n            const bone = this.bones[i];\n            if (bone) {\n                if (bone.parent && bone.parent instanceof Bone) {\n                    bone.matrix.getInverse(bone.parent.matrixWorld);\n                    bone.matrix.multiply(bone.matrixWorld);\n                }\n                else {\n                    bone.matrix.copy(bone.matrixWorld);\n                }\n                bone.matrix.decompose(bone.position, bone.quaternion, bone.scale);\n            }\n        }\n    }\n    update() {\n        const bones = this.bones;\n        const boneInverses = this.boneInverses;\n        const boneMatrices = this.boneMatrices;\n        const boneTexture = this.boneTexture;\n        // flatten bone matrices to array\n        for (let i = 0, il = bones.length; i < il; i++) {\n            // compute the offset between the current and the original transform\n            const matrix = bones[i] ? bones[i].matrixWorld : identityMatrix;\n            offsetMatrix.multiplyMatrices(matrix, boneInverses[i]);\n            offsetMatrix.toArray(boneMatrices, i * 16);\n        }\n        if (boneTexture !== undefined) {\n            boneTexture.needsUpdate = true;\n        }\n    }\n    getBoneByName(name) {\n        for (let i = 0, il = this.bones.length; i < il; i++) {\n            const bone = this.bones[i];\n            if (bone.name === name) {\n                return bone;\n            }\n        }\n        return undefined;\n    }\n    clone() {\n        return new this.constructor(this.bones, this.boneInverses);\n    }\n}\n","import { Mesh } from \"./Mesh\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Bone } from \"./Bone\";\nimport { Skeleton } from \"./Skeleton\";\nimport { Vector4 } from \"../math/Vector4\";\nexport class SkinnedMesh extends Mesh {\n    /**\n     * skinIndices and skinWeights should be set to true on the Geometry\n     * skinIndex and skinWeights attribute on BufferGeometry\n     * @param geometry\n     * @param material\n     */\n    constructor(geometry, material) {\n        super(geometry, material);\n        this.type = \"SkinnedMesh\";\n        this.bindMode = \"attached\";\n        this.bindMatrix = new Matrix4();\n        this.bindMatrixInverse = new Matrix4();\n        const bones = this.initBones();\n        const skeleton = new Skeleton(bones);\n        this.bind(skeleton, this.matrixWorld);\n        this.normalizeSkinWeights();\n    }\n    initBones() {\n        const bones = [];\n        if (this.geometry && this.geometry instanceof Geometry && this.geometry.bones !== undefined) {\n            // first, create array of 'Bone' objects from geometry data\n            for (let i = 0, il = this.geometry.bones.length; i < il; i++) {\n                const gbone = this.geometry.bones[i];\n                // create new 'Bone' object\n                const bone = new Bone();\n                bones.push(bone);\n                // apply values\n                bone.name = gbone.name;\n                bone.position.fromArray(gbone.pos);\n                bone.quaternion.fromArray(gbone.rotq);\n                if (gbone.scl !== undefined) {\n                    bone.scale.fromArray(gbone.scl);\n                }\n            }\n            // second, create bone hierarchy\n            for (let i = 0, il = this.geometry.bones.length; i < il; i++) {\n                const gbone = this.geometry.bones[i];\n                if (gbone.parent !== -1 && gbone.parent !== null && bones[gbone.parent] !== undefined) {\n                    // subsequent bones in the hierarchy\n                    bones[gbone.parent].add(bones[i]);\n                }\n                else {\n                    // topmost bone, immediate child of the skinned mesh\n                    this.add(bones[i]);\n                }\n            }\n        }\n        // now the bones are part of the scene graph and children of the skinned mesh.\n        // let's update the corresponding matrices\n        this.updateMatrixWorld(true);\n        return bones;\n    }\n    bind(skeleton, bindMatrix) {\n        this.skeleton = skeleton;\n        if (bindMatrix === undefined) {\n            this.updateMatrixWorld(true);\n            this.skeleton.calculateInverses();\n            bindMatrix = this.matrixWorld;\n        }\n        this.bindMatrix.copy(bindMatrix);\n        this.bindMatrixInverse.getInverse(bindMatrix);\n    }\n    pose() {\n        this.skeleton.pose();\n    }\n    normalizeSkinWeights() {\n        if (this.geometry && this.geometry instanceof Geometry) {\n            for (let i = 0; i < this.geometry.skinWeights.length; i++) {\n                const sw = this.geometry.skinWeights[i];\n                const scale = 1.0 / sw.manhattanLength();\n                if (scale !== Infinity) {\n                    sw.multiplyScalar(scale);\n                }\n                else {\n                    sw.set(1, 0, 0, 0); // do something reasonable\n                }\n            }\n        }\n        else if (this.geometry && this.geometry instanceof BufferGeometry) {\n            const vec = new Vector4();\n            const skinWeight = this.geometry.attributes.skinWeight;\n            for (let i = 0; i < skinWeight.count; i++) {\n                vec.x = skinWeight.getProperty(i, \"x\");\n                vec.y = skinWeight.getProperty(i, \"y\");\n                vec.z = skinWeight.getProperty(i, \"z\");\n                vec.w = skinWeight.getProperty(i, \"w\");\n                const scale = 1.0 / vec.manhattanLength();\n                if (scale !== Infinity) {\n                    vec.multiplyScalar(scale);\n                }\n                else {\n                    vec.set(1, 0, 0, 0); // do something reasonable\n                }\n                skinWeight.setProperty(i, \"xyzw\", vec);\n            }\n        }\n    }\n    updateMatrixWorld(force = false) {\n        super.updateMatrixWorld(force);\n        if (this.bindMode === \"attached\") {\n            this.bindMatrixInverse.getInverse(this.matrixWorld);\n        }\n        else if (this.bindMode === \"detached\") {\n            this.bindMatrixInverse.getInverse(this.bindMatrix);\n        }\n        else {\n            console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \" + this.bindMode);\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor(this.geometry, this.material).copy(this);\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { SpriteMaterial } from \"../materials/Materials\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class Sprite extends Object3D {\n    constructor(material = new SpriteMaterial()) {\n        super();\n        this.type = \"Sprite\";\n        this.material = material;\n    }\n    raycast(raycaster, intersects) {\n        const worldPosition = new Vector3().setFromMatrixPosition(this.matrixWorld);\n        const intersectPoint = raycaster.ray.closestPointToPoint(worldPosition);\n        const worldScale = new Vector3().setFromMatrixScale(this.matrixWorld);\n        const guessSizeSq = worldScale.x * worldScale.y / 4;\n        if (worldPosition.distanceToSquared(intersectPoint) > guessSizeSq) {\n            return;\n        }\n        const distance = raycaster.ray.origin.distanceTo(intersectPoint);\n        if (distance < raycaster.near || distance > raycaster.far) {\n            return;\n        }\n        intersects.push({\n            distance: distance,\n            face: null,\n            point: intersectPoint.clone(),\n            object: this,\n        });\n    }\n    clone() {\n        return new this.constructor(this.material).copy(this);\n    }\n}\n","import { MathUtil } from \"../math/Math\";\nimport { Vector4 } from \"../math/Vector4\";\nimport { LinearFilter } from \"../constants\";\nimport { Texture } from \"../textures/Texture\";\nimport { EventDispatcher } from \"../core/EventDispatcher\";\nexport class WebGLRenderTarget extends EventDispatcher {\n    constructor(width, height, options = {}) {\n        super();\n        this.uuid = MathUtil.generateUUID();\n        this.scissorTest = false;\n        this.width = width;\n        this.height = height;\n        this.scissor = new Vector4(0, 0, width, height);\n        this.viewport = new Vector4(0, 0, width, height);\n        if (options.minFilter === undefined) {\n            options.minFilter = LinearFilter;\n        }\n        this.texture = new Texture(undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding);\n        this.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n        this.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n        this.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n    }\n    setSize(width, height) {\n        if (this.width !== width || this.height !== height) {\n            this.width = width;\n            this.height = height;\n            this.dispose();\n        }\n        this.viewport.set(0, 0, width, height);\n        this.scissor.set(0, 0, width, height);\n    }\n    copy(source) {\n        this.width = source.width;\n        this.height = source.height;\n        this.viewport.copy(source.viewport);\n        this.texture = source.texture.clone();\n        this.depthBuffer = source.depthBuffer;\n        this.stencilBuffer = source.stencilBuffer;\n        this.depthTexture = source.depthTexture;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    dispose() {\n        this.dispatchEvent({ type: \"dispose\" });\n    }\n}\n","import { WebGLRenderTarget } from \"./WebGLRenderTarget\";\nexport class WebGLRenderTargetCube extends WebGLRenderTarget {\n    constructor(width, height, options = {}) {\n        super(width, height, options);\n        // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\n        this.activeCubeFace = 0;\n        this.activeMipMapLevel = 0;\n    }\n}\n","import { REVISION, RGBAFormat, HalfFloatType, FloatType, UnsignedByteType, FrontFaceDirectionCW, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, NoColors, LinearToneMapping, } from \"../constants\";\nimport { Camera } from \"../cameras/Camera\";\nimport { ArrayCamera } from \"../cameras/ArrayCamera\";\nimport { InstancedBufferGeometry } from \"../core/InstancedBufferGeometry\";\nimport { InstancedInterleavedBufferAttribute } from \"../core/InstancedInterleavedBufferAttribute\";\nimport { InstancedBufferAttribute } from \"../core/InstancedBufferAttribute\";\nimport { Light } from \"../lights/Light\";\nimport { MathUtil } from \"../math/Math\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Vector4 } from \"../math/Vector4\";\nimport { Frustum } from \"../math/Frustum\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { WebGLUniformsWrapper } from \"./webgl/WebGLUniforms\";\nimport { ShaderMaterial, MeshPhongMaterial, MeshStandardMaterial, MeshLambertMaterial, MeshBasicMaterial, MeshToonMaterial, MeshPhysicalMaterial, RawShaderMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshNormalMaterial, LineBasicMaterial, LineDashedMaterial, PointsMaterial, ShadowMaterial, } from \"../materials/Materials\";\nimport { Mesh } from \"../objects/Mesh\";\nimport { Line } from \"../objects/Line\";\nimport { Sprite } from \"../objects/Sprite\";\nimport { LineSegments } from \"../objects/LineSegments\";\nimport { LineLoop } from \"../objects/LineLoop\";\nimport { Points } from \"../objects/Points\";\nimport { SkinnedMesh } from \"../objects/SkinnedMesh\";\nimport { Fog } from \"../scenes/Fog\";\nimport { FogExp2 } from \"../scenes/FogExp2\";\nimport { DataTexture } from \"../textures/DataTexture\";\nimport { CubeTexture } from \"../textures/CubeTexture\";\nimport { ShaderLib } from \"./shaders/ShaderLib\";\nimport { UniformsUtils } from \"./shaders/UniformsUtils\";\nimport { WebGLShadowMap } from \"./webgl/WebGLShadowMap\";\nimport { WebGLState } from \"./webgl/WebGLState\";\nimport { WebGLUtils } from \"./webgl/WebGLUtils\";\nimport { WebGLClipping } from \"./webgl/WebGLClipping\";\nimport { WebGLExtensions } from \"./webgl/WebGLExtensions\";\nimport { WebGLCapabilities } from \"./webgl/WebGLCapabilities\";\nimport { WebGLProperties, } from \"./webgl/WebGLProperties\";\nimport { WebGLTextures } from \"./webgl/WebGLTextures\";\nimport { WebGLAttributes } from \"./webgl/WebGLAttributes\";\nimport { WebGLGeometries } from \"./webgl/WebGLGeometries\";\nimport { WebGLObjects } from \"./webgl/WebGLObjects\";\nimport { WebGLMorphtargets } from \"./webgl/WebGLMorphtargets\";\nimport { WebGLPrograms } from \"./webgl/WebGLPrograms\";\nimport { WebGLLights } from \"./webgl/WebGLLights\";\nimport { WebGLRenderLists } from \"./webgl/WebGLRenderLists\";\nimport { WebGLBufferRenderer } from \"./webgl/WebGLBufferRenderer\";\nimport { WebGLIndexedBufferRenderer } from \"./webgl/WebGLIndexedBufferRenderer\";\nimport { WebGLSpriteRenderer } from \"./webgl/WebGLSpriteRenderer\";\nimport { WebGLBackground } from \"./webgl/WebGLBackground\";\nimport { WebGLRenderTarget } from \"./WebGLRenderTarget\";\nimport { WebGLRenderTargetCube } from \"./WebGLRenderTargetCube\";\nimport { ImmediateRenderObject } from \"../extras/objects/ImmediateRenderObject\";\nexport class WebGLRenderer {\n    constructor(parameters = {}) {\n        this.lightsArray = [];\n        this.shadowsArray = [];\n        this.spritesArray = [];\n        this.currentRendererTarget = null;\n        // clearing\n        this.autoClear = true;\n        this.autoClearColor = true;\n        this.autoClearDepth = true;\n        this.autoClearStencil = true;\n        // scene graph\n        this.sortObjects = true;\n        // user-defined clipping\n        this.clippingPlanes = [];\n        // physical lights\n        this.physicallyCorrectLights = false;\n        // tone mapping\n        this.toneMapping = LinearToneMapping;\n        this.toneMappingExposure = 1.0;\n        this.toneMappingWhitePoint = 1.0;\n        // internal properties\n        this.isContextLost = false;\n        // internal state cache\n        this.currentRenderTarget = null;\n        this.currentFramebuffer = null;\n        this.currentMaterialId = -1;\n        this.currentGeometryProgram = \"\";\n        this.currentCamera = null;\n        this.currentArrayCamera = null;\n        this.currentViewport = new Vector4();\n        this.currentScissor = new Vector4();\n        this.currentScissorTest = null;\n        //\n        this.usedTextureUnits = 0;\n        this.pixelRatio = 1;\n        this.scissorTest = false;\n        // frustum\n        this.frustum = new Frustum();\n        // clipping\n        this.clipping = new WebGLClipping();\n        this.clippingEnabled = false;\n        this.localClippingEnabled = false;\n        // camera matrices cache\n        this.projScreenMatrix = new Matrix4();\n        this.tempVector3 = new Vector3();\n        // info\n        this.infoMemory = {\n            geometries: 0,\n            textures: 0,\n        };\n        this.infoRender = {\n            frame: 0,\n            calls: 0,\n            vertices: 0,\n            faces: 0,\n            points: 0,\n        };\n        this.info = {\n            render: this.infoRender,\n            memory: this.infoMemory,\n            programs: null,\n            autoReset: true,\n            reset: () => {\n                this.infoRender.frame++;\n                this.infoRender.calls = 0;\n                this.infoRender.vertices = 0;\n                this.infoRender.faces = 0;\n                this.infoRender.points = 0;\n            },\n        };\n        this.onContextLost = (event) => {\n            event.preventDefault();\n            console.log(\"THREE.WebGLRenderer: Context Lost.\");\n            this.isContextLost = true;\n        };\n        this.onContextRestore = () => {\n            console.log(\"THREE.WebGLRenderer: Context Restored.\");\n            this.isContextLost = false;\n            this.initGLContext();\n        };\n        this.isAnimating = false;\n        this.onAnimationFrame = null;\n        this.loop = (time) => {\n            if (this.onAnimationFrame !== null)\n                this.onAnimationFrame(time);\n            window.requestAnimationFrame(this.loop);\n        };\n        this.onMaterialDispose = (event) => {\n            const material = event.target;\n            material.removeEventListener(\"dispose\", this.onMaterialDispose);\n            this.deallocateMaterial(material);\n        };\n        this.setTexture2DWarned = false;\n        this.setTextureCubeWarned = false;\n        this.parameters = parameters;\n        console.log(\"THREE.WebGLRenderer\", REVISION);\n        (this.domElement =\n            parameters.canvas !== undefined\n                ? parameters.canvas\n                : document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\")),\n            (this.context = parameters.context !== undefined ? parameters.context : null),\n            (this.alpha = parameters.alpha !== undefined ? parameters.alpha : false),\n            (this.depth = parameters.depth !== undefined ? parameters.depth : true),\n            (this.stencil = parameters.stencil !== undefined ? parameters.stencil : true),\n            (this.antialias = parameters.antialias !== undefined ? parameters.antialias : false),\n            (this.premultipliedAlpha =\n                parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true),\n            (this.preserveDrawingBuffer =\n                parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false),\n            (this.powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : \"default\");\n        this.width = this.domElement.width;\n        this.height = this.domElement.height;\n        this.viewport = new Vector4(0, 0, this.width, this.height);\n        this.scissor = new Vector4(0, 0, this.width, this.height);\n        try {\n            const contextAttributes = {\n                alpha: this.alpha,\n                depth: this.depth,\n                stencil: this.stencil,\n                antialias: this.antialias,\n                premultipliedAlpha: this.premultipliedAlpha,\n                preserveDrawingBuffer: this.preserveDrawingBuffer,\n                powerPreference: this.powerPreference,\n            };\n            // event listeners must be registered before WebGL context is created, see #12753\n            this.domElement.addEventListener(\"webglcontextlost\", this.onContextLost, false);\n            this.domElement.addEventListener(\"webglcontextrestored\", this.onContextRestore, false);\n            this.context =\n                this.context ||\n                    this.domElement.getContext(\"webgl\", contextAttributes) ||\n                    this.domElement.getContext(\"experimental-webgl\", contextAttributes);\n            if (this.context === null) {\n                if (this.domElement.getContext(\"webgl\") !== null) {\n                    throw new Error(\"Error creating WebGL context with your selected attributes.\");\n                }\n                else {\n                    throw new Error(\"Error creating WebGL context.\");\n                }\n            }\n            // Some experimental-webgl implementations do not have getShaderPrecisionFormat\n            if (this.domElement.getShaderPrecisionFormat === undefined) {\n                this.domElement.getShaderPrecisionFormat = function () {\n                    return { rangeMin: 1, rangeMax: 1, precision: 1 };\n                };\n            }\n        }\n        catch (error) {\n            console.error(\"THREE.WebGLRenderer: \" + error.message);\n        }\n        this.initGLContext();\n        this.shadowMap = new WebGLShadowMap(this, this.objects, this.capabilities.maxTextureSize);\n    }\n    getTargetPixelRatio() {\n        return this.currentRenderTarget === null ? this.pixelRatio : 1;\n    }\n    getContext() {\n        return this.context;\n    }\n    getContextAttributes() {\n        return this.context.getContextAttributes();\n    }\n    forceContextLoss() {\n        const extension = this.extensions.get(\"WEBGL_lose_context\");\n        if (extension)\n            extension.loseContext();\n    }\n    forceContextRestore() {\n        const extension = this.extensions.get(\"WEBGL_lose_context\");\n        if (extension)\n            extension.restoreContext();\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(value) {\n        if (value === undefined)\n            return;\n        this.pixelRatio = value;\n        this.setSize(this.width, this.height, false);\n    }\n    getSize() {\n        return {\n            width: this.width,\n            height: this.height,\n        };\n    }\n    setSize(width, height, updateStyle) {\n        this.width = width;\n        this.height = height;\n        this.domElement.width = width * this.pixelRatio;\n        this.domElement.height = height * this.pixelRatio;\n        if (updateStyle !== false) {\n            this.domElement.style.width = width + \"px\";\n            this.domElement.style.height = height + \"px\";\n        }\n        this.setViewport(0, 0, width, height);\n    }\n    getDrawingBufferSize() {\n        return {\n            width: this.width * this.pixelRatio,\n            height: this.height * this.pixelRatio,\n        };\n    }\n    setDrawingBufferSize(width, height, pixelRatio) {\n        this.width = width;\n        this.height = height;\n        this.pixelRatio = pixelRatio;\n        this.domElement.width = width * pixelRatio;\n        this.domElement.height = height * pixelRatio;\n        this.setViewport(0, 0, width, height);\n    }\n    getCurrentViewport() {\n        return this.currentViewport;\n    }\n    setViewport(x, y, width, height) {\n        this.viewport.set(x, this.height - y - height, width, height);\n        this.state.viewport(this.currentViewport.copy(this.viewport).multiplyScalar(this.pixelRatio));\n    }\n    setScissor(x, y, width, height) {\n        this.scissor.set(x, this.height - y - height, width, height);\n        this.state.scissor(this.currentScissor.copy(this.scissor).multiplyScalar(this.pixelRatio));\n    }\n    setScissorTest(value) {\n        this.state.setScissorTest((this.scissorTest = value));\n    }\n    getClearColor() {\n        return this.background.getClearColor();\n    }\n    setClearColor(color, alpha) {\n        this.background.setClearColor(color, alpha);\n    }\n    getClearAlpha() {\n        return this.background.getClearAlpha();\n    }\n    setClearAlpha(alpha) {\n        this.background.setClearAlpha(alpha);\n    }\n    clear(color, depth, stencil) {\n        const gl = this.context;\n        let bits = 0;\n        if (color === undefined || color)\n            bits |= gl.COLOR_BUFFER_BIT;\n        if (depth === undefined || depth)\n            bits |= gl.DEPTH_BUFFER_BIT;\n        if (stencil === undefined || stencil)\n            bits |= gl.STENCIL_BUFFER_BIT;\n        gl.clear(bits);\n    }\n    clearColor() {\n        this.clear(true, false, false);\n    }\n    clearDepth() {\n        this.clear(false, true, false);\n    }\n    clearStencil() {\n        this.clear(false, false, true);\n    }\n    clearTarget(renderTarget, color, depth, stencil) {\n        this.setRenderTarget(renderTarget);\n        this.clear(color, depth, stencil);\n    }\n    dispose() {\n        this.domElement.removeEventListener(\"webglcontextlost\", this.onContextLost, false);\n        this.domElement.removeEventListener(\"webglcontextrestored\", this.onContextRestore, false);\n        this.renderLists.dispose();\n        this.properties.dispose();\n        this.objects.dispose();\n    }\n    initGLContext() {\n        const gl = this.context;\n        const extensions = new WebGLExtensions(gl);\n        extensions.get(\"WEBGL_depth_texture\");\n        extensions.get(\"OES_texture_float\");\n        extensions.get(\"OES_texture_float_linear\");\n        extensions.get(\"OES_texture_half_float\");\n        extensions.get(\"OES_texture_half_float_linear\");\n        extensions.get(\"OES_standard_derivatives\");\n        extensions.get(\"OES_element_index_uint\");\n        extensions.get(\"ANGLE_instanced_arrays\");\n        const utils = new WebGLUtils(gl, extensions);\n        const capabilities = new WebGLCapabilities(gl, extensions, this.parameters);\n        const state = new WebGLState(gl, extensions, utils);\n        state.scissor(this.currentScissor.copy(this.scissor).multiplyScalar(this.pixelRatio));\n        state.viewport(this.currentViewport.copy(this.viewport).multiplyScalar(this.pixelRatio));\n        const properties = new WebGLProperties();\n        const textures = new WebGLTextures(gl, extensions, state, properties, capabilities, utils, this.infoMemory, this.infoRender);\n        const attributes = new WebGLAttributes(gl);\n        const geometries = new WebGLGeometries(gl, attributes, this.infoMemory);\n        const objects = new WebGLObjects(geometries, this.infoRender);\n        const morphtargets = new WebGLMorphtargets(gl);\n        const programCache = new WebGLPrograms(this, extensions, capabilities);\n        const lights = new WebGLLights();\n        const renderLists = new WebGLRenderLists();\n        const background = new WebGLBackground(this, state, geometries, this.premultipliedAlpha);\n        const bufferRenderer = new WebGLBufferRenderer(gl, extensions, this.infoRender);\n        const indexedBufferRenderer = new WebGLIndexedBufferRenderer(gl, extensions, this.infoRender);\n        const spriteRenderer = new WebGLSpriteRenderer(this, state, textures, capabilities);\n        this.info.programs = programCache.programs;\n        this.extensions = extensions;\n        this.utils = utils;\n        this.capabilities = capabilities;\n        this.state = state;\n        this.properties = properties;\n        this.textures = textures;\n        this.attributes = attributes;\n        this.geometries = geometries;\n        this.objects = objects;\n        this.morphtargets = morphtargets;\n        this.programCache = programCache;\n        this.lights = lights;\n        this.renderLists = renderLists;\n        this.background = background;\n        this.bufferRenderer = bufferRenderer;\n        this.indexedBufferRenderer = indexedBufferRenderer;\n        this.spriteRenderer = spriteRenderer;\n    }\n    compile(scene, camera) {\n        this.lightsArray.length = 0;\n        this.shadowsArray.length = 0;\n        scene.traverse((object) => {\n            if (object instanceof Light) {\n                this.lightsArray.push(object);\n                if (object.castShadow) {\n                    this.shadowsArray.push(object);\n                }\n            }\n        });\n        this.lights.setup(this.lightsArray, this.shadowsArray, camera);\n        scene.traverse((obj) => {\n            const object = obj;\n            if (object.material) {\n                if (Array.isArray(object.material)) {\n                    for (let i = 0; i < object.material.length; i++) {\n                        this.initMaterial(object.material[i], scene.fog, object);\n                    }\n                }\n                else {\n                    this.initMaterial(object.material, scene.fog, object);\n                }\n            }\n        });\n    }\n    start() {\n        if (this.isAnimating)\n            return;\n        window.requestAnimationFrame(this.loop);\n        this.isAnimating = true;\n    }\n    animate(callback) {\n        this.onAnimationFrame = callback;\n        this.start();\n    }\n    render(scene, camera, renderTarget, forceClear) {\n        if (!(camera && camera instanceof Camera)) {\n            console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");\n            return;\n        }\n        if (this.isContextLost)\n            return;\n        // reset caching for this frame\n        this.currentGeometryProgram = \"\";\n        this.currentMaterialId = -1;\n        this.currentCamera = null;\n        // update scene graph\n        if (scene.autoUpdate === true)\n            scene.updateMatrixWorld();\n        // update camera matrices and frustum\n        if (camera.parent === null)\n            camera.updateMatrixWorld();\n        scene.onBeforeRender(this, scene, camera, renderTarget);\n        this.projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n        this.frustum.setFromMatrix(this.projScreenMatrix);\n        this.lightsArray.length = 0;\n        this.shadowsArray.length = 0;\n        this.spritesArray.length = 0;\n        this.clippingEnabled = this.clipping.init(this.clippingPlanes, this.localClippingEnabled, camera);\n        this.currentRenderList = this.renderLists.get(scene, camera);\n        this.currentRenderList.init();\n        this.projectObject(scene, camera, this.sortObjects);\n        if (this.sortObjects === true) {\n            this.currentRenderList.sort();\n        }\n        //\n        if (this.clippingEnabled)\n            this.clipping.beginShadows();\n        this.shadowMap.render(this.shadowsArray, scene, camera);\n        this.lights.setup(this.lightsArray, this.shadowsArray, camera);\n        if (this.clippingEnabled)\n            this.clipping.endShadows();\n        //\n        if (this.info.autoReset)\n            this.info.reset();\n        if (renderTarget === undefined) {\n            renderTarget = null;\n        }\n        this.setRenderTarget(renderTarget);\n        //\n        this.background.render(this.currentRenderList, scene, camera, forceClear);\n        // render scene\n        const opaqueObjects = this.currentRenderList.opaque;\n        const transparentObjects = this.currentRenderList.transparent;\n        if (scene.overrideMaterial) {\n            const overrideMaterial = scene.overrideMaterial;\n            if (opaqueObjects.length)\n                this.renderObjects(opaqueObjects, scene, camera, overrideMaterial);\n            if (transparentObjects.length)\n                this.renderObjects(transparentObjects, scene, camera, overrideMaterial);\n        }\n        else {\n            // opaque pass (front-to-back order)\n            if (opaqueObjects.length)\n                this.renderObjects(opaqueObjects, scene, camera);\n            // transparent pass (back-to-front order)\n            if (transparentObjects.length)\n                this.renderObjects(transparentObjects, scene, camera);\n        }\n        // custom renderers\n        this.spriteRenderer.render(this.spritesArray, scene, camera);\n        // Generate mipmap if we're using any kind of mipmap filtering\n        if (renderTarget) {\n            this.textures.updateRenderTargetMipmap(renderTarget);\n        }\n        // Ensure depth buffer writing is enabled so it can be cleared on next render\n        const state = this.state;\n        state.buffers.depth.setTest(true);\n        state.buffers.depth.setMask(true);\n        state.buffers.color.setMask(true);\n        state.setPolygonOffset(false);\n        //scene.onAfterRender(this, scene, camera, renderTarget );\n        // _gl.finish();\n    }\n    projectObject(object, camera, sortObjects = false) {\n        if (object.visible === false)\n            return;\n        const visible = object.layers.test(camera.layers);\n        if (visible) {\n            if (object instanceof Light) {\n                this.lightsArray.push(object);\n                if (object.castShadow) {\n                    this.shadowsArray.push(object);\n                }\n            }\n            else if (object instanceof Sprite) {\n                if (!object.frustumCulled || this.frustum.intersectsSprite(object)) {\n                    this.spritesArray.push(object);\n                }\n            }\n            else if (object instanceof ImmediateRenderObject) {\n                if (sortObjects) {\n                    this.tempVector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(this.projScreenMatrix);\n                }\n                this.currentRenderList.push(object, null, object.material, this.tempVector3.z, null);\n            }\n            else if (object instanceof Mesh || object instanceof Line || object instanceof Points) {\n                if (object instanceof SkinnedMesh) {\n                    object.skeleton.update();\n                }\n                if (!object.frustumCulled || this.frustum.intersectsObject(object)) {\n                    if (sortObjects) {\n                        this.tempVector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(this.projScreenMatrix);\n                    }\n                    const geometry = this.objects.update(object);\n                    const material = object.material;\n                    if (Array.isArray(material)) {\n                        const groups = geometry.groups;\n                        for (let i = 0, l = groups.length; i < l; i++) {\n                            const group = groups[i];\n                            const groupMaterial = material[group.materialIndex];\n                            if (groupMaterial && groupMaterial.visible) {\n                                this.currentRenderList.push(object, geometry, groupMaterial, this.tempVector3.z, group);\n                            }\n                        }\n                    }\n                    else if (material.visible) {\n                        this.currentRenderList.push(object, geometry, material, this.tempVector3.z, null);\n                    }\n                }\n            }\n        }\n        const children = object.children;\n        for (let i = 0, l = children.length; i < l; i++) {\n            this.projectObject(children[i], camera, sortObjects);\n        }\n    }\n    renderObjects(renderList, scene, camera, overrideMaterial) {\n        for (let i = 0, l = renderList.length; i < l; i++) {\n            const renderItem = renderList[i];\n            const object = renderItem.object;\n            const geometry = renderItem.geometry;\n            const material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n            const group = renderItem.group;\n            if (camera instanceof ArrayCamera) {\n                this.currentArrayCamera = camera;\n                const cameras = camera.cameras;\n                for (var j = 0, jl = cameras.length; j < jl; j++) {\n                    var camera2 = cameras[j];\n                    if (object.layers.test(camera2.layers)) {\n                        var bounds = camera2.bounds;\n                        var x = bounds.x * this.width;\n                        var y = bounds.y * this.height;\n                        var width = bounds.z * this.width;\n                        var height = bounds.w * this.height;\n                        this.state.viewport(this.currentViewport.set(x, y, width, height).multiplyScalar(this.pixelRatio));\n                        this.renderObject(object, scene, camera2, geometry, material, group);\n                    }\n                }\n            }\n            else {\n                this.currentArrayCamera = null;\n                this.renderObject(object, scene, camera, geometry, material, group);\n            }\n        }\n    }\n    renderObject(object, scene, camera, geometry, material, group) {\n        object.onBeforeRender(this, scene, camera, geometry, material, group);\n        object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, object.matrixWorld);\n        object.normalMatrix.getNormalMatrix(object.modelViewMatrix);\n        if (object instanceof ImmediateRenderObject) {\n            //What???\n            var frontFaceCW = object instanceof Mesh && object.matrixWorld.determinant() < 0;\n            this.state.setMaterial(material, frontFaceCW);\n            var program = this.setProgram(camera, scene.fog, material, object);\n            this.currentGeometryProgram = \"\";\n            this.renderObjectImmediate(object, program, material);\n        }\n        else {\n            this.renderBufferDirect(camera, scene.fog, geometry, material, object, group);\n        }\n        //object.onAfterRender(this, scene, camera, geometry, material, group );\n    }\n    // Buffer rendering\n    // renderObjectImmediate \n    renderObjectImmediate(object, program, material) {\n        object.render(() => {\n            this.renderBufferImmediate(object, program, material);\n        });\n    }\n    renderBufferImmediate(object, program, material) {\n        const state = this.state;\n        const gl = this.context;\n        state.initAttributes();\n        const buffers = this.properties.get(object);\n        if (object.hasPositions && !buffers.position)\n            buffers.position = gl.createBuffer();\n        if (object.hasNormals && !buffers.normal)\n            buffers.normal = gl.createBuffer();\n        if (object.hasUvs && !buffers.uv)\n            buffers.uv = gl.createBuffer();\n        if (object.hasColors && !buffers.color)\n            buffers.color = gl.createBuffer();\n        const programAttributes = program.getAttributes();\n        if (object.hasPositions) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position);\n            gl.bufferData(gl.ARRAY_BUFFER, object.positionArray, gl.DYNAMIC_DRAW);\n            state.enableAttribute(programAttributes.position);\n            gl.vertexAttribPointer(programAttributes.position, 3, gl.FLOAT, false, 0, 0);\n        }\n        if (object.hasNormals) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffers.normal);\n            if (!(material instanceof MeshPhongMaterial) &&\n                !(material instanceof MeshStandardMaterial) &&\n                !(material instanceof MeshNormalMaterial) &&\n                material.flatShading === true) {\n                for (let i = 0, l = object.count * 3; i < l; i += 9) {\n                    const array = object.normalArray;\n                    const nx = (array[i + 0] + array[i + 3] + array[i + 6]) / 3;\n                    const ny = (array[i + 1] + array[i + 4] + array[i + 7]) / 3;\n                    const nz = (array[i + 2] + array[i + 5] + array[i + 8]) / 3;\n                    array[i + 0] = nx;\n                    array[i + 1] = ny;\n                    array[i + 2] = nz;\n                    array[i + 3] = nx;\n                    array[i + 4] = ny;\n                    array[i + 5] = nz;\n                    array[i + 6] = nx;\n                    array[i + 7] = ny;\n                    array[i + 8] = nz;\n                }\n            }\n            gl.bufferData(gl.ARRAY_BUFFER, object.normalArray, gl.DYNAMIC_DRAW);\n            state.enableAttribute(programAttributes.normal);\n            gl.vertexAttribPointer(programAttributes.normal, 3, gl.FLOAT, false, 0, 0);\n        }\n        if (object.hasUvs && material.map) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffers.uv);\n            gl.bufferData(gl.ARRAY_BUFFER, object.uvArray, gl.DYNAMIC_DRAW);\n            state.enableAttribute(programAttributes.uv);\n            gl.vertexAttribPointer(programAttributes.uv, 2, gl.FLOAT, false, 0, 0);\n        }\n        if (object.hasColors && material.vertexColors !== NoColors) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color);\n            gl.bufferData(gl.ARRAY_BUFFER, object.colorArray, gl.DYNAMIC_DRAW);\n            state.enableAttribute(programAttributes.color);\n            gl.vertexAttribPointer(programAttributes.color, 3, gl.FLOAT, false, 0, 0);\n        }\n        state.disableUnusedAttributes();\n        gl.drawArrays(gl.TRIANGLES, 0, object.count);\n        object.count = 0;\n    }\n    renderBufferDirect(camera, fog, geometry, material, object, group) {\n        const gl = this.context;\n        const frontFaceCW = object instanceof Mesh && object.matrixWorld.determinant() < 0;\n        this.state.setMaterial(material, frontFaceCW);\n        const program = this.setProgram(camera, fog, material, object);\n        const geometryProgram = geometry.id + \"_\" + program.id + \"_\" + (material.wireframe === true);\n        let updateBuffers = false;\n        if (geometryProgram !== this.currentGeometryProgram) {\n            this.currentGeometryProgram = geometryProgram;\n            updateBuffers = true;\n        }\n        if (object.morphTargetInfluences) {\n            this.morphtargets.update(object, geometry, material, program);\n            updateBuffers = true;\n        }\n        //\n        let index = geometry.index;\n        const position = geometry.attributes.position;\n        let rangeFactor = 1;\n        if (material.wireframe === true) {\n            index = this.geometries.getWireframeAttribute(geometry);\n            rangeFactor = 2;\n        }\n        let attribute;\n        let renderer = this.bufferRenderer;\n        if (index !== null) {\n            attribute = this.attributes.get(index);\n            renderer = this.indexedBufferRenderer;\n            renderer.setIndex(attribute);\n        }\n        if (updateBuffers) {\n            this.setupVertexAttributes(material, program, geometry);\n            if (index !== null) {\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, attribute.buffer);\n            }\n        }\n        //\n        let dataCount = 0;\n        if (index !== null) {\n            dataCount = index.count;\n        }\n        else if (position !== undefined) {\n            dataCount = position.count;\n        }\n        const rangeStart = geometry.drawRange.start * rangeFactor;\n        const rangeCount = geometry.drawRange.count * rangeFactor;\n        const groupStart = group !== null ? group.start * rangeFactor : 0;\n        const groupCount = group !== null ? group.count * rangeFactor : Infinity;\n        const drawStart = Math.max(rangeStart, groupStart);\n        const drawEnd = Math.min(dataCount, rangeStart + rangeCount, groupStart + groupCount) - 1;\n        const drawCount = Math.max(0, drawEnd - drawStart + 1);\n        if (drawCount === 0)\n            return;\n        //\n        if (object instanceof Mesh) {\n            if (material.wireframe === true) {\n                this.state.setLineWidth(material.wireframeLinewidth * this.getTargetPixelRatio());\n                renderer.setMode(gl.LINES);\n            }\n            else {\n                switch (object.drawMode) {\n                    case TrianglesDrawMode:\n                        renderer.setMode(gl.TRIANGLES);\n                        break;\n                    case TriangleStripDrawMode:\n                        renderer.setMode(gl.TRIANGLE_STRIP);\n                        break;\n                    case TriangleFanDrawMode:\n                        renderer.setMode(gl.TRIANGLE_FAN);\n                        break;\n                }\n            }\n        }\n        else if (object instanceof Line) {\n            let lineWidth = material.linewidth;\n            if (lineWidth === undefined)\n                lineWidth = 1; // Not using Line*Material\n            this.state.setLineWidth(lineWidth * this.getTargetPixelRatio());\n            if (object instanceof LineSegments) {\n                renderer.setMode(gl.LINES);\n            }\n            else if (object instanceof LineLoop) {\n                renderer.setMode(gl.LINE_LOOP);\n            }\n            else {\n                renderer.setMode(gl.LINE_STRIP);\n            }\n        }\n        else if (object instanceof Points) {\n            renderer.setMode(gl.POINTS);\n        }\n        if (geometry && geometry instanceof InstancedBufferGeometry) {\n            if (geometry.maxInstancedCount > 0) {\n                renderer.renderInstances(geometry, drawStart, drawCount);\n            }\n        }\n        else {\n            renderer.render(drawStart, drawCount);\n        }\n    }\n    setProgram(camera, fog, material, object) {\n        const gl = this.context;\n        this.usedTextureUnits = 0;\n        const materialProperties = this.properties.get(material);\n        if (this.clippingEnabled) {\n            if (this.localClippingEnabled || camera !== this.currentCamera) {\n                const useCache = camera === this.currentCamera && material.id === this.currentMaterialId;\n                // we might want to call this function with some ClippingGroup\n                // object instead of the material, once it becomes feasible\n                // (#8465, #8379)\n                this.clipping.setState(material.clippingPlanes, material.clipIntersection, material.clipShadows, camera, materialProperties, useCache);\n            }\n        }\n        if (material.needsUpdate === false) {\n            if (materialProperties.program === undefined) {\n                material.needsUpdate = true;\n            }\n            else if (material.fog && materialProperties.fog !== fog) {\n                material.needsUpdate = true;\n            }\n            else if (material.lights && materialProperties.lightsHash !== this.lights.state.hash) {\n                material.needsUpdate = true;\n            }\n            else if (materialProperties.numClippingPlanes !== undefined &&\n                (materialProperties.numClippingPlanes !== this.clipping.numPlanes ||\n                    materialProperties.numIntersection !== this.clipping.numIntersection)) {\n                material.needsUpdate = true;\n            }\n        }\n        if (material.needsUpdate) {\n            this.initMaterial(material, fog, object);\n            material.needsUpdate = false;\n        }\n        let refreshProgram = false;\n        let refreshMaterial = false;\n        let refreshLights = false;\n        const program = materialProperties.program, p_uniforms = program.getUniforms(), m_uniforms = materialProperties.shader.uniforms;\n        if (this.state.useProgram(program.program)) {\n            refreshProgram = true;\n            refreshMaterial = true;\n            refreshLights = true;\n        }\n        if (material.id !== this.currentMaterialId) {\n            this.currentMaterialId = material.id;\n            refreshMaterial = true;\n        }\n        if (refreshProgram || camera !== this.currentCamera) {\n            p_uniforms.setValue(\"projectionMatrix\", camera.projectionMatrix);\n            if (this.capabilities.logarithmicDepthBuffer) {\n                p_uniforms.setValue(\"logDepthBufFC\", 2.0 / (Math.log(camera.far + 1.0) / Math.LN2));\n            }\n            // Avoid unneeded uniform updates per ArrayCamera's sub-camera\n            if (this.currentCamera !== (this.currentArrayCamera || camera)) {\n                this.currentCamera = this.currentArrayCamera || camera;\n                // lighting uniforms depend on the camera so enforce an update\n                // now, in case this material supports lights - or later, when\n                // the next material that does gets activated:\n                refreshMaterial = true; // set to true on material change\n                refreshLights = true; // remains set until update done\n            }\n            // load material specific uniforms\n            // (shader material also gets them for the sake of genericity)\n            if (material instanceof ShaderMaterial ||\n                material instanceof MeshPhongMaterial ||\n                material instanceof MeshStandardMaterial ||\n                material.envMap) {\n                const uCamPos = p_uniforms.map.cameraPosition;\n                if (uCamPos !== undefined) {\n                    uCamPos.setValue(new Vector3().setFromMatrixPosition(camera.matrixWorld));\n                }\n            }\n            if (material instanceof MeshPhongMaterial ||\n                material instanceof MeshLambertMaterial ||\n                material instanceof MeshBasicMaterial ||\n                material instanceof MeshStandardMaterial ||\n                material instanceof ShaderMaterial ||\n                material.skinning) {\n                p_uniforms.setValue(\"viewMatrix\", camera.matrixWorldInverse);\n            }\n        }\n        // skinning uniforms must be set even if material didn't change\n        // auto-setting of texture unit for bone texture must go before other textures\n        // not sure why, but otherwise weird things happen\n        if (material.skinning) {\n            p_uniforms.setOptional(object, \"bindMatrix\");\n            p_uniforms.setOptional(object, \"bindMatrixInverse\");\n            const skeleton = object.skeleton;\n            if (skeleton) {\n                const bones = skeleton.bones;\n                if (this.capabilities.floatVertexTextures) {\n                    if (skeleton.boneTexture === undefined) {\n                        // layout (1 matrix = 4 pixels)\n                        //      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n                        //  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n                        //       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n                        //       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n                        //       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n                        let size = Math.sqrt(bones.length * 4); // 4 pixels needed for 1 matrix\n                        size = MathUtil.ceilPowerOfTwo(size);\n                        size = Math.max(size, 4);\n                        const boneMatrices = new Float32Array(size * size * 4); // 4 floats per RGBA pixel\n                        boneMatrices.set(skeleton.boneMatrices); // copy current values\n                        const boneTexture = new DataTexture(boneMatrices, size, size, RGBAFormat, FloatType);\n                        skeleton.boneMatrices = boneMatrices;\n                        skeleton.boneTexture = boneTexture;\n                        skeleton.boneTextureSize = size;\n                    }\n                    p_uniforms.setValue(\"boneTexture\", skeleton.boneTexture);\n                    p_uniforms.setValue(\"boneTextureSize\", skeleton.boneTextureSize);\n                }\n                else {\n                    p_uniforms.setOptional(skeleton, \"boneMatrices\");\n                }\n            }\n        }\n        if (refreshMaterial) {\n            p_uniforms.setValue(\"toneMappingExposure\", this.toneMappingExposure);\n            p_uniforms.setValue(\"toneMappingWhitePoint\", this.toneMappingWhitePoint);\n            if (material.lights) {\n                // the current material requires lighting info\n                // note: all lighting uniforms are always set correctly\n                // they simply reference the renderer's state for their\n                // values\n                //\n                // use the current material's .needsUpdate flags to set\n                // the GL state when required\n                this.markUniformsLightsNeedsUpdate(m_uniforms, refreshLights);\n            }\n            // refresh uniforms common to several materials\n            if (fog && material.fog) {\n                this.refreshUniformsFog(m_uniforms, fog);\n            }\n            if (material instanceof MeshBasicMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n            }\n            else if (material instanceof MeshLambertMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                this.refreshUniformsLambert(m_uniforms, material);\n            }\n            else if (material instanceof MeshPhongMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                if (material instanceof MeshToonMaterial) {\n                    this.refreshUniformsToon(m_uniforms, material);\n                }\n                else {\n                    this.refreshUniformsPhong(m_uniforms, material);\n                }\n            }\n            else if (material instanceof MeshStandardMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                if (material instanceof MeshPhysicalMaterial) {\n                    this.refreshUniformsPhysical(m_uniforms, material);\n                }\n                else {\n                    this.refreshUniformsStandard(m_uniforms, material);\n                }\n            }\n            else if (material instanceof MeshDepthMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                this.refreshUniformsDepth(m_uniforms, material);\n            }\n            else if (material instanceof MeshDistanceMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                this.refreshUniformsDistance(m_uniforms, material);\n            }\n            else if (material instanceof MeshNormalMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                this.refreshUniformsNormal(m_uniforms, material);\n            }\n            else if (material instanceof LineBasicMaterial) {\n                this.refreshUniformsLine(m_uniforms, material);\n                if (material instanceof LineDashedMaterial) {\n                    this.refreshUniformsDash(m_uniforms, material);\n                }\n            }\n            else if (material instanceof PointsMaterial) {\n                this.refreshUniformsPoints(m_uniforms, material);\n            }\n            else if (material instanceof ShadowMaterial) {\n                m_uniforms.color.value = material.color;\n                m_uniforms.opacity.value = material.opacity;\n            }\n            // RectAreaLight Texture\n            // TODO (mrdoob): Find a nicer implementation\n            /**\n             * LTC_1? LTC_2?\n             */\n            // if (m_uniforms.ltc_1 !== undefined) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n            // if (m_uniforms.ltc_2 !== undefined) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n            WebGLUniformsWrapper.upload(materialProperties.uniformsList, m_uniforms);\n        }\n        // common matrices\n        p_uniforms.setValue(\"modelViewMatrix\", object.modelViewMatrix);\n        p_uniforms.setValue(\"normalMatrix\", object.normalMatrix);\n        p_uniforms.setValue(\"modelMatrix\", object.matrixWorld);\n        return program;\n    }\n    setupVertexAttributes(material, program, geometry, startIndex = 0) {\n        const state = this.state;\n        const gl = this.context;\n        if (geometry && geometry instanceof InstancedBufferGeometry) {\n            if (this.extensions.get(\"ANGLE_instanced_arrays\") === null) {\n                console.error(\"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");\n                return;\n            }\n        }\n        state.initAttributes();\n        const geometryAttributes = geometry.attributes;\n        const programAttributes = program.getAttributes();\n        // ShaderMaterial\n        const materialDefaultAttributeValues = material.defaultAttributeValues;\n        for (const name in programAttributes) {\n            const programAttribute = programAttributes[name];\n            if (programAttribute >= 0) {\n                const geometryAttribute = geometryAttributes[name];\n                if (geometryAttribute !== undefined) {\n                    const normalized = geometryAttribute.normalized;\n                    const size = geometryAttribute.itemSize;\n                    const attribute = this.attributes.get(geometryAttribute);\n                    // TODO Attribute may not be available on context restore\n                    if (attribute === undefined)\n                        continue;\n                    const buffer = attribute.buffer;\n                    const type = attribute.type;\n                    const bytesPerElement = attribute.bytesPerElement;\n                    if (geometryAttribute instanceof InstancedInterleavedBufferAttribute) {\n                        const stride = geometryAttribute.stride;\n                        const offset = geometryAttribute.offset;\n                        if (geometryAttribute) {\n                            state.enableAttributeAndDivisor(programAttribute, geometryAttribute.meshPerAttribute);\n                            if (geometry.maxInstancedCount === undefined) {\n                                geometry.maxInstancedCount =\n                                    geometryAttribute.meshPerAttribute * geometryAttribute.count;\n                            }\n                        }\n                        else {\n                            state.enableAttribute(programAttribute);\n                        }\n                        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n                        gl.vertexAttribPointer(programAttribute, size, type, normalized, stride * bytesPerElement, (startIndex * stride + offset) * bytesPerElement);\n                    }\n                    else {\n                        if (geometryAttribute instanceof InstancedBufferAttribute) {\n                            state.enableAttributeAndDivisor(programAttribute, geometryAttribute.meshPerAttribute);\n                            if (geometry.maxInstancedCount === undefined) {\n                                geometry.maxInstancedCount =\n                                    geometryAttribute.meshPerAttribute * geometryAttribute.count;\n                            }\n                        }\n                        else {\n                            state.enableAttribute(programAttribute);\n                        }\n                        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n                        gl.vertexAttribPointer(programAttribute, size, type, normalized, 0, startIndex * size * bytesPerElement);\n                    }\n                }\n                else if (materialDefaultAttributeValues !== undefined) {\n                    const value = materialDefaultAttributeValues[name];\n                    if (value !== undefined) {\n                        switch (value.length) {\n                            case 2:\n                                gl.vertexAttrib2fv(programAttribute, value);\n                                break;\n                            case 3:\n                                gl.vertexAttrib3fv(programAttribute, value);\n                                break;\n                            case 4:\n                                gl.vertexAttrib4fv(programAttribute, value);\n                                break;\n                            default:\n                                gl.vertexAttrib1fv(programAttribute, value);\n                        }\n                    }\n                }\n            }\n        }\n        state.disableUnusedAttributes();\n    }\n    initMaterial(material, fog, object) {\n        const lights = this.lights;\n        const clipping = this.clipping;\n        const materialProperties = this.properties.get(material);\n        const parameters = this.programCache.getParameters(material, this.lights.state, this.shadowsArray, fog, this.clipping.numPlanes, this.clipping.numIntersection, object);\n        const code = this.programCache.getProgramCode(material, parameters);\n        let program = materialProperties.program;\n        let programChange = true;\n        if (program === undefined) {\n            // new material\n            material.addEventListener(\"dispose\", this.onMaterialDispose);\n        }\n        else if (program.code !== code) {\n            // changed glsl or parameters\n            this.releaseMaterialProgramReference(material);\n        }\n        else if (parameters.shaderID !== undefined) {\n            // same glsl and uniform list\n            return;\n        }\n        else {\n            // only rebuild uniform list\n            programChange = false;\n        }\n        if (programChange) {\n            if (parameters.shaderID) {\n                const shader = ShaderLib[parameters.shaderID];\n                materialProperties.shader = {\n                    name: material.type,\n                    uniforms: UniformsUtils.clone(shader.uniforms),\n                    vertexShader: shader.vertexShader,\n                    fragmentShader: shader.fragmentShader,\n                };\n            }\n            else {\n                materialProperties.shader = {\n                    name: material.type,\n                    uniforms: material.uniforms,\n                    vertexShader: material.vertexShader,\n                    fragmentShader: material.fragmentShader,\n                };\n            }\n            material.onBeforeCompile(materialProperties.shader);\n            program = this.programCache.acquireProgram(material, materialProperties.shader, parameters, code);\n            materialProperties.program = program;\n            material.program = program;\n        }\n        const programAttributes = program.getAttributes();\n        if (material.morphTargets) {\n            material.numSupportedMorphTargets = 0;\n            for (let i = 0; i < this.maxMorphTargets; i++) {\n                if (programAttributes[\"morphTarget\" + i] >= 0) {\n                    material.numSupportedMorphTargets++;\n                }\n            }\n        }\n        if (material.morphNormals) {\n            material.numSupportedMorphNormals = 0;\n            for (let i = 0; i < this.maxMorphNormals; i++) {\n                if (programAttributes[\"morphNormal\" + i] >= 0) {\n                    material.numSupportedMorphNormals++;\n                }\n            }\n        }\n        const uniforms = materialProperties.shader.uniforms;\n        if ((!(material instanceof ShaderMaterial) && !(material instanceof RawShaderMaterial)) ||\n            material.clipping === true) {\n            materialProperties.numClippingPlanes = clipping.numPlanes;\n            materialProperties.numIntersection = clipping.numIntersection;\n            uniforms.clippingPlanes = clipping.uniform;\n        }\n        materialProperties.fog = fog;\n        // store the light setup it was created for\n        materialProperties.lightsHash = lights.state.hash;\n        if (material.lights) {\n            // wire up the material to this renderer's lighting state\n            uniforms.ambientLightColor.value = lights.state.ambient;\n            uniforms.directionalLights.value = lights.state.directional;\n            uniforms.spotLights.value = lights.state.spot;\n            uniforms.rectAreaLights.value = lights.state.rectArea;\n            uniforms.pointLights.value = lights.state.point;\n            uniforms.hemisphereLights.value = lights.state.hemi;\n            uniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n            uniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n            uniforms.spotShadowMap.value = lights.state.spotShadowMap;\n            uniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n            uniforms.pointShadowMap.value = lights.state.pointShadowMap;\n            uniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n            // TODO (abelnation): add area lights shadow info to uniforms\n        }\n        const progUniforms = materialProperties.program.getUniforms();\n        const uniformsList = WebGLUniformsWrapper.seqWithValue(progUniforms.seq, uniforms);\n        materialProperties.uniformsList = uniformsList;\n    }\n    deallocateMaterial(material) {\n        this.releaseMaterialProgramReference(material);\n        this.properties.remove(material);\n    }\n    releaseMaterialProgramReference(material) {\n        const programInfo = this.properties.get(material).program;\n        material.program = undefined;\n        if (programInfo !== undefined) {\n            this.programCache.releaseProgram(programInfo);\n        }\n    }\n    setFaceCulling(cullFace, frontFaceDirection) {\n        this.state.setCullFace(cullFace);\n        this.state.setFlipSided(frontFaceDirection === FrontFaceDirectionCW);\n    }\n    allocTextureUnit() {\n        const textureUnit = this.usedTextureUnits;\n        if (textureUnit >= this.capabilities.maxTextures) {\n            console.warn(\"THREE.WebGLRenderer: Trying to use \" +\n                textureUnit +\n                \" texture units while this GPU supports only \" +\n                this.capabilities.maxTextures);\n        }\n        this.usedTextureUnits += 1;\n        return textureUnit;\n    }\n    setTexture2D(texture, unit) {\n        if (texture && texture instanceof WebGLRenderTarget) {\n            if (!this.setTexture2DWarned) {\n                console.warn(\"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\");\n                this.setTexture2DWarned = true;\n            }\n            texture = texture.texture;\n        }\n        this.textures.setTexture2D(texture, unit);\n    }\n    setTextureCube(cubeTexture, slot) {\n        let texture = cubeTexture;\n        // backwards compatibility: peel texture.texture\n        if (cubeTexture && cubeTexture instanceof WebGLRenderTargetCube) {\n            if (!this.setTextureCubeWarned) {\n                console.warn(\"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\");\n                this.setTextureCubeWarned = true;\n            }\n            texture = cubeTexture.texture;\n        }\n        // currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n        // TODO: unify these code paths\n        if ((texture && texture instanceof CubeTexture) ||\n            (Array.isArray(texture.image) && texture.image.length === 6)) {\n            // CompressedTexture can have Array in image :/\n            // this function alone should take care of cube textures\n            this.textures.setTextureCube(texture, slot);\n        }\n        else {\n            // assumed: texture property of THREE.WebGLRenderTargetCube\n            this.textures.setTextureCubeDynamic(texture, slot);\n        }\n    }\n    getRenderTarget() {\n        return this.currentRendererTarget;\n    }\n    setRenderTarget(renderTarget) {\n        const properties = this.properties;\n        this.currentRenderTarget = renderTarget;\n        if (renderTarget && properties.get(renderTarget).__webglFramebuffer === undefined) {\n            this.textures.setupRenderTarget(renderTarget);\n        }\n        let framebuffer = null;\n        let isCube = false;\n        if (renderTarget) {\n            const __webglFramebuffer = properties.get(renderTarget).__webglFramebuffer;\n            if (renderTarget instanceof WebGLRenderTargetCube) {\n                framebuffer = __webglFramebuffer[renderTarget.activeCubeFace];\n                isCube = true;\n            }\n            else {\n                framebuffer = __webglFramebuffer;\n            }\n            this.currentViewport.copy(renderTarget.viewport);\n            this.currentScissor.copy(renderTarget.scissor);\n            this.currentScissorTest = renderTarget.scissorTest;\n        }\n        else {\n            this.currentViewport.copy(this.viewport).multiplyScalar(this.pixelRatio);\n            this.currentScissor.copy(this.scissor).multiplyScalar(this.pixelRatio);\n            this.currentScissorTest = this.scissorTest;\n        }\n        const gl = this.context;\n        const state = this.state;\n        if (this.currentFramebuffer !== framebuffer) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n            this.currentFramebuffer = framebuffer;\n        }\n        state.viewport(this.currentViewport);\n        state.scissor(this.currentScissor);\n        state.setScissorTest(this.currentScissorTest);\n        if (isCube) {\n            const textureProperties = properties.get(renderTarget.texture);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel);\n        }\n    }\n    readRenderTargetPixels(renderTarget, x, y, width, height, buffer) {\n        if (!(renderTarget && renderTarget instanceof WebGLRenderTarget)) {\n            console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\");\n            return;\n        }\n        const gl = this.context;\n        const utils = this.utils;\n        const extensions = this.extensions;\n        const framebuffer = this.properties.get(renderTarget).__webglFramebuffer;\n        if (framebuffer) {\n            let restore = false;\n            if (framebuffer !== this.currentFramebuffer) {\n                gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n                restore = true;\n            }\n            try {\n                var texture = renderTarget.texture;\n                var textureFormat = texture.format;\n                var textureType = texture.type;\n                if (textureFormat !== RGBAFormat &&\n                    utils.convert(textureFormat) !== gl.getParameter(gl.IMPLEMENTATION_COLOR_READ_FORMAT)) {\n                    console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\");\n                    return;\n                }\n                if (textureType !== UnsignedByteType &&\n                    utils.convert(textureType) !== gl.getParameter(gl.IMPLEMENTATION_COLOR_READ_TYPE) && // IE11, Edge and Chrome Mac < 52 (#9513)\n                    !(textureType === FloatType &&\n                        (extensions.get(\"OES_texture_float\") || extensions.get(\"WEBGL_color_buffer_float\"))) && // Chrome Mac >= 52 and Firefox\n                    !(textureType === HalfFloatType && extensions.get(\"EXT_color_buffer_half_float\"))) {\n                    console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\");\n                    return;\n                }\n                if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n                    // the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n                    if (x >= 0 && x <= renderTarget.width - width && (y >= 0 && y <= renderTarget.height - height)) {\n                        gl.readPixels(x, y, width, height, utils.convert(textureFormat), utils.convert(textureType), buffer);\n                    }\n                }\n                else {\n                    console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\");\n                }\n            }\n            finally {\n                if (restore) {\n                    gl.bindFramebuffer(gl.FRAMEBUFFER, this.currentFramebuffer);\n                }\n            }\n        }\n    }\n    copyFramebufferToTexture(position, texture, level) {\n        const gl = this.context;\n        const width = texture.image.width;\n        const height = texture.image.height;\n        const internalFormat = this.utils.convert(texture.format);\n        this.setTexture2D(texture, 0);\n        gl.copyTexImage2D(gl.TEXTURE_2D, level || 0, internalFormat, position.x, position.y, width, height, 0);\n    }\n    // Uniforms (refresh uniforms objects)\n    refreshUniformsCommon(uniforms, material) {\n        uniforms.opacity.value = material.opacity;\n        if (material.color) {\n            uniforms.diffuse.value = material.color;\n        }\n        if (material.emissive) {\n            uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);\n        }\n        if (material.map) {\n            uniforms.map.value = material.map;\n        }\n        if (material.alphaMap) {\n            uniforms.alphaMap.value = material.alphaMap;\n        }\n        if (material.specularMap) {\n            uniforms.specularMap.value = material.specularMap;\n        }\n        if (material.envMap) {\n            uniforms.envMap.value = material.envMap;\n            // don't flip CubeTexture envMaps, flip everything else:\n            //  WebGLRenderTargetCube will be flipped for backwards compatibility\n            //  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n            // this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n            uniforms.flipEnvMap.value = !(material.envMap && material.envMap instanceof CubeTexture) ? 1 : -1;\n            uniforms.reflectivity.value = material.reflectivity;\n            uniforms.refractionRatio.value = material.refractionRatio;\n        }\n        if (material.lightMap) {\n            uniforms.lightMap.value = material.lightMap;\n            uniforms.lightMapIntensity.value = material.lightMapIntensity;\n        }\n        if (material.aoMap) {\n            uniforms.aoMap.value = material.aoMap;\n            uniforms.aoMapIntensity.value = material.aoMapIntensity;\n        }\n        // uv repeat and offset setting priorities\n        // 1. color map\n        // 2. specular map\n        // 3. normal map\n        // 4. bump map\n        // 5. alpha map\n        // 6. emissive map\n        let uvScaleMap;\n        if (material.map) {\n            uvScaleMap = material.map;\n        }\n        else if (material.specularMap) {\n            uvScaleMap = material.specularMap;\n        }\n        else if (material.displacementMap) {\n            uvScaleMap = material.displacementMap;\n        }\n        else if (material.normalMap) {\n            uvScaleMap = material.normalMap;\n        }\n        else if (material.bumpMap) {\n            uvScaleMap = material.bumpMap;\n        }\n        else if (material.roughnessMap) {\n            uvScaleMap = material.roughnessMap;\n        }\n        else if (material.metalnessMap) {\n            uvScaleMap = material.metalnessMap;\n        }\n        else if (material.alphaMap) {\n            uvScaleMap = material.alphaMap;\n        }\n        else if (material.emissiveMap) {\n            uvScaleMap = material.emissiveMap;\n        }\n        if (uvScaleMap !== undefined) {\n            // backwards compatibility\n            if (uvScaleMap instanceof WebGLRenderTarget) {\n                uvScaleMap = uvScaleMap.texture;\n            }\n            if (uvScaleMap.matrixAutoUpdate === true) {\n                const offset = uvScaleMap.offset;\n                const repeat = uvScaleMap.repeat;\n                const rotation = uvScaleMap.rotation;\n                const center = uvScaleMap.center;\n                uvScaleMap.matrix.setUvTransform(offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y);\n            }\n            uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n        }\n    }\n    refreshUniformsLine(uniforms, material) {\n        uniforms.diffuse.value = material.color;\n        uniforms.opacity.value = material.opacity;\n    }\n    refreshUniformsDash(uniforms, material) {\n        uniforms.dashSize.value = material.dashSize;\n        uniforms.totalSize.value = material.dashSize + material.gapSize;\n        uniforms.scale.value = material.scale;\n    }\n    refreshUniformsPoints(uniforms, material) {\n        uniforms.diffuse.value = material.color;\n        uniforms.opacity.value = material.opacity;\n        uniforms.size.value = material.size * this.pixelRatio;\n        uniforms.scale.value = this.height * 0.5;\n        uniforms.map.value = material.map;\n        if (material.map !== null) {\n            if (material.map.matrixAutoUpdate === true) {\n                const offset = material.map.offset;\n                const repeat = material.map.repeat;\n                const rotation = material.map.rotation;\n                const center = material.map.center;\n                material.map.matrix.setUvTransform(offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y);\n            }\n            uniforms.uvTransform.value.copy(material.map.matrix);\n        }\n    }\n    refreshUniformsFog(uniforms, fog) {\n        uniforms.fogColor.value = fog.color;\n        if (fog instanceof Fog) {\n            uniforms.fogNear.value = fog.near;\n            uniforms.fogFar.value = fog.far;\n        }\n        else if (fog instanceof FogExp2) {\n            uniforms.fogDensity.value = fog.density;\n        }\n    }\n    refreshUniformsLambert(uniforms, material) {\n        if (material.emissiveMap) {\n            uniforms.emissiveMap.value = material.emissiveMap;\n        }\n    }\n    refreshUniformsPhong(uniforms, material) {\n        uniforms.specular.value = material.specular;\n        uniforms.shininess.value = Math.max(material.shininess, 1e-4); // to prevent pow( 0.0, 0.0 )\n        if (material.emissiveMap) {\n            uniforms.emissiveMap.value = material.emissiveMap;\n        }\n        if (material.bumpMap) {\n            uniforms.bumpMap.value = material.bumpMap;\n            uniforms.bumpScale.value = material.bumpScale;\n        }\n        if (material.normalMap) {\n            uniforms.normalMap.value = material.normalMap;\n            uniforms.normalScale.value.copy(material.normalScale);\n        }\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n    }\n    refreshUniformsToon(uniforms, material) {\n        this.refreshUniformsPhong(uniforms, material);\n        if (material.gradientMap) {\n            uniforms.gradientMap.value = material.gradientMap;\n        }\n    }\n    refreshUniformsStandard(uniforms, material) {\n        uniforms.roughness.value = material.roughness;\n        uniforms.metalness.value = material.metalness;\n        if (material.roughnessMap) {\n            uniforms.roughnessMap.value = material.roughnessMap;\n        }\n        if (material.metalnessMap) {\n            uniforms.metalnessMap.value = material.metalnessMap;\n        }\n        if (material.emissiveMap) {\n            uniforms.emissiveMap.value = material.emissiveMap;\n        }\n        if (material.bumpMap) {\n            uniforms.bumpMap.value = material.bumpMap;\n            uniforms.bumpScale.value = material.bumpScale;\n        }\n        if (material.normalMap) {\n            uniforms.normalMap.value = material.normalMap;\n            uniforms.normalScale.value.copy(material.normalScale);\n        }\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n        if (material.envMap) {\n            //uniforms.envMap.value = material.envMap; // part of uniforms common\n            uniforms.envMapIntensity.value = material.envMapIntensity;\n        }\n    }\n    refreshUniformsPhysical(uniforms, material) {\n        uniforms.clearCoat.value = material.clearCoat;\n        uniforms.clearCoatRoughness.value = material.clearCoatRoughness;\n        this.refreshUniformsStandard(uniforms, material);\n    }\n    refreshUniformsDepth(uniforms, material) {\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n    }\n    refreshUniformsDistance(uniforms, material) {\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n        uniforms.referencePosition.value.copy(material.referencePosition);\n        uniforms.nearDistance.value = material.nearDistance;\n        uniforms.farDistance.value = material.farDistance;\n    }\n    refreshUniformsNormal(uniforms, material) {\n        if (material.bumpMap) {\n            uniforms.bumpMap.value = material.bumpMap;\n            uniforms.bumpScale.value = material.bumpScale;\n        }\n        if (material.normalMap) {\n            uniforms.normalMap.value = material.normalMap;\n            uniforms.normalScale.value.copy(material.normalScale);\n        }\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n    }\n    // If uniforms are marked as clean, they don't need to be loaded to the GPU.\n    markUniformsLightsNeedsUpdate(uniforms, value) {\n        uniforms.ambientLightColor.needsUpdate = value;\n        uniforms.directionalLights.needsUpdate = value;\n        uniforms.pointLights.needsUpdate = value;\n        uniforms.spotLights.needsUpdate = value;\n        uniforms.rectAreaLights.needsUpdate = value;\n        uniforms.hemisphereLights.needsUpdate = value;\n    }\n}\n","import alphamap_fragment from \"./ShaderChunk/alphamap_fragment.glsl\";\nimport alphamap_pars_fragment from \"./ShaderChunk/alphamap_pars_fragment.glsl\";\nimport alphatest_fragment from \"./ShaderChunk/alphatest_fragment.glsl\";\nimport aomap_fragment from \"./ShaderChunk/aomap_fragment.glsl\";\nimport aomap_pars_fragment from \"./ShaderChunk/aomap_pars_fragment.glsl\";\nimport begin_vertex from \"./ShaderChunk/begin_vertex.glsl\";\nimport beginnormal_vertex from \"./ShaderChunk/beginnormal_vertex.glsl\";\nimport bsdfs from \"./ShaderChunk/bsdfs.glsl\";\nimport bumpmap_pars_fragment from \"./ShaderChunk/bumpmap_pars_fragment.glsl\";\nimport clipping_planes_fragment from \"./ShaderChunk/clipping_planes_fragment.glsl\";\nimport clipping_planes_pars_fragment from \"./ShaderChunk/clipping_planes_pars_fragment.glsl\";\nimport clipping_planes_pars_vertex from \"./ShaderChunk/clipping_planes_pars_vertex.glsl\";\nimport clipping_planes_vertex from \"./ShaderChunk/clipping_planes_vertex.glsl\";\nimport color_fragment from \"./ShaderChunk/color_fragment.glsl\";\nimport color_pars_fragment from \"./ShaderChunk/color_pars_fragment.glsl\";\nimport color_pars_vertex from \"./ShaderChunk/color_pars_vertex.glsl\";\nimport color_vertex from \"./ShaderChunk/color_vertex.glsl\";\nimport common from \"./ShaderChunk/common.glsl\";\nimport cube_uv_reflection_fragment from \"./ShaderChunk/cube_uv_reflection_fragment.glsl\";\nimport defaultnormal_vertex from \"./ShaderChunk/defaultnormal_vertex.glsl\";\nimport displacementmap_pars_vertex from \"./ShaderChunk/displacementmap_pars_vertex.glsl\";\nimport displacementmap_vertex from \"./ShaderChunk/displacementmap_vertex.glsl\";\nimport emissivemap_fragment from \"./ShaderChunk/emissivemap_fragment.glsl\";\nimport emissivemap_pars_fragment from \"./ShaderChunk/emissivemap_pars_fragment.glsl\";\nimport encodings_fragment from \"./ShaderChunk/encodings_fragment.glsl\";\nimport encodings_pars_fragment from \"./ShaderChunk/encodings_pars_fragment.glsl\";\nimport envmap_fragment from \"./ShaderChunk/envmap_fragment.glsl\";\nimport envmap_pars_fragment from \"./ShaderChunk/envmap_pars_fragment.glsl\";\nimport envmap_pars_vertex from \"./ShaderChunk/envmap_pars_vertex.glsl\";\nimport envmap_vertex from \"./ShaderChunk/envmap_vertex.glsl\";\nimport fog_vertex from \"./ShaderChunk/fog_vertex.glsl\";\nimport fog_pars_vertex from \"./ShaderChunk/fog_pars_vertex.glsl\";\nimport fog_fragment from \"./ShaderChunk/fog_fragment.glsl\";\nimport fog_pars_fragment from \"./ShaderChunk/fog_pars_fragment.glsl\";\nimport gradientmap_pars_fragment from \"./ShaderChunk/gradientmap_pars_fragment.glsl\";\nimport lightmap_fragment from \"./ShaderChunk/lightmap_fragment.glsl\";\nimport lightmap_pars_fragment from \"./ShaderChunk/lightmap_pars_fragment.glsl\";\nimport lights_lambert_vertex from \"./ShaderChunk/lights_lambert_vertex.glsl\";\nimport lights_pars from \"./ShaderChunk/lights_pars.glsl\";\nimport lights_phong_fragment from \"./ShaderChunk/lights_phong_fragment.glsl\";\nimport lights_phong_pars_fragment from \"./ShaderChunk/lights_phong_pars_fragment.glsl\";\nimport lights_physical_fragment from \"./ShaderChunk/lights_physical_fragment.glsl\";\nimport lights_physical_pars_fragment from \"./ShaderChunk/lights_physical_pars_fragment.glsl\";\nimport lights_template from \"./ShaderChunk/lights_template.glsl\";\nimport logdepthbuf_fragment from \"./ShaderChunk/logdepthbuf_fragment.glsl\";\nimport logdepthbuf_pars_fragment from \"./ShaderChunk/logdepthbuf_pars_fragment.glsl\";\nimport logdepthbuf_pars_vertex from \"./ShaderChunk/logdepthbuf_pars_vertex.glsl\";\nimport logdepthbuf_vertex from \"./ShaderChunk/logdepthbuf_vertex.glsl\";\nimport map_fragment from \"./ShaderChunk/map_fragment.glsl\";\nimport map_pars_fragment from \"./ShaderChunk/map_pars_fragment.glsl\";\nimport map_particle_fragment from \"./ShaderChunk/map_particle_fragment.glsl\";\nimport map_particle_pars_fragment from \"./ShaderChunk/map_particle_pars_fragment.glsl\";\nimport metalnessmap_fragment from \"./ShaderChunk/metalnessmap_fragment.glsl\";\nimport metalnessmap_pars_fragment from \"./ShaderChunk/metalnessmap_pars_fragment.glsl\";\nimport morphnormal_vertex from \"./ShaderChunk/morphnormal_vertex.glsl\";\nimport morphtarget_pars_vertex from \"./ShaderChunk/morphtarget_pars_vertex.glsl\";\nimport morphtarget_vertex from \"./ShaderChunk/morphtarget_vertex.glsl\";\nimport normal_fragment from \"./ShaderChunk/normal_fragment.glsl\";\nimport normalmap_pars_fragment from \"./ShaderChunk/normalmap_pars_fragment.glsl\";\nimport packing from \"./ShaderChunk/packing.glsl\";\nimport premultiplied_alpha_fragment from \"./ShaderChunk/premultiplied_alpha_fragment.glsl\";\nimport project_vertex from \"./ShaderChunk/project_vertex.glsl\";\nimport dithering_fragment from \"./ShaderChunk/dithering_fragment.glsl\";\nimport dithering_pars_fragment from \"./ShaderChunk/dithering_pars_fragment.glsl\";\nimport roughnessmap_fragment from \"./ShaderChunk/roughnessmap_fragment.glsl\";\nimport roughnessmap_pars_fragment from \"./ShaderChunk/roughnessmap_pars_fragment.glsl\";\nimport shadowmap_pars_fragment from \"./ShaderChunk/shadowmap_pars_fragment.glsl\";\nimport shadowmap_pars_vertex from \"./ShaderChunk/shadowmap_pars_vertex.glsl\";\nimport shadowmap_vertex from \"./ShaderChunk/shadowmap_vertex.glsl\";\nimport shadowmask_pars_fragment from \"./ShaderChunk/shadowmask_pars_fragment.glsl\";\nimport skinbase_vertex from \"./ShaderChunk/skinbase_vertex.glsl\";\nimport skinning_pars_vertex from \"./ShaderChunk/skinning_pars_vertex.glsl\";\nimport skinning_vertex from \"./ShaderChunk/skinning_vertex.glsl\";\nimport skinnormal_vertex from \"./ShaderChunk/skinnormal_vertex.glsl\";\nimport specularmap_fragment from \"./ShaderChunk/specularmap_fragment.glsl\";\nimport specularmap_pars_fragment from \"./ShaderChunk/specularmap_pars_fragment.glsl\";\nimport tonemapping_fragment from \"./ShaderChunk/tonemapping_fragment.glsl\";\nimport tonemapping_pars_fragment from \"./ShaderChunk/tonemapping_pars_fragment.glsl\";\nimport uv_pars_fragment from \"./ShaderChunk/uv_pars_fragment.glsl\";\nimport uv_pars_vertex from \"./ShaderChunk/uv_pars_vertex.glsl\";\nimport uv_vertex from \"./ShaderChunk/uv_vertex.glsl\";\nimport uv2_pars_fragment from \"./ShaderChunk/uv2_pars_fragment.glsl\";\nimport uv2_pars_vertex from \"./ShaderChunk/uv2_pars_vertex.glsl\";\nimport uv2_vertex from \"./ShaderChunk/uv2_vertex.glsl\";\nimport worldpos_vertex from \"./ShaderChunk/worldpos_vertex.glsl\";\nimport cube_frag from \"./ShaderLib/cube_frag.glsl\";\nimport cube_vert from \"./ShaderLib/cube_vert.glsl\";\nimport depth_frag from \"./ShaderLib/depth_frag.glsl\";\nimport depth_vert from \"./ShaderLib/depth_vert.glsl\";\nimport distanceRGBA_frag from \"./ShaderLib/distanceRGBA_frag.glsl\";\nimport distanceRGBA_vert from \"./ShaderLib/distanceRGBA_vert.glsl\";\nimport equirect_frag from \"./ShaderLib/equirect_frag.glsl\";\nimport equirect_vert from \"./ShaderLib/equirect_vert.glsl\";\nimport linedashed_frag from \"./ShaderLib/linedashed_frag.glsl\";\nimport linedashed_vert from \"./ShaderLib/linedashed_vert.glsl\";\nimport meshbasic_frag from \"./ShaderLib/meshbasic_frag.glsl\";\nimport meshbasic_vert from \"./ShaderLib/meshbasic_vert.glsl\";\nimport meshlambert_frag from \"./ShaderLib/meshlambert_frag.glsl\";\nimport meshlambert_vert from \"./ShaderLib/meshlambert_vert.glsl\";\nimport meshphong_frag from \"./ShaderLib/meshphong_frag.glsl\";\nimport meshphong_vert from \"./ShaderLib/meshphong_vert.glsl\";\nimport meshphysical_frag from \"./ShaderLib/meshphysical_frag.glsl\";\nimport meshphysical_vert from \"./ShaderLib/meshphysical_vert.glsl\";\nimport normal_frag from \"./ShaderLib/normal_frag.glsl\";\nimport normal_vert from \"./ShaderLib/normal_vert.glsl\";\nimport points_frag from \"./ShaderLib/points_frag.glsl\";\nimport points_vert from \"./ShaderLib/points_vert.glsl\";\nimport shadow_frag from \"./ShaderLib/shadow_frag.glsl\";\nimport shadow_vert from \"./ShaderLib/shadow_vert.glsl\";\nconst ShaderChunk = {\n    alphamap_fragment: alphamap_fragment,\n    alphamap_pars_fragment: alphamap_pars_fragment,\n    alphatest_fragment: alphatest_fragment,\n    aomap_fragment: aomap_fragment,\n    aomap_pars_fragment: aomap_pars_fragment,\n    begin_vertex: begin_vertex,\n    beginnormal_vertex: beginnormal_vertex,\n    bsdfs: bsdfs,\n    bumpmap_pars_fragment: bumpmap_pars_fragment,\n    clipping_planes_fragment: clipping_planes_fragment,\n    clipping_planes_pars_fragment: clipping_planes_pars_fragment,\n    clipping_planes_pars_vertex: clipping_planes_pars_vertex,\n    clipping_planes_vertex: clipping_planes_vertex,\n    color_fragment: color_fragment,\n    color_pars_fragment: color_pars_fragment,\n    color_pars_vertex: color_pars_vertex,\n    color_vertex: color_vertex,\n    common: common,\n    cube_uv_reflection_fragment: cube_uv_reflection_fragment,\n    defaultnormal_vertex: defaultnormal_vertex,\n    displacementmap_pars_vertex: displacementmap_pars_vertex,\n    displacementmap_vertex: displacementmap_vertex,\n    emissivemap_fragment: emissivemap_fragment,\n    emissivemap_pars_fragment: emissivemap_pars_fragment,\n    encodings_fragment: encodings_fragment,\n    encodings_pars_fragment: encodings_pars_fragment,\n    envmap_fragment: envmap_fragment,\n    envmap_pars_fragment: envmap_pars_fragment,\n    envmap_pars_vertex: envmap_pars_vertex,\n    envmap_vertex: envmap_vertex,\n    fog_vertex: fog_vertex,\n    fog_pars_vertex: fog_pars_vertex,\n    fog_fragment: fog_fragment,\n    fog_pars_fragment: fog_pars_fragment,\n    gradientmap_pars_fragment: gradientmap_pars_fragment,\n    lightmap_fragment: lightmap_fragment,\n    lightmap_pars_fragment: lightmap_pars_fragment,\n    lights_lambert_vertex: lights_lambert_vertex,\n    lights_pars: lights_pars,\n    lights_phong_fragment: lights_phong_fragment,\n    lights_phong_pars_fragment: lights_phong_pars_fragment,\n    lights_physical_fragment: lights_physical_fragment,\n    lights_physical_pars_fragment: lights_physical_pars_fragment,\n    lights_template: lights_template,\n    logdepthbuf_fragment: logdepthbuf_fragment,\n    logdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n    logdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n    logdepthbuf_vertex: logdepthbuf_vertex,\n    map_fragment: map_fragment,\n    map_pars_fragment: map_pars_fragment,\n    map_particle_fragment: map_particle_fragment,\n    map_particle_pars_fragment: map_particle_pars_fragment,\n    metalnessmap_fragment: metalnessmap_fragment,\n    metalnessmap_pars_fragment: metalnessmap_pars_fragment,\n    morphnormal_vertex: morphnormal_vertex,\n    morphtarget_pars_vertex: morphtarget_pars_vertex,\n    morphtarget_vertex: morphtarget_vertex,\n    normal_fragment: normal_fragment,\n    normalmap_pars_fragment: normalmap_pars_fragment,\n    packing: packing,\n    premultiplied_alpha_fragment: premultiplied_alpha_fragment,\n    project_vertex: project_vertex,\n    dithering_fragment: dithering_fragment,\n    dithering_pars_fragment: dithering_pars_fragment,\n    roughnessmap_fragment: roughnessmap_fragment,\n    roughnessmap_pars_fragment: roughnessmap_pars_fragment,\n    shadowmap_pars_fragment: shadowmap_pars_fragment,\n    shadowmap_pars_vertex: shadowmap_pars_vertex,\n    shadowmap_vertex: shadowmap_vertex,\n    shadowmask_pars_fragment: shadowmask_pars_fragment,\n    skinbase_vertex: skinbase_vertex,\n    skinning_pars_vertex: skinning_pars_vertex,\n    skinning_vertex: skinning_vertex,\n    skinnormal_vertex: skinnormal_vertex,\n    specularmap_fragment: specularmap_fragment,\n    specularmap_pars_fragment: specularmap_pars_fragment,\n    tonemapping_fragment: tonemapping_fragment,\n    tonemapping_pars_fragment: tonemapping_pars_fragment,\n    uv_pars_fragment: uv_pars_fragment,\n    uv_pars_vertex: uv_pars_vertex,\n    uv_vertex: uv_vertex,\n    uv2_pars_fragment: uv2_pars_fragment,\n    uv2_pars_vertex: uv2_pars_vertex,\n    uv2_vertex: uv2_vertex,\n    worldpos_vertex: worldpos_vertex,\n    cube_frag: cube_frag,\n    cube_vert: cube_vert,\n    depth_frag: depth_frag,\n    depth_vert: depth_vert,\n    distanceRGBA_frag: distanceRGBA_frag,\n    distanceRGBA_vert: distanceRGBA_vert,\n    equirect_frag: equirect_frag,\n    equirect_vert: equirect_vert,\n    linedashed_frag: linedashed_frag,\n    linedashed_vert: linedashed_vert,\n    meshbasic_frag: meshbasic_frag,\n    meshbasic_vert: meshbasic_vert,\n    meshlambert_frag: meshlambert_frag,\n    meshlambert_vert: meshlambert_vert,\n    meshphong_frag: meshphong_frag,\n    meshphong_vert: meshphong_vert,\n    meshphysical_frag: meshphysical_frag,\n    meshphysical_vert: meshphysical_vert,\n    normal_frag: normal_frag,\n    normal_vert: normal_vert,\n    points_frag: points_frag,\n    points_vert: points_vert,\n    shadow_frag: shadow_frag,\n    shadow_vert: shadow_vert\n};\nexport { ShaderChunk };\n","export default \"#ifdef USE_ALPHAMAP\\n\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";","export default \"#ifdef USE_ALPHAMAP\\n\\n\\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";","export default \"#ifdef ALPHATEST\\n\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";","export default \"#ifdef USE_AOMAP\\n\\n\\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\n\\t#endif\\n\\n#endif\\n\";","export default \"#ifdef USE_AOMAP\\n\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n\\n#endif\";","export default \"\\nvec3 transformed = vec3( position );\\n\";","export default \"\\nvec3 objectNormal = vec3( normal );\\n\";","export default \"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\n\\tif( decayExponent > 0.0 ) {\\n\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\n\\t\\t// based upon Frostbite 3 Moving to Physically-based Rendering\\n\\t\\t// page 32, equation 26: E[window1]\\n\\t\\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\\n\\t\\t// this is intended to be used on spot and point lights who are represented as luminous intensity\\n\\t\\t// but who must be converted to luminous irradiance for surface lighting calculation\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n\\n#else\\n\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\n#endif\\n\\n\\t}\\n\\n\\treturn 1.0;\\n\\n}\\n\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n\\n} // validated\\n\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\n\\t// Original approximation by Christophe Schlick '94\\n\\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\\n\\n\\t// Optimized variant (presented by Epic at SIGGRAPH '13)\\n\\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n\\n} // validated\\n\\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\\n// alpha is \\\"roughness squared\\\" in Disneys reparameterization\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\n\\t// geometry term (normalized) = G(l)G(v) / 4(nl)(nv)\\n\\t// also see #12151\\n\\n\\tfloat a2 = pow2( alpha );\\n\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\n\\treturn 1.0 / ( gl * gv );\\n\\n} // validated\\n\\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\n\\tfloat a2 = pow2( alpha );\\n\\n\\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n\\n}\\n\\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\\n// alpha is \\\"roughness squared\\\" in Disneys reparameterization\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\n\\tfloat a2 = pow2( alpha );\\n\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\\n\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n\\n}\\n\\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\n\\tfloat alpha = pow2( roughness ); // UE4's roughness\\n\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\n\\treturn F * ( G * D );\\n\\n} // validated\\n\\n// Rect Area Light\\n\\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\\n// code: https://github.com/selfshadow/ltc_code/\\n\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\n\\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\n\\treturn uv;\\n\\n}\\n\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\n\\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\\n\\t// An approximation of the form factor of a horizon-clipped rectangle.\\n\\n\\tfloat l = length( f );\\n\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n\\n}\\n\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\n\\tfloat x = dot( v1, v2 );\\n\\n\\tfloat y = abs( x );\\n\\n\\t// rational polynomial approximation to theta / sin( theta ) / 2PI\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n\\n}\\n\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\n\\t// bail if point is on back side of plane of light\\n\\t// assumes ccw winding order of light vertices\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\n\\t// construct orthonormal basis around N\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\\n\\n\\t// compute transform\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\n\\t// transform rect\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\n\\t// project rect onto sphere\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\n\\t// calculate vector form factor\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\n\\t// adjust for horizon clipping\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\n\\n\\n\\treturn vec3( result );\\n\\n}\\n\\n// End Rect Area Light\\n\\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\n\\tvec4 r = roughness * c0 + c1;\\n\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\n\\treturn specularColor * AB.x + AB.y;\\n\\n} // validated\\n\\n\\nfloat G_BlinnPhong_Implicit( ) {\\n\\n\\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\\n\\treturn 0.25;\\n\\n}\\n\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n\\n}\\n\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\n\\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\n\\treturn F * ( G * D );\\n\\n} // validated\\n\\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\n\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";","export default \"#ifdef USE_BUMPMAP\\n\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\n\\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\\tvec2 dHdxy_fwd() {\\n\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\\t\\treturn vec2( dBx, dBy );\\n\\n\\t}\\n\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\\t\\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\\n\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\t\\t// normalized\\n\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\\t}\\n\\n#endif\\n\";","export default \"#if NUM_CLIPPING_PLANES > 0\\n\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n\\n#endif\\n\";","export default \"#if NUM_CLIPPING_PLANES > 0\\n\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n\\n#endif\\n\";","export default \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\";","export default \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\\n\";","export default \"#ifdef USE_COLOR\\n\\n\\tdiffuseColor.rgb *= vColor;\\n\\n#endif\";","export default \"#ifdef USE_COLOR\\n\\n\\tvarying vec3 vColor;\\n\\n#endif\\n\";","export default \"#ifdef USE_COLOR\\n\\n\\tvarying vec3 vColor;\\n\\n#endif\";","export default \"#ifdef USE_COLOR\\n\\n\\tvColor.xyz = color.xyz;\\n\\n#endif\";","export default \"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\n\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\n\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\n\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\n\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n\\n}\\n\\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n\\n}\\n\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\n\\treturn - distance * planeNormal + point;\\n\\n}\\n\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n\\n}\\n\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n\\n}\\n\\nmat3 transposeMat3( const in mat3 m ) {\\n\\n\\tmat3 tmp;\\n\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\n\\treturn tmp;\\n\\n}\\n\\n// https://en.wikipedia.org/wiki/Relative_luminance\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\n\\treturn dot( weights, color.rgb );\\n\\n}\\n\";","export default \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\n#define cubeUV_textureSize (1024.0)\\n\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\n\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\t// Clamp the value to the max mip level counts. hard coded to 6 mips\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\n\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\t// float powScale = exp2(roughnessLevel + mipLevel);\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\n\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\n\\t// round to nearest mipmap if we are not interpolating.\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\n\\t// Tri linear interpolation.\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\n\\tvec4 result = mix(color10, color20, t);\\n\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n\\n#endif\\n\";","export default \"vec3 transformedNormal = normalMatrix * objectNormal;\\n\\n#ifdef FLIP_SIDED\\n\\n\\ttransformedNormal = - transformedNormal;\\n\\n#endif\\n\";","export default \"#ifdef USE_DISPLACEMENTMAP\\n\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n\\n#endif\\n\";","export default \"#ifdef USE_DISPLACEMENTMAP\\n\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n\\n#endif\\n\";","export default \"#if defined( DITHERING )\\n\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n\\n#endif\\n\";","export default \"#if defined( DITHERING )\\n\\n\\t// based on https://www.shadertoy.com/view/MslGR8\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\t//Calculate grid position\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\n\\t\\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\n\\t\\t//modify shift acording to grid position.\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\n\\t\\t//shift the color by dither_shift\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n\\n#endif\\n\";","export default \"#ifdef USE_EMISSIVEMAP\\n\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n\\n#endif\\n\";","export default \"#ifdef USE_EMISSIVEMAP\\n\\n\\tuniform sampler2D emissiveMap;\\n\\n#endif\\n\";","export default \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";","export default \"// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\\n\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\n\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\n\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\n\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\\n}\\n\\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\n\\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\n\\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\\n\\n// M matrix, for encoding\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\n\\n// Inverse M matrix, for decoding\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";","export default \"#ifdef USE_ENVMAP\\n\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\\t\\t// Transforming Normal Vectors with the Inverse Transformation\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\\t\\t#else\\n\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\\t\\t#endif\\n\\n\\t#else\\n\\n\\t\\tvec3 reflectVec = vReflect;\\n\\n\\t#endif\\n\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\n\\t\\tvec2 sampleUV;\\n\\n\\t\\treflectVec = normalize( reflectVec );\\n\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\n\\t\\treflectVec = normalize( reflectVec );\\n\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\n\\t#else\\n\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\n\\t#endif\\n\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\n\\t#endif\\n\\n#endif\\n\";","export default \"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n\\n#ifdef USE_ENVMAP\\n\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n\\n#endif\\n\";","export default \"#ifdef USE_ENVMAP\\n\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\n\\t#else\\n\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\n\\t#endif\\n\\n#endif\\n\";","export default \"#ifdef USE_ENVMAP\\n\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\n\\t#else\\n\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\\t\\t#else\\n\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\\t\\t#endif\\n\\n\\t#endif\\n\\n#endif\\n\";","export default \"#ifdef USE_FOG\\n\\n\\t#ifdef FOG_EXP2\\n\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\n\\t#else\\n\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\n\\t#endif\\n\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n\\n#endif\\n\";","export default \"#ifdef USE_FOG\\n\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\n\\t#ifdef FOG_EXP2\\n\\n\\t\\tuniform float fogDensity;\\n\\n\\t#else\\n\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\n\\t#endif\\n\\n#endif\\n\";","export default \"#ifdef USE_FOG\\n\\n  varying float fogDepth;\\n\\n#endif\\n\";","export default \"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\";","export default \"#ifdef TOON\\n\\n\\tuniform sampler2D gradientMap;\\n\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\n\\t\\t// dotNL will be from -1.0 to 1.0\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\n\\t\\t#else\\n\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\n\\t\\t#endif\\n\\n\\n\\t}\\n\\n#endif\\n\";","export default \"#ifdef USE_LIGHTMAP\\n\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\\n\\n#endif\\n\";","export default \"#ifdef USE_LIGHTMAP\\n\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n\\n#endif\";","export default \"vec3 diffuse = vec3( 1.0 );\\n\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\n\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\n\\nvLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\n\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n\\n#if NUM_POINT_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#endif\\n\\n\\t}\\n\\n#endif\\n\\n#if NUM_SPOT_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#endif\\n\\t}\\n\\n#endif\\n\\n\\n\\n#if NUM_DIR_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#endif\\n\\n\\t}\\n\\n#endif\\n\\n#if NUM_HEMI_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\n\\t\\t#endif\\n\\n\\t}\\n\\n#endif\\n\";","export default \"uniform vec3 ambientLightColor;\\n\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\n\\tvec3 irradiance = ambientLightColor;\\n\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\tirradiance *= PI;\\n\\n\\t#endif\\n\\n\\treturn irradiance;\\n\\n}\\n\\n#if NUM_DIR_LIGHTS > 0\\n\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\n\\t}\\n\\n#endif\\n\\n\\n#if NUM_POINT_LIGHTS > 0\\n\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\n\\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\n\\t\\tfloat lightDistance = length( lVector );\\n\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\n\\t}\\n\\n#endif\\n\\n\\n#if NUM_SPOT_LIGHTS > 0\\n\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\n\\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\n\\t\\t} else {\\n\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\n\\t\\t}\\n\\t}\\n\\n#endif\\n\\n\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\n\\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\\n\\t// BRDF approximation Texture is 64x64\\n\\tuniform sampler2D ltc_1; // RGBA Float\\n\\tuniform sampler2D ltc_2; // RGBA Float\\n\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n\\n#endif\\n\\n\\n#if NUM_HEMI_LIGHTS > 0\\n\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\t\\tirradiance *= PI;\\n\\n\\t\\t#endif\\n\\n\\t\\treturn irradiance;\\n\\n\\t}\\n\\n#endif\\n\\n\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\n\\t\\t\\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\\n\\t\\t\\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\\n\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\n\\t\\t\\t#else\\n\\n\\t\\t\\t\\t// force the bias high to get the last LOD level as it is the most blurred.\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\n\\t\\t\\t#endif\\n\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\n\\t\\t#else\\n\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\n\\t\\t#endif\\n\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\n\\t}\\n\\n\\t// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\n\\t\\t//float envMapWidth = pow( 2.0, maxMIPLevelScalar );\\n\\t\\t//float desiredMIPLevel = log2( envMapWidth * sqrt( 3.0 ) ) - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\n\\t\\t// clamp to allowable LOD ranges.\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\n\\t}\\n\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\n\\t\\t#else\\n\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\n\\t\\t#endif\\n\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\n\\t\\t\\t#else\\n\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\n\\t\\t\\t#endif\\n\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\n\\t\\t\\t#else\\n\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\n\\t\\t\\t#endif\\n\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\n\\t\\t\\t#else\\n\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\n\\t\\t\\t#endif\\n\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\n\\t\\t#endif\\n\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\n\\t}\\n\\n#endif\\n\";","export default \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";","export default \"varying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n\\nstruct BlinnPhongMaterial {\\n\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n\\n};\\n\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\t#ifdef TOON\\n\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\n\\t#else\\n\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\n\\t#endif\\n\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\tirradiance *= PI; // punctual light\\n\\n\\t#endif\\n\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n\\n}\\n\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\n}\\n\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n\\n#define Material_LightProbeLOD( material )\\t(0)\\n\";","export default \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat ); // Burley clearcoat model\\n\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\";","export default \"struct PhysicalMaterial {\\n\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n\\n};\\n\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\n\\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n\\n}\\n\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight; // counterclockwise\\n\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\n\\t\\t// LTC Fresnel Approximation by Stephen Hill\\n\\t\\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\n\\t}\\n\\n#endif\\n\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\tirradiance *= PI; // punctual light\\n\\n\\t#endif\\n\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\n\\t#ifndef STANDARD\\n\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\n\\t#endif\\n\\n}\\n\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\n}\\n\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\n\\t#ifndef STANDARD\\n\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\n\\t#endif\\n\\n}\\n\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\n\\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n\\n}\\n\";","export default \"\\n\\nGeometricContext geometry;\\n\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\n\\nIncidentLight directLight;\\n\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\n\\tPointLight pointLight;\\n\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\n\\t\\tpointLight = pointLights[ i ];\\n\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\n\\t}\\n\\n#endif\\n\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\n\\tSpotLight spotLight;\\n\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\n\\t\\tspotLight = spotLights[ i ];\\n\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\n\\t}\\n\\n#endif\\n\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\n\\tDirectionalLight directionalLight;\\n\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\n\\t}\\n\\n#endif\\n\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\n\\tRectAreaLight rectAreaLight;\\n\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\n\\t}\\n\\n#endif\\n\\n#if defined( RE_IndirectDiffuse )\\n\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\n\\t#ifdef USE_LIGHTMAP\\n\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\t\\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\\n\\n\\t\\t#endif\\n\\n\\t\\tirradiance += lightMapIrradiance;\\n\\n\\t#endif\\n\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\n\\t\\t}\\n\\n\\t#endif\\n\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\n\\t\\t// TODO, replace 8 with the real maxMIPLevel\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\n\\t#endif\\n\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n\\n#endif\\n\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\n\\t// TODO, replace 8 with the real maxMIPLevel\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n\\n#endif\\n\";","export default \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\n\\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\\n\\n#endif\";","export default \"#ifdef USE_LOGDEPTHBUF\\n\\n\\tuniform float logDepthBufFC;\\n\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\\t\\tvarying float vFragDepth;\\n\\n\\t#endif\\n\\n#endif\\n\";","export default \"#ifdef USE_LOGDEPTHBUF\\n\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\\t\\tvarying float vFragDepth;\\n\\n\\t#endif\\n\\n\\tuniform float logDepthBufFC;\\n\\n#endif\";","export default \"#ifdef USE_LOGDEPTHBUF\\n\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\n\\t#else\\n\\n\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\n\\t\\tgl_Position.z *= gl_Position.w;\\n\\n\\t#endif\\n\\n#endif\\n\";","export default \"#ifdef USE_MAP\\n\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n\\n#endif\\n\";","export default \"#ifdef USE_MAP\\n\\n\\tuniform sampler2D map;\\n\\n#endif\\n\";","export default \"#ifdef USE_MAP\\n\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n\\n#endif\\n\";","export default \"#ifdef USE_MAP\\n\\n\\tuniform mat3 uvTransform;\\n\\tuniform sampler2D map;\\n\\n#endif\\n\";","export default \"float metalnessFactor = metalness;\\n\\n#ifdef USE_METALNESSMAP\\n\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\n\\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\\n\\tmetalnessFactor *= texelMetalness.b;\\n\\n#endif\\n\";","export default \"#ifdef USE_METALNESSMAP\\n\\n\\tuniform sampler2D metalnessMap;\\n\\n#endif\";","export default \"#ifdef USE_MORPHNORMALS\\n\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n#endif\\n\";","export default \"#ifdef USE_MORPHTARGETS\\n\\n\\t#ifndef USE_MORPHNORMALS\\n\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\n\\t#else\\n\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\n\\t#endif\\n\\n#endif\";","export default \"#ifdef USE_MORPHTARGETS\\n\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\\t#ifndef USE_MORPHNORMALS\\n\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\\t#endif\\n\\n#endif\\n\";","export default \"#ifdef FLAT_SHADED\\n\\n\\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\\n\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n\\n#else\\n\\n\\tvec3 normal = normalize( vNormal );\\n\\n\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\n\\t#endif\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\";","export default \"#ifdef USE_NORMALMAP\\n\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\n\\t// Per-Pixel Tangent Space Normal Mapping\\n\\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\\t\\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\\n\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\n\\t}\\n\\n#endif\\n\";","export default \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\n\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\n\\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\\n\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\n\\nconst float ShiftRight8 = 1. / 256.;\\n\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\\n\\treturn r * PackUpscale;\\n}\\n\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\n\\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\\n\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\n\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";","export default \"#ifdef PREMULTIPLIED_ALPHA\\n\\n\\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n\\n#endif\\n\";","export default \"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n\\ngl_Position = projectionMatrix * mvPosition;\\n\";","export default \"float roughnessFactor = roughness;\\n\\n#ifdef USE_ROUGHNESSMAP\\n\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\n\\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\\n\\troughnessFactor *= texelRoughness.g;\\n\\n#endif\\n\";","export default \"#ifdef USE_ROUGHNESSMAP\\n\\n\\tuniform sampler2D roughnessMap;\\n\\n#endif\";","export default \"#ifdef USE_SHADOWMAP\\n\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t\\n\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\n\\t}\\n\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\n\\t\\treturn c;\\n\\n\\t}\\n\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\n\\t\\tfloat shadow = 1.0;\\n\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\n\\t\\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\\t\\t// if ( all( something, something ) ) using this instead\\n\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\n\\t\\tif ( frustumTest ) {\\n\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\n\\t\\t#else // no percentage-closer filtering:\\n\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\n\\t\\t#endif\\n\\n\\t\\t}\\n\\n\\t\\treturn shadow;\\n\\n\\t}\\n\\n\\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\\n\\t// vector suitable for 2D texture mapping. This code uses the following layout for the\\n\\t// 2D texture:\\n\\t//\\n\\t// xzXZ\\n\\t//  y Y\\n\\t//\\n\\t// Y - Positive y direction\\n\\t// y - Negative y direction\\n\\t// X - Positive x direction\\n\\t// x - Negative x direction\\n\\t// Z - Positive z direction\\n\\t// z - Negative z direction\\n\\t//\\n\\t// Source and test bed:\\n\\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\\n\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\n\\t\\t// Number of texels to avoid at the edge of each square\\n\\n\\t\\tvec3 absV = abs( v );\\n\\n\\t\\t// Intersect unit cube\\n\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\n\\t\\t// Apply scale to avoid seams\\n\\n\\t\\t// two texels less per square (one texel will do for NEAREST)\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\n\\t\\t// Unwrap\\n\\n\\t\\t// space: -1 ... 1 range for each square\\n\\t\\t//\\n\\t\\t// #X##\\t\\tdim    := ( 4 , 2 )\\n\\t\\t//  # #\\t\\tcenter := ( 1 , 1 )\\n\\n\\t\\tvec2 planar = v.xy;\\n\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\n\\t\\t}\\n\\n\\t\\t// Transform to UV space\\n\\n\\t\\t// scale := 0.5 / dim\\n\\t\\t// translate := ( center + 0.5 ) / dim\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\n\\t}\\n\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\n\\t\\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\\n\\t\\t// the vector from the light to the world-space position of the fragment.\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\n\\t\\t// dp = normalized distance from light to fragment position\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\\n\\t\\tdp += shadowBias;\\n\\n\\t\\t// bd3D = base direction 3D\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\n\\t\\t#else // no percentage-closer filtering\\n\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\n\\t\\t#endif\\n\\n\\t}\\n\\n#endif\\n\";","export default \"#ifdef USE_SHADOWMAP\\n\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t\\n\\n#endif\\n\";","export default \"#ifdef USE_SHADOWMAP\\n\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t\\n\\n#endif\\n\";","export default \"float getShadowMask() {\\n\\n\\tfloat shadow = 1.0;\\n\\n\\t#ifdef USE_SHADOWMAP\\n\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\n\\tDirectionalLight directionalLight;\\n\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\n\\tSpotLight spotLight;\\n\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\n\\tPointLight pointLight;\\n\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t\\n\\n\\t#endif\\n\\n\\treturn shadow;\\n\\n}\\n\";","export default \"#ifdef USE_SKINNING\\n\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";","export default \"#ifdef USE_SKINNING\\n\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\n\\t#ifdef BONE_TEXTURE\\n\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\\t\\t\\treturn bone;\\n\\n\\t\\t}\\n\\n\\t#else\\n\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\n\\t\\t}\\n\\n\\t#endif\\n\\n#endif\\n\";","export default \"#ifdef USE_SKINNING\\n\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n\\n#endif\\n\";","export default \"#ifdef USE_SKINNING\\n\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\n#endif\\n\";","export default \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\\tspecularStrength = 1.0;\\n\\n#endif\";","export default \"#ifdef USE_SPECULARMAP\\n\\n\\tuniform sampler2D specularMap;\\n\\n#endif\";","export default \"#if defined( TONE_MAPPING )\\n\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n\\n#endif\\n\";","export default \"#ifndef saturate\\n\\t#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\n\\n// exposure only\\nvec3 LinearToneMapping( vec3 color ) {\\n\\n\\treturn toneMappingExposure * color;\\n\\n}\\n\\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n\\n}\\n\\n// source: http://filmicgames.com/archives/75\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\n\\t// John Hable's filmic operator from Uncharted 2 video game\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n\\n}\\n\\n// source: http://filmicgames.com/archives/75\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\n\\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n\\n}\\n\";","export default \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\\tvarying vec2 vUv2;\\n\\n#endif\";","export default \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\n#endif\";","export default \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\\tvUv2 = uv2;\\n\\n#endif\";","export default \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\n\\tvarying vec2 vUv;\\n\\n#endif\";","export default \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n\\n#endif\\n\";","export default \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\n#endif\";","export default \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\\n#endif\\n\";","import { Color } from \"../../math/Color\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { ShaderChunk } from \"./ShaderChunk\";\nimport { UniformsLib } from \"./UniformsLib\";\nimport { UniformsUtils } from \"./UniformsUtils\";\nconst ShaderLib = {\n    basic: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.specularmap,\n            UniformsLib.envmap,\n            UniformsLib.aomap,\n            UniformsLib.lightmap,\n            UniformsLib.fog,\n        ]),\n        vertexShader: ShaderChunk.meshbasic_vert,\n        fragmentShader: ShaderChunk.meshbasic_frag,\n    },\n    lambert: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.specularmap,\n            UniformsLib.envmap,\n            UniformsLib.aomap,\n            UniformsLib.lightmap,\n            UniformsLib.emissivemap,\n            UniformsLib.fog,\n            UniformsLib.lights,\n            {\n                emissive: { value: new Color(0x000000) },\n            },\n        ]),\n        vertexShader: ShaderChunk.meshlambert_vert,\n        fragmentShader: ShaderChunk.meshlambert_frag,\n    },\n    phong: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.specularmap,\n            UniformsLib.envmap,\n            UniformsLib.aomap,\n            UniformsLib.lightmap,\n            UniformsLib.emissivemap,\n            UniformsLib.bumpmap,\n            UniformsLib.normalmap,\n            UniformsLib.displacementmap,\n            UniformsLib.gradientmap,\n            UniformsLib.fog,\n            UniformsLib.lights,\n            {\n                emissive: { value: new Color(0x000000) },\n                specular: { value: new Color(0x111111) },\n                shininess: { value: 30 },\n            },\n        ]),\n        vertexShader: ShaderChunk.meshphong_vert,\n        fragmentShader: ShaderChunk.meshphong_frag,\n    },\n    standard: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.envmap,\n            UniformsLib.aomap,\n            UniformsLib.lightmap,\n            UniformsLib.emissivemap,\n            UniformsLib.bumpmap,\n            UniformsLib.normalmap,\n            UniformsLib.displacementmap,\n            UniformsLib.roughnessmap,\n            UniformsLib.metalnessmap,\n            UniformsLib.fog,\n            UniformsLib.lights,\n            {\n                emissive: { value: new Color(0x000000) },\n                roughness: { value: 0.5 },\n                metalness: { value: 0.5 },\n                envMapIntensity: { value: 1 },\n            },\n        ]),\n        vertexShader: ShaderChunk.meshphysical_vert,\n        fragmentShader: ShaderChunk.meshphysical_frag,\n    },\n    points: {\n        uniforms: UniformsUtils.merge([UniformsLib.points, UniformsLib.fog]),\n        vertexShader: ShaderChunk.points_vert,\n        fragmentShader: ShaderChunk.points_frag,\n    },\n    dashed: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.fog,\n            {\n                scale: { value: 1 },\n                dashSize: { value: 1 },\n                totalSize: { value: 2 },\n            },\n        ]),\n        vertexShader: ShaderChunk.linedashed_vert,\n        fragmentShader: ShaderChunk.linedashed_frag,\n    },\n    depth: {\n        uniforms: UniformsUtils.merge([UniformsLib.common, UniformsLib.displacementmap]),\n        vertexShader: ShaderChunk.depth_vert,\n        fragmentShader: ShaderChunk.depth_frag,\n    },\n    normal: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.bumpmap,\n            UniformsLib.normalmap,\n            UniformsLib.displacementmap,\n            {\n                opacity: { value: 1.0 },\n            },\n        ]),\n        vertexShader: ShaderChunk.normal_vert,\n        fragmentShader: ShaderChunk.normal_frag,\n    },\n    /* -------------------------------------------------------------------------\n     //\tCube map shader\n     ------------------------------------------------------------------------- */\n    cube: {\n        uniforms: {\n            tCube: { value: null },\n            tFlip: { value: -1 },\n            opacity: { value: 1.0 },\n        },\n        vertexShader: ShaderChunk.cube_vert,\n        fragmentShader: ShaderChunk.cube_frag,\n    },\n    equirect: {\n        uniforms: {\n            tEquirect: { value: null },\n        },\n        vertexShader: ShaderChunk.equirect_vert,\n        fragmentShader: ShaderChunk.equirect_frag,\n    },\n    distanceRGBA: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.displacementmap,\n            {\n                referencePosition: { value: new Vector3() },\n                nearDistance: { value: 1 },\n                farDistance: { value: 1000 },\n            },\n        ]),\n        vertexShader: ShaderChunk.distanceRGBA_vert,\n        fragmentShader: ShaderChunk.distanceRGBA_frag,\n    },\n    shadow: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.lights,\n            UniformsLib.fog,\n            {\n                color: { value: new Color(0x00000) },\n                opacity: { value: 1.0 },\n            },\n        ]),\n        vertexShader: ShaderChunk.shadow_vert,\n        fragmentShader: ShaderChunk.shadow_frag,\n    },\n};\nShaderLib.physical = {\n    uniforms: UniformsUtils.merge([\n        ShaderLib.standard.uniforms,\n        {\n            clearCoat: { value: 0 },\n            clearCoatRoughness: { value: 0 },\n        },\n    ]),\n    vertexShader: ShaderChunk.meshphysical_vert,\n    fragmentShader: ShaderChunk.meshphysical_frag,\n};\nexport { ShaderLib };\n","export default \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\n\\nvarying vec3 vWorldPosition;\\n\\nvoid main() {\\n\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n\\n}\\n\";","export default \"varying vec3 vWorldPosition;\\n\\n#include <common>\\n\\nvoid main() {\\n\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\n\\tgl_Position.z = gl_Position.w; // set z to camera.far\\n\\n}\\n\";","export default \"#if DEPTH_PACKING == 3200\\n\\n\\tuniform float opacity;\\n\\n#endif\\n\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\n\\t#if DEPTH_PACKING == 3200\\n\\n\\t\\tdiffuseColor.a = opacity;\\n\\n\\t#endif\\n\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\n\\t#include <logdepthbuf_fragment>\\n\\n\\t#if DEPTH_PACKING == 3200\\n\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\n\\t#elif DEPTH_PACKING == 3201\\n\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\n\\t#endif\\n\\n}\\n\";","export default \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\n\\t#include <skinbase_vertex>\\n\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\n\\t#endif\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n}\\n\";","export default \"#define DISTANCE\\n\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main () {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist ); // clamp to [ 0, 1 ]\\n\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n\\n}\\n\";","export default \"#define DISTANCE\\n\\nvarying vec3 vWorldPosition;\\n\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\n\\t#include <skinbase_vertex>\\n\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\n\\t#endif\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n\\tvWorldPosition = worldPosition.xyz;\\n\\n}\\n\";","export default \"uniform sampler2D tEquirect;\\n\\nvarying vec3 vWorldPosition;\\n\\n#include <common>\\n\\nvoid main() {\\n\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\n\\tvec2 sampleUV;\\n\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\n}\\n\";","export default \"varying vec3 vWorldPosition;\\n\\n#include <common>\\n\\nvoid main() {\\n\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\n}\\n\";","export default \"uniform vec3 diffuse;\\nuniform float opacity;\\n\\nuniform float dashSize;\\nuniform float totalSize;\\n\\nvarying float vLineDistance;\\n\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\n\\t\\tdiscard;\\n\\n\\t}\\n\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\n\\toutgoingLight = diffuseColor.rgb; // simple shader\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\n}\\n\";","export default \"uniform float scale;\\nattribute float lineDistance;\\n\\nvarying float vLineDistance;\\n\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <color_vertex>\\n\\n\\tvLineDistance = scale * lineDistance;\\n\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\n}\\n\";","export default \"uniform vec3 diffuse;\\nuniform float opacity;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\n\\t// accumulation (baked indirect lighting only)\\n\\t#ifdef USE_LIGHTMAP\\n\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\n\\t#else\\n\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\n\\t#endif\\n\\n\\t// modulation\\n\\t#include <aomap_fragment>\\n\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\n\\t#include <envmap_fragment>\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\n}\\n\";","export default \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\n\\t#ifdef USE_ENVMAP\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\n\\t#endif\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n\\n}\\n\";","export default \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n\\nvarying vec3 vLightFront;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\\tvarying vec3 vLightBack;\\n\\n#endif\\n\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\n\\t// accumulation\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\n\\t#include <lightmap_fragment>\\n\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\n\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\n\\t#else\\n\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\n\\t#endif\\n\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\n\\t// modulation\\n\\t#include <aomap_fragment>\\n\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\n\\t#include <envmap_fragment>\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n\\n}\\n\";","export default \"#define LAMBERT\\n\\nvarying vec3 vLightFront;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\\tvarying vec3 vLightBack;\\n\\n#endif\\n\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n\\n}\\n\";","export default \"#define PHONG\\n\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\n\\t// accumulation\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\n\\t// modulation\\n\\t#include <aomap_fragment>\\n\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\n\\t#include <envmap_fragment>\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n\\n}\\n\";","export default \"#define PHONG\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\\n\\n\\tvNormal = normalize( transformedNormal );\\n\\n#endif\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n\\tvViewPosition = - mvPosition.xyz;\\n\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n\\n}\\n\";","export default \"#define PHYSICAL\\n\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\n\\t// accumulation\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\n\\t// modulation\\n\\t#include <aomap_fragment>\\n\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n\\n}\\n\";","export default \"#define PHYSICAL\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\\n\\n\\tvNormal = normalize( transformedNormal );\\n\\n#endif\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n\\tvViewPosition = - mvPosition.xyz;\\n\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n\\n}\\n\";","export default \"#define NORMAL\\n\\nuniform float opacity;\\n\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\n\\tvarying vec3 vViewPosition;\\n\\n#endif\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment>\\n\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n\\n}\\n\";","export default \"#define NORMAL\\n\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\n\\tvarying vec3 vViewPosition;\\n\\n#endif\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\\n\\n\\tvNormal = normalize( transformedNormal );\\n\\n#endif\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\n\\tvViewPosition = - mvPosition.xyz;\\n\\n#endif\\n\\n}\\n\";","export default \"uniform vec3 diffuse;\\nuniform float opacity;\\n\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\n\\toutgoingLight = diffuseColor.rgb;\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\n}\\n\";","export default \"uniform float size;\\nuniform float scale;\\n\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n\\n}\\n\";","export default \"uniform vec3 color;\\nuniform float opacity;\\n\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n\\nvoid main() {\\n\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\n\\t#include <fog_fragment>\\n\\n}\\n\";","export default \"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n\\n}\\n\";","import { Color } from \"../../math/Color\";\nimport { Vector2 } from \"../../math/Vector2\";\nimport { Matrix3 } from \"../../math/Matrix3\";\n/**\n * Uniforms library for shared webgl shaders\n */\nconst UniformsLib = {\n    common: {\n        diffuse: { value: new Color(0xeeeeee) },\n        opacity: { value: 1.0 },\n        map: { value: null },\n        uvTransform: { value: new Matrix3() },\n        alphaMap: { value: null },\n    },\n    specularmap: {\n        specularMap: { value: null },\n    },\n    envmap: {\n        envMap: { value: null },\n        flipEnvMap: { value: -1 },\n        reflectivity: { value: 1.0 },\n        refractionRatio: { value: 0.98 },\n    },\n    aomap: {\n        aoMap: { value: null },\n        aoMapIntensity: { value: 1 },\n    },\n    lightmap: {\n        lightMap: { value: null },\n        lightMapIntensity: { value: 1 },\n    },\n    emissivemap: {\n        emissiveMap: { value: null },\n    },\n    bumpmap: {\n        bumpMap: { value: null },\n        bumpScale: { value: 1 },\n    },\n    normalmap: {\n        normalMap: { value: null },\n        normalScale: { value: new Vector2(1, 1) },\n    },\n    displacementmap: {\n        displacementMap: { value: null },\n        displacementScale: { value: 1 },\n        displacementBias: { value: 0 },\n    },\n    roughnessmap: {\n        roughnessMap: { value: null },\n    },\n    metalnessmap: {\n        metalnessMap: { value: null },\n    },\n    gradientmap: {\n        gradientMap: { value: null },\n    },\n    fog: {\n        fogDensity: { value: 0.00025 },\n        fogNear: { value: 1 },\n        fogFar: { value: 2000 },\n        fogColor: { value: new Color(0xffffff) },\n    },\n    lights: {\n        ambientLightColor: { value: [] },\n        directionalLights: {\n            value: [],\n            properties: {\n                direction: {},\n                color: {},\n                shadow: {},\n                shadowBias: {},\n                shadowRadius: {},\n                shadowMapSize: {},\n            },\n        },\n        directionalShadowMap: { value: [] },\n        directionalShadowMatrix: { value: [] },\n        spotLights: {\n            value: [],\n            properties: {\n                color: {},\n                position: {},\n                direction: {},\n                distance: {},\n                coneCos: {},\n                penumbraCos: {},\n                decay: {},\n                shadow: {},\n                shadowBias: {},\n                shadowRadius: {},\n                shadowMapSize: {},\n            },\n        },\n        spotShadowMap: { value: [] },\n        spotShadowMatrix: { value: [] },\n        pointLights: {\n            value: [],\n            properties: {\n                color: {},\n                position: {},\n                decay: {},\n                distance: {},\n                shadow: {},\n                shadowBias: {},\n                shadowRadius: {},\n                shadowMapSize: {},\n                shadowCameraNear: {},\n                shadowCameraFar: {},\n            },\n        },\n        pointShadowMap: { value: [] },\n        pointShadowMatrix: { value: [] },\n        hemisphereLights: {\n            value: [],\n            properties: {\n                direction: {},\n                skyColor: {},\n                groundColor: {},\n            },\n        },\n        // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n        rectAreaLights: {\n            value: [],\n            properties: {\n                color: {},\n                position: {},\n                width: {},\n                height: {},\n            },\n        },\n    },\n    points: {\n        diffuse: { value: new Color(0xeeeeee) },\n        opacity: { value: 1.0 },\n        size: { value: 1.0 },\n        scale: { value: 1.0 },\n        map: { value: null },\n        uvTransform: { value: new Matrix3() },\n    },\n};\nexport { UniformsLib };\n","import { Color } from \"../../math/Color\";\nimport { Matrix3 } from \"../../math/Matrix3\";\nimport { Matrix4 } from \"../../math/Matrix4\";\nimport { Vector2 } from \"../../math/Vector2\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { Vector4 } from \"../../math/Vector4\";\nimport { Texture } from \"../../textures/Texture\";\nexport class UniformsUtils {\n    static merge(uniforms) {\n        const merged = {};\n        for (let u = 0; u < uniforms.length; u++) {\n            const tmp = this.clone(uniforms[u]);\n            for (const p in tmp) {\n                if (tmp.hasOwnProperty(p)) {\n                    merged[p] = tmp[p];\n                }\n            }\n        }\n        return merged;\n    }\n    static clone(uniformsSrc) {\n        const uniformsDst = {};\n        for (const u in uniformsSrc) {\n            if (!uniformsSrc.hasOwnProperty(u))\n                continue;\n            uniformsDst[u] = {};\n            for (const p in uniformsSrc[u]) {\n                if (!uniformsSrc[u].hasOwnProperty(p))\n                    continue;\n                const parameterSrc = uniformsSrc[u][p];\n                if (parameterSrc &&\n                    (parameterSrc instanceof Color ||\n                        parameterSrc instanceof Matrix3 ||\n                        parameterSrc instanceof Matrix4 ||\n                        parameterSrc instanceof Vector2 ||\n                        parameterSrc instanceof Vector3 ||\n                        parameterSrc instanceof Vector4 ||\n                        parameterSrc instanceof Texture)) {\n                    uniformsDst[u][p] = parameterSrc.clone();\n                }\n                else if (Array.isArray(parameterSrc)) {\n                    uniformsDst[u][p] = parameterSrc.slice();\n                }\n                else {\n                    uniformsDst[u][p] = parameterSrc;\n                }\n            }\n        }\n        return uniformsDst;\n    }\n}\n","export class WebGLAttributes {\n    constructor(context) {\n        this.buffers = {};\n        this.context = context;\n    }\n    createBuffer(attribute, bufferType) {\n        const gl = this.context;\n        const array = attribute.array;\n        const usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n        const buffer = gl.createBuffer();\n        gl.bindBuffer(bufferType, buffer);\n        gl.bufferData(bufferType, array, usage);\n        // attribute.onUploadCallback();\n        let type = gl.FLOAT;\n        if (array instanceof Float32Array) {\n            type = gl.FLOAT;\n        }\n        else if (array instanceof Float64Array) {\n            console.warn(`THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.`);\n        }\n        else if (array instanceof Uint16Array) {\n            type = gl.UNSIGNED_SHORT;\n        }\n        else if (array instanceof Int16Array) {\n            type = gl.SHORT;\n        }\n        else if (array instanceof Uint32Array) {\n            type = gl.UNSIGNED_INT;\n        }\n        else if (array instanceof Int32Array) {\n            type = gl.INT;\n        }\n        else if (array instanceof Int8Array) {\n            type = gl.BYTE;\n        }\n        else if (array instanceof Uint8Array) {\n            type = gl.UNSIGNED_BYTE;\n        }\n        return {\n            buffer: buffer,\n            type: type,\n            bytesPerElement: array.BYTES_PER_ELEMENT,\n            version: attribute.version,\n        };\n    }\n    updateBuffer(buffer, attribute, bufferType) {\n        const gl = this.context;\n        const array = attribute.array;\n        const updateRange = attribute.updateRange;\n        gl.bindBuffer(bufferType, buffer);\n        if (attribute.dynamic === false) {\n            gl.bufferData(bufferType, array, gl.STATIC_DRAW);\n        }\n        else if (updateRange.count === -1) {\n            // Not using update ranges\n            gl.bufferSubData(bufferType, 0, array);\n        }\n        else if (updateRange.count === 0) {\n            console.error(`THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.`);\n        }\n        else {\n            gl.bufferSubData(bufferType, updateRange.offset * array.BYTES_PER_ELEMENT, array.subarray(updateRange.offset, updateRange.offset + updateRange.count));\n            updateRange.count = -1; // reset range\n        }\n        return this;\n    }\n    get(attribute) {\n        return this.buffers[attribute.uuid];\n    }\n    remove(attribute) {\n        const data = this.buffers[attribute.uuid];\n        if (data) {\n            const gl = this.context;\n            gl.deleteBuffer(data.buffer);\n            delete this.buffers[attribute.uuid];\n        }\n        return this;\n    }\n    update(attribute, bufferType) {\n        const data = this.buffers[attribute.uuid];\n        if (data === undefined) {\n            this.buffers[attribute.uuid] = this.createBuffer(attribute, bufferType);\n        }\n        else if (data.version < attribute.version) {\n            this.updateBuffer(data.buffer, attribute, bufferType);\n            data.version = attribute.version;\n        }\n        return this;\n    }\n}\n","import { BackSide } from \"../../constants\";\nimport { Color } from \"../../math/Color\";\nimport { Texture } from \"../../textures/Texture\";\nimport { CubeTexture } from \"../../textures/CubeTexture\";\nimport { Mesh } from \"../../objects/Mesh\";\nimport { BoxBufferGeometry } from \"../../geometries/Geometries\";\nimport { ShaderMaterial, MeshBasicMaterial } from \"../../materials/Materials\";\nimport { ShaderLib } from \"../shaders/ShaderLib\";\nimport { OrthographicCamera } from \"../../cameras/OrthographicCamera\";\nimport { PlaneBufferGeometry } from \"../../geometries/PlaneGeometry\";\nexport class WebGLBackground {\n    constructor(renderer, state, geometries, premultipliedAlpha) {\n        this.clearColor = new Color().setHex(0x000000);\n        this.clearAlpha = 0;\n        this.renderer = renderer;\n        this.state = state;\n        this.geometries = geometries;\n        this.premultipliedAlpha = premultipliedAlpha;\n    }\n    getClearColor() {\n        return this.clearColor;\n    }\n    setClearColor(color, alpha) {\n        this.clearColor.copy(color);\n        this.clearAlpha = alpha !== undefined ? alpha : 1;\n        this.setClear(this.clearColor, this.clearAlpha);\n    }\n    getClearAlpha() {\n        return this.clearAlpha;\n    }\n    setClearAlpha(alpha) {\n        this.clearAlpha = alpha;\n        this.setClear(this.clearColor, this.clearAlpha);\n    }\n    setClear(color, alpha) {\n        this.state.buffers.color.setClear(color.r, color.g, color.b, alpha, this.premultipliedAlpha);\n    }\n    render(renderList, scene, camera, forceClear) {\n        const background = scene.background;\n        const renderer = this.renderer;\n        if (background === null) {\n            this.setClear(this.clearColor, this.clearAlpha);\n        }\n        else if (background && background instanceof Color) {\n            this.setClear(background, 1);\n            forceClear = true;\n        }\n        if (this.renderer.autoClear || forceClear) {\n            renderer.clear(this.renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n        }\n        if (background && background instanceof CubeTexture) {\n            if (this.boxMesh === undefined) {\n                this.boxMesh = new Mesh(new BoxBufferGeometry(1, 1, 1), new ShaderMaterial({\n                    uniforms: ShaderLib.cube.uniforms,\n                    vertexShader: ShaderLib.cube.vertexShader,\n                    fragmentShader: ShaderLib.cube.fragmentShader,\n                    side: BackSide,\n                    depthTest: true,\n                    depthWrite: false,\n                    fog: false,\n                }));\n                this.boxMesh.geometry.removeAttribute(\"normal\");\n                this.boxMesh.geometry.removeAttribute(\"uv\");\n                this.boxMesh.onBeforeRender = function (renderer, scene, camera) {\n                    this.matrixWorld.copyPosition(camera.matrixWorld);\n                };\n                this.geometries.update(this.boxMesh.geometry);\n            }\n            this.boxMesh.material.uniforms.tCube.value = background;\n            renderList.push(this.boxMesh, this.boxMesh.geometry, this.boxMesh.material, 0, null);\n        }\n        else if (background && background instanceof Texture) {\n            if (this.planeCamera === undefined) {\n                this.planeCamera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n                this.planeMesh = new Mesh(new PlaneBufferGeometry(2, 2), new MeshBasicMaterial({ depthTest: false, depthWrite: false, fog: false }));\n                this.geometries.update(this.planeMesh.geometry);\n            }\n            this.planeMesh.material.map = background;\n            // TODO Push this to renderList\n            renderer.renderBufferDirect(this.planeCamera, null, this.planeMesh.geometry, this.planeMesh.material, this.planeMesh, null);\n        }\n    }\n}\n","import { InterleavedBufferAttribute } from \"../../core/InterleavedBufferAttribute\";\nexport class WebGLBufferRenderer {\n    constructor(context, extensions, infoRender) {\n        this.mode = 0;\n        this.context = context;\n        this.extensions = extensions;\n        this.infoRender = infoRender;\n    }\n    setMode(value) {\n        this.mode = value;\n        return this;\n    }\n    render(start, count) {\n        const gl = this.context;\n        gl.drawArrays(this.mode, start, count);\n        this.infoRender.calls++;\n        this.infoRender.vertices += count;\n        if (this.mode === gl.TRIANGLES) {\n            this.infoRender.faces += count / 3;\n        }\n        else if (this.mode === gl.POINTS) {\n            this.infoRender.points += count;\n        }\n        return this;\n    }\n    renderInstances(geometry, start, count) {\n        const gl = this.context;\n        const extension = this.extensions.get(\"ANGLE_instanced_arrays\");\n        if (extension === null) {\n            console.error(`THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.`);\n            return this;\n        }\n        const position = geometry.attributes.position;\n        if (position instanceof InterleavedBufferAttribute) {\n            count = position.count;\n            extension.drawArraysInstancedANGLE(this.mode, 0, count, geometry.maxInstancedCount);\n        }\n        else {\n            extension.drawArraysInstancedANGLE(this.mode, start, count, geometry.maxInstancedCount);\n        }\n        this.infoRender.calls++;\n        this.infoRender.vertices += count * geometry.maxInstancedCount;\n        if (this.mode === gl.TRIANGLES) {\n            this.infoRender.faces += geometry.maxInstancedCount * count / 3;\n        }\n        else if (this.mode === gl.POINTS) {\n            this.infoRender.points += geometry.maxInstancedCount * count;\n        }\n        return this;\n    }\n}\n","export class WebGLCapabilities {\n    constructor(context, extensions, parameters) {\n        this.logarithmicDepthBuffer = false;\n        this.maxTextures = 0;\n        this.maxVertexTextures = 0;\n        this.maxTextureSize = 0;\n        this.maxCubemapSize = 0;\n        this.maxAttributes = 0;\n        this.maxVertexUniforms = 0;\n        this.maxVaryings = 0;\n        this.maxFragmentUniforms = 0;\n        this.vertexTextures = false;\n        this.floatFragmentTextures = false;\n        this.floatVertexTextures = false;\n        this.maxAnisotropy = 0;\n        this.context = context;\n        this.extensions = extensions;\n        this.precision = parameters.precision !== undefined ? parameters.precision : \"highp\";\n        this.maxPrecision = this.getMaxPrecision(this.precision);\n        if (this.maxPrecision !== this.precision) {\n            console.warn(`THREE.WebGLRenderer: ${this.precision} not supported, using ${this.maxPrecision} instead.`);\n            this.precision = this.maxPrecision;\n        }\n        this.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n        this.maxTextures = context.getParameter(context.MAX_TEXTURE_IMAGE_UNITS);\n        this.maxVertexTextures = context.getParameter(context.MAX_VERTEX_TEXTURE_IMAGE_UNITS);\n        this.maxTextureSize = context.getParameter(context.MAX_TEXTURE_SIZE);\n        this.maxCubemapSize = context.getParameter(context.MAX_CUBE_MAP_TEXTURE_SIZE);\n        this.maxAttributes = context.getParameter(context.MAX_VERTEX_ATTRIBS);\n        this.maxVertexUniforms = context.getParameter(context.MAX_VERTEX_UNIFORM_VECTORS);\n        this.maxVaryings = context.getParameter(context.MAX_VARYING_VECTORS);\n        this.maxFragmentUniforms = context.getParameter(context.MAX_FRAGMENT_UNIFORM_VECTORS);\n        this.vertexTextures = this.maxVertexTextures > 0;\n        this.floatFragmentTextures = !!this.extensions.get(\"OES_texture_float\");\n        this.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\n        this.maxAnisotropy = this.getMaxAnisotropy();\n    }\n    getMaxPrecision(precision) {\n        const context = this.context;\n        if (precision === \"highp\") {\n            if (context.getShaderPrecisionFormat(context.VERTEX_SHADER, context.HIGH_FLOAT).precision > 0 &&\n                context.getShaderPrecisionFormat(context.FRAGMENT_SHADER, context.HIGH_FLOAT).precision > 0) {\n                return \"highp\";\n            }\n            precision = \"mediump\";\n        }\n        if (precision === \"mediump\") {\n            if (context.getShaderPrecisionFormat(context.VERTEX_SHADER, context.MEDIUM_FLOAT).precision > 0 &&\n                context.getShaderPrecisionFormat(context.FRAGMENT_SHADER, context.MEDIUM_FLOAT).precision > 0) {\n                return \"mediump\";\n            }\n        }\n        return \"lowp\";\n    }\n    getMaxAnisotropy() {\n        const extension = this.extensions.get(\"EXT_texture_filter_anisotropic\");\n        if (extension !== null) {\n            return this.context.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n        }\n        else {\n            return 0;\n        }\n    }\n}\n","import { Plane } from \"../../math/Plane\";\nimport { Matrix3 } from \"../../math/Matrix3\";\nexport class WebGLClipping {\n    constructor() {\n        this.globalState = null;\n        this.numGlobalPlanes = 0;\n        this.localClippingEnabled = false;\n        this.renderingShadows = false;\n        this.uniform = {\n            value: null,\n            needsUpdate: false,\n        };\n        this.numPlanes = 0;\n        this.numIntersection = 0;\n    }\n    projectPlanes(planes, camera, dstOffset, skipTransform = false) {\n        const nPlanes = planes !== null ? planes.length : 0;\n        let dstArray = null;\n        if (nPlanes !== 0) {\n            dstArray = this.uniform.value;\n            if (skipTransform !== true || dstArray === null) {\n                const flatSize = dstOffset + nPlanes * 4;\n                const viewMatrix = camera.matrixWorldInverse;\n                const viewNormalMatrix = new Matrix3().getNormalMatrix(viewMatrix);\n                if (dstArray === null || dstArray.length < flatSize) {\n                    dstArray = new Float32Array(flatSize);\n                }\n                for (let i = 0, i4 = dstOffset; i !== nPlanes; ++i, i4 += 4) {\n                    const plane = new Plane().copy(planes[i]).applyMatrix4(viewMatrix, viewNormalMatrix);\n                    plane.normal.toArray(dstArray, i4);\n                    dstArray[i4 + 3] = plane.constant;\n                }\n            }\n            this.uniform.value = dstArray;\n            this.uniform.needsUpdate = true;\n        }\n        this.numPlanes = nPlanes;\n        return dstArray;\n    }\n    init(planes, enableLocalClipping, camera) {\n        const enabled = planes.length !== 0 ||\n            enableLocalClipping ||\n            // enable state of previous frame - the clipping code has to\n            // run another frame in order to reset the state:\n            this.numGlobalPlanes !== 0 ||\n            this.localClippingEnabled;\n        this.localClippingEnabled = enableLocalClipping;\n        this.globalState = this.projectPlanes(planes, camera, 0);\n        this.numGlobalPlanes = planes.length;\n        return enabled;\n    }\n    beginShadows() {\n        this.renderingShadows = true;\n        this.projectPlanes(null);\n    }\n    endShadows() {\n        this.renderingShadows = false;\n        this.resetGlobalState();\n    }\n    resetGlobalState() {\n        if (this.uniform.value !== this.globalState) {\n            this.uniform.value = this.globalState;\n            this.uniform.needsUpdate = this.numGlobalPlanes > 0;\n        }\n        this.numPlanes = this.numGlobalPlanes;\n        this.numIntersection = 0;\n    }\n    setState(planes, clipIntersection, clipShadows, camera, cache, fromCache) {\n        if (!this.localClippingEnabled ||\n            planes === null ||\n            planes.length === 0 ||\n            (this.renderingShadows && !clipShadows)) {\n            // there's no local clipping\n            if (this.renderingShadows) {\n                // there's no global clipping\n                this.projectPlanes(null);\n            }\n            else {\n                this.resetGlobalState();\n            }\n        }\n        else {\n            const nGlobal = this.renderingShadows ? 0 : this.numGlobalPlanes, lGlobal = nGlobal * 4;\n            let dstArray = cache.clippingState || null;\n            this.uniform.value = dstArray; // ensure unique state\n            dstArray = this.projectPlanes(planes, camera, lGlobal, fromCache);\n            for (let i = 0; i !== lGlobal; ++i) {\n                dstArray[i] = this.globalState[i];\n            }\n            cache.clippingState = dstArray;\n            this.numIntersection = clipIntersection ? this.numPlanes : 0;\n            this.numPlanes += nGlobal;\n        }\n    }\n}\n","export class WebGLExtensions {\n    constructor(context) {\n        this.extensions = {};\n        this.context = context;\n    }\n    get(name) {\n        const gl = this.context;\n        if (this.extensions.hasOwnProperty(name)) {\n            return this.extensions[name];\n        }\n        let extension;\n        switch (name) {\n            case \"WEBGL_depth_texture\":\n                extension =\n                    gl.getExtension(\"WEBGL_depth_texture\") ||\n                        gl.getExtension(\"MOZ_WEBGL_depth_texture\") ||\n                        gl.getExtension(\"WEBKIT_WEBGL_depth_texture\");\n                break;\n            case \"EXT_texture_filter_anisotropic\":\n                extension =\n                    gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\n                        gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\n                        gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\n                break;\n            case \"WEBGL_compressed_texture_s3tc\":\n                extension =\n                    gl.getExtension(\"WEBGL_compressed_texture_s3tc\") ||\n                        gl.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\") ||\n                        gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");\n                break;\n            case \"WEBGL_compressed_texture_pvrtc\":\n                extension =\n                    gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") ||\n                        gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");\n                break;\n            case \"WEBGL_compressed_texture_etc1\":\n                extension = gl.getExtension(\"WEBGL_compressed_texture_etc1\");\n                break;\n            default:\n                extension = gl.getExtension(name);\n        }\n        if (extension === null) {\n            console.warn(`THREE.WebGLRenderer: ${name} extension not supported.`);\n        }\n        this.extensions[name] = extension;\n        return extension;\n    }\n}\n","import { Uint16BufferAttribute, Uint32BufferAttribute } from \"../../core/BufferAttribute\";\nimport { BufferGeometry } from \"../../core/BufferGeometry\";\nimport { Geometry } from \"../../core/Geometry\";\nimport { arrayMax } from \"../../utils\";\nexport class WebGLGeometries {\n    constructor(context, attributes, infoMemory) {\n        this.geometries = {};\n        this.wireframeAttributes = {};\n        this.context = context;\n        this.attributes = attributes;\n        this.infoMemory = infoMemory;\n    }\n    onGeometryDispose(event) {\n        const geometry = event.target;\n        const bufferGeometry = this.geometries[geometry.id];\n        if (bufferGeometry.index !== null) {\n            this.attributes.remove(bufferGeometry.index);\n        }\n        for (const name in bufferGeometry.attributes) {\n            if (!bufferGeometry.attributes.hasOwnProperty(name)) {\n                continue;\n            }\n            this.attributes.remove(bufferGeometry.attributes[name]);\n        }\n        geometry.removeEventListener(\"dispose\", this.onGeometryDispose);\n        delete this.geometries[geometry.id];\n        // TODO Remove duplicate code\n        let attribute = this.wireframeAttributes[geometry.id];\n        if (attribute) {\n            this.attributes.remove(attribute);\n            delete this.wireframeAttributes[geometry.id];\n        }\n        attribute = this.wireframeAttributes[bufferGeometry.id];\n        if (attribute) {\n            this.attributes.remove(attribute);\n            delete this.wireframeAttributes[bufferGeometry.id];\n        }\n        this.infoMemory.geometries--;\n    }\n    get(object, geometry) {\n        let bufferGeometry = this.geometries[geometry.id];\n        if (bufferGeometry)\n            return bufferGeometry;\n        geometry.addEventListener(\"dispose\", this.onGeometryDispose);\n        if (geometry instanceof BufferGeometry) {\n            bufferGeometry = geometry;\n        }\n        else if (geometry instanceof Geometry) {\n            if (geometry.bufferGeometry === null) {\n                geometry.bufferGeometry = new BufferGeometry().setFromObject(object);\n            }\n            bufferGeometry = geometry.bufferGeometry;\n        }\n        this.geometries[geometry.id] = bufferGeometry;\n        this.infoMemory.geometries++;\n        return bufferGeometry;\n    }\n    update(geometry) {\n        const index = geometry.index;\n        const geometryAttributes = geometry.attributes;\n        if (index !== null) {\n            this.attributes.update(index, this.context.ELEMENT_ARRAY_BUFFER);\n        }\n        for (const name in geometryAttributes) {\n            if (!geometryAttributes.hasOwnProperty(name)) {\n                continue;\n            }\n            this.attributes.update(geometryAttributes[name], this.context.ARRAY_BUFFER);\n        }\n        // morph targets\n        const morphAttributes = geometry.morphAttributes;\n        for (const name in morphAttributes) {\n            if (!morphAttributes.hasOwnProperty(name)) {\n                continue;\n            }\n            const array = morphAttributes[name];\n            for (let i = 0, l = array.length; i < l; i++) {\n                this.attributes.update(array[i], this.context.ARRAY_BUFFER);\n            }\n        }\n        return this;\n    }\n    getWireframeAttribute(geometry) {\n        let attribute = this.wireframeAttributes[geometry.id];\n        if (attribute)\n            return attribute;\n        const indices = [];\n        if (geometry.index !== null) {\n            const array = geometry.index.array;\n            for (let i = 0, l = array.length; i < l; i += 3) {\n                const a = array[i];\n                const b = array[i + 1];\n                const c = array[i + 2];\n                indices.push(a, b, b, c, c, a);\n            }\n        }\n        else {\n            const array = geometry.attributes.position.array;\n            for (let i = 0, l = array.length / 3 - 1; i < l; i += 3) {\n                const a = i;\n                const b = i + 1;\n                const c = i + 2;\n                indices.push(a, b, b, c, c, a);\n            }\n        }\n        attribute = new (arrayMax(indices) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(indices, 1);\n        this.attributes.update(attribute, this.context.ELEMENT_ARRAY_BUFFER);\n        this.wireframeAttributes[geometry.id] = attribute;\n        return attribute;\n    }\n}\n","export class WebGLIndexedBufferRenderer {\n    constructor(context, extensions, infoRender) {\n        this.mode = 0;\n        this.type = 0;\n        this.bytesPerElement = 0;\n        this.context = context;\n        this.extensions = extensions;\n        this.infoRender = infoRender;\n    }\n    setMode(value) {\n        this.mode = value;\n        return this;\n    }\n    setIndex(value) {\n        this.type = value.type;\n        this.bytesPerElement = value.bytesPerElement;\n        return this;\n    }\n    render(start, count) {\n        const gl = this.context;\n        gl.drawElements(this.mode, count, this.type, start * this.bytesPerElement);\n        this.infoRender.calls++;\n        this.infoRender.vertices += count;\n        if (this.mode === gl.TRIANGLES) {\n            this.infoRender.faces += count / 3;\n        }\n        else if (this.mode === gl.POINTS) {\n            this.infoRender.points += count;\n        }\n        return this;\n    }\n    renderInstances(geometry, start, count) {\n        const gl = this.context;\n        const extension = this.extensions.get(\"ANGLE_instanced_arrays\");\n        if (extension === null) {\n            console.error(`THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.`);\n            return this;\n        }\n        extension.drawElementsInstancedANGLE(this.mode, count, this.type, start * this.bytesPerElement, geometry.maxInstancedCount);\n        this.infoRender.calls++;\n        this.infoRender.vertices += count * geometry.maxInstancedCount;\n        if (this.mode === gl.TRIANGLES) {\n            this.infoRender.faces += geometry.maxInstancedCount * count / 3;\n        }\n        else if (this.mode === gl.POINTS) {\n            this.infoRender.points += geometry.maxInstancedCount * count;\n        }\n        return this;\n    }\n}\n","import { AmbientLight } from \"../../lights/AmbientLight\";\nimport { DirectionalLight } from \"../../lights/DirectionalLight\";\nimport { HemisphereLight } from \"../../lights/HemisphereLight\";\nimport { PointLight } from \"../../lights/PointLight\";\nimport { RectAreaLight } from \"../../lights/RectAreaLight\";\nimport { SpotLight } from \"../../lights/SpotLight\";\nimport { Color } from \"../../math/Color\";\nimport { Matrix4 } from \"../../math/Matrix4\";\nimport { Vector2 } from \"../../math/Vector2\";\nimport { Vector3 } from \"../../math/Vector3\";\nclass LightUniformsCache {\n    constructor() {\n        this.lights = {};\n    }\n    get(light) {\n        if (this.lights[light.id] !== undefined) {\n            return this.lights[light.id];\n        }\n        let uniforms;\n        switch (light.type) {\n            case \"DirectionalLight\":\n                uniforms = {\n                    direction: new Vector3(),\n                    color: new Color(),\n                    shadow: false,\n                    shadowBias: 0,\n                    shadowRadius: 1,\n                    shadowMapSize: new Vector2(),\n                };\n                break;\n            case \"SpotLight\":\n                uniforms = {\n                    position: new Vector3(),\n                    direction: new Vector3(),\n                    color: new Color(),\n                    distance: 0,\n                    coneCos: 0,\n                    penumbraCos: 0,\n                    decay: 0,\n                    shadow: false,\n                    shadowBias: 0,\n                    shadowRadius: 1,\n                    shadowMapSize: new Vector2(),\n                };\n                break;\n            case \"PointLight\":\n                uniforms = {\n                    position: new Vector3(),\n                    color: new Color(),\n                    distance: 0,\n                    decay: 0,\n                    shadow: false,\n                    shadowBias: 0,\n                    shadowRadius: 1,\n                    shadowMapSize: new Vector2(),\n                    shadowCameraNear: 1,\n                    shadowCameraFar: 1000,\n                };\n                break;\n            case \"HemisphereLight\":\n                uniforms = {\n                    direction: new Vector3(),\n                    skyColor: new Color(),\n                    groundColor: new Color(),\n                };\n                break;\n            case \"RectAreaLight\":\n                uniforms = {\n                    color: new Color(),\n                    position: new Vector3(),\n                    halfWidth: new Vector3(),\n                    halfHeight: new Vector3(),\n                };\n                break;\n        }\n        this.lights[light.id] = uniforms;\n        return uniforms;\n    }\n}\nexport class WebGLLights {\n    constructor() {\n        this.cache = new LightUniformsCache();\n        this.state = {\n            hash: \"\",\n            ambient: [0, 0, 0],\n            directional: [],\n            directionalShadowMap: [],\n            directionalShadowMatrix: [],\n            spot: [],\n            spotShadowMap: [],\n            spotShadowMatrix: [],\n            rectArea: [],\n            point: [],\n            pointShadowMap: [],\n            pointShadowMatrix: [],\n            hemi: [],\n        };\n    }\n    setup(lights, shadows, camera) {\n        const vector3 = new Vector3();\n        const matrix4 = new Matrix4();\n        const matrix42 = new Matrix4();\n        let r = 0, g = 0, b = 0;\n        const state = this.state;\n        const cache = this.cache;\n        let directionalLength = 0;\n        let pointLength = 0;\n        let spotLength = 0;\n        let rectAreaLength = 0;\n        let hemisphereLength = 0;\n        const viewMatrix = camera.matrixWorldInverse;\n        for (let i = 0, l = lights.length; i < l; i++) {\n            const light = lights[i];\n            const color = light.color;\n            const intensity = light.intensity;\n            const distance = light.distance;\n            const shadowMap = light.shadow && light.shadow.map ? light.shadow.map.texture : null;\n            if (light instanceof AmbientLight) {\n                r += color.r * intensity;\n                g += color.g * intensity;\n                b += color.b * intensity;\n            }\n            else if (light instanceof DirectionalLight) {\n                const uniforms = cache.get(light);\n                uniforms.color.copy(light.color).multiplyScalar(light.intensity);\n                uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                vector3.setFromMatrixPosition(light.target.matrixWorld);\n                uniforms.direction.sub(vector3);\n                uniforms.direction.transformDirection(viewMatrix);\n                uniforms.shadow = light.castShadow;\n                if (light.castShadow) {\n                    const shadow = light.shadow;\n                    uniforms.shadowBias = shadow.bias;\n                    uniforms.shadowRadius = shadow.radius;\n                    uniforms.shadowMapSize = shadow.mapSize;\n                }\n                state.directionalShadowMap[directionalLength] = shadowMap;\n                state.directionalShadowMatrix[directionalLength] = light.shadow.matrix;\n                state.directional[directionalLength] = uniforms;\n                directionalLength++;\n            }\n            else if (light instanceof SpotLight) {\n                const uniforms = cache.get(light);\n                uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                uniforms.position.applyMatrix4(viewMatrix);\n                uniforms.color.copy(color).multiplyScalar(intensity);\n                uniforms.distance = distance;\n                uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                vector3.setFromMatrixPosition(light.target.matrixWorld);\n                uniforms.direction.sub(vector3);\n                uniforms.direction.transformDirection(viewMatrix);\n                uniforms.coneCos = Math.cos(light.angle);\n                uniforms.penumbraCos = Math.cos(light.angle * (1 - light.penumbra));\n                uniforms.decay = light.distance === 0 ? 0.0 : light.decay;\n                uniforms.shadow = light.castShadow;\n                if (light.castShadow) {\n                    const shadow = light.shadow;\n                    uniforms.shadowBias = shadow.bias;\n                    uniforms.shadowRadius = shadow.radius;\n                    uniforms.shadowMapSize = shadow.mapSize;\n                }\n                state.spotShadowMap[spotLength] = shadowMap;\n                state.spotShadowMatrix[spotLength] = light.shadow.matrix;\n                state.spot[spotLength] = uniforms;\n                spotLength++;\n            }\n            else if (light instanceof RectAreaLight) {\n                const uniforms = cache.get(light);\n                // (a) intensity is the total visible light emitted\n                // uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n                // (b) intensity is the brightness of the light\n                uniforms.color.copy(color).multiplyScalar(intensity);\n                uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                uniforms.position.applyMatrix4(viewMatrix);\n                // extract local rotation of light to derive width/height half vectors\n                matrix42.identity();\n                matrix4.copy(light.matrixWorld);\n                matrix4.premultiply(viewMatrix);\n                matrix42.extractRotation(matrix4);\n                uniforms.halfWidth.set(light.width * 0.5, 0.0, 0.0);\n                uniforms.halfHeight.set(0.0, light.height * 0.5, 0.0);\n                uniforms.halfWidth.applyMatrix4(matrix42);\n                uniforms.halfHeight.applyMatrix4(matrix42);\n                // TODO (abelnation): RectAreaLight distance?\n                // uniforms.distance = distance;\n                state.rectArea[rectAreaLength] = uniforms;\n                rectAreaLength++;\n            }\n            else if (light instanceof PointLight) {\n                const uniforms = cache.get(light);\n                uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                uniforms.position.applyMatrix4(viewMatrix);\n                uniforms.color.copy(light.color).multiplyScalar(light.intensity);\n                uniforms.distance = light.distance;\n                uniforms.decay = light.distance === 0 ? 0.0 : light.decay;\n                uniforms.shadow = light.castShadow;\n                if (light.castShadow) {\n                    const shadow = light.shadow;\n                    uniforms.shadowBias = shadow.bias;\n                    uniforms.shadowRadius = shadow.radius;\n                    uniforms.shadowMapSize = shadow.mapSize;\n                    uniforms.shadowCameraNear = shadow.camera.near;\n                    uniforms.shadowCameraFar = shadow.camera.far;\n                }\n                state.pointShadowMap[pointLength] = shadowMap;\n                state.pointShadowMatrix[pointLength] = light.shadow.matrix;\n                state.point[pointLength] = uniforms;\n                pointLength++;\n            }\n            else if (light instanceof HemisphereLight) {\n                const uniforms = cache.get(light);\n                uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                uniforms.direction.transformDirection(viewMatrix);\n                uniforms.direction.normalize();\n                uniforms.skyColor.copy(light.color).multiplyScalar(intensity);\n                uniforms.groundColor.copy(light.groundColor).multiplyScalar(intensity);\n                state.hemi[hemisphereLength] = uniforms;\n                hemisphereLength++;\n            }\n        }\n        state.ambient[0] = r;\n        state.ambient[1] = g;\n        state.ambient[2] = b;\n        state.directional.length = directionalLength;\n        state.spot.length = spotLength;\n        state.rectArea.length = rectAreaLength;\n        state.point.length = pointLength;\n        state.hemi.length = hemisphereLength;\n        state.hash = [\n            directionalLength,\n            pointLength,\n            spotLength,\n            rectAreaLength,\n            hemisphereLength,\n            shadows.length,\n        ].join(\",\");\n        return this;\n    }\n}\n","export class WebGLMorphtargets {\n    constructor(context) {\n        this.influencesList = {};\n        this.morphInfluences = new Float32Array(8);\n        this.context = context;\n    }\n    update(object, geometry, material, program) {\n        /**\n         * Another not well designed\n         */\n        const objectInfluences = object.morphTargetInfluences;\n        const length = objectInfluences.length;\n        let influences = this.influencesList[geometry.id];\n        if (influences === undefined) {\n            // initialise list\n            influences = [];\n            for (let i = 0; i < length; i++) {\n                influences[i] = [i, 0];\n            }\n            this.influencesList[geometry.id] = influences;\n        }\n        const morphTargets = material.morphTargets && geometry.morphAttributes.position;\n        const morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n        // Remove current morphAttributes\n        for (let i = 0; i < length; i++) {\n            const influence = influences[i];\n            if (influence[1] !== 0) {\n                if (morphTargets)\n                    geometry.removeAttribute(\"morphTarget\" + i);\n                if (morphNormals)\n                    geometry.removeAttribute(\"morphNormal\" + i);\n            }\n        }\n        // Collect influences\n        for (let i = 0; i < length; i++) {\n            const influence = influences[i];\n            influence[0] = i;\n            influence[1] = objectInfluences[i];\n        }\n        influences.sort((a, b) => {\n            return Math.abs(b[1]) - Math.abs(a[1]);\n        });\n        // Add morphAttributes\n        for (let i = 0; i < 8; i++) {\n            const influence = influences[i];\n            if (influence) {\n                const index = influence[0];\n                const value = influence[1];\n                if (value) {\n                    if (morphTargets)\n                        geometry.addAttribute(\"morphTarget\" + i, morphTargets[index]);\n                    if (morphNormals)\n                        geometry.addAttribute(\"morphNormal\" + i, morphNormals[index]);\n                    this.morphInfluences[i] = value;\n                    continue;\n                }\n            }\n            this.morphInfluences[i] = 0;\n        }\n        program.getUniforms().setValue(\"morphTargetInfluences\", this.morphInfluences);\n    }\n}\n","import { Geometry } from \"../../core/Geometry\";\nexport class WebGLObjects {\n    constructor(geometries, infoRender) {\n        this.updateList = {};\n        this.geometries = geometries;\n        this.infoRender = infoRender;\n    }\n    update(object) {\n        const frame = this.infoRender.frame;\n        const geometry = object.geometry;\n        const bufferGeometry = this.geometries.get(object, geometry);\n        // Update once per frame\n        if (this.updateList[bufferGeometry.id] !== frame) {\n            if (geometry instanceof Geometry) {\n                bufferGeometry.updateFromObject(object);\n            }\n            this.geometries.update(bufferGeometry);\n            this.updateList[bufferGeometry.id] = frame;\n        }\n        return bufferGeometry;\n    }\n    dispose() {\n        this.updateList = {};\n    }\n}\n","import { ShaderChunk } from \"../shaders/ShaderChunk\";\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, EquirectangularRefractionMapping, CubeRefractionMapping, SphericalReflectionMapping, EquirectangularReflectionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, CineonToneMapping, Uncharted2ToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding, } from \"../../constants\";\nimport { RawShaderMaterial } from \"../../materials/RawShaderMaterial\";\nimport { WebGLShaderWrapper } from \"./WebGLShader\";\nimport { WebGLUniformsWrapper } from \"./WebGLUniforms\";\nimport { ShaderMaterial } from \"../../materials/Materials\";\nfunction generateDefines(defines) {\n    const chunks = [];\n    for (const name in defines) {\n        if (!defines.hasOwnProperty(name) || defines[name]) {\n            chunks.push(\"#define \" + name + \" \" + defines[name]);\n        }\n    }\n    return chunks.join(\"\\n\");\n}\nfunction generateExtensions(extensions, parameters, rendererExtensions) {\n    extensions = extensions || {};\n    const chunks = [\n        extensions.derivatives ||\n            parameters.envMapCubeUV ||\n            parameters.bumpMap ||\n            parameters.normalMap ||\n            parameters.flatShading\n            ? \"#extension GL_OES_standard_derivatives : enable\"\n            : \"\",\n        (extensions.fragDepth || parameters.logarithmicDepthBuffer) && rendererExtensions.get(\"EXT_frag_depth\")\n            ? \"#extension GL_EXT_frag_depth : enable\"\n            : \"\",\n        extensions.drawBuffers && rendererExtensions.get(\"WEBGL_draw_buffers\")\n            ? \"#extension GL_EXT_draw_buffers : require\"\n            : \"\",\n        (extensions.shaderTextureLOD || parameters.envMap) && rendererExtensions.get(\"EXT_shader_texture_lod\")\n            ? \"#extension GL_EXT_shader_texture_lod : enable\"\n            : \"\",\n    ];\n    return chunks.filter(filterEmptyLine).join(\"\\n\");\n}\nfunction getToneMappingFunction(functionName, toneMapping) {\n    let toneMappingName;\n    switch (toneMapping) {\n        case LinearToneMapping:\n            toneMappingName = \"Linear\";\n            break;\n        case ReinhardToneMapping:\n            toneMappingName = \"Reinhard\";\n            break;\n        case Uncharted2ToneMapping:\n            toneMappingName = \"Uncharted2\";\n            break;\n        case CineonToneMapping:\n            toneMappingName = \"OptimizedCineon\";\n            break;\n        default:\n            throw new Error(\"unsupported toneMapping: \" + toneMapping);\n    }\n    return \"vec3 \" + functionName + \"( vec3 color ) { return \" + toneMappingName + \"ToneMapping( color ); }\";\n}\nfunction filterEmptyLine(str) {\n    return str !== \"\";\n}\nfunction getEncodingComponents(encoding) {\n    switch (encoding) {\n        case LinearEncoding:\n            return [\"Linear\", \"( value )\"];\n        case sRGBEncoding:\n            return [\"sRGB\", \"( value )\"];\n        case RGBEEncoding:\n            return [\"RGBE\", \"( value )\"];\n        case RGBM7Encoding:\n            return [\"RGBM\", \"( value, 7.0 )\"];\n        case RGBM16Encoding:\n            return [\"RGBM\", \"( value, 16.0 )\"];\n        case RGBDEncoding:\n            return [\"RGBD\", \"( value, 256.0 )\"];\n        case GammaEncoding:\n            return [\"Gamma\", \"( value, float( GAMMA_FACTOR ) )\"];\n        default:\n            throw new Error(\"unsupported encoding: \" + encoding);\n    }\n}\nfunction getTexelDecodingFunction(functionName, encoding) {\n    const components = getEncodingComponents(encoding);\n    return \"vec4 \" + functionName + \"( vec4 value ) { return \" + components[0] + \"ToLinear\" + components[1] + \"; }\";\n}\nfunction getTexelEncodingFunction(functionName, encoding) {\n    const components = getEncodingComponents(encoding);\n    return \"vec4 \" + functionName + \"( vec4 value ) { return LinearTo\" + components[0] + components[1] + \"; }\";\n}\nfunction replaceLightNums(str, parameters) {\n    return str\n        .replace(/NUM_DIR_LIGHTS/g, parameters.numDirLights + \"\")\n        .replace(/NUM_SPOT_LIGHTS/g, parameters.numSpotLights + \"\")\n        .replace(/NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights + \"\")\n        .replace(/NUM_POINT_LIGHTS/g, parameters.numPointLights + \"\")\n        .replace(/NUM_HEMI_LIGHTS/g, parameters.numHemiLights + \"\");\n}\nfunction parseIncludes(str) {\n    return str.replace(/^[ \\t]*#include +<([\\w\\d.]+)>/gm, (match, include) => {\n        const replace = ShaderChunk[include];\n        if (replace === undefined) {\n            throw new Error(\"Can not resolve #include <\" + include + \">\");\n        }\n        return parseIncludes(replace);\n    });\n}\nfunction unrollLoops(str) {\n    const pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n    function replace(match, start, end, snippet) {\n        let unroll = \"\";\n        for (let i = parseInt(start, 10); i < parseInt(end, 10); i++) {\n            unroll += snippet.replace(/\\[ i \\]/g, \"[ \" + i + \" ]\");\n        }\n        return unroll;\n    }\n    return str.replace(pattern, replace);\n}\nfunction fetchAttributeLocations(gl, program) {\n    const attributes = {};\n    const n = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    for (let i = 0; i < n; i++) {\n        const info = gl.getActiveAttrib(program, i);\n        const name = info.name;\n        attributes[name] = gl.getAttribLocation(program, name);\n    }\n    return attributes;\n}\nlet programIdCount = 0;\nexport class WebGLProgramWrapper {\n    constructor(renderer, extensions, code, material, shader, parameters) {\n        this.usedTimes = 1;\n        this.id = programIdCount++;\n        this.renderer = renderer;\n        const gl = renderer.context;\n        const defines = material.defines;\n        let vertexShader = shader.vertexShader;\n        let fragmentShader = shader.fragmentShader;\n        let shadowMapTypeDefine = \"SHADOWMAP_TYPE_BASIC\";\n        if (parameters.shadowMapType === PCFShadowMap) {\n            shadowMapTypeDefine = \"SHADOWMAP_TYPE_PCF\";\n        }\n        else if (parameters.shadowMapType === PCFSoftShadowMap) {\n            shadowMapTypeDefine = \"SHADOWMAP_TYPE_PCF_SOFT\";\n        }\n        let envMapTypeDefine = \"ENVMAP_TYPE_CUBE\";\n        let envMapModeDefine = \"ENVMAP_MODE_REFLECTION\";\n        let envMapBlendingDefine = \"ENVMAP_BLENDING_MULTIPLY\";\n        if (parameters.envMap) {\n            switch (material.envMap.mapping) {\n                case CubeReflectionMapping:\n                case CubeRefractionMapping:\n                    envMapTypeDefine = \"ENVMAP_TYPE_CUBE\";\n                    break;\n                case CubeUVReflectionMapping:\n                case CubeUVRefractionMapping:\n                    envMapTypeDefine = \"ENVMAP_TYPE_CUBE_UV\";\n                    break;\n                case EquirectangularReflectionMapping:\n                case EquirectangularRefractionMapping:\n                    envMapTypeDefine = \"ENVMAP_TYPE_EQUIREC\";\n                    break;\n                case SphericalReflectionMapping:\n                    envMapTypeDefine = \"ENVMAP_TYPE_SPHERE\";\n                    break;\n            }\n            switch (material.envMap.mapping) {\n                case CubeRefractionMapping:\n                case EquirectangularRefractionMapping:\n                    envMapModeDefine = \"ENVMAP_MODE_REFRACTION\";\n                    break;\n            }\n            switch (material.combine) {\n                case MultiplyOperation:\n                    envMapBlendingDefine = \"ENVMAP_BLENDING_MULTIPLY\";\n                    break;\n                case MixOperation:\n                    envMapBlendingDefine = \"ENVMAP_BLENDING_MIX\";\n                    break;\n                case AddOperation:\n                    envMapBlendingDefine = \"ENVMAP_BLENDING_ADD\";\n                    break;\n            }\n        }\n        const gammaFactorDefine = renderer.gammaFactor > 0 ? renderer.gammaFactor : 1.0;\n        const customExtensions = generateExtensions(material.extensions, parameters, extensions);\n        const customDefines = generateDefines(defines);\n        const program = gl.createProgram();\n        let prefixVertex, prefixFragment;\n        if (material instanceof RawShaderMaterial) {\n            prefixVertex = [customDefines].filter(filterEmptyLine).join(\"\\n\");\n            if (prefixVertex.length > 0) {\n                prefixVertex += \"\\n\";\n            }\n            prefixFragment = [customExtensions, customDefines].filter(filterEmptyLine).join(\"\\n\");\n            if (prefixFragment.length > 0) {\n                prefixFragment += \"\\n\";\n            }\n        }\n        else {\n            prefixVertex = [\n                \"precision \" + parameters.precision + \" float;\",\n                \"precision \" + parameters.precision + \" int;\",\n                \"#define SHADER_NAME \" + shader.name,\n                customDefines,\n                parameters.supportsVertexTextures ? \"#define VERTEX_TEXTURES\" : \"\",\n                \"#define GAMMA_FACTOR \" + gammaFactorDefine,\n                \"#define MAX_BONES \" + parameters.maxBones,\n                parameters.useFog && parameters.fog ? \"#define USE_FOG\" : \"\",\n                parameters.useFog && parameters.fogExp ? \"#define FOG_EXP2\" : \"\",\n                parameters.map ? \"#define USE_MAP\" : \"\",\n                parameters.envMap ? \"#define USE_ENVMAP\" : \"\",\n                parameters.envMap ? \"#define \" + envMapModeDefine : \"\",\n                parameters.lightMap ? \"#define USE_LIGHTMAP\" : \"\",\n                parameters.aoMap ? \"#define USE_AOMAP\" : \"\",\n                parameters.emissiveMap ? \"#define USE_EMISSIVEMAP\" : \"\",\n                parameters.bumpMap ? \"#define USE_BUMPMAP\" : \"\",\n                parameters.normalMap ? \"#define USE_NORMALMAP\" : \"\",\n                parameters.displacementMap && parameters.supportsVertexTextures ? \"#define USE_DISPLACEMENTMAP\" : \"\",\n                parameters.specularMap ? \"#define USE_SPECULARMAP\" : \"\",\n                parameters.roughnessMap ? \"#define USE_ROUGHNESSMAP\" : \"\",\n                parameters.metalnessMap ? \"#define USE_METALNESSMAP\" : \"\",\n                parameters.alphaMap ? \"#define USE_ALPHAMAP\" : \"\",\n                parameters.vertexColors ? \"#define USE_COLOR\" : \"\",\n                parameters.flatShading ? \"#define FLAT_SHADED\" : \"\",\n                parameters.skinning ? \"#define USE_SKINNING\" : \"\",\n                parameters.useVertexTexture ? \"#define BONE_TEXTURE\" : \"\",\n                parameters.morphTargets ? \"#define USE_MORPHTARGETS\" : \"\",\n                parameters.morphNormals && parameters.flatShading === false ? \"#define USE_MORPHNORMALS\" : \"\",\n                parameters.doubleSided ? \"#define DOUBLE_SIDED\" : \"\",\n                parameters.flipSided ? \"#define FLIP_SIDED\" : \"\",\n                \"#define NUM_CLIPPING_PLANES \" + parameters.numClippingPlanes,\n                parameters.shadowMapEnabled ? \"#define USE_SHADOWMAP\" : \"\",\n                parameters.shadowMapEnabled ? \"#define \" + shadowMapTypeDefine : \"\",\n                parameters.sizeAttenuation ? \"#define USE_SIZEATTENUATION\" : \"\",\n                parameters.logarithmicDepthBuffer ? \"#define USE_LOGDEPTHBUF\" : \"\",\n                parameters.logarithmicDepthBuffer && extensions.get(\"EXT_frag_depth\")\n                    ? \"#define USE_LOGDEPTHBUF_EXT\"\n                    : \"\",\n                \"uniform mat4 modelMatrix;\",\n                \"uniform mat4 modelViewMatrix;\",\n                \"uniform mat4 projectionMatrix;\",\n                \"uniform mat4 viewMatrix;\",\n                \"uniform mat3 normalMatrix;\",\n                \"uniform vec3 cameraPosition;\",\n                \"attribute vec3 position;\",\n                \"attribute vec3 normal;\",\n                \"attribute vec2 uv;\",\n                \"#ifdef USE_COLOR\",\n                \"\tattribute vec3 color;\",\n                \"#endif\",\n                \"#ifdef USE_MORPHTARGETS\",\n                \"\tattribute vec3 morphTarget0;\",\n                \"\tattribute vec3 morphTarget1;\",\n                \"\tattribute vec3 morphTarget2;\",\n                \"\tattribute vec3 morphTarget3;\",\n                \"\t#ifdef USE_MORPHNORMALS\",\n                \"\t\tattribute vec3 morphNormal0;\",\n                \"\t\tattribute vec3 morphNormal1;\",\n                \"\t\tattribute vec3 morphNormal2;\",\n                \"\t\tattribute vec3 morphNormal3;\",\n                \"\t#else\",\n                \"\t\tattribute vec3 morphTarget4;\",\n                \"\t\tattribute vec3 morphTarget5;\",\n                \"\t\tattribute vec3 morphTarget6;\",\n                \"\t\tattribute vec3 morphTarget7;\",\n                \"\t#endif\",\n                \"#endif\",\n                \"#ifdef USE_SKINNING\",\n                \"\tattribute vec4 skinIndex;\",\n                \"\tattribute vec4 skinWeight;\",\n                \"#endif\",\n                \"\\n\",\n            ]\n                .filter(filterEmptyLine)\n                .join(\"\\n\");\n            prefixFragment = [\n                customExtensions,\n                \"precision \" + parameters.precision + \" float;\",\n                \"precision \" + parameters.precision + \" int;\",\n                \"#define SHADER_NAME \" + shader.name,\n                customDefines,\n                parameters.alphaTest ? \"#define ALPHATEST \" + parameters.alphaTest : \"\",\n                \"#define GAMMA_FACTOR \" + gammaFactorDefine,\n                parameters.useFog && parameters.fog ? \"#define USE_FOG\" : \"\",\n                parameters.useFog && parameters.fogExp ? \"#define FOG_EXP2\" : \"\",\n                parameters.map ? \"#define USE_MAP\" : \"\",\n                parameters.envMap ? \"#define USE_ENVMAP\" : \"\",\n                parameters.envMap ? \"#define \" + envMapTypeDefine : \"\",\n                parameters.envMap ? \"#define \" + envMapModeDefine : \"\",\n                parameters.envMap ? \"#define \" + envMapBlendingDefine : \"\",\n                parameters.lightMap ? \"#define USE_LIGHTMAP\" : \"\",\n                parameters.aoMap ? \"#define USE_AOMAP\" : \"\",\n                parameters.emissiveMap ? \"#define USE_EMISSIVEMAP\" : \"\",\n                parameters.bumpMap ? \"#define USE_BUMPMAP\" : \"\",\n                parameters.normalMap ? \"#define USE_NORMALMAP\" : \"\",\n                parameters.specularMap ? \"#define USE_SPECULARMAP\" : \"\",\n                parameters.roughnessMap ? \"#define USE_ROUGHNESSMAP\" : \"\",\n                parameters.metalnessMap ? \"#define USE_METALNESSMAP\" : \"\",\n                parameters.alphaMap ? \"#define USE_ALPHAMAP\" : \"\",\n                parameters.vertexColors ? \"#define USE_COLOR\" : \"\",\n                parameters.gradientMap ? \"#define USE_GRADIENTMAP\" : \"\",\n                parameters.flatShading ? \"#define FLAT_SHADED\" : \"\",\n                parameters.doubleSided ? \"#define DOUBLE_SIDED\" : \"\",\n                parameters.flipSided ? \"#define FLIP_SIDED\" : \"\",\n                \"#define NUM_CLIPPING_PLANES \" + parameters.numClippingPlanes,\n                \"#define UNION_CLIPPING_PLANES \" + (parameters.numClippingPlanes - parameters.numClipIntersection),\n                parameters.shadowMapEnabled ? \"#define USE_SHADOWMAP\" : \"\",\n                parameters.shadowMapEnabled ? \"#define \" + shadowMapTypeDefine : \"\",\n                parameters.premultipliedAlpha ? \"#define PREMULTIPLIED_ALPHA\" : \"\",\n                parameters.physicallyCorrectLights ? \"#define PHYSICALLY_CORRECT_LIGHTS\" : \"\",\n                parameters.logarithmicDepthBuffer ? \"#define USE_LOGDEPTHBUF\" : \"\",\n                parameters.logarithmicDepthBuffer && extensions.get(\"EXT_frag_depth\")\n                    ? \"#define USE_LOGDEPTHBUF_EXT\"\n                    : \"\",\n                parameters.envMap && extensions.get(\"EXT_shader_texture_lod\") ? \"#define TEXTURE_LOD_EXT\" : \"\",\n                \"uniform mat4 viewMatrix;\",\n                \"uniform vec3 cameraPosition;\",\n                parameters.toneMapping !== NoToneMapping ? \"#define TONE_MAPPING\" : \"\",\n                parameters.toneMapping !== NoToneMapping ? ShaderChunk[\"tonemapping_pars_fragment\"] : \"\",\n                parameters.toneMapping !== NoToneMapping\n                    ? getToneMappingFunction(\"toneMapping\", parameters.toneMapping)\n                    : \"\",\n                parameters.dithering ? \"#define DITHERING\" : \"\",\n                parameters.outputEncoding ||\n                    parameters.mapEncoding ||\n                    parameters.envMapEncoding ||\n                    parameters.emissiveMapEncoding\n                    ? ShaderChunk[\"encodings_pars_fragment\"]\n                    : \"\",\n                // this code is required here because it is used by the various encoding/decoding function defined below\n                parameters.mapEncoding ? getTexelDecodingFunction(\"mapTexelToLinear\", parameters.mapEncoding) : \"\",\n                parameters.envMapEncoding\n                    ? getTexelDecodingFunction(\"envMapTexelToLinear\", parameters.envMapEncoding)\n                    : \"\",\n                parameters.emissiveMapEncoding\n                    ? getTexelDecodingFunction(\"emissiveMapTexelToLinear\", parameters.emissiveMapEncoding)\n                    : \"\",\n                parameters.outputEncoding\n                    ? getTexelEncodingFunction(\"linearToOutputTexel\", parameters.outputEncoding)\n                    : \"\",\n                parameters.depthPacking ? \"#define DEPTH_PACKING \" + material.depthPacking : \"\",\n                \"\\n\",\n            ]\n                .filter(filterEmptyLine)\n                .join(\"\\n\");\n        }\n        vertexShader = parseIncludes(vertexShader);\n        vertexShader = replaceLightNums(vertexShader, parameters);\n        fragmentShader = parseIncludes(fragmentShader);\n        fragmentShader = replaceLightNums(fragmentShader, parameters);\n        if (!(material instanceof ShaderMaterial)) {\n            vertexShader = unrollLoops(vertexShader);\n            fragmentShader = unrollLoops(fragmentShader);\n        }\n        const vertexGlsl = prefixVertex + vertexShader;\n        const fragmentGlsl = prefixFragment + fragmentShader;\n        const glVertexShader = new WebGLShaderWrapper(gl, gl.VERTEX_SHADER, vertexGlsl);\n        const glFragmentShader = new WebGLShaderWrapper(gl, gl.FRAGMENT_SHADER, fragmentGlsl);\n        gl.attachShader(program, glVertexShader);\n        gl.attachShader(program, glFragmentShader);\n        // Force a particular attribute to index 0.\n        if (material.index0AttributeName !== undefined) {\n            gl.bindAttribLocation(program, 0, material.index0AttributeName);\n        }\n        else if (parameters.morphTargets === true) {\n            // programs with morphTargets displace position out of attribute 0\n            gl.bindAttribLocation(program, 0, \"position\");\n        }\n        gl.linkProgram(program);\n        const programLog = gl.getProgramInfoLog(program).trim();\n        const vertexLog = gl.getShaderInfoLog(glVertexShader).trim();\n        const fragmentLog = gl.getShaderInfoLog(glFragmentShader).trim();\n        let runnable = true;\n        let haveDiagnostics = true;\n        // console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n        // console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n        if (gl.getProgramParameter(program, gl.LINK_STATUS) === false) {\n            runnable = false;\n            console.error(\"THREE.WebGLProgram: shader error: \", gl.getError(), \"gl.VALIDATE_STATUS\", gl.getProgramParameter(program, gl.VALIDATE_STATUS), \"gl.getProgramInfoLog\", programLog, vertexLog, fragmentLog);\n        }\n        else if (programLog !== \"\") {\n            console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\", programLog);\n        }\n        else if (vertexLog === \"\" || fragmentLog === \"\") {\n            haveDiagnostics = false;\n        }\n        if (haveDiagnostics) {\n            this.diagnostics = {\n                runnable: runnable,\n                material: material,\n                programLog: programLog,\n                vertexShader: {\n                    log: vertexLog,\n                    prefix: prefixVertex,\n                },\n                fragmentShader: {\n                    log: fragmentLog,\n                    prefix: prefixFragment,\n                },\n            };\n        }\n        // clean up\n        gl.deleteShader(glVertexShader);\n        gl.deleteShader(glFragmentShader);\n        this.code = code;\n        this.program = program;\n        this.vertexShader = glVertexShader;\n        this.fragmentShader = glFragmentShader;\n    }\n    getAttributes() {\n        if (this.cachedAttributes === undefined) {\n            this.cachedAttributes = fetchAttributeLocations(this.renderer.context, this.program);\n        }\n        return this.cachedAttributes;\n    }\n    getUniforms() {\n        if (this.cachedUniforms === undefined) {\n            this.cachedUniforms = new WebGLUniformsWrapper(this.renderer, this.program);\n        }\n        return this.cachedUniforms;\n    }\n    // free resource\n    destroy() {\n        this.renderer.context.deleteProgram(this.program);\n        this.program = undefined;\n    }\n}\n","import { BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, GammaEncoding, LinearEncoding, } from \"../../constants\";\nimport { SkinnedMesh } from \"../../objects/SkinnedMesh\";\nimport { WebGLRenderTarget } from \"../WebGLRenderTarget\";\nimport { FogExp2 } from \"../../scenes/FogExp2\";\nimport { Texture } from \"../../textures/Texture\";\nimport { WebGLProgramWrapper } from \"./WebGLProgram\";\nfunction getTextureEncodingFromMap(map, gammaOverrideLinear) {\n    let encoding;\n    if (!map) {\n        encoding = LinearEncoding;\n    }\n    else if (map instanceof Texture) {\n        encoding = map.encoding;\n    }\n    else if (map instanceof WebGLRenderTarget) {\n        console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\");\n        encoding = map.texture.encoding;\n    }\n    // add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n    if (encoding === LinearEncoding && gammaOverrideLinear) {\n        encoding = GammaEncoding;\n    }\n    return encoding;\n}\nexport class WebGLPrograms {\n    constructor(renderer, extensions, capabilities) {\n        this.renderer = renderer;\n        this.extensions = extensions;\n        this.capabilities = capabilities;\n    }\n    allocateBones(object) {\n        const skeleton = object.skeleton;\n        const bones = skeleton.bones;\n        if (this.capabilities.floatVertexTextures) {\n            return 1024;\n        }\n        else {\n            // default for when object is not specified\n            // ( for example when prebuilding shader to be used with multiple objects )\n            //\n            //  - leave some extra space for other uniforms\n            //  - limit here is ANGLE's 254 max uniform vectors\n            //    (up to 54 should be safe)\n            const nVertexUniforms = this.capabilities.maxVertexUniforms;\n            const nVertexMatrices = Math.floor((nVertexUniforms - 20) / 4);\n            const maxBones = Math.min(nVertexMatrices, bones.length);\n            if (maxBones < bones.length) {\n                console.warn(\"THREE.WebGLRenderer: Skeleton has \" + bones.length + \" bones. This GPU supports \" + maxBones + \".\");\n                return 0;\n            }\n            return maxBones;\n        }\n    }\n    getParameters(material, lights, shadows, fog, nClipPlanes, nClipIntersection, object) {\n        const renderer = this.renderer;\n        const capabilities = this.capabilities;\n        const shaderID = WebGLPrograms.shaderIDs[material.type];\n        // heuristics to create shader parameters according to lights in the scene\n        // (not to blow over maxLights budget)\n        const maxBones = object instanceof SkinnedMesh ? this.allocateBones(object) : 0;\n        let precision = capabilities.precision;\n        if (material.precision !== null) {\n            precision = capabilities.getMaxPrecision(material.precision);\n            if (precision !== material.precision) {\n                console.warn(\"THREE.WebGLProgram.getParameters:\", material.precision, \"not supported, using\", precision, \"instead.\");\n            }\n        }\n        const currentRenderTarget = renderer.getRenderTarget();\n        const parameters = {\n            shaderID: shaderID,\n            precision: precision,\n            supportsVertexTextures: capabilities.vertexTextures,\n            outputEncoding: getTextureEncodingFromMap(!currentRenderTarget ? null : currentRenderTarget.texture, renderer.gammaOutput),\n            map: !!material.map,\n            mapEncoding: getTextureEncodingFromMap(material.map, renderer.gammaInput),\n            envMap: !!material.envMap,\n            envMapMode: material.envMap && material.envMap.mapping,\n            envMapEncoding: getTextureEncodingFromMap(material.envMap, renderer.gammaInput),\n            envMapCubeUV: !!material.envMap &&\n                (material.envMap.mapping === CubeUVReflectionMapping ||\n                    material.envMap.mapping === CubeUVRefractionMapping),\n            lightMap: !!material.lightMap,\n            aoMap: !!material.aoMap,\n            emissiveMap: !!material.emissiveMap,\n            emissiveMapEncoding: getTextureEncodingFromMap(material.emissiveMap, renderer.gammaInput),\n            bumpMap: !!material.bumpMap,\n            normalMap: !!material.normalMap,\n            displacementMap: !!material.displacementMap,\n            roughnessMap: !!material.roughnessMap,\n            metalnessMap: !!material.metalnessMap,\n            specularMap: !!material.specularMap,\n            alphaMap: !!material.alphaMap,\n            gradientMap: !!material.gradientMap,\n            combine: material.combine,\n            vertexColors: material.vertexColors,\n            fog: !!fog,\n            useFog: material.fog,\n            fogExp: fog && fog instanceof FogExp2,\n            flatShading: material.flatShading,\n            sizeAttenuation: material.sizeAttenuation,\n            logarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\n            skinning: material.skinning && maxBones > 0,\n            maxBones: maxBones,\n            useVertexTexture: capabilities.floatVertexTextures,\n            morphTargets: material.morphTargets,\n            morphNormals: material.morphNormals,\n            maxMorphTargets: renderer.maxMorphTargets,\n            maxMorphNormals: renderer.maxMorphNormals,\n            numDirLights: lights.directional.length,\n            numPointLights: lights.point.length,\n            numSpotLights: lights.spot.length,\n            numRectAreaLights: lights.rectArea.length,\n            numHemiLights: lights.hemi.length,\n            numClippingPlanes: nClipPlanes,\n            numClipIntersection: nClipIntersection,\n            dithering: material.dithering,\n            shadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && shadows.length > 0,\n            shadowMapType: renderer.shadowMap.type,\n            toneMapping: renderer.toneMapping,\n            physicallyCorrectLights: renderer.physicallyCorrectLights,\n            premultipliedAlpha: material.premultipliedAlpha,\n            alphaTest: material.alphaTest,\n            doubleSided: material.side === DoubleSide,\n            flipSided: material.side === BackSide,\n            depthPacking: material.depthPacking !== undefined ? material.depthPacking : false,\n        };\n        return parameters;\n    }\n    getProgramCode(material, parameters) {\n        const array = [];\n        if (parameters.shaderID) {\n            array.push(parameters.shaderID);\n        }\n        else {\n            array.push(material.fragmentShader);\n            array.push(material.vertexShader);\n        }\n        if (material.defines !== undefined) {\n            for (const name in material.defines) {\n                if (material.defines.hasOwnProperty(name)) {\n                    array.push(name);\n                    array.push(material.defines[name]);\n                }\n            }\n        }\n        for (let i = 0; i < WebGLPrograms.parameterNames.length; i++) {\n            array.push(parameters[WebGLPrograms.parameterNames[i]]);\n        }\n        array.push(material.onBeforeCompile.toString());\n        array.push(this.renderer.gammaOutput);\n        return array.join();\n    }\n    acquireProgram(material, shader, parameters, code) {\n        let program;\n        // Check if code has been already compiled\n        for (let p = 0, pl = this.programs.length; p < pl; p++) {\n            const programInfo = this.programs[p];\n            if (programInfo.code === code) {\n                program = programInfo;\n                ++program.usedTimes;\n                break;\n            }\n        }\n        if (program === undefined) {\n            program = new WebGLProgramWrapper(this.renderer, this.extensions, code, material, shader, parameters);\n            this.programs.push(program);\n        }\n        return program;\n    }\n    releaseProgram(program) {\n        if (--program.usedTimes === 0) {\n            // Remove from unordered set\n            const i = this.programs.indexOf(program);\n            this.programs[i] = this.programs[this.programs.length - 1];\n            this.programs.pop();\n            // Free WebGL resources\n            program.destroy();\n        }\n    }\n}\nWebGLPrograms.shaderIDs = {\n    MeshDepthMaterial: \"depth\",\n    MeshDistanceMaterial: \"distanceRGBA\",\n    MeshNormalMaterial: \"normal\",\n    MeshBasicMaterial: \"basic\",\n    MeshLambertMaterial: \"lambert\",\n    MeshPhongMaterial: \"phong\",\n    MeshToonMaterial: \"phong\",\n    MeshStandardMaterial: \"physical\",\n    MeshPhysicalMaterial: \"physical\",\n    LineBasicMaterial: \"basic\",\n    LineDashedMaterial: \"dashed\",\n    PointsMaterial: \"points\",\n    ShadowMaterial: \"shadow\",\n};\nWebGLPrograms.parameterNames = [\n    \"precision\",\n    \"supportsVertexTextures\",\n    \"map\",\n    \"mapEncoding\",\n    \"envMap\",\n    \"envMapMode\",\n    \"envMapEncoding\",\n    \"lightMap\",\n    \"aoMap\",\n    \"emissiveMap\",\n    \"emissiveMapEncoding\",\n    \"bumpMap\",\n    \"normalMap\",\n    \"displacementMap\",\n    \"specularMap\",\n    \"roughnessMap\",\n    \"metalnessMap\",\n    \"gradientMap\",\n    \"alphaMap\",\n    \"combine\",\n    \"vertexColors\",\n    \"fog\",\n    \"useFog\",\n    \"fogExp\",\n    \"flatShading\",\n    \"sizeAttenuation\",\n    \"logarithmicDepthBuffer\",\n    \"skinning\",\n    \"maxBones\",\n    \"useVertexTexture\",\n    \"morphTargets\",\n    \"morphNormals\",\n    \"maxMorphTargets\",\n    \"maxMorphNormals\",\n    \"premultipliedAlpha\",\n    \"numDirLights\",\n    \"numPointLights\",\n    \"numSpotLights\",\n    \"numHemiLights\",\n    \"numRectAreaLights\",\n    \"shadowMapEnabled\",\n    \"shadowMapType\",\n    \"toneMapping\",\n    \"physicallyCorrectLights\",\n    \"alphaTest\",\n    \"doubleSided\",\n    \"flipSided\",\n    \"numClippingPlanes\",\n    \"numClipIntersection\",\n    \"depthPacking\",\n    \"dithering\",\n];\n","export class WebGLProperties {\n    constructor() {\n        this.properties = {};\n    }\n    get(object) {\n        const uuid = object.uuid;\n        let map = this.properties[uuid];\n        if (map === undefined) {\n            map = {};\n            this.properties[uuid] = map;\n        }\n        return map;\n    }\n    remove(object) {\n        delete this.properties[object.uuid];\n    }\n    dispose() {\n        this.properties = {};\n    }\n}\n","export class WebGLRenderList {\n    constructor() {\n        this.opaque = [];\n        this.transparent = [];\n        this.renderItems = [];\n        this.renderItemsIndex = 0;\n    }\n    init() {\n        this.renderItemsIndex = 0;\n        this.opaque.length = 0;\n        this.transparent.length = 0;\n        return this;\n    }\n    push(object, geometry, material, z, group) {\n        let renderItem = this.renderItems[this.renderItemsIndex];\n        if (renderItem === undefined) {\n            renderItem = {\n                geometry: geometry,\n                group: group,\n                id: object.id,\n                material: material,\n                object: object,\n                program: material.program,\n                renderOrder: object.renderOrder,\n                z: z,\n            };\n            this.renderItems[this.renderItemsIndex] = renderItem;\n        }\n        else {\n            renderItem.id = object.id;\n            renderItem.object = object;\n            renderItem.geometry = geometry;\n            renderItem.material = material;\n            renderItem.program = material.program;\n            renderItem.renderOrder = object.renderOrder;\n            renderItem.z = z;\n            renderItem.group = group;\n        }\n        (material.transparent === true ? this.transparent : this.opaque).push(renderItem);\n        this.renderItemsIndex++;\n    }\n    sort() {\n        if (this.opaque.length > 1) {\n            this.opaque.sort((a, b) => {\n                if (a.renderOrder !== b.renderOrder) {\n                    return a.renderOrder - b.renderOrder;\n                }\n                else if (a.program && b.program && a.program !== b.program) {\n                    return a.program.id - b.program.id;\n                }\n                else if (a.material.id !== b.material.id) {\n                    return a.material.id - b.material.id;\n                }\n                else if (a.z !== b.z) {\n                    return a.z - b.z;\n                }\n                else {\n                    return a.id - b.id;\n                }\n            });\n        }\n        if (this.transparent.length > 1) {\n            this.transparent.sort((a, b) => {\n                if (a.renderOrder !== b.renderOrder) {\n                    return a.renderOrder - b.renderOrder;\n                }\n                if (a.z !== b.z) {\n                    return b.z - a.z;\n                }\n                else {\n                    return a.id - b.id;\n                }\n            });\n        }\n    }\n}\nexport class WebGLRenderLists {\n    constructor() {\n        this.lists = {};\n    }\n    get(scene, camera) {\n        const hash = scene.id + \",\" + camera.id;\n        let list = this.lists[hash];\n        if (list === undefined) {\n            list = new WebGLRenderList();\n            this.lists[hash] = list;\n        }\n        return list;\n    }\n    dispose() {\n        this.lists = {};\n    }\n}\n","function addLineNumbers(str) {\n    const lines = str.split(\"\\n\");\n    for (let i = 0; i < lines.length; i++) {\n        lines[i] = i + 1 + \": \" + lines[i];\n    }\n    return lines.join(\"\\n\");\n}\nexport class WebGLShaderWrapper {\n    constructor(gl, type, str) {\n        const shader = gl.createShader(type);\n        gl.shaderSource(shader, str);\n        gl.compileShader(shader);\n        if (gl.getShaderParameter(shader, gl.COMPILE_STATUS) === false) {\n            console.error(`THREE.WebGLShader: Shader couldn't compile.`);\n        }\n        if (gl.getShaderInfoLog(shader) !== \"\") {\n            console.warn(`THREE.WebGLShader: gl.getShaderInfoLog() ${type === gl.VERTEX_SHADER ? \"vertex\" : \"fragment\"} ${gl.getShaderInfoLog(shader)} ${addLineNumbers(str)}`);\n        }\n    }\n}\n","import { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, PCFShadowMap, RGBADepthPacking, } from \"../../constants\";\nimport { Frustum } from \"../../math/Frustum\";\nimport { Matrix4 } from \"../../math/Matrix4\";\nimport { Vector2 } from \"../../math/Vector2\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { Vector4 } from \"../../math/Vector4\";\nimport { MeshDepthMaterial, MeshDistanceMaterial } from \"../../materials/Materials\";\nimport { PointLight } from \"../../lights/PointLight\";\nimport { WebGLRenderTarget } from \"../WebGLRenderTarget\";\nimport { SpotLightShadow } from \"../../lights/SpotLightShadow\";\nimport { Mesh } from \"../../objects/Mesh\";\nimport { Line } from \"../../objects/Line\";\nimport { Points } from \"../../objects/Points\";\nimport { BufferGeometry } from \"../../core/BufferGeometry\";\nimport { SkinnedMesh } from \"../../objects/SkinnedMesh\";\nimport { Geometry } from \"../../core/Geometry\";\nexport class WebGLShadowMap {\n    constructor(renderer, objects, maxTextureSize) {\n        this.type = PCFShadowMap;\n        this.enabled = false;\n        this.autoUpdate = true;\n        this.needsUpdate = false;\n        this.frustum = new Frustum();\n        this.projScreenMatrix = new Matrix4();\n        this.shadowMapSize = new Vector2();\n        this.lookTarget = new Vector3();\n        this.lightPositionWorld = new Vector3();\n        this.morphingFlag = 1;\n        this.skinningFlag = 2;\n        this.numberOfMaterialVariants = (this.morphingFlag | this.skinningFlag) + 1;\n        this.depthMaterials = new Array(this.numberOfMaterialVariants);\n        this.distanceMaterials = new Array(this.numberOfMaterialVariants);\n        this.materialCache = {};\n        this.renderer = renderer;\n        this.objects = objects;\n        this.maxShadowMapSize = new Vector2(maxTextureSize, maxTextureSize);\n        this.shadowSide = {\n            0: BackSide,\n            1: FrontSide,\n            2: DoubleSide,\n        };\n        this.cubeDirections = [\n            new Vector3(1, 0, 0),\n            new Vector3(-1, 0, 0),\n            new Vector3(0, 0, 1),\n            new Vector3(0, 0, -1),\n            new Vector3(0, 1, 0),\n            new Vector3(0, -1, 0),\n        ];\n        this.cubeUps = [\n            new Vector3(0, 1, 0),\n            new Vector3(0, 1, 0),\n            new Vector3(0, 1, 0),\n            new Vector3(0, 1, 0),\n            new Vector3(0, 0, 1),\n            new Vector3(0, 0, -1),\n        ];\n        this.cube2DViewPorts = [\n            new Vector4(),\n            new Vector4(),\n            new Vector4(),\n            new Vector4(),\n            new Vector4(),\n            new Vector4(),\n        ];\n        // init\n        for (let i = 0; i !== this.numberOfMaterialVariants; i++) {\n            const useMorphing = (i & this.morphingFlag) !== 0;\n            const useSkinning = (i & this.skinningFlag) !== 0;\n            const depthMaterial = new MeshDepthMaterial({\n                depthPacking: RGBADepthPacking,\n                morphTargets: useMorphing,\n                skinning: useSkinning,\n            });\n            this.depthMaterials[i] = depthMaterial;\n            const distanceMaterial = new MeshDistanceMaterial({\n                morphTargets: useMorphing,\n                skinning: useSkinning,\n            });\n            this.distanceMaterials[i] = distanceMaterial;\n        }\n    }\n    getDepthMaterial(object, material, isPointLight, lightPositionWorld, shadowCameraNear, shadowCameraFar) {\n        let result = null;\n        let materialVariants = this.depthMaterials;\n        let customMaterial = object.customDepthMaterial;\n        if (isPointLight) {\n            materialVariants = this.distanceMaterials;\n            customMaterial = object.customDistanceMaterial;\n        }\n        if (!customMaterial) {\n            let useMorphing = false;\n            if (material.morphTargets) {\n                const geometry = object.geometry;\n                if (geometry && geometry instanceof BufferGeometry) {\n                    useMorphing =\n                        geometry.morphAttributes &&\n                            geometry.morphAttributes.position &&\n                            geometry.morphAttributes.position.length > 0;\n                }\n                else if (geometry && geometry instanceof Geometry) {\n                    useMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n                }\n            }\n            if (object instanceof SkinnedMesh && material.skinning === false) {\n                console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\", object);\n            }\n            const useSkinning = object instanceof SkinnedMesh && material.skinning;\n            let variantIndex = 0;\n            if (useMorphing)\n                variantIndex |= this.morphingFlag;\n            if (useSkinning)\n                variantIndex |= this.skinningFlag;\n            result = materialVariants[variantIndex];\n        }\n        else {\n            result = customMaterial;\n        }\n        if (this.renderer.localClippingEnabled &&\n            material.clipShadows === true &&\n            material.clippingPlanes.length !== 0) {\n            // in this case we need a unique material instance reflecting the\n            // appropriate state\n            const keyA = result.uuid, keyB = material.uuid;\n            let materialsForVariant = this.materialCache[keyA];\n            if (materialsForVariant === undefined) {\n                materialsForVariant = {};\n                this.materialCache[keyA] = materialsForVariant;\n            }\n            let cachedMaterial = materialsForVariant[keyB];\n            if (cachedMaterial === undefined) {\n                cachedMaterial = result.clone();\n                materialsForVariant[keyB] = cachedMaterial;\n            }\n            result = cachedMaterial;\n        }\n        result.visible = material.visible;\n        result.wireframe = material.wireframe;\n        result.side = material.shadowSide !== null ? material.shadowSide : this.shadowSide[material.side];\n        result.clipShadows = material.clipShadows;\n        result.clippingPlanes = material.clippingPlanes;\n        result.clipIntersection = material.clipIntersection;\n        result.wireframeLinewidth = material.wireframeLinewidth;\n        result.linewidth = material.linewidth;\n        if (isPointLight && result instanceof MeshDistanceMaterial) {\n            result.referencePosition.copy(lightPositionWorld);\n            result.nearDistance = shadowCameraNear;\n            result.farDistance = shadowCameraFar;\n        }\n        return result;\n    }\n    /**\n     * Ambient lights cannot cast shadows.\n     * Hemisphere lights cannot cast shadows.\n     * RectAreaLight does not support shadows.\n     */\n    render(lights, scene, camera) {\n        if (this.enabled === false)\n            return;\n        if (this.autoUpdate === false && this.needsUpdate === false)\n            return;\n        if (lights.length === 0)\n            return;\n        // TODO Clean up (needed in case of contextlost)\n        const gl = this.renderer.context;\n        const state = this.renderer.state;\n        // Set GL state for depth map.\n        state.disable(gl.BLEND);\n        state.buffers.color.setClear(1, 1, 1, 1);\n        state.buffers.depth.setTest(true);\n        state.setScissorTest(false);\n        // render depth map\n        let faceCount;\n        for (let i = 0, il = lights.length; i < il; i++) {\n            const light = lights[i];\n            const shadow = light.shadow;\n            const isPointLight = light instanceof PointLight;\n            if (shadow === undefined) {\n                console.warn(\"THREE.WebGLShadowMap:\", light, \"has no shadow.\");\n                continue;\n            }\n            const shadowCamera = shadow.camera;\n            this.shadowMapSize.copy(shadow.mapSize);\n            this.shadowMapSize.min(this.maxShadowMapSize);\n            if (isPointLight) {\n                const vpWidth = this.shadowMapSize.x;\n                const vpHeight = this.shadowMapSize.y;\n                // These viewports map a cube-map onto a 2D texture with the\n                // following orientation:\n                //\n                //  xzXZ\n                //   y Y\n                //\n                // X - Positive x direction\n                // x - Negative x direction\n                // Y - Positive y direction\n                // y - Negative y direction\n                // Z - Positive z direction\n                // z - Negative z direction\n                // positive X\n                this.cube2DViewPorts[0].set(vpWidth * 2, vpHeight, vpWidth, vpHeight);\n                // negative X\n                this.cube2DViewPorts[1].set(0, vpHeight, vpWidth, vpHeight);\n                // positive Z\n                this.cube2DViewPorts[2].set(vpWidth * 3, vpHeight, vpWidth, vpHeight);\n                // negative Z\n                this.cube2DViewPorts[3].set(vpWidth, vpHeight, vpWidth, vpHeight);\n                // positive Y\n                this.cube2DViewPorts[4].set(vpWidth * 3, 0, vpWidth, vpHeight);\n                // negative Y\n                this.cube2DViewPorts[5].set(vpWidth, 0, vpWidth, vpHeight);\n                this.shadowMapSize.x *= 4.0;\n                this.shadowMapSize.y *= 2.0;\n            }\n            if (shadow.map === null) {\n                const pars = {\n                    minFilter: NearestFilter,\n                    magFilter: NearestFilter,\n                    format: RGBAFormat,\n                };\n                shadow.map = new WebGLRenderTarget(this.shadowMapSize.x, this.shadowMapSize.y, pars);\n                shadow.map.texture.name = light.name + \".shadowMap\";\n                shadowCamera.updateProjectionMatrix();\n            }\n            /**\n             * Only SpotLight haa a shadow of SpotLightShadow\n             */\n            if (shadow instanceof SpotLightShadow) {\n                shadow.update(light);\n            }\n            const shadowMap = shadow.map;\n            const shadowMatrix = shadow.matrix;\n            this.lightPositionWorld.setFromMatrixPosition(light.matrixWorld);\n            shadowCamera.position.copy(this.lightPositionWorld);\n            if (isPointLight) {\n                faceCount = 6;\n                // for point lights we set the shadow matrix to be a translation-only matrix\n                // equal to inverse of the light's position\n                shadowMatrix.makeTranslation(-this.lightPositionWorld.x, -this.lightPositionWorld.y, -this.lightPositionWorld.z);\n            }\n            else {\n                faceCount = 1;\n                /**\n                 * Not PointLight\n                 */\n                this.lookTarget.setFromMatrixPosition(light.target.matrixWorld);\n                shadowCamera.lookAt(this.lookTarget);\n                shadowCamera.updateMatrixWorld();\n                // compute shadow matrix\n                shadowMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n                shadowMatrix.multiply(shadowCamera.projectionMatrix);\n                shadowMatrix.multiply(shadowCamera.matrixWorldInverse);\n            }\n            this.renderer.setRenderTarget(shadowMap);\n            this.renderer.clear();\n            // render shadow map for each cube face (if omni-directional) or\n            // run a single pass if not\n            for (let face = 0; face < faceCount; face++) {\n                if (isPointLight) {\n                    this.lookTarget.copy(shadowCamera.position);\n                    this.lookTarget.add(this.cubeDirections[face]);\n                    shadowCamera.up.copy(this.cubeUps[face]);\n                    shadowCamera.lookAt(this.lookTarget);\n                    shadowCamera.updateMatrixWorld();\n                    const vpDimensions = this.cube2DViewPorts[face];\n                    state.viewport(vpDimensions);\n                }\n                // update camera matrices and frustum\n                this.projScreenMatrix.multiplyMatrices(shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse);\n                this.frustum.setFromMatrix(this.projScreenMatrix);\n                // set object matrices & frustum culling\n                this.renderObject(scene, camera, shadowCamera, isPointLight);\n            }\n        }\n        this.needsUpdate = false;\n    }\n    renderObject(object, camera, shadowCamera, isPointLight) {\n        if (object.visible === false)\n            return;\n        const visible = object.layers.test(camera.layers);\n        if (visible && (object instanceof Mesh || object instanceof Line || object instanceof Points)) {\n            if (object.castShadow && (!object.frustumCulled || this.frustum.intersectsObject(object))) {\n                object.modelViewMatrix.multiplyMatrices(shadowCamera.matrixWorldInverse, object.matrixWorld);\n                const geometry = this.objects.update(object);\n                const material = object.material;\n                if (Array.isArray(material)) {\n                    const groups = geometry.groups;\n                    for (let k = 0, kl = groups.length; k < kl; k++) {\n                        const group = groups[k];\n                        const groupMaterial = material[group.materialIndex];\n                        if (groupMaterial && groupMaterial.visible) {\n                            const depthMaterial = this.getDepthMaterial(object, groupMaterial, isPointLight, this.lightPositionWorld, shadowCamera.near, shadowCamera.far);\n                            this.renderer.renderBufferDirect(shadowCamera, null, geometry, depthMaterial, object, group);\n                        }\n                    }\n                }\n                else if (material.visible) {\n                    const depthMaterial = this.getDepthMaterial(object, material, isPointLight, this.lightPositionWorld, shadowCamera.near, shadowCamera.far);\n                    this.renderer.renderBufferDirect(shadowCamera, null, geometry, depthMaterial, object, null);\n                }\n            }\n        }\n        const children = object.children;\n        for (let i = 0, l = children.length; i < l; i++) {\n            this.renderObject(children[i], camera, shadowCamera, isPointLight);\n        }\n    }\n}\n","import { CanvasTexture } from \"../../textures/CanvasTexture\";\nimport { Vector3, Quaternion, Fog, FogExp2 } from \"../../Three\";\nexport class WebGLSpriteRenderer {\n    constructor(renderer, state, textures, capabilities) {\n        this.renderer = renderer;\n        this.state = state;\n        this.textures = textures;\n        this.capabilities = capabilities;\n    }\n    init() {\n        const gl = this.renderer.context;\n        const program = this.program;\n        const vertices = new Float32Array([\n            -0.5,\n            -0.5,\n            0,\n            0,\n            0.5,\n            -0.5,\n            1,\n            0,\n            0.5,\n            0.5,\n            1,\n            1,\n            -0.5,\n            0.5,\n            0,\n            1,\n        ]);\n        const faces = new Uint16Array([0, 1, 2, 0, 2, 3]);\n        this.vertexBuffer = gl.createBuffer();\n        this.elementBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.elementBuffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW);\n        this.program = this.createProgram();\n        this.attributes = {\n            position: gl.getAttribLocation(program, \"position\"),\n            uv: gl.getAttribLocation(program, \"uv\"),\n        };\n        this.uniforms = {\n            uvOffset: gl.getUniformLocation(program, \"uvOffset\"),\n            uvScale: gl.getUniformLocation(program, \"uvScale\"),\n            rotation: gl.getUniformLocation(program, \"rotation\"),\n            scale: gl.getUniformLocation(program, \"scale\"),\n            color: gl.getUniformLocation(program, \"color\"),\n            map: gl.getUniformLocation(program, \"map\"),\n            opacity: gl.getUniformLocation(program, \"opacity\"),\n            modelViewMatrix: gl.getUniformLocation(program, \"modelViewMatrix\"),\n            projectionMatrix: gl.getUniformLocation(program, \"projectionMatrix\"),\n            fogType: gl.getUniformLocation(program, \"fogType\"),\n            fogDensity: gl.getUniformLocation(program, \"fogDensity\"),\n            fogNear: gl.getUniformLocation(program, \"fogNear\"),\n            fogFar: gl.getUniformLocation(program, \"fogFar\"),\n            fogColor: gl.getUniformLocation(program, \"fogColor\"),\n            fogDepth: gl.getUniformLocation(program, \"fogDepth\"),\n            alphaTest: gl.getUniformLocation(program, \"alphaTest\"),\n        };\n        const canvas = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\");\n        canvas.width = 8;\n        canvas.height = 8;\n        const context = canvas.getContext(\"2d\");\n        context.fillStyle = \"white\";\n        context.fillRect(0, 0, 8, 8);\n        this.texture = new CanvasTexture(canvas);\n    }\n    createProgram() {\n        const gl = this.renderer.context;\n        const program = gl.createProgram();\n        const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(vertexShader, [\n            \"precision \" + this.capabilities.precision + \" float;\",\n            \"#define SHADER_NAME \" + \"SpriteMaterial\",\n            \"uniform mat4 modelViewMatrix;\",\n            \"uniform mat4 projectionMatrix;\",\n            \"uniform float rotation;\",\n            \"uniform vec2 scale;\",\n            \"uniform vec2 uvOffset;\",\n            \"uniform vec2 uvScale;\",\n            \"attribute vec2 position;\",\n            \"attribute vec2 uv;\",\n            \"varying vec2 vUV;\",\n            \"varying float fogDepth;\",\n            \"void main() {\",\n            \"\tvUV = uvOffset + uv * uvScale;\",\n            \"\tvec2 alignedPosition = position * scale;\",\n            \"\tvec2 rotatedPosition;\",\n            \"\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\",\n            \"\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\",\n            \"\tvec4 mvPosition;\",\n            \"\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\",\n            \"\tmvPosition.xy += rotatedPosition;\",\n            \"\tgl_Position = projectionMatrix * mvPosition;\",\n            \"\tfogDepth = - mvPosition.z;\",\n            \"}\",\n        ].join(\"\\n\"));\n        gl.shaderSource(fragmentShader, [\n            \"precision \" + this.capabilities.precision + \" float;\",\n            \"#define SHADER_NAME \" + \"SpriteMaterial\",\n            \"uniform vec3 color;\",\n            \"uniform sampler2D map;\",\n            \"uniform float opacity;\",\n            \"uniform int fogType;\",\n            \"uniform vec3 fogColor;\",\n            \"uniform float fogDensity;\",\n            \"uniform float fogNear;\",\n            \"uniform float fogFar;\",\n            \"uniform float alphaTest;\",\n            \"varying vec2 vUV;\",\n            \"varying float fogDepth;\",\n            \"void main() {\",\n            \"\tvec4 texture = texture2D( map, vUV );\",\n            \"\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\",\n            \"\tif ( gl_FragColor.a < alphaTest ) discard;\",\n            \"\tif ( fogType > 0 ) {\",\n            \"\t\tfloat fogFactor = 0.0;\",\n            \"\t\tif ( fogType == 1 ) {\",\n            \"\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\",\n            \"\t\t} else {\",\n            \"\t\t\tconst float LOG2 = 1.442695;\",\n            \"\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\",\n            \"\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\",\n            \"\t\t}\",\n            \"\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\",\n            \"\t}\",\n            \"}\",\n        ].join(\"\\n\"));\n        gl.compileShader(vertexShader);\n        gl.compileShader(fragmentShader);\n        gl.attachShader(program, vertexShader);\n        gl.attachShader(program, fragmentShader);\n        gl.linkProgram(program);\n        return program;\n    }\n    render(sprites, scene, camera) {\n        const gl = this.renderer.context;\n        const program = gl.createProgram();\n        const attributes = this.attributes;\n        const uniforms = this.uniforms;\n        const state = this.state;\n        if (sprites.length === 0)\n            return;\n        // setup gl\n        if (program === undefined) {\n            this.init();\n        }\n        state.useProgram(program);\n        state.initAttributes();\n        state.enableAttribute(attributes.position);\n        state.enableAttribute(attributes.uv);\n        state.disableUnusedAttributes();\n        state.disable(gl.CULL_FACE);\n        state.enable(gl.BLEND);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n        gl.vertexAttribPointer(attributes.position, 2, gl.FLOAT, false, 2 * 8, 0);\n        gl.vertexAttribPointer(attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.elementBuffer);\n        gl.uniformMatrix4fv(uniforms.projectionMatrix, false, camera.projectionMatrix.elements);\n        state.activeTexture(gl.TEXTURE0);\n        gl.uniform1i(uniforms.map, 0);\n        let oldFogType = 0;\n        let sceneFogType = 0;\n        const fog = scene.fog;\n        if (fog) {\n            gl.uniform3f(uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b);\n            if (fog instanceof Fog) {\n                gl.uniform1f(uniforms.fogNear, fog.near);\n                gl.uniform1f(uniforms.fogFar, fog.far);\n                gl.uniform1i(uniforms.fogType, 1);\n                oldFogType = 1;\n                sceneFogType = 1;\n            }\n            else if (fog instanceof FogExp2) {\n                gl.uniform1f(uniforms.fogDensity, fog.density);\n                gl.uniform1i(uniforms.fogType, 2);\n                oldFogType = 2;\n                sceneFogType = 2;\n            }\n        }\n        else {\n            gl.uniform1i(uniforms.fogType, 0);\n            oldFogType = 0;\n            sceneFogType = 0;\n        }\n        // update positions and sort\n        for (let i = 0, l = sprites.length; i < l; i++) {\n            const sprite = sprites[i];\n            sprite.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, sprite.matrixWorld);\n            sprite.z = -sprite.modelViewMatrix.elements[14];\n        }\n        sprites.sort((a, b) => {\n            if (a.renderOrder !== b.renderOrder) {\n                return a.renderOrder - b.renderOrder;\n            }\n            else if (a.z !== b.z) {\n                return b.z - a.z;\n            }\n            else {\n                return b.id - a.id;\n            }\n        });\n        // render all sprites\n        const scale = [];\n        for (let i = 0, l = sprites.length; i < l; i++) {\n            const sprite = sprites[i];\n            const material = sprite.material;\n            if (material.visible === false)\n                continue;\n            //sprite.onBeforeRender(this.renderer, scene, camera, undefined, material, undefined );\n            gl.uniform1f(uniforms.alphaTest, material.alphaTest);\n            gl.uniformMatrix4fv(uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements);\n            const spritePosition = new Vector3();\n            const spriteRotation = new Quaternion();\n            const spriteScale = new Vector3();\n            sprite.matrixWorld.decompose(spritePosition, spriteRotation, spriteScale);\n            scale[0] = spriteScale.x;\n            scale[1] = spriteScale.y;\n            let fogType = 0;\n            if (scene.fog && material.fog) {\n                fogType = sceneFogType;\n            }\n            if (oldFogType !== fogType) {\n                gl.uniform1i(uniforms.fogType, fogType);\n                oldFogType = fogType;\n            }\n            if (material.map !== null) {\n                gl.uniform2f(uniforms.uvOffset, material.map.offset.x, material.map.offset.y);\n                gl.uniform2f(uniforms.uvScale, material.map.repeat.x, material.map.repeat.y);\n            }\n            else {\n                gl.uniform2f(uniforms.uvOffset, 0, 0);\n                gl.uniform2f(uniforms.uvScale, 1, 1);\n            }\n            gl.uniform1f(uniforms.opacity, material.opacity);\n            gl.uniform3f(uniforms.color, material.color.r, material.color.g, material.color.b);\n            gl.uniform1f(uniforms.rotation, material.rotation);\n            gl.uniform2fv(uniforms.scale, scale);\n            state.setBlending(material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha);\n            state.buffers.depth.setTest(material.depthTest);\n            state.buffers.depth.setMask(material.depthWrite);\n            state.buffers.color.setMask(material.colorWrite);\n            this.textures.setTexture2D(material.map || this.texture, 0);\n            gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);\n            //sprite.onAfterRender( this.renderer, scene, camera, undefined, material, undefined );\n        }\n        // restore gl\n        state.enable(gl.CULL_FACE);\n        state.reset();\n    }\n}\n","import { AdditiveBlending, AlwaysDepth, BackSide, CullFaceFront, CullFaceBack, CullFaceNone, CustomBlending, DoubleSide, EqualDepth, GreaterDepth, GreaterEqualDepth, LessEqualDepth, LessDepth, MultiplyBlending, NeverDepth, NoBlending, NormalBlending, NotEqualDepth, SubtractiveBlending, } from \"../../constants\";\nimport { Vector4 } from \"../../math/Vector4\";\nexport class ColorBuffer {\n    constructor(context) {\n        this.locked = false;\n        this.color = new Vector4();\n        this.currentColorMask = null;\n        this.currentColorClear = new Vector4(0, 0, 0, 0);\n        this.context = context;\n    }\n    setMask(colorMask) {\n        if (this.currentColorMask !== colorMask && !this.locked) {\n            this.context.colorMask(colorMask, colorMask, colorMask, colorMask);\n            this.currentColorMask = colorMask;\n        }\n        return this;\n    }\n    setLocked(lock) {\n        this.locked = lock;\n        return this;\n    }\n    setClear(r, g, b, a, premultipliedAlpha = false) {\n        if (premultipliedAlpha === true) {\n            r *= a;\n            g *= a;\n            b *= a;\n        }\n        this.color.set(r, g, b, a);\n        if (this.currentColorClear.equals(this.color) === false) {\n            this.context.clearColor(r, g, b, a);\n            this.currentColorClear.copy(this.color);\n        }\n        return this;\n    }\n    reset() {\n        this.locked = false;\n        this.currentColorMask = null;\n        /**\n         * set to invalid state\n         */\n        this.currentColorClear.set(-1, 0, 0, 0);\n        return this;\n    }\n}\nexport class DepthBuffer {\n    constructor(context, capabilities) {\n        this.locked = false;\n        this.currentDepthMask = null;\n        this.currentDepthFunc = null;\n        this.currentDepthClear = null;\n        this.context = context;\n        this.capabilities = capabilities;\n    }\n    setTest(depthTest = false) {\n        if (depthTest) {\n            this.enable(this.context.DEPTH_TEST);\n        }\n        else {\n            this.disable(this.context.DEPTH_TEST);\n        }\n        return this;\n    }\n    setMask(depthMask) {\n        if (this.currentDepthMask !== depthMask && !this.locked) {\n            this.context.depthMask(depthMask);\n            this.currentDepthMask = depthMask;\n        }\n        return this;\n    }\n    /**\n     * \n     * gl.enable(gl.DEPTH_TEST)\n     * \n     GL_NEVER,\n     GL_LESS,\n     GL_EQUAL,\n     GL_LEQUAL,\n     GL_GREATER,\n     GL_NOTEQUAL,\n     GL_GEQUAL,\n     GL_ALWAYS,\n     * Z Buffer \n     * \n     * Z\n     * OpenGL\n     * glDepthMask(GL_FALSE)\n     *\n     * glDepthMask(GL_FALSE)\n     * \n     * \n     *\n     * @param depthFunc\n     */\n    setFunc(depthFunc) {\n        if (this.currentDepthFunc !== depthFunc) {\n            const gl = this.context;\n            if (depthFunc) {\n                switch (depthFunc) {\n                    case NeverDepth:\n                        gl.depthFunc(gl.NEVER);\n                        break;\n                    case AlwaysDepth:\n                        gl.depthFunc(gl.ALWAYS);\n                        break;\n                    case LessDepth:\n                        gl.depthFunc(gl.LESS);\n                        break;\n                    case LessEqualDepth:\n                        gl.depthFunc(gl.LEQUAL);\n                        break;\n                    case EqualDepth:\n                        gl.depthFunc(gl.EQUAL);\n                        break;\n                    case GreaterEqualDepth:\n                        gl.depthFunc(gl.GEQUAL);\n                        break;\n                    case GreaterDepth:\n                        gl.depthFunc(gl.GREATER);\n                        break;\n                    case NotEqualDepth:\n                        gl.depthFunc(gl.NOTEQUAL);\n                        break;\n                    default:\n                        gl.depthFunc(gl.LEQUAL);\n                }\n            }\n            else {\n                gl.depthFunc(gl.LEQUAL);\n            }\n            this.currentDepthFunc = depthFunc;\n        }\n        return this;\n    }\n    setLocked(lock = false) {\n        this.locked = lock;\n        return this;\n    }\n    setClear(depth) {\n        if (this.currentDepthClear !== depth) {\n            this.context.clearDepth(depth);\n            this.currentDepthClear = depth;\n        }\n        return this;\n    }\n    reset() {\n        this.locked = false;\n        this.currentDepthMask = null;\n        this.currentDepthFunc = null;\n        this.currentDepthClear = null;\n        return this;\n    }\n    enable(id) {\n        if (this.capabilities[id] !== true) {\n            this.context.enable(id);\n            this.capabilities[id] = true;\n        }\n        return this;\n    }\n    disable(id) {\n        if (this.capabilities[id] !== false) {\n            this.context.disable(id);\n            this.capabilities[id] = false;\n        }\n        return this;\n    }\n}\nexport class StencilBuffer {\n    constructor(context, capabilities) {\n        this.locked = false;\n        this.currentStencilMask = null;\n        this.currentStencilFunc = null;\n        this.currentStencilRef = null;\n        this.currentStencilFuncMask = null;\n        this.currentStencilFail = null;\n        this.currentStencilZFail = null;\n        this.currentStencilZPass = null;\n        this.currentStencilClear = null;\n        this.context = context;\n        this.capabilities = capabilities;\n    }\n    setTest(stencilTest) {\n        if (stencilTest) {\n            this.enable(this.context.STENCIL_TEST);\n        }\n        else {\n            this.disable(this.context.STENCIL_TEST);\n        }\n        return this;\n    }\n    setMask(stencilMask) {\n        if (this.currentStencilMask !== stencilMask && !this.locked) {\n            this.context.stencilMask(stencilMask);\n            this.currentStencilMask = stencilMask;\n        }\n        return this;\n    }\n    setFunc(stencilFunc, stencilRef, stencilMask) {\n        if (this.currentStencilFunc !== stencilFunc ||\n            this.currentStencilRef !== stencilRef ||\n            this.currentStencilFuncMask !== stencilMask) {\n            this.context.stencilFunc(stencilFunc, stencilRef, stencilMask);\n            this.currentStencilFunc = stencilFunc;\n            this.currentStencilRef = stencilRef;\n            this.currentStencilFuncMask = stencilMask;\n        }\n        return this;\n    }\n    setOp(stencilFail, stencilZFail, stencilZPass) {\n        if (this.currentStencilFail !== stencilFail ||\n            this.currentStencilZFail !== stencilZFail ||\n            this.currentStencilZPass !== stencilZPass) {\n            this.context.stencilOp(stencilFail, stencilZFail, stencilZPass);\n            this.currentStencilFail = stencilFail;\n            this.currentStencilZFail = stencilZFail;\n            this.currentStencilZPass = stencilZPass;\n        }\n        return this;\n    }\n    setLocked(lock) {\n        this.locked = lock;\n        return this;\n    }\n    setClear(stencil) {\n        if (this.currentStencilClear !== stencil) {\n            this.context.clearStencil(stencil);\n            this.currentStencilClear = stencil;\n        }\n        return this;\n    }\n    reset() {\n        this.locked = false;\n        this.currentStencilMask = null;\n        this.currentStencilFunc = null;\n        this.currentStencilRef = null;\n        this.currentStencilFuncMask = null;\n        this.currentStencilFail = null;\n        this.currentStencilZFail = null;\n        this.currentStencilZPass = null;\n        this.currentStencilClear = null;\n        return this;\n    }\n    enable(id) {\n        if (this.capabilities[id] !== true) {\n            this.context.enable(id);\n            this.capabilities[id] = true;\n        }\n        return this;\n    }\n    disable(id) {\n        if (this.capabilities[id] !== false) {\n            this.context.disable(id);\n            this.capabilities[id] = false;\n        }\n        return this;\n    }\n}\nexport class WebGLState {\n    constructor(context, extensions, utils) {\n        this.capabilities = {};\n        this.buffers = {\n            color: null,\n            depth: null,\n            stencil: null,\n        };\n        this.lineWidthAvailable = false;\n        this.currentScissor = new Vector4();\n        this.currentViewport = new Vector4();\n        this.emptyTextures = {};\n        this.currentFlipSided = null;\n        this.currentCullFace = null;\n        this.currentBlending = null;\n        this.currentPremultipledAlpha = false;\n        this.currentBlendEquation = null;\n        this.currentBlendEquationAlpha = null;\n        this.currentBlendSrc = null;\n        this.currentBlendDst = null;\n        this.currentBlendSrcAlpha = null;\n        this.currentBlendDstAlpha = null;\n        this.compressedTextureFormats = null;\n        this.currentProgram = null;\n        this.currentLineWidth = null;\n        this.currentPolygonOffsetFactor = null;\n        this.currentPolygonOffsetUnits = null;\n        this.currentTextureSlot = null;\n        this.currentBoundTextures = {};\n        this.context = context;\n        this.extensions = extensions;\n        this.utils = utils;\n        this.buffers.color = new ColorBuffer(context);\n        this.buffers.depth = new DepthBuffer(context, this.capabilities);\n        this.buffers.stencil = new StencilBuffer(context, this.capabilities);\n        this.maxVertexAttributes = context.getParameter(context.MAX_VERTEX_ATTRIBS);\n        this.newAttributes = new Uint8Array(this.maxVertexAttributes);\n        this.enabledAttributes = new Uint8Array(this.maxVertexAttributes);\n        this.attributeDivisors = new Uint8Array(this.maxVertexAttributes);\n        this.maxTextures = context.getParameter(context.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n        this.version = parseFloat(/^WebGL\\ ([0-9])/.exec(context.getParameter(context.VERSION))[1]);\n        this.lineWidthAvailable = this.version >= 1.0;\n        this.emptyTextures[context.TEXTURE_2D] = this.createTexture(context.TEXTURE_2D, context.TEXTURE_2D, 1);\n        this.emptyTextures[context.TEXTURE_CUBE_MAP] = this.createTexture(context.TEXTURE_CUBE_MAP, context.TEXTURE_CUBE_MAP_POSITIVE_X, 6);\n        /**\n         * initialize\n         */\n        this.buffers.color.setClear(0, 0, 0, 1);\n        this.buffers.depth.setClear(1);\n        this.buffers.stencil.setClear(0);\n        this.enable(context.DEPTH_TEST);\n        this.buffers.depth.setFunc(LessEqualDepth);\n        this.setFlipSided(false);\n        this.setCullFace(CullFaceBack);\n        this.enable(context.CULL_FACE);\n        this.enable(context.BLEND);\n        this.setBlending(NormalBlending);\n    }\n    enable(id) {\n        if (this.capabilities[id] !== true) {\n            this.context.enable(id);\n            this.capabilities[id] = true;\n        }\n        return this;\n    }\n    disable(id) {\n        if (this.capabilities[id] !== false) {\n            this.context.disable(id);\n            this.capabilities[id] = false;\n        }\n        return this;\n    }\n    /**\n     * CWCCW\n     * @param flipSided\n     */\n    setFlipSided(flipSided = false) {\n        const gl = this.context;\n        if (this.currentFlipSided !== flipSided) {\n            if (flipSided) {\n                gl.frontFace(gl.CW);\n            }\n            else {\n                gl.frontFace(gl.CCW);\n            }\n            this.currentFlipSided = flipSided;\n        }\n        return this;\n    }\n    /**\n     * FRONTBACK\n     * \n     *\n     * @param cullFace\n     */\n    setCullFace(cullFace) {\n        const gl = this.context;\n        if (cullFace !== CullFaceNone) {\n            this.enable(gl.CULL_FACE);\n            if (cullFace !== this.currentCullFace) {\n                if (cullFace === CullFaceBack) {\n                    gl.cullFace(gl.BACK);\n                }\n                else if (cullFace === CullFaceFront) {\n                    gl.cullFace(gl.FRONT);\n                }\n                else {\n                    gl.cullFace(gl.FRONT_AND_BACK);\n                }\n            }\n        }\n        else {\n            this.disable(gl.CULL_FACE);\n        }\n        this.currentCullFace = cullFace;\n        return this;\n    }\n    /**\n     * , , .\n     * ,, .\n     * .\n     * Cs(Sr, Sg, Sb, Sa)Cd(Dr,Dg,Db,Da),\n     * S(Source)D(Destination)glBlendFunc()glBlendFuncSeparate().\n     *\n     * GL_FUNC_ADD                      CsS + CdD\n     * GL_FUNC_SUBTRACT                 CsS - CdD\n     * GL_FUNC_REVERSE_SUBTRACT        CdD - CsS\n     * GL_MIN                           min(CsS, CdD)\n     * GL_MAX                           max(CsS, CdD)\n     *\n     * [0,1].\n     *\n     * :\n     * glBlendFunc(),, RGBA, RGBA.\n     * void glBlendFunc(GLenum srcfactor, GLenum destfactor);\n     *\n     * glBlendFuncSeparate()4, RGBalpha.\n     * void glBlendFuncSeparate(GLenum srcRGB, GLenum destRGB, GLenum srcalpha, GLenum destalpha);\n     *\n     * :                        RGB                        alpha\n     * GL_ZERO:                    (0, 0, 0)                        0\n     * GL_ONE:                    (1, 1, 1)                        1\n     * GL_DST_COLOR:            (Rd, Gd, Bd)\n     * GL_SRC_COLOR:            (Rs, Gs, Bs)                    A\n     * GL_ONE_MINUS_DST_COLOR:    (1, 1, 1) - (Rd, Gd, Bd)\n     * GL_ONE_MINUS_SRC_COLOR:    (1, 1, 1) - (Rs, Gs, Bs)        1 - A\n     * GL_SRC_ALPHA:            (As,As,As,As)\n     * GL_ONE_MINUS_SRC_ALPHA:    (1, 1, 1, 1) - (As,As,As,As)\n     * GL_DST_ALPHA:            (Ad, Ad, Ad, Ad)\n     * GL_ONE_MINUS_DST_ALPHA:    (1, 1, 1, 1) - (Ad, Ad, Ad, Ad)\n     * GL_SRC_ALPHA_STATURATE:    (f, f, f, 1); f = min(As, 1 - Ad)\n     *\n     * @param blending\n     * @param blendEquation\n     * @param blendSrc\n     * @param blendDst\n     * @param blendEquationAlpha\n     * @param blendSrcAlpha\n     * @param blendDstAlpha\n     * @param premultipliedAlpha\n     */\n    setBlending(blending, blendEquation = 0, blendSrc = 0, blendDst = 0, blendEquationAlpha = 0, blendSrcAlpha = 0, blendDstAlpha = 0, premultipliedAlpha = false) {\n        const gl = this.context;\n        if (blending !== NoBlending) {\n            this.enable(gl.BLEND);\n        }\n        else {\n            this.disable(gl.BLEND);\n        }\n        if (blending !== CustomBlending) {\n            if (blending !== this.currentBlending || premultipliedAlpha !== this.currentPremultipledAlpha) {\n                switch (blending) {\n                    case AdditiveBlending:\n                        if (premultipliedAlpha) {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\n                        }\n                        else {\n                            gl.blendEquation(gl.FUNC_ADD);\n                            gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n                        }\n                        break;\n                    case SubtractiveBlending:\n                        if (premultipliedAlpha) {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA);\n                        }\n                        else {\n                            gl.blendEquation(gl.FUNC_ADD);\n                            gl.blendFunc(gl.ZERO, gl.ONE_MINUS_SRC_COLOR);\n                        }\n                        break;\n                    case MultiplyBlending:\n                        if (premultipliedAlpha) {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA);\n                        }\n                        else {\n                            gl.blendEquation(gl.FUNC_ADD);\n                            gl.blendFunc(gl.ZERO, gl.SRC_COLOR);\n                        }\n                        break;\n                    default:\n                        if (premultipliedAlpha) {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n                        }\n                        else {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n                        }\n                }\n            }\n            this.currentBlendEquation = 0;\n            this.currentBlendSrc = 0;\n            this.currentBlendDst = 0;\n            this.currentBlendEquationAlpha = 0;\n            this.currentBlendSrcAlpha = 0;\n            this.currentBlendDstAlpha = 0;\n        }\n        else {\n            blendEquationAlpha = blendEquationAlpha || blendEquation;\n            blendSrcAlpha = blendSrcAlpha || blendSrc;\n            blendDstAlpha = blendDstAlpha || blendDst;\n            if (blendEquation !== this.currentBlendEquation || blendEquationAlpha !== this.currentBlendEquationAlpha) {\n                gl.blendEquationSeparate(this.utils.convert(blendEquation), this.utils.convert(blendEquationAlpha));\n                this.currentBlendEquation = blendEquation;\n                this.currentBlendEquationAlpha = blendEquationAlpha;\n            }\n            if (blendSrc !== this.currentBlendSrc ||\n                blendDst !== this.currentBlendDst ||\n                blendSrcAlpha !== this.currentBlendSrcAlpha ||\n                blendDstAlpha !== this.currentBlendDstAlpha) {\n                gl.blendFuncSeparate(this.utils.convert(blendSrc), this.utils.convert(blendDst), this.utils.convert(blendSrcAlpha), this.utils.convert(blendDstAlpha));\n                this.currentBlendSrc = blendSrc;\n                this.currentBlendDst = blendDst;\n                this.currentBlendSrcAlpha = blendSrcAlpha;\n                this.currentBlendDstAlpha = blendDstAlpha;\n            }\n        }\n        this.currentBlending = blending;\n        this.currentPremultipledAlpha = premultipliedAlpha;\n        return this;\n    }\n    setMaterial(material, frontFaceCW = false) {\n        const gl = this.context;\n        material.side === DoubleSide ? this.disable(gl.CULL_FACE) : this.enable(gl.CULL_FACE);\n        let flipSided = material.side === BackSide;\n        if (frontFaceCW)\n            flipSided = !flipSided;\n        this.setFlipSided(flipSided);\n        material.transparent === true\n            ? this.setBlending(material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha)\n            : this.setBlending(NoBlending);\n        this.buffers.depth.setFunc(material.depthFunc);\n        this.buffers.depth.setTest(material.depthTest);\n        this.buffers.depth.setMask(material.depthWrite);\n        this.buffers.depth.setMask(material.colorWrite);\n        this.setPolygonOffset(material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits);\n        return this;\n    }\n    initAttributes() {\n        for (let i = 0, l = this.newAttributes.length; i < l; i++) {\n            this.newAttributes[i] = 0;\n        }\n        return this;\n    }\n    enableAttribute(attribute) {\n        return this.enableAttributeAndDivisor(attribute);\n    }\n    disableUnusedAttributes() {\n        const gl = this.context;\n        for (let i = 0, l = this.enabledAttributes.length; i !== l; i++) {\n            if (this.enabledAttributes[i] !== this.newAttributes[i]) {\n                gl.disableVertexAttribArray(i);\n                this.enabledAttributes[i] = 0;\n            }\n        }\n        return this;\n    }\n    /**\n     * @param attribute\n     * @param meshPerAttribute\n     */\n    enableAttributeAndDivisor(attribute, meshPerAttribute = 0) {\n        this.newAttributes[attribute] = 1;\n        if (this.enabledAttributes[attribute] === 0) {\n            /**\n             * CPUGPUAttribute\n             * glEnableVertexAttribArray\n             * glEnableVertexAttribArrayglVertexAttribPointerVAOVertex Array Objects\n             * glVertexAttribPointerGPUVBO\n             * glEnableVertexAttribArrayglVertexAttribPointer\n             * VBOdrawCall\n             * attributeattributelocation\n             * enabledAttributeslocationattribute\n             * newAttributeslocationattribute1\n             * resetinitAttributes\n             * MAX_VERTEX_ATTRIBSattribute\n             * attribute\n             * resetattribute\n             * useProgramshaderinitAttributes\n             * Three.jsRendererWebGLStateprogram\n             * initAttributesenableAttributeattribute\n             * disableUnusedAttributes\n             */\n            this.context.enableVertexAttribArray(attribute);\n            this.enabledAttributes[attribute] = 1;\n        }\n        /**\n         * ANGLE_instanced_arrays WebGL API API\n         * \n         * \n         */\n        if (this.attributeDivisors[attribute] !== meshPerAttribute) {\n            const extension = this.extensions.get(\"ANGLE_instanced_arrays\");\n            extension.vertexAttribDivisorANGLE(attribute, meshPerAttribute);\n            this.attributeDivisors[attribute] = meshPerAttribute;\n        }\n        return this;\n    }\n    getCompressedTextureFormats() {\n        if (this.compressedTextureFormats === null) {\n            this.compressedTextureFormats = [];\n            if (this.extensions.get(\"WEBGL_compressed_texture_pvrtc\") ||\n                this.extensions.get(\"WEBGL_compressed_texture_s3tc\") ||\n                this.extensions.get(\"WEBGL_compressed_texture_etc1\") ||\n                this.extensions.get(\"WEBGL_compressed_texture_astc\")) {\n                const formats = this.context.getParameter(this.context.COMPRESSED_TEXTURE_FORMATS);\n                for (let i = 0; i < formats.length; i++) {\n                    this.compressedTextureFormats.push(formats[i]);\n                }\n            }\n        }\n        return this.compressedTextureFormats;\n    }\n    useProgram(program) {\n        if (this.currentProgram !== program) {\n            this.context.useProgram(program);\n            this.currentProgram = program;\n            return true;\n        }\n        return false;\n    }\n    setLineWidth(width) {\n        if (width !== this.currentLineWidth) {\n            if (this.lineWidthAvailable)\n                this.context.lineWidth(width);\n            this.currentLineWidth = width;\n        }\n        return this;\n    }\n    /**\n     * OpenGLGL_FILL\n     * GL_LINE\n     * \n     * \"Stiching\"\n     * Z-fighting\n     * \n     * Polygon OffsetPolygon Offset\n     * Polygon Offset\n     * glPolygonOffsetglPolygonOffset2GLfloat factor GLfloat units\n     * Fragmentoffset = (m * factor) + (r * units)\n     * m\n     * near clipping planm0\n     * rrOpenGL\n     * 0offset 0offset \n     * Polygon Offset\n     * 1.00.0glPolygonOffset\n     *\n     * @param polygonOffset\n     * @param factor\n     * @param units\n     */\n    setPolygonOffset(polygonOffset, factor, units) {\n        const gl = this.context;\n        if (polygonOffset) {\n            this.enable(gl.POLYGON_OFFSET_FILL);\n            if (this.currentPolygonOffsetFactor !== factor || this.currentPolygonOffsetUnits !== units) {\n                gl.polygonOffset(factor, units);\n                this.currentPolygonOffsetFactor = factor;\n                this.currentPolygonOffsetUnits = units;\n            }\n        }\n        else {\n            this.disable(gl.POLYGON_OFFSET_FILL);\n        }\n        return this;\n    }\n    setScissorTest(scissorTest) {\n        if (scissorTest) {\n            this.enable(this.context.SCISSOR_TEST);\n        }\n        else {\n            this.disable(this.context.SCISSOR_TEST);\n        }\n        return this;\n    }\n    activeTexture(slot) {\n        const gl = this.context;\n        if (slot === undefined)\n            slot = gl.TEXTURE0 + this.maxTextures - 1;\n        /**\n         * ...\n         */\n        if (this.currentTextureSlot !== slot) {\n            gl.activeTexture(slot);\n            this.currentTextureSlot = slot;\n        }\n        return this;\n    }\n    bindTexture(type, texture) {\n        if (this.currentTextureSlot === null) {\n            this.activeTexture();\n        }\n        let boundTexture = this.currentBoundTextures[this.currentTextureSlot];\n        if (boundTexture === undefined) {\n            boundTexture = { type: undefined, texture: undefined };\n            this.currentBoundTextures[this.currentTextureSlot] = boundTexture;\n        }\n        if (boundTexture.type !== type || boundTexture.texture !== texture) {\n            this.context.bindTexture(type, texture || this.emptyTextures[type]);\n            boundTexture.type = type;\n            boundTexture.texture = texture;\n        }\n        return this;\n    }\n    compressedTexImage2D(target, level, internalformat, width, height, border, data) {\n        /**\n         * GL_NUM_COMPRESSED_TEXTURE_FORMATS\n         * GL_COMPRESSED_TEXTURE_FORMATS\n         * getCompressedTextureFormats\n         */\n        try {\n            this.context.compressedTexImage2D(target, level, internalformat, width, height, border, data);\n        }\n        catch (error) {\n            console.error(`THREE.WebGLState: ${error}`);\n        }\n        return this;\n    }\n    texImage2D(target, level, internalformat, a, b, c, format, type, pixels) {\n        /**\n         * 2DDOMImageBitmap | ImageData | HTMLVideoElement | HTMLImageElement | HTMLCanvasElementwidthheight\n         * border0 ( ,  )\n         * internalformatformat ( ,  )\n         * targetTEXTURE_2DTEXTURE_CUBE_MAP_(NEGATIVE|POSITIVE)_(X|Y|Z)\n         *\n         * Mipmap\n         *  1. \n         *  2. \n         * Mipmapmipmapped\n         * OpenGlMipmap21x1\n         * mipmap\n         *\n         * Mipmap\n         * \t\n         * GL_NEAREST\tmip\n         * GL_LINEAR\tmip\n         * GL_NEAREST_MIPMAP_NEAREST\tmip\n         * GL_NEAREST_MIPMAP_LINEAR\tmip\n         * GL_LINEAR_MIPMAP_NEAREST\tmip\n         * GL_LINEAR_MIPMAP_LINEAR\tmipmipmap\n         * GL_NEARESTGL_LINEAR\n         * mipmap\n         * mipmapGL_[FILTER]_MIPMAP_[SELECTOR[\n         * FLILTERSELECTORmipmapGL_NEAREST_MIPMAP_LINEAR\n         * SELECTORGL_LINEARmipGL_NEAREST\n         *\n         * GL_NEAREST_MIPMAP_NEAAREST\n         * GL_LINEAR_MIPMAP_NEAREST(\n         * mipmapmipmip\n         * GL_LINEAR_MIPMAP_LINEARGL_NEAREST_MIPMAP_LINEARmip\n         * GL_LINEAR_MIPMAP_LINEAR\n         *\n         * level0log_{2}(GL_MAX_TEXTURE_SIZE)\n         */\n        try {\n            this.context.texImage2D(target, level, internalformat, a, b, c, format, type, pixels);\n        }\n        catch (error) {\n            console.error(`THREE.WebGLState: ${error}`);\n        }\n        return this;\n    }\n    scissor(scissor) {\n        /**\n         * x,yz,wwidthheight\n         * \n         */\n        if (this.currentScissor.equals(scissor) === false) {\n            this.context.scissor(scissor.x, scissor.y, scissor.z, scissor.w);\n            this.currentScissor.copy(scissor);\n        }\n        return this;\n    }\n    viewport(viewport) {\n        /**\n         * x,yz,wwidthheight\n         * \n         */\n        if (this.currentViewport.equals(viewport) === false) {\n            this.context.viewport(viewport.x, viewport.y, viewport.z, viewport.w);\n            this.currentViewport.copy(viewport);\n        }\n        return this;\n    }\n    reset() {\n        for (let i = 0; i < this.enabledAttributes.length; i++) {\n            if (this.enabledAttributes[i] === 1) {\n                this.context.disableVertexAttribArray(i);\n                this.enabledAttributes[i] = 0;\n            }\n        }\n        this.capabilities = {};\n        this.compressedTextureFormats = null;\n        this.currentTextureSlot = null;\n        this.currentBoundTextures = {};\n        this.currentProgram = null;\n        this.currentBlending = null;\n        this.currentFlipSided = null;\n        this.currentCullFace = null;\n        this.buffers.color.reset();\n        this.buffers.depth.reset();\n        this.buffers.stencil.reset();\n        return this;\n    }\n    createTexture(type, target, count) {\n        const gl = this.context;\n        /**\n         * 4 is required to match default unpack alignment of 4.\n         * @type {Uint8Array}\n         */\n        const data = new Uint8Array(4);\n        const texture = gl.createTexture();\n        gl.bindTexture(type, texture);\n        gl.texParameteri(type, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(type, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        for (let i = 0; i < count; i++) {\n            gl.texImage2D(target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\n        }\n        return texture;\n    }\n}\n","import { LinearFilter, NearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, ClampToEdgeWrapping, NearestMipMapLinearFilter, NearestMipMapNearestFilter, } from \"../../constants\";\nimport { MathUtil } from \"../../math/Math\";\nimport { VideoTexture } from \"../../textures/VideoTexture\";\nimport { WebGLRenderTargetCube } from \"../WebGLRenderTargetCube\";\nimport { DepthTexture } from \"../../textures/DepthTexture\";\nimport { DataTexture } from \"../../textures/DataTexture\";\nimport { CompressedTexture } from \"../../textures/CompressedTexture\";\nfunction clampToMaxSize(image, maxSize) {\n    if (image.width > maxSize || image.height > maxSize) {\n        const scale = maxSize / Math.max(image.width, image.height);\n        if (image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap) {\n            // Warning: Scaling through the canvas will only work with images that use\n            // premultiplied alpha.\n            const canvas = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\");\n            canvas.width = Math.max(Math.floor(image.width * scale), 1);\n            canvas.height = Math.max(Math.floor(image.height * scale), 1);\n            const context = canvas.getContext(\"2d\");\n            context.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n            console.warn(\"THREE.WebGLRenderer: image is too big (\" +\n                image.width +\n                \"x\" +\n                image.height +\n                \"). Resized to \" +\n                canvas.width +\n                \"x\" +\n                canvas.height, image);\n            return canvas;\n        }\n        else {\n            // https://github.com/mrdoob/three.js/issues/13454#issuecomment-369244843\n            const width = Math.max(Math.floor(image.width * scale), 1);\n            const height = Math.max(Math.floor(image.height * scale), 1);\n            console.warn(\"THREE.WebGLRenderer: image is too big (\" + image.width + \"x\" + image.height + \").\", image);\n        }\n    }\n    return image;\n}\nfunction isPowerOfTwo(image) {\n    return MathUtil.isPowerOfTwo(image.width) && MathUtil.isPowerOfTwo(image.height);\n}\nfunction makePowerOfTwo(image) {\n    if (image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap) {\n        const canvas = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\");\n        canvas.width = MathUtil.floorPowerOfTwo(image.width);\n        canvas.height = MathUtil.floorPowerOfTwo(image.height);\n        const context = canvas.getContext(\"2d\");\n        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n        console.warn(\"THREE.WebGLRenderer: image is not power of two (\" +\n            image.width +\n            \"x\" +\n            image.height +\n            \"). Resized to \" +\n            canvas.width +\n            \"x\" +\n            canvas.height, image);\n        return canvas;\n    }\n    return image;\n}\nfunction textureNeedsPowerOfTwo(texture) {\n    return (texture.wrapS !== ClampToEdgeWrapping ||\n        texture.wrapT !== ClampToEdgeWrapping ||\n        (texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter));\n}\nfunction textureNeedsGenerateMipmaps(texture, isPowerOfTwo) {\n    return (texture.generateMipmaps &&\n        isPowerOfTwo &&\n        texture.minFilter !== NearestFilter &&\n        texture.minFilter !== LinearFilter);\n}\nexport class WebGLTextures {\n    constructor(context, extensions, state, properties, capabilities, utils, infoMemory, infoRender) {\n        this.videoTextures = {};\n        this.onTextureDispose = (event) => {\n            const texture = event.target;\n            texture.removeEventListener(\"dispose\", this.onTextureDispose);\n            this.deallocateTexture(texture);\n            if (texture instanceof VideoTexture) {\n                delete this.videoTextures[texture.id];\n            }\n            this.infoMemory.textures--;\n        };\n        this.onRenderTargetDispose = (event) => {\n            const renderTarget = event.target;\n            renderTarget.removeEventListener(\"dispose\", this.onRenderTargetDispose);\n            this.deallocateRenderTarget(renderTarget);\n            this.infoMemory.textures--;\n        };\n        this.context = context;\n        this.extensions = extensions;\n        this.properties = properties;\n        this.capabilities = capabilities;\n        this.utils = utils;\n        this.state = state;\n        this.infoMemory = infoMemory;\n        this.infoRender = infoRender;\n    }\n    filterFallback(f) {\n        if (f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter) {\n            return this.context.NEAREST;\n        }\n        return this.context.LINEAR;\n    }\n    deallocateTexture(texture) {\n        const textureProperties = this.properties.get(texture);\n        if (texture.image && textureProperties.__image__webglTextureCube) {\n            // cube texture\n            this.context.deleteTexture(textureProperties.__image__webglTextureCube);\n        }\n        else {\n            // 2D texture\n            if (textureProperties.__webglInit === undefined)\n                return;\n            this.context.deleteTexture(textureProperties.__webglTexture);\n        }\n        // remove all webgl properties\n        this.properties.remove(texture);\n    }\n    deallocateRenderTarget(renderTarget) {\n        const renderTargetProperties = this.properties.get(renderTarget);\n        const textureProperties = this.properties.get(renderTarget.texture);\n        if (!renderTarget)\n            return;\n        if (textureProperties.__webglTexture !== undefined) {\n            this.context.deleteTexture(textureProperties.__webglTexture);\n        }\n        if (renderTarget.depthTexture) {\n            renderTarget.depthTexture.dispose();\n        }\n        if (renderTarget instanceof WebGLRenderTargetCube) {\n            for (let i = 0; i < 6; i++) {\n                this.context.deleteFramebuffer(renderTargetProperties.__webglFramebuffer[i]);\n                if (renderTargetProperties.__webglDepthbuffer) {\n                    this.context.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer[i]);\n                }\n            }\n        }\n        else {\n            this.context.deleteFramebuffer(renderTargetProperties.__webglFramebuffer);\n            if (renderTargetProperties.__webglDepthbuffer) {\n                this.context.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer);\n            }\n        }\n        this.properties.remove(renderTarget.texture);\n        this.properties.remove(renderTarget);\n    }\n    updateVideoTexture(texture) {\n        const id = texture.id;\n        const frame = this.infoRender.frame;\n        // Check the last frame we updated the VideoTexture\n        if (this.videoTextures[id] !== frame) {\n            this.videoTextures[id] = frame;\n            texture.update();\n        }\n    }\n    uploadTexture(textureProperties, texture, slot) {\n        const gl = this.context;\n        const state = this.state;\n        const utils = this.utils;\n        if (textureProperties.__webglInit === undefined) {\n            textureProperties.__webglInit = true;\n            texture.addEventListener(\"dispose\", this.onTextureDispose);\n            textureProperties.__webglTexture = gl.createTexture();\n            this.infoMemory.textures++;\n        }\n        state.activeTexture(gl.TEXTURE0 + slot);\n        state.bindTexture(gl.TEXTURE_2D, textureProperties.__webglTexture);\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, texture.flipY);\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha);\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, texture.unpackAlignment);\n        /**\n         *  texture.image  HTMLTextureSource?\n         * Need to be fixed\n         */\n        let image = clampToMaxSize(texture.image, this.capabilities.maxTextureSize);\n        if (textureNeedsPowerOfTwo(texture) && isPowerOfTwo(image) === false) {\n            /**\n             *  texture.image  HTMLTextureSource?\n             *  WebGLRenderer.setProgram  SkinnedMesh  Skeleton  boneTexture 2\n             *  DataTexture  CanvasTexture  VideoTexture\n             *\n             * Edited: \n             */\n            image = makePowerOfTwo(image);\n        }\n        const isPowerOfTwoImage = isPowerOfTwo(image);\n        let glFormat = utils.convert(texture.format), glType = utils.convert(texture.type);\n        this.setTextureParameters(gl.TEXTURE_2D, texture, isPowerOfTwoImage);\n        let mipmap, mipmaps = texture.mipmaps;\n        if (texture instanceof DepthTexture) {\n            // populate depth texture with dummy data\n            let internalFormat = gl.DEPTH_COMPONENT;\n            /*\n            if ( texture.type === FloatType ) {\n                if ( ! _isWebGL2 ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\n                internalFormat = gl.DEPTH_COMPONENT32F;\n            } else if ( _isWebGL2 ) {\n                // WebGL 2.0 requires signed internalformat for glTexImage2D\n                internalFormat = gl.DEPTH_COMPONENT16;\n            }\n            */\n            if (texture.format === DepthFormat && internalFormat === gl.DEPTH_COMPONENT) {\n                // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n                // DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n                // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n                if (texture.type !== UnsignedShortType && texture.type !== UnsignedIntType) {\n                    console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\");\n                    texture.type = UnsignedShortType;\n                    glType = utils.convert(texture.type);\n                }\n            }\n            // Depth stencil textures need the DEPTH_STENCIL internal format\n            // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n            if (texture.format === DepthStencilFormat) {\n                internalFormat = gl.DEPTH_STENCIL;\n                // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n                // DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n                // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n                if (texture.type !== UnsignedInt248Type) {\n                    console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\");\n                    texture.type = UnsignedInt248Type;\n                    glType = utils.convert(texture.type);\n                }\n            }\n            state.texImage2D(gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null);\n        }\n        else if (texture instanceof DataTexture) {\n            // use manually created mipmaps if available\n            // if there are no manual mipmaps\n            // set 0 level mipmap and then use GL to generate other mipmap levels\n            if (mipmaps.length > 0 && isPowerOfTwoImage) {\n                for (let i = 0, il = mipmaps.length; i < il; i++) {\n                    mipmap = mipmaps[i];\n                    state.texImage2D(gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n                }\n                texture.generateMipmaps = false;\n            }\n            else {\n                state.texImage2D(gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data);\n            }\n        }\n        else if (texture instanceof CompressedTexture) {\n            for (let i = 0, il = mipmaps.length; i < il; i++) {\n                mipmap = mipmaps[i];\n                if (texture.format !== RGBAFormat && texture.format !== RGBFormat) {\n                    if (state.getCompressedTextureFormats().indexOf(glFormat) > -1) {\n                        state.compressedTexImage2D(gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data);\n                    }\n                    else {\n                        console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\");\n                    }\n                }\n                else {\n                    state.texImage2D(gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n                }\n            }\n        }\n        else {\n            // regular Texture (image, video, canvas)\n            // use manually created mipmaps if available\n            // if there are no manual mipmaps\n            // set 0 level mipmap and then use GL to generate other mipmap levels\n            if (mipmaps.length > 0 && isPowerOfTwoImage) {\n                for (let i = 0, il = mipmaps.length; i < il; i++) {\n                    mipmap = mipmaps[i];\n                    state.texImage2D(gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap);\n                }\n                texture.generateMipmaps = false;\n            }\n            else {\n                /**\n                 * WHY as HTMLTextureSource ????\n                 */\n                state.texImage2D(gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image);\n            }\n        }\n        if (textureNeedsGenerateMipmaps(texture, isPowerOfTwoImage))\n            gl.generateMipmap(gl.TEXTURE_2D);\n        textureProperties.__version = texture.version;\n        //if ( texture.onUpdate ) texture.onUpdate( texture );\n    }\n    setTexture2D(texture, slot) {\n        const textureProperties = this.properties.get(texture);\n        if (texture instanceof VideoTexture) {\n            this.updateVideoTexture(texture);\n        }\n        if (texture.version > 0 && textureProperties.__version !== texture.version) {\n            /**\n             * version > 0 needsUpdatetrueTexture\n             * Three.jsCanvasTexture VideoTextureSkeleton.boneTextureDataTexture\n             *  uploadTexture  texture  CanvasTexture| VideoTexture | DataTexture \n             */\n            const image = texture.image;\n            if (image === undefined) {\n                console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\", texture);\n            }\n            else if (image.complete === false) {\n                console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\", texture);\n            }\n            else {\n                this.uploadTexture(textureProperties, texture, slot);\n                return;\n            }\n        }\n        this.state.activeTexture(this.context.TEXTURE0 + slot);\n        this.state.bindTexture(this.context.TEXTURE_2D, textureProperties.__webglTexture);\n    }\n    setTextureCube(texture, slot) {\n        const gl = this.context;\n        const state = this.state;\n        const utils = this.utils;\n        const textureProperties = this.properties.get(texture);\n        if (texture.image.length === 6) {\n            if (texture.version > 0 && textureProperties.__version !== texture.version) {\n                if (!textureProperties.__image__webglTextureCube) {\n                    texture.addEventListener(\"dispose\", this.onTextureDispose);\n                    textureProperties.__image__webglTextureCube = gl.createTexture();\n                    this.infoMemory.textures++;\n                }\n                state.activeTexture(gl.TEXTURE0 + slot);\n                state.bindTexture(gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube);\n                gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, texture.flipY);\n                const isCompressed = texture && texture instanceof CompressedTexture;\n                const isDataTexture = texture.image[0] && texture.image[0] instanceof DataTexture;\n                const cubeImage = [];\n                for (let i = 0; i < 6; i++) {\n                    if (!isCompressed && !isDataTexture) {\n                        cubeImage[i] = clampToMaxSize(texture.image[i], this.capabilities.maxCubemapSize);\n                    }\n                    else {\n                        // CubeTexture with DataTexture or CompressedTexture\n                        cubeImage[i] = isDataTexture ? texture.image[i].image : texture.image[i];\n                    }\n                }\n                const image = cubeImage[0], isPowerOfTwoImage = isPowerOfTwo(image), glFormat = utils.convert(texture.format), glType = utils.convert(texture.type);\n                this.setTextureParameters(gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage);\n                for (let i = 0; i < 6; i++) {\n                    if (!isCompressed) {\n                        // CubeTexture\n                        if (isDataTexture) {\n                            state.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[i].width, cubeImage[i].height, 0, glFormat, glType, cubeImage[i].data);\n                        }\n                        else {\n                            state.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[i]);\n                        }\n                    }\n                    else {\n                        let mipmap;\n                        //  as any\n                        const mipmaps = cubeImage[i].mipmaps;\n                        for (let j = 0, jl = mipmaps.length; j < jl; j++) {\n                            mipmap = mipmaps[j];\n                            if (texture.format !== RGBAFormat && texture.format !== RGBFormat) {\n                                if (state.getCompressedTextureFormats().indexOf(glFormat) > -1) {\n                                    state.compressedTexImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data);\n                                }\n                                else {\n                                    console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\");\n                                }\n                            }\n                            else {\n                                state.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n                            }\n                        }\n                    }\n                }\n                if (textureNeedsGenerateMipmaps(texture, isPowerOfTwoImage)) {\n                    gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\n                }\n                textureProperties.__version = texture.version;\n                //if ( texture.onUpdate ) texture.onUpdate( texture );\n            }\n            else {\n                state.activeTexture(gl.TEXTURE0 + slot);\n                state.bindTexture(gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube);\n            }\n        }\n    }\n    /**\n     * texture from WebGLRenderTargetCube\n     * @param texture\n     * @param slot\n     */\n    setTextureCubeDynamic(texture, slot) {\n        this.state.activeTexture(this.context.TEXTURE0 + slot);\n        this.state.bindTexture(this.context.TEXTURE_CUBE_MAP, this.properties.get(texture).__webglTexture);\n    }\n    setTextureParameters(textureType, texture, isPowerOfTwoImage) {\n        const gl = this.context;\n        const utils = this.utils;\n        const extensions = this.extensions;\n        const properties = this.properties;\n        let extension;\n        if (isPowerOfTwoImage) {\n            gl.texParameteri(textureType, gl.TEXTURE_WRAP_S, utils.convert(texture.wrapS));\n            gl.texParameteri(textureType, gl.TEXTURE_WRAP_T, utils.convert(texture.wrapT));\n            gl.texParameteri(textureType, gl.TEXTURE_MAG_FILTER, utils.convert(texture.magFilter));\n            gl.texParameteri(textureType, gl.TEXTURE_MIN_FILTER, utils.convert(texture.minFilter));\n        }\n        else {\n            gl.texParameteri(textureType, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(textureType, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            if (texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping) {\n                console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\", texture);\n            }\n            gl.texParameteri(textureType, gl.TEXTURE_MAG_FILTER, this.filterFallback(texture.magFilter));\n            gl.texParameteri(textureType, gl.TEXTURE_MIN_FILTER, this.filterFallback(texture.minFilter));\n            if (texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter) {\n                console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\", texture);\n            }\n        }\n        extension = extensions.get(\"EXT_texture_filter_anisotropic\");\n        if (extension) {\n            if (texture.type === FloatType && extensions.get(\"OES_texture_float_linear\") === null)\n                return;\n            if (texture.type === HalfFloatType && extensions.get(\"OES_texture_half_float_linear\") === null)\n                return;\n            if (texture.anisotropy > 1 || properties.get(texture).__currentAnisotropy) {\n                gl.texParameterf(textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(texture.anisotropy, this.capabilities.getMaxAnisotropy()));\n                properties.get(texture).__currentAnisotropy = texture.anisotropy;\n            }\n        }\n    }\n    /****************************  Render targets ***********************/\n    // Setup storage for target texture and bind it to correct framebuffer\n    setupFrameBufferTexture(framebuffer, renderTarget, attachment, textureTarget) {\n        const glFormat = this.utils.convert(renderTarget.texture.format);\n        const glType = this.utils.convert(renderTarget.texture.type);\n        this.state.texImage2D(textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null);\n        const gl = this.context;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, textureTarget, this.properties.get(renderTarget.texture).__webglTexture, 0);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n    // Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n    setupRenderBufferStorage(renderbuffer, renderTarget) {\n        const gl = this.context;\n        gl.bindRenderbuffer(gl.RENDERBUFFER, renderbuffer);\n        if (renderTarget.depthBuffer && !renderTarget.stencilBuffer) {\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, renderbuffer);\n        }\n        else if (renderTarget.depthBuffer && renderTarget.stencilBuffer) {\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, renderbuffer);\n        }\n        else {\n            // FIXME: We don't support !depth !stencil\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.RGBA4, renderTarget.width, renderTarget.height);\n        }\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n    }\n    // Setup resources for a Depth Texture for a FBO (needs an extension)\n    setupDepthTexture(framebuffer, renderTarget) {\n        const gl = this.context;\n        const isCube = renderTarget && renderTarget instanceof WebGLRenderTargetCube;\n        if (isCube) {\n            throw new Error(\"Depth Texture with cube render targets is not supported\");\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n        if (!(renderTarget.depthTexture && renderTarget.depthTexture instanceof DepthTexture)) {\n            throw new Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");\n        }\n        // upload an empty depth texture with framebuffer size\n        if (!this.properties.get(renderTarget.depthTexture).__webglTexture ||\n            renderTarget.depthTexture.image.width !== renderTarget.width ||\n            renderTarget.depthTexture.image.height !== renderTarget.height) {\n            renderTarget.depthTexture.image.width = renderTarget.width;\n            renderTarget.depthTexture.image.height = renderTarget.height;\n            renderTarget.depthTexture.needsUpdate = true;\n        }\n        this.setTexture2D(renderTarget.depthTexture, 0);\n        const webglDepthTexture = this.properties.get(renderTarget.depthTexture).__webglTexture;\n        if (renderTarget.depthTexture.format === DepthFormat) {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, webglDepthTexture, 0);\n        }\n        else if (renderTarget.depthTexture.format === DepthStencilFormat) {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.TEXTURE_2D, webglDepthTexture, 0);\n        }\n        else {\n            throw new Error(\"Unknown depthTexture format\");\n        }\n    }\n    // Setup GL resources for a non-texture depth buffer\n    setupDepthRenderbuffer(renderTarget) {\n        const gl = this.context;\n        const renderTargetProperties = this.properties.get(renderTarget);\n        const isCube = renderTarget instanceof WebGLRenderTargetCube;\n        if (renderTarget.depthTexture) {\n            if (isCube)\n                throw new Error(\"target.depthTexture not supported in Cube render targets\");\n            this.setupDepthTexture(renderTargetProperties.__webglFramebuffer, renderTarget);\n        }\n        else {\n            if (isCube) {\n                renderTargetProperties.__webglDepthbuffer = [];\n                for (let i = 0; i < 6; i++) {\n                    gl.bindFramebuffer(gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[i]);\n                    renderTargetProperties.__webglDepthbuffer[i] = gl.createRenderbuffer();\n                    this.setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer[i], renderTarget);\n                }\n            }\n            else {\n                gl.bindFramebuffer(gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer);\n                renderTargetProperties.__webglDepthbuffer = gl.createRenderbuffer();\n                this.setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer, renderTarget);\n            }\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n    // Set up GL resources for the render target\n    setupRenderTarget(renderTarget) {\n        const gl = this.context;\n        const state = this.state;\n        const properties = this.properties;\n        const renderTargetProperties = properties.get(renderTarget);\n        const textureProperties = properties.get(renderTarget.texture);\n        renderTarget.addEventListener(\"dispose\", this.onRenderTargetDispose);\n        textureProperties.__webglTexture = gl.createTexture();\n        this.infoMemory.textures++;\n        const isCube = renderTarget instanceof WebGLRenderTargetCube;\n        const isTargetPowerOfTwo = isPowerOfTwo(renderTarget);\n        // Setup framebuffer\n        if (isCube) {\n            renderTargetProperties.__webglFramebuffer = [];\n            for (let i = 0; i < 6; i++) {\n                renderTargetProperties.__webglFramebuffer[i] = gl.createFramebuffer();\n            }\n        }\n        else {\n            renderTargetProperties.__webglFramebuffer = gl.createFramebuffer();\n        }\n        // Setup color buffer\n        if (isCube) {\n            state.bindTexture(gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture);\n            this.setTextureParameters(gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo);\n            for (let i = 0; i < 6; i++) {\n                this.setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer[i], renderTarget, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + i);\n            }\n            if (textureNeedsGenerateMipmaps(renderTarget.texture, isTargetPowerOfTwo)) {\n                gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\n            }\n            state.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n        }\n        else {\n            state.bindTexture(gl.TEXTURE_2D, textureProperties.__webglTexture);\n            this.setTextureParameters(gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo);\n            this.setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer, renderTarget, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D);\n            if (textureNeedsGenerateMipmaps(renderTarget.texture, isTargetPowerOfTwo)) {\n                gl.generateMipmap(gl.TEXTURE_2D);\n            }\n            state.bindTexture(gl.TEXTURE_2D, null);\n        }\n        // Setup depth and stencil buffers\n        if (renderTarget.depthBuffer) {\n            this.setupDepthRenderbuffer(renderTarget);\n        }\n    }\n    updateRenderTargetMipmap(renderTarget) {\n        const gl = this.context;\n        const state = this.state;\n        const properties = this.properties;\n        const texture = renderTarget.texture;\n        const isTargetPowerOfTwo = isPowerOfTwo(renderTarget);\n        if (textureNeedsGenerateMipmaps(texture, isTargetPowerOfTwo)) {\n            const target = renderTarget instanceof WebGLRenderTargetCube ? gl.TEXTURE_CUBE_MAP : gl.TEXTURE_2D;\n            const webglTexture = properties.get(texture).__webglTexture;\n            state.bindTexture(target, webglTexture);\n            gl.generateMipmap(target);\n            state.bindTexture(target, null);\n        }\n    }\n}\n","import { CubeTexture } from \"../../textures/CubeTexture\";\nimport { Texture } from \"../../textures/Texture\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { Matrix2 } from \"../../math/Matrix2\";\nimport { Matrix3 } from \"../../math/Matrix3\";\nimport { Matrix4 } from \"../../math/Matrix4\";\nconst emptyTexture = new Texture();\nconst emptyCubeTexture = new CubeTexture();\nclass UniformSetter {\n    constructor(renderer, id, activeInfo, addr) {\n        this.addr = 0;\n        this.size = 0;\n        this.setValue1f = (v) => {\n            this.context.uniform1f(this.addr, v);\n        };\n        this.setValue1i = (v) => {\n            this.context.uniform1i(this.addr, v);\n        };\n        this.setValue2fv = (v) => {\n            if (v instanceof Float32Array || Array.isArray(v)) {\n                this.context.uniform2fv(this.addr, v);\n            }\n            else {\n                this.context.uniform2f(this.addr, v.x, v.y);\n            }\n        };\n        this.setValue3fv = (v) => {\n            if (v instanceof Float32Array || Array.isArray(v)) {\n                this.context.uniform3fv(this.addr, v);\n            }\n            else if (v instanceof Vector3) {\n                this.context.uniform3f(this.addr, v.x, v.y, v.z);\n            }\n            else {\n                this.context.uniform3f(this.addr, v.r, v.g, v.b);\n            }\n        };\n        this.setValue4fv = (v) => {\n            if (v instanceof Float32Array || Array.isArray(v)) {\n                this.context.uniform4fv(this.addr, v);\n            }\n            else {\n                this.context.uniform4f(this.addr, v.x, v.y, v.z, v.w);\n            }\n        };\n        this.setValue2fm = (v) => {\n            if (v instanceof Matrix2) {\n                UniformSetter.mat2array.set(v.elements);\n                this.context.uniformMatrix2fv(this.addr, false, UniformSetter.mat2array);\n            }\n            else {\n                this.context.uniformMatrix2fv(this.addr, false, v);\n            }\n        };\n        this.setValue3fm = (v) => {\n            if (v instanceof Matrix3) {\n                UniformSetter.mat3array.set(v.elements);\n                this.context.uniformMatrix3fv(this.addr, false, UniformSetter.mat3array);\n            }\n            else {\n                this.context.uniformMatrix3fv(this.addr, false, v);\n            }\n        };\n        this.setValue4fm = (v) => {\n            if (v instanceof Matrix4) {\n                UniformSetter.mat4array.set(v.elements);\n                this.context.uniformMatrix4fv(this.addr, false, UniformSetter.mat4array);\n            }\n            else {\n                this.context.uniformMatrix4fv(this.addr, false, v);\n            }\n        };\n        this.setValueT1 = (v) => {\n            const unit = this.renderer.allocTextureUnit();\n            this.context.uniform1i(this.addr, unit);\n            this.renderer.setTexture2D(v || emptyTexture, unit);\n        };\n        this.setValueT6 = (v) => {\n            const unit = this.renderer.allocTextureUnit();\n            this.context.uniform1i(this.addr, unit);\n            this.renderer.setTextureCube(v || emptyCubeTexture, unit);\n        };\n        this.setValue2iv = (v) => {\n            this.context.uniform2iv(this.addr, v);\n        };\n        this.setValue3iv = (v) => {\n            this.context.uniform3iv(this.addr, v);\n        };\n        this.setValue4iv = (v) => {\n            this.context.uniform4iv(this.addr, v);\n        };\n        this.setValue1fv = (v) => {\n            this.context.uniform1fv(this.addr, v);\n        };\n        this.setValue1iv = (v) => {\n            this.context.uniform1iv(this.addr, v);\n        };\n        this.setValueV2a = (v) => {\n            this.context.uniform2fv(this.addr, UniformSetter.flatten(v, this.size, 2));\n        };\n        this.setValueV3a = (v) => {\n            this.context.uniform3fv(this.addr, UniformSetter.flatten(v, this.size, 3));\n        };\n        this.setValueV4a = (v) => {\n            this.context.uniform4fv(this.addr, UniformSetter.flatten(v, this.size, 4));\n        };\n        this.setValueM2a = (v) => {\n            this.context.uniformMatrix2fv(this.addr, false, UniformSetter.flatten(v, this.size, 4));\n        };\n        this.setValueM3a = (v) => {\n            this.context.uniformMatrix3fv(this.addr, false, UniformSetter.flatten(v, this.size, 9));\n        };\n        this.setValueM4a = (v) => {\n            this.context.uniformMatrix4fv(this.addr, false, UniformSetter.flatten(v, this.size, 16));\n        };\n        this.setValueT1a = (v) => {\n            const n = v.length, units = this.allocTexUnits(n);\n            this.context.uniform1iv(this.addr, units);\n            for (let i = 0; i !== n; i++) {\n                this.renderer.setTexture2D(v[i] || emptyTexture, units[i]);\n            }\n        };\n        this.setValueT6a = (v) => {\n            const n = v.length, units = this.allocTexUnits(n);\n            this.context.uniform1iv(this.addr, units);\n            for (let i = 0; i !== n; i++) {\n                this.renderer.setTextureCube(v[i] || emptyCubeTexture, units[i]);\n            }\n        };\n        this.renderer = renderer;\n        this.context = renderer.context;\n        this.id = id;\n        this.activeInfo = activeInfo;\n        this.addr = addr;\n        this.size = activeInfo.size;\n    }\n    getSingularSetter() {\n        switch (this.activeInfo.type) {\n            case 0x1406:\n                return this.setValue1f; // FLOAT\n            case 0x8b50:\n                return this.setValue2fv; // _VEC2\n            case 0x8b51:\n                return this.setValue3fv; // _VEC3\n            case 0x8b52:\n                return this.setValue4fv; // _VEC4\n            case 0x8b5a:\n                return this.setValue2fm; // _MAT2\n            case 0x8b5b:\n                return this.setValue3fm; // _MAT3\n            case 0x8b5c:\n                return this.setValue4fm; // _MAT4\n            case 0x8b5e:\n            case 0x8d66:\n                return this.setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n            case 0x8b60:\n                return this.setValueT6; // SAMPLER_CUBE\n            case 0x1404:\n            case 0x8b56:\n                return this.setValue1i; // INT, BOOL\n            case 0x8b53:\n            case 0x8b57:\n                return this.setValue2iv; // _VEC2\n            case 0x8b54:\n            case 0x8b58:\n                return this.setValue3iv; // _VEC3\n            case 0x8b55:\n            case 0x8b59:\n                return this.setValue4iv; // _VEC4\n        }\n        throw new Error(`Unknown type for getSingularSetter: ${this.activeInfo.type}`);\n    }\n    static flatten(array, nBlocks, blockSize) {\n        if (array instanceof Float32Array) {\n            return array;\n        }\n        const n = nBlocks * blockSize;\n        let r = UniformSetter.arrayCacheF32[n];\n        if (r === undefined) {\n            r = new Float32Array(n);\n            UniformSetter.arrayCacheF32[n] = r;\n        }\n        if (nBlocks !== 0) {\n            for (let i = 0, offset = 0; i !== nBlocks; i++) {\n                array[i].toArray(r, offset);\n                offset += blockSize;\n            }\n        }\n        return r;\n    }\n    allocTexUnits(n) {\n        let r = UniformSetter.arrayCacheI32[n];\n        if (r === undefined) {\n            r = new Int32Array(n);\n            UniformSetter.arrayCacheI32[n] = r;\n        }\n        for (let i = 0; i !== n; i++) {\n            r[i] = this.renderer.allocTextureUnit();\n        }\n        return r;\n    }\n    getPureArraySetter() {\n        switch (this.activeInfo.type) {\n            case 0x1406:\n                return this.setValue1fv; // FLOAT\n            case 0x8b50:\n                return this.setValueV2a; // _VEC2\n            case 0x8b51:\n                return this.setValueV3a; // _VEC3\n            case 0x8b52:\n                return this.setValueV4a; // _VEC4\n            case 0x8b5a:\n                return this.setValueM2a; // _MAT2\n            case 0x8b5b:\n                return this.setValueM3a; // _MAT3\n            case 0x8b5c:\n                return this.setValueM4a; // _MAT4\n            case 0x8b5e:\n                return this.setValueT1a; // SAMPLER_2D\n            case 0x8b60:\n                return this.setValueT6a; // SAMPLER_CUBE\n            case 0x1404:\n            case 0x8b56:\n                return this.setValue1iv; // INT, BOOL\n            case 0x8b53:\n            case 0x8b57:\n                return this.setValue2iv; // _VEC2\n            case 0x8b54:\n            case 0x8b58:\n                return this.setValue3iv; // _VEC3\n            case 0x8b55:\n            case 0x8b59:\n                return this.setValue4iv; // _VEC4\n        }\n        throw new Error(`Unknown type for getSingularSetter: ${this.activeInfo.type}`);\n    }\n}\nUniformSetter.mat2array = new Float32Array(4);\nUniformSetter.mat3array = new Float32Array(9);\nUniformSetter.mat4array = new Float32Array(16);\nUniformSetter.arrayCacheF32 = [];\nUniformSetter.arrayCacheI32 = [];\nclass SingleUniformSetter extends UniformSetter {\n    setValue(value) {\n        super.getSingularSetter()(value);\n    }\n}\nclass PureArrayUniformSetter extends UniformSetter {\n    setValue(value) {\n        super.getPureArraySetter()(value);\n    }\n}\nclass UniformContainer {\n    constructor() {\n        this.seq = [];\n        this.map = {};\n    }\n}\nclass StructuredUniformSetter extends UniformContainer {\n    constructor(id) {\n        super();\n        this.id = id;\n    }\n    setValue(value) {\n        // Note: Don't need an extra 'renderer' parameter, since samplers\n        // are not allowed in structured uniforms.\n        for (let i = 0, n = this.seq.length; i !== n; i++) {\n            const u = this.seq[i];\n            const v = value[u.id];\n            /**\n             * Well the following is the actually type logic...\n             * if(u instanceof StructuredUniformSetter) {\n             *     u.setValue(v as {[key: string]: AllUniformType;});\n             * } else {\n             *     u.setValue(v as AllUniformType);\n             * }\n             */\n            u.setValue(v);\n        }\n    }\n}\nconst RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\nexport class WebGLUniformsWrapper extends UniformContainer {\n    constructor(renderer, program) {\n        super();\n        this.renderer = renderer;\n        this.program = program;\n        const gl = this.renderer.context;\n        const n = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n        for (let i = 0; i < n; ++i) {\n            const info = gl.getActiveUniform(program, i), path = info.name, addr = gl.getUniformLocation(program, path);\n            this.parseUniform(info, addr, this);\n        }\n    }\n    static addUniform(container, uniformObject) {\n        container.seq.push(uniformObject);\n        container.map[uniformObject.id] = uniformObject;\n    }\n    parseUniform(activeInfo, addr, container) {\n        /**\n         * Hard to explain, take an example.\n         * When there is a single basic type uniform the typeInfo will be [\\d\\w_]+\n         * and when there is an array of basic type uniform the typeInfo will be [\\d\\w_]+[0]\n         * So this is how matchEnd + 2 === pathLength works\n         *\n         * when path is \"spotLights[0].direction\"\n         * the first match will get [ \"spotLights[\", \"spotLights\", undefined, \"[\" ] lastIndex == 11\n         * This round the regex first get matchEnd + 2 !== pathLength, then we can get this is a\n         * StructuredUniformSetter, So all the thing dealing in else bracket is about StructuredUniformSetter\n         * The Setter from the map is sure to be StructuredUniformSetter.\n         * So we use as StructuredUniformSetter\n         */\n        const path = activeInfo.name;\n        const pathLength = path.length;\n        // reset RegExp object, because of the early exit of a previous run\n        RePathPart.lastIndex = 0;\n        for (;;) {\n            const match = RePathPart.exec(path);\n            const matchEnd = RePathPart.lastIndex;\n            let id = match[1];\n            const idIsIndex = match[2] === \"]\";\n            const subscript = match[3];\n            if (idIsIndex)\n                id = parseInt(id, 10); // convert to integer\n            if (subscript === undefined || (subscript === \"[\" && matchEnd + 2 === pathLength)) {\n                // bare name or \"pure\" bottom-level array \"[0]\" suffix\n                WebGLUniformsWrapper.addUniform(container, subscript === undefined\n                    ? new SingleUniformSetter(this.renderer, id, activeInfo, addr)\n                    : new PureArrayUniformSetter(this.renderer, id, activeInfo, addr));\n                break;\n            }\n            else {\n                // step into inner node / create it in case it doesn't exist\n                const map = container.map;\n                let next = map[id];\n                if (next === undefined) {\n                    next = new StructuredUniformSetter(id);\n                    WebGLUniformsWrapper.addUniform(container, next);\n                }\n                container = next;\n            }\n        }\n    }\n    setValue(name, value) {\n        const u = this.map[name];\n        if (u !== undefined) {\n            u.setValue(value);\n        }\n    }\n    setOptional(object, name) {\n        const v = object[name];\n        if (v !== undefined) {\n            this.setValue(name, v);\n        }\n    }\n    static upload(seq, values) {\n        for (let i = 0, n = seq.length; i !== n; i++) {\n            const u = seq[i], v = values[u.id];\n            if (v.needsUpdate !== false) {\n                // note: always updating when .needsUpdate is undefined\n                u.setValue(v.value);\n            }\n        }\n    }\n    static seqWithValue(seq, values) {\n        const r = [];\n        for (let i = 0, n = seq.length; i !== n; i++) {\n            const u = seq[i];\n            if (u.id in values)\n                r.push(u);\n        }\n        return r;\n    }\n}\n","import { AddEquation, AlphaFormat, ByteType, ClampToEdgeWrapping, DepthFormat, DepthStencilFormat, DstAlphaFactor, DstColorFactor, FloatType, HalfFloatType, IntType, LinearFilter, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LuminanceAlphaFormat, LuminanceFormat, MaxEquation, MinEquation, MirroredRepeatWrapping, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, RGBAFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBFormat, RGB_ETC1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RepeatWrapping, ReverseSubtractEquation, ShortType, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, SubtractEquation, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShort565Type, UnsignedShortType, ZeroFactor, } from \"../../constants\";\nexport class WebGLUtils {\n    constructor(context, extensions) {\n        this.context = context;\n        this.extensions = extensions;\n    }\n    convert(parameter) {\n        const extensions = this.extensions;\n        const context = this.context;\n        let extension;\n        if (parameter === RepeatWrapping) {\n            return context.REPEAT;\n        }\n        if (parameter === ClampToEdgeWrapping) {\n            return context.CLAMP_TO_EDGE;\n        }\n        if (parameter === MirroredRepeatWrapping) {\n            return context.MIRRORED_REPEAT;\n        }\n        if (parameter === NearestFilter) {\n            return context.NEAREST;\n        }\n        if (parameter === NearestMipMapNearestFilter) {\n            return context.NEAREST_MIPMAP_NEAREST;\n        }\n        if (parameter === NearestMipMapLinearFilter) {\n            return context.NEAREST_MIPMAP_LINEAR;\n        }\n        if (parameter === LinearFilter) {\n            return context.LINEAR;\n        }\n        if (parameter === LinearMipMapNearestFilter) {\n            return context.LINEAR_MIPMAP_NEAREST;\n        }\n        if (parameter === LinearMipMapLinearFilter) {\n            return context.LINEAR_MIPMAP_LINEAR;\n        }\n        if (parameter === UnsignedByteType) {\n            return context.UNSIGNED_BYTE;\n        }\n        if (parameter === UnsignedShort4444Type) {\n            return context.UNSIGNED_SHORT_4_4_4_4;\n        }\n        if (parameter === UnsignedShort5551Type) {\n            return context.UNSIGNED_SHORT_5_5_5_1;\n        }\n        if (parameter === UnsignedShort565Type) {\n            return context.UNSIGNED_SHORT_5_6_5;\n        }\n        if (parameter === ByteType) {\n            return context.BYTE;\n        }\n        if (parameter === ShortType) {\n            return context.SHORT;\n        }\n        if (parameter === UnsignedShortType) {\n            return context.UNSIGNED_SHORT;\n        }\n        if (parameter === IntType) {\n            return context.INT;\n        }\n        if (parameter === UnsignedIntType) {\n            return context.UNSIGNED_INT;\n        }\n        if (parameter === FloatType) {\n            return context.FLOAT;\n        }\n        if (parameter === HalfFloatType) {\n            extension = extensions.get(\"OES_texture_half_float\");\n            if (extension !== null) {\n                return extension.HALF_FLOAT_OES;\n            }\n        }\n        if (parameter === AlphaFormat) {\n            return context.ALPHA;\n        }\n        if (parameter === RGBFormat) {\n            return context.RGB;\n        }\n        if (parameter === RGBAFormat) {\n            return context.RGBA;\n        }\n        if (parameter === LuminanceFormat) {\n            return context.LUMINANCE;\n        }\n        if (parameter === LuminanceAlphaFormat) {\n            return context.LUMINANCE_ALPHA;\n        }\n        if (parameter === DepthFormat) {\n            return context.DEPTH_COMPONENT;\n        }\n        if (parameter === DepthStencilFormat) {\n            return context.DEPTH_STENCIL;\n        }\n        if (parameter === AddEquation) {\n            return context.FUNC_ADD;\n        }\n        if (parameter === SubtractEquation) {\n            return context.FUNC_SUBTRACT;\n        }\n        if (parameter === ReverseSubtractEquation) {\n            return context.FUNC_REVERSE_SUBTRACT;\n        }\n        if (parameter === ZeroFactor) {\n            return context.ZERO;\n        }\n        if (parameter === OneFactor) {\n            return context.ONE;\n        }\n        if (parameter === SrcColorFactor) {\n            return context.SRC_COLOR;\n        }\n        if (parameter === OneMinusSrcColorFactor) {\n            return context.ONE_MINUS_SRC_COLOR;\n        }\n        if (parameter === SrcAlphaFactor) {\n            return context.SRC_ALPHA;\n        }\n        if (parameter === OneMinusSrcAlphaFactor) {\n            return context.ONE_MINUS_SRC_ALPHA;\n        }\n        if (parameter === DstAlphaFactor) {\n            return context.DST_ALPHA;\n        }\n        if (parameter === OneMinusDstAlphaFactor) {\n            return context.ONE_MINUS_DST_ALPHA;\n        }\n        if (parameter === DstColorFactor) {\n            return context.DST_COLOR;\n        }\n        if (parameter === OneMinusDstColorFactor) {\n            return context.ONE_MINUS_DST_COLOR;\n        }\n        if (parameter === SrcAlphaSaturateFactor) {\n            return context.SRC_ALPHA_SATURATE;\n        }\n        if (parameter === RGB_S3TC_DXT1_Format ||\n            parameter === RGBA_S3TC_DXT1_Format ||\n            parameter === RGBA_S3TC_DXT3_Format ||\n            parameter === RGBA_S3TC_DXT5_Format) {\n            extension = extensions.get(\"WEBGL_compressed_texture_s3tc\");\n            if (extension !== null) {\n                if (parameter === RGB_S3TC_DXT1_Format) {\n                    return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n                }\n                if (parameter === RGBA_S3TC_DXT1_Format) {\n                    return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n                }\n                if (parameter === RGBA_S3TC_DXT3_Format) {\n                    return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n                }\n                if (parameter === RGBA_S3TC_DXT5_Format) {\n                    return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n                }\n            }\n        }\n        if (parameter === RGB_PVRTC_4BPPV1_Format ||\n            parameter === RGB_PVRTC_2BPPV1_Format ||\n            parameter === RGBA_PVRTC_4BPPV1_Format ||\n            parameter === RGBA_PVRTC_2BPPV1_Format) {\n            extension = extensions.get(\"WEBGL_compressed_texture_pvrtc\");\n            if (extension !== null) {\n                if (parameter === RGB_PVRTC_4BPPV1_Format) {\n                    return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n                }\n                if (parameter === RGB_PVRTC_2BPPV1_Format) {\n                    return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n                }\n                if (parameter === RGBA_PVRTC_4BPPV1_Format) {\n                    return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n                }\n                if (parameter === RGBA_PVRTC_2BPPV1_Format) {\n                    return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n                }\n            }\n        }\n        if (parameter === RGB_ETC1_Format) {\n            extension = extensions.get(\"WEBGL_compressed_texture_etc1\");\n            if (extension !== null) {\n                return extension.COMPRESSED_RGB_ETC1_WEBGL;\n            }\n        }\n        if (parameter === RGBA_ASTC_4x4_Format ||\n            parameter === RGBA_ASTC_5x4_Format ||\n            parameter === RGBA_ASTC_5x5_Format ||\n            parameter === RGBA_ASTC_6x5_Format ||\n            parameter === RGBA_ASTC_6x6_Format ||\n            parameter === RGBA_ASTC_8x5_Format ||\n            parameter === RGBA_ASTC_8x6_Format ||\n            parameter === RGBA_ASTC_8x8_Format ||\n            parameter === RGBA_ASTC_10x5_Format ||\n            parameter === RGBA_ASTC_10x6_Format ||\n            parameter === RGBA_ASTC_10x8_Format ||\n            parameter === RGBA_ASTC_10x10_Format ||\n            parameter === RGBA_ASTC_12x10_Format ||\n            parameter === RGBA_ASTC_12x12_Format) {\n            extension = extensions.get(\"WEBGL_compressed_texture_astc\");\n            if (extension !== null) {\n                return parameter;\n            }\n        }\n        if (parameter === MinEquation || parameter === MaxEquation) {\n            extension = extensions.get(\"EXT_blend_minmax\");\n            if (extension !== null) {\n                if (parameter === MinEquation) {\n                    return extension.MIN_EXT;\n                }\n                if (parameter === MaxEquation) {\n                    return extension.MAX_EXT;\n                }\n            }\n        }\n        if (parameter === UnsignedInt248Type) {\n            extension = extensions.get(\"WEBGL_depth_texture\");\n            if (extension !== null) {\n                return extension.UNSIGNED_INT_24_8_WEBGL;\n            }\n        }\n        return 0;\n    }\n}\n","import { Color } from \"../math/Color\";\nexport class Fog {\n    constructor(color, near = 1, far = 1000) {\n        this.name = \"\";\n        this.near = 1;\n        this.far = 1000;\n        if (color instanceof Color) {\n            this.color = new Color().copy(color);\n        }\n        else if (typeof color === \"number\") {\n            this.color = new Color().setHex(color);\n        }\n        else if (typeof color === \"string\") {\n            this.color = new Color().setStyle(color);\n        }\n        this.near = near;\n        this.far = far;\n    }\n    copy(source) {\n        this.color.copy(source.color);\n        this.near = source.near;\n        this.far = source.far;\n        return this;\n    }\n    clone() {\n        return new this.constructor(this.color, this.near, this.far).copy(this);\n    }\n}\n","import { Color } from \"../math/Color\";\nexport class FogExp2 {\n    constructor(color, density = 1) {\n        this.name = \"\";\n        this.density = 0.00025;\n        if (color instanceof Color) {\n            this.color = new Color().copy(color);\n        }\n        else if (typeof color === \"number\") {\n            this.color = new Color().setHex(color);\n        }\n        else if (typeof color === \"string\") {\n            this.color = new Color().setStyle(color);\n        }\n        this.density = density;\n    }\n    copy(source) {\n        this.color.copy(source.color);\n        this.density = source.density;\n        return this;\n    }\n    clone() {\n        return new this.constructor(this.color, this.density).copy(this);\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nexport class Scene extends Object3D {\n    constructor() {\n        super(...arguments);\n        this.type = \"Scene\";\n        this.background = null;\n        this.fog = null;\n        this.overrideMaterial = null;\n        this.autoUpdate = true; // checked by the renderer\n    }\n    copy(source) {\n        super.copy(source);\n        if (source.background !== null) {\n            this.background = source.background.clone();\n        }\n        if (source.fog !== null) {\n            this.fog = source.fog.clone();\n        }\n        if (source.overrideMaterial !== null) {\n            this.overrideMaterial = source.overrideMaterial.clone();\n        }\n        this.autoUpdate = source.autoUpdate;\n        // this.matrixAutoUpdate = source.matrixAutoUpdate;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Texture } from \"./Texture\";\nexport class CanvasTexture extends Texture {\n    constructor(canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy) {\n        super(canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy);\n        this.image = Texture.DEFAULT_IMAGE;\n        this.needsUpdate = true;\n    }\n}\n","import { Texture } from \"./Texture\";\nexport class CompressedTexture extends Texture {\n    constructor(mipmaps, width, height, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n        super(null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n        this.image = { width: width, height: height };\n        this.mipmaps = mipmaps;\n        /**\n         * no flipping for cube textures\n         * (also flipping doesn't work for compressed textures )\n         * @type {boolean}\n         */\n        this.flipY = false;\n        /**\n         * can't generate mipmaps for compressed textures\n         * mips must be embedded in DDS files\n         * @type {boolean}\n         */\n        this.generateMipmaps = false;\n    }\n}\n","import { CubeReflectionMapping } from \"../constants\";\nimport { Texture } from \"./Texture\";\nexport class CubeTexture extends Texture {\n    constructor(images = [], mapping = CubeReflectionMapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n        super(images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n        this.flipY = false;\n    }\n    get images() {\n        return this.image;\n    }\n    set images(images) {\n        this.image = images;\n    }\n}\n","import { NearestFilter } from \"../constants\";\nimport { Texture } from \"./Texture\";\nexport class DataTexture extends Texture {\n    constructor(data, width, height, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n        super(null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n        this.image = { data: data, width: width, height: height };\n        this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n        this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n        this.generateMipmaps = false;\n        this.flipY = false;\n        this.unpackAlignment = 1;\n    }\n}\n","import { DepthFormat, DepthStencilFormat, NearestFilter, UnsignedInt248Type, UnsignedShortType } from \"../constants\";\nimport { Texture } from \"./Texture\";\nexport class DepthTexture extends Texture {\n    constructor(width, height, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n        format = format !== undefined ? format : DepthFormat;\n        if (format !== DepthFormat && format !== DepthStencilFormat) {\n            throw new Error(`DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat`);\n        }\n        if (type === undefined && format === DepthFormat) {\n            type = UnsignedShortType;\n        }\n        if (type === undefined && format === DepthStencilFormat) {\n            type = UnsignedInt248Type;\n        }\n        super(null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n        this.image = { width: width, height: height };\n        this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n        this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n        this.flipY = false;\n        this.generateMipmaps = false;\n    }\n}\n","import { ClampToEdgeWrapping, LinearEncoding, LinearFilter, LinearMipMapLinearFilter, MirroredRepeatWrapping, RepeatWrapping, RGBAFormat, UnsignedByteType, UVMapping, } from \"../constants\";\nimport { EventDispatcher } from \"../core/EventDispatcher\";\nimport { MathUtil } from \"../math/Math\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Vector2 } from \"../math/Vector2\";\nlet textureId = 0;\nexport class Texture extends EventDispatcher {\n    constructor(image = Texture.DEFAULT_IMAGE, mapping = Texture.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipMapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = 1, encoding = LinearEncoding) {\n        super();\n        this.id = textureId++;\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.image = Texture.DEFAULT_IMAGE;\n        this.mipmaps = [];\n        this.mapping = Texture.DEFAULT_MAPPING;\n        this.wrapS = ClampToEdgeWrapping;\n        this.wrapT = ClampToEdgeWrapping;\n        this.magFilter = LinearFilter;\n        this.minFilter = LinearMipMapLinearFilter;\n        this.anisotropy = 1;\n        this.format = RGBAFormat;\n        this.type = UnsignedByteType;\n        this.offset = new Vector2(0, 0);\n        this.repeat = new Vector2(1, 1);\n        this.center = new Vector2(0, 0);\n        this.rotation = 0;\n        this.matrix = new Matrix3();\n        this.matrixAutoUpdate = true;\n        this.generateMipmaps = true;\n        this.premultiplyAlpha = false;\n        this.flipY = true;\n        /**\n         * valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n         * @type {number}\n         */\n        this.unpackAlignment = 4;\n        /**\n         * Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n         * Also changing the encoding after already used by a Material will not automatically make the Material update.\n         * You need to explicitly call Material.needsUpdate to trigger it to recompile.\n         */\n        this.encoding = LinearEncoding;\n        this.version = 0;\n        this.image = image;\n        this.mapping = mapping;\n        this.wrapS = wrapS;\n        this.wrapT = wrapT;\n        this.magFilter = magFilter;\n        this.minFilter = minFilter;\n        this.format = format;\n        this.type = type;\n        this.anisotropy = anisotropy;\n        this.encoding = encoding;\n    }\n    set needsUpdate(value) {\n        if (value === true)\n            this.version++;\n    }\n    dispose() {\n        this.dispatchEvent({ type: \"dispose\" });\n    }\n    transformUv(uv) {\n        if (this.mapping !== UVMapping)\n            return this;\n        uv.applyMatrix3(this.matrix);\n        if (uv.x < 0 || uv.x > 1) {\n            switch (this.wrapS) {\n                case RepeatWrapping:\n                    uv.x = uv.x - Math.floor(uv.x);\n                    break;\n                case ClampToEdgeWrapping:\n                    uv.x = uv.x < 0 ? 0 : 1;\n                    break;\n                case MirroredRepeatWrapping:\n                    if (Math.abs(Math.floor(uv.x) % 2) === 1) {\n                        uv.x = Math.ceil(uv.x) - uv.x;\n                    }\n                    else {\n                        uv.x = uv.x - Math.floor(uv.x);\n                    }\n                    break;\n            }\n        }\n        if (uv.y < 0 || uv.y > 1) {\n            switch (this.wrapT) {\n                case RepeatWrapping:\n                    uv.y = uv.y - Math.floor(uv.y);\n                    break;\n                case ClampToEdgeWrapping:\n                    uv.y = uv.y < 0 ? 0 : 1;\n                    break;\n                case MirroredRepeatWrapping:\n                    if (Math.abs(Math.floor(uv.y) % 2) === 1) {\n                        uv.y = Math.ceil(uv.y) - uv.y;\n                    }\n                    else {\n                        uv.y = uv.y - Math.floor(uv.y);\n                    }\n                    break;\n            }\n        }\n        if (this.flipY) {\n            uv.y = 1 - uv.y;\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(source) {\n        this.name = source.name;\n        this.image = source.image;\n        this.mipmaps = source.mipmaps.slice(0);\n        this.mapping = source.mapping;\n        this.wrapS = source.wrapS;\n        this.wrapT = source.wrapT;\n        this.magFilter = source.magFilter;\n        this.minFilter = source.minFilter;\n        this.anisotropy = source.anisotropy;\n        this.format = source.format;\n        this.type = source.type;\n        this.offset.copy(source.offset);\n        this.repeat.copy(source.repeat);\n        this.center.copy(source.center);\n        this.rotation = source.rotation;\n        this.matrixAutoUpdate = source.matrixAutoUpdate;\n        this.matrix.copy(source.matrix);\n        this.generateMipmaps = source.generateMipmaps;\n        this.premultiplyAlpha = source.premultiplyAlpha;\n        this.flipY = source.flipY;\n        this.unpackAlignment = source.unpackAlignment;\n        this.encoding = source.encoding;\n        return this;\n    }\n}\nTexture.DEFAULT_MAPPING = UVMapping;\n","import { Texture } from \"./Texture\";\nexport class VideoTexture extends Texture {\n    constructor(video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy) {\n        super(video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy);\n        this.image = Texture.DEFAULT_IMAGE;\n        this.generateMipmaps = false;\n    }\n    update() {\n        const video = this.image;\n        if (video.readyState >= video.HAVE_CURRENT_DATA) {\n            this.needsUpdate = true;\n        }\n        return this;\n    }\n}\n","import { Matrix4 } from \"./math/Matrix4\";\nimport { Matrix3 } from \"./math/Matrix3\";\nimport { Vector3 } from \"./math/Vector3\";\nimport { Vector2 } from \"./math/Vector2\";\nimport { Vector4 } from \"./math/Vector4\";\nexport function arrayMin(array) {\n    if (array.length === 0)\n        return Infinity;\n    let min = array[0];\n    for (let i = 1, l = array.length; i < l; ++i) {\n        if (array[i] < min)\n            min = array[i];\n    }\n    return min;\n}\nexport function arrayMax(array) {\n    if (array.length === 0)\n        return -Infinity;\n    let max = array[0];\n    for (let i = 1, l = array.length; i < l; ++i) {\n        if (array[i] > max)\n            max = array[i];\n    }\n    return max;\n}\nexport function applyMatrixToBufferAttribute(matrix, attribute) {\n    const vec = new Vector3();\n    for (let i = 0, l = attribute.count; i < l; i++) {\n        vec.x = attribute.getProperty(i, \"x\");\n        vec.y = attribute.getProperty(i, \"y\");\n        vec.z = attribute.getProperty(i, \"z\");\n        if (matrix instanceof Matrix4) {\n            vec.applyMatrix4(matrix);\n        }\n        else if (matrix instanceof Matrix3) {\n            vec.applyMatrix3(matrix);\n        }\n        attribute.setProperty(i, \"xyz\", vec);\n    }\n    return attribute;\n}\nexport function setBoxFromBufferAttribute(target, attribute) {\n    let minX = +Infinity;\n    let minY = +Infinity;\n    let minZ = +Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    let maxZ = -Infinity;\n    for (let i = 0, l = attribute.count; i < l; i++) {\n        const x = attribute.getProperty(i, \"x\");\n        const y = attribute.getProperty(i, \"y\");\n        const z = attribute.getProperty(i, \"z\");\n        if (x < minX)\n            minX = x;\n        if (y < minY)\n            minY = y;\n        if (z < minZ)\n            minZ = z;\n        if (x > maxX)\n            maxX = x;\n        if (y > maxY)\n            maxY = y;\n        if (z > maxZ)\n            maxZ = z;\n    }\n    target.min.set(minX, minY, minZ);\n    target.max.set(maxX, maxY, maxZ);\n}\nexport function unprojectVector3onCamera(vector, camera) {\n    const matrix = new Matrix4();\n    vector.applyMatrix4(matrix.multiplyMatrices(camera.matrixWorld, matrix.getInverse(camera.projectionMatrix)));\n    return vector;\n}\nexport function vectorFromBufferAttribute(vector, attribute, index = 0) {\n    if (vector instanceof Vector2) {\n        return vector.set(attribute.getProperty(index, \"x\"), attribute.getProperty(index, \"y\"));\n    }\n    else if (vector instanceof Vector3) {\n        return vector.set(attribute.getProperty(index, \"x\"), attribute.getProperty(index, \"y\"), attribute.getProperty(index, \"z\"));\n    }\n    else if (vector instanceof Vector4) {\n        return vector.set(attribute.getProperty(index, \"x\"), attribute.getProperty(index, \"y\"), attribute.getProperty(index, \"z\"), attribute.getProperty(index, \"w\"));\n    }\n    return vector;\n}\n"],"sourceRoot":""}