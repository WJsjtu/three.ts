{"version":3,"sources":["webpack://THREE/webpack/bootstrap","webpack://THREE/./es/Three.js","webpack://THREE/./es/audio/Audio.js","webpack://THREE/./es/audio/AudioAnalyser.js","webpack://THREE/./es/audio/AudioContext.js","webpack://THREE/./es/audio/AudioListener.js","webpack://THREE/./es/audio/PositionalAudio.js","webpack://THREE/./es/cameras/ArrayCamera.js","webpack://THREE/./es/cameras/Camera.js","webpack://THREE/./es/cameras/OrthographicCamera.js","webpack://THREE/./es/cameras/PerspectiveCamera.js","webpack://THREE/./es/constants.js","webpack://THREE/./es/core/BufferAttribute.js","webpack://THREE/./es/core/BufferGeometry.js","webpack://THREE/./es/core/Clock.js","webpack://THREE/./es/core/DirectGeometry.js","webpack://THREE/./es/core/EventDispatcher.js","webpack://THREE/./es/core/Face3.js","webpack://THREE/./es/core/Geometry.js","webpack://THREE/./es/core/InstancedBufferAttribute.js","webpack://THREE/./es/core/InstancedBufferGeometry.js","webpack://THREE/./es/core/InstancedInterleavedBufferAttribute.js","webpack://THREE/./es/core/InterleavedBufferAttribute.js","webpack://THREE/./es/core/Layers.js","webpack://THREE/./es/core/Object3D.js","webpack://THREE/./es/core/Raycaster.js","webpack://THREE/./es/extras/objects/ImmediateRenderObject.js","webpack://THREE/./es/geometries/BoxGeometry.js","webpack://THREE/./es/geometries/CircleGeometry.js","webpack://THREE/./es/geometries/ConeGeometry.js","webpack://THREE/./es/geometries/CylinderGeometry.js","webpack://THREE/./es/geometries/Geometries.js","webpack://THREE/./es/geometries/PlaneGeometry.js","webpack://THREE/./es/lights/AmbientLight.js","webpack://THREE/./es/lights/DirectionalLight.js","webpack://THREE/./es/lights/DirectionalLightShadow.js","webpack://THREE/./es/lights/HemisphereLight.js","webpack://THREE/./es/lights/Light.js","webpack://THREE/./es/lights/LightShadow.js","webpack://THREE/./es/lights/PointLight.js","webpack://THREE/./es/lights/RectAreaLight.js","webpack://THREE/./es/lights/SpotLight.js","webpack://THREE/./es/lights/SpotLightShadow.js","webpack://THREE/./es/materials/LineBasicMaterial.js","webpack://THREE/./es/materials/LineDashedMaterial.js","webpack://THREE/./es/materials/Material.js","webpack://THREE/./es/materials/Materials.js","webpack://THREE/./es/materials/MeshBasicMaterial.js","webpack://THREE/./es/materials/MeshDepthMaterial.js","webpack://THREE/./es/materials/MeshDistanceMaterial.js","webpack://THREE/./es/materials/MeshLambertMaterial.js","webpack://THREE/./es/materials/MeshNormalMaterial.js","webpack://THREE/./es/materials/MeshPhongMaterial.js","webpack://THREE/./es/materials/MeshPhysicalMaterial.js","webpack://THREE/./es/materials/MeshStandardMaterial.js","webpack://THREE/./es/materials/MeshToonMaterial.js","webpack://THREE/./es/materials/PointsMaterial.js","webpack://THREE/./es/materials/RawShaderMaterial.js","webpack://THREE/./es/materials/ShaderMaterial.js","webpack://THREE/./es/materials/ShadowMaterial.js","webpack://THREE/./es/materials/SpriteMaterial.js","webpack://THREE/./es/math/Box3.js","webpack://THREE/./es/math/Color.js","webpack://THREE/./es/math/Euler.js","webpack://THREE/./es/math/Frustum.js","webpack://THREE/./es/math/Line3.js","webpack://THREE/./es/math/Math.js","webpack://THREE/./es/math/Matrix2.js","webpack://THREE/./es/math/Matrix3.js","webpack://THREE/./es/math/Matrix4.js","webpack://THREE/./es/math/Plane.js","webpack://THREE/./es/math/Quaternion.js","webpack://THREE/./es/math/Ray.js","webpack://THREE/./es/math/Sphere.js","webpack://THREE/./es/math/Spherical.js","webpack://THREE/./es/math/Triangle.js","webpack://THREE/./es/math/Vector2.js","webpack://THREE/./es/math/Vector3.js","webpack://THREE/./es/math/Vector4.js","webpack://THREE/./es/objects/Bone.js","webpack://THREE/./es/objects/Group.js","webpack://THREE/./es/objects/LOD.js","webpack://THREE/./es/objects/Line.js","webpack://THREE/./es/objects/LineLoop.js","webpack://THREE/./es/objects/LineSegments.js","webpack://THREE/./es/objects/Mesh.js","webpack://THREE/./es/objects/Points.js","webpack://THREE/./es/objects/Skeleton.js","webpack://THREE/./es/objects/SkinnedMesh.js","webpack://THREE/./es/objects/Sprite.js","webpack://THREE/./es/renderers/WebGLRenderTarget.js","webpack://THREE/./es/renderers/WebGLRenderTargetCube.js","webpack://THREE/./es/renderers/WebGLRenderer.js","webpack://THREE/./es/renderers/shaders/ShaderChunk.js","webpack://THREE/./es/renderers/shaders/ShaderChunk/alphamap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/alphatest_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/aomap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/begin_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/bsdfs.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/color_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/color_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/color_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/color_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/common.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/dithering_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/dithering_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/encodings_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/envmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/envmap_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/fog_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/fog_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/fog_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/gradientmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lightmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_pars.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/lights_template.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/map_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/map_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/map_particle_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/normal_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/packing.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/project_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/skinbase_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/skinning_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/specularmap_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv2_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/uv_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderChunk/worldpos_vertex.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib.js","webpack://THREE/./es/renderers/shaders/ShaderLib/cube_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/cube_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/depth_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/depth_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/equirect_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/equirect_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/linedashed_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/linedashed_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshbasic_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshbasic_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshlambert_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshlambert_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshphong_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshphong_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshphysical_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/meshphysical_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/normal_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/normal_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/points_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/points_vert.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/shadow_frag.glsl","webpack://THREE/./es/renderers/shaders/ShaderLib/shadow_vert.glsl","webpack://THREE/./es/renderers/shaders/UniformsLib.js","webpack://THREE/./es/renderers/shaders/UniformsUtils.js","webpack://THREE/./es/renderers/webgl/WebGLAttributes.js","webpack://THREE/./es/renderers/webgl/WebGLBackground.js","webpack://THREE/./es/renderers/webgl/WebGLBufferRenderer.js","webpack://THREE/./es/renderers/webgl/WebGLCapabilities.js","webpack://THREE/./es/renderers/webgl/WebGLClipping.js","webpack://THREE/./es/renderers/webgl/WebGLExtensions.js","webpack://THREE/./es/renderers/webgl/WebGLGeometries.js","webpack://THREE/./es/renderers/webgl/WebGLIndexedBufferRenderer.js","webpack://THREE/./es/renderers/webgl/WebGLLights.js","webpack://THREE/./es/renderers/webgl/WebGLMorphtargets.js","webpack://THREE/./es/renderers/webgl/WebGLObjects.js","webpack://THREE/./es/renderers/webgl/WebGLProgram.js","webpack://THREE/./es/renderers/webgl/WebGLPrograms.js","webpack://THREE/./es/renderers/webgl/WebGLProperties.js","webpack://THREE/./es/renderers/webgl/WebGLRenderLists.js","webpack://THREE/./es/renderers/webgl/WebGLShader.js","webpack://THREE/./es/renderers/webgl/WebGLShadowMap.js","webpack://THREE/./es/renderers/webgl/WebGLSpriteRenderer.js","webpack://THREE/./es/renderers/webgl/WebGLState.js","webpack://THREE/./es/renderers/webgl/WebGLTextures.js","webpack://THREE/./es/renderers/webgl/WebGLUniforms.js","webpack://THREE/./es/renderers/webgl/WebGLUtils.js","webpack://THREE/./es/scenes/Fog.js","webpack://THREE/./es/scenes/FogExp2.js","webpack://THREE/./es/scenes/Scene.js","webpack://THREE/./es/textures/CanvasTexture.js","webpack://THREE/./es/textures/CompressedTexture.js","webpack://THREE/./es/textures/CubeTexture.js","webpack://THREE/./es/textures/DataTexture.js","webpack://THREE/./es/textures/DepthTexture.js","webpack://THREE/./es/textures/Texture.js","webpack://THREE/./es/textures/VideoTexture.js","webpack://THREE/./es/utils.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","_WebGLRenderTargetCube","_WebGLRenderTarget","_WebGLRenderer","_ShaderLib","_UniformsLib","_UniformsUtils","_ShaderChunk","_FogExp","_Fog","_Scene","_Sprite","_LOD","_SkinnedMesh","_Skeleton","_Bone","_Mesh","_LineSegments","_LineLoop","_Line","_Points","_Group","_VideoTexture","_DataTexture","_CompressedTexture","_CubeTexture","_CanvasTexture","_DepthTexture","_Texture","_Geometries","keys","forEach","key","_exportNames","_Materials","_SpotLightShadow","_SpotLight","_PointLight","_RectAreaLight","_HemisphereLight","_DirectionalLightShadow","_DirectionalLight","_AmbientLight","_LightShadow","_Light","_PerspectiveCamera","_OrthographicCamera","_ArrayCamera","_Camera","_AudioListener","_PositionalAudio","_AudioContext","_AudioAnalyser","_Audio","_InstancedBufferGeometry","_BufferGeometry","_Geometry","_InterleavedBufferAttribute","_InstancedInterleavedBufferAttribute","_InstancedBufferAttribute","_BufferAttribute","_Face","_Object3D","_Raycaster","_Layers","_EventDispatcher","_Clock","_Triangle","_Math","_Spherical","_Plane","_Frustum","_Sphere","_Ray","_Matrix","_Matrix2","_Matrix3","_Box","_Line2","_Euler","_Vector","_Vector2","_Vector3","_Quaternion","_Color","_ImmediateRenderObject","_WebGLUtils","_constants","_Object3D2","AudioWrapper","listener","_this","_classCallCheck","this","_possibleConstructorReturn","__proto__","getPrototypeOf","type","startTime","offset","isPlaying","hasPlaybackControl","sourceType","autoplay","buffer","loop","playbackRate","filters","context","gain","createGain","connect","getInput","audioNode","source","audioBuffer","play","console","warn","createBufferSource","onended","onEnded","bind","setValueAtTime","currentTime","start","stop","length","getOutput","disconnect","arguments","undefined","getFilters","filter","setFilters","AudioAnalyserWrapper","audio","fftSize","analyser","createAnalyser","data","Uint8Array","frequencyBinCount","getByteFrequencyData","getFrequencyData","AudioContextWrapper","window","AudioContext","webkitAudioContext","AudioListenerWrapper","getContext","destination","force","_get","position","Vector3","quaternion","Quaternion","scale","orientation","up","matrixWorld","decompose","set","applyQuaternion","positionX","x","positionY","y","positionZ","z","forwardX","forwardY","forwardZ","upX","upY","upZ","setPosition","setOrientation","PositionalAudio","panner","createPanner","refDistance","rolloffFactor","distanceModel","maxDistance","setFromMatrixPosition","_PerspectiveCamera2","ArrayCamera","cameras","Camera","matrixWorldInverse","Matrix4","projectionMatrix","getInverse","recursive","copy","constructor","worldQuaternion","_Camera2","OrthographicCamera","left","right","top","bottom","near","far","_left","_right","_top","_bottom","_zoom","_near","_far","_view","updateProjectionMatrix","fullWidth","fullHeight","width","height","enabled","offsetX","offsetY","view","dx","zoom","dy","cx","cy","zoomW","zoomH","scaleW","scaleH","makeOrthographic","assign","PerspectiveCamera","fov","aspect","focus","_fov","_aspect","_filmGauge","_filmOffset","focalLength","vExtentSlope","getFilmHeight","MathUtil","RAD2DEG","Math","atan","tan","DEG2RAD","filmGauge","min","max","skew","filmOffset","getFilmWidth","makePerspective","REVISION","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","BufferAttribute","array","itemSize","normalized","uuid","generateUUID","count","dynamic","updateRange","version","slice","index1","attribute","index2","colors","color","Color","g","b","vectors","vector","Vector2","Vector4","w","index","toLowerCase","replace","offsetMap","charAt","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","_utils","_DirectGeometry","_EventDispatcher2","Object3D","bufferGeometryId","BufferGeometry","apply","id","attributes","morphAttributes","groups","boundingBox","boundingSphere","drawRange","Infinity","Array","isArray","arrayMax","setIndex","materialIndex","push","matrix","applyMatrixToBufferAttribute","needsUpdate","normal","normalMatrix","Matrix3","getNormalMatrix","computeBoundingBox","computeBoundingSphere","angle","applyMatrix","makeRotationX","makeRotationY","makeRotationZ","makeTranslation","makeScale","obj","lookAt","updateMatrix","getCenter","negate","translate","geometry","positions","vertices","addAttribute","copyVector3sArray","copyColorsArray","lineDistances","copyArray","clone","fromGeometry","points","point","direct","directGeometry","elementsNeedUpdate","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","normals","uv","copyVector2sArray","uvs","lineDistancesNeedUpdate","lineDistance","computeGroups","DirectGeometry","fromDirectGeometry","uvs2","morphTargets","morphTarget","skinIndices","copyVector4sArray","skinWeights","Box3","setBoxFromBufferAttribute","makeEmpty","isNaN","error","Sphere","box","center","maxRadiusSquare","il","getProperty","distanceToSquared","radius","sqrt","vA","vB","vC","pA","pB","pC","cb","ab","indices","addGroup","j","jl","group","fromArray","sub","cross","normalizeNormals","normalize","setProperty","geometry2","array2","morphAttribute","dispatchEvent","Clock","autoStart","oldTime","elapsedTime","running","performance","Date","now","getElapsedTime","getDelta","diff","newTime","faces","face","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphNormals","morphNormalsLength","hasSkinIndices","hasSkinWeights","a","vertexNormals","vertexColors","vertexUvs","concat","morphNormal","EventDispatcher","_listeners","listeners","indexOf","listenerArray","splice","event","target","Face3","_Face2","GeometryFace","geometryId","Geometry","applyMatrix4","applyMatrix3","_this2","uv2","tempNormals","tempUVs","tempUVs2","addFace","computeFaceNormals","f","fl","areaWeighted","v","vl","add","originalFaceNormal","originalVertexNormals","tmpGeo","faceNormals","Triangle","computeVertexNormals","faceNormal","distanceTo","setFromPoints","materialIndexOffset","vertexOffset","thisVertices","thatVertices","thisFaces","thatFaces","thisUvs","thatUvs","thisColors","thatColors","vertexCopy","faceVertexNormals","faceVertexColors","faceCopy","uvCopy","mesh","matrixAutoUpdate","merge","verticesMap","unique","changes","precisionPoints","precision","pow","round","join","faceIndicesToRemove","idx","sort","uvs1","newUvs1","newUvs2","uvsCopy","k","kl","_BufferAttribute2","InstancedBufferAttribute","meshPerAttribute","_BufferGeometry2","InstancedBufferGeometry","maxInstancedCount","InstancedInterleavedBufferAttribute","stride","InterleavedBufferAttribute","Layers","mask","channel","layers","object3DId","parent","children","DefaultUp","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","rotation","Euler","modelViewMatrix","onBeforeRender","onAfterRender","onChange","setFromEuler","setFromQuaternion","compose","multiplyMatrices","updateMatrixWorld","raycaster","intersections","q","premultiply","axis","setFromAxisAngle","euler","setFromRotationMatrix","multiply","rotateOnAxis","distance","vec","multiplyScalar","translateOnAxis","mat","remove","callback","traverse","traverseVisible","traverseAncestors","JSON","parse","stringify","result","order","intersectObject","intersects","raycast","Raycaster","origin","direction","params","LOD","Line","Mesh","Points","threshold","Sprite","linePrecision","ray","Ray","coords","camera","unprojectVector3onCamera","transformDirection","objects","ImmediateRenderObject","material","_Geometry2","BoxGeometry","depth","widthSegments","heightSegments","depthSegments","parameters","fromBufferGeometry","BoxBufferGeometry","mergeVertices","floor","numberOfVertices","groupStart","buildPlane","u","uDir","vDir","width2","height2","depth2","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","iy","ix","CircleGeometry","segments","thetaStart","thetaLength","CircleBufferGeometry","PI","segment","cos","sin","_CylinderGeometry","ConeGeometry","radialSegments","openEnded","CylinderGeometry","_assertThisInitialized","ConeBufferGeometry","CylinderBufferGeometry","radiusTop","radiusBottom","indexArray","halfHeight","generateCap","centerIndexStart","centerIndexEnd","sign","theta","cosTheta","sinTheta","generateTorso","slope","indexRow","_PlaneGeometry","_ConeGeometry","_CircleGeometry","_BoxGeometry","PlaneGeometry","PlaneBufferGeometry","_Light2","AmbientLight","intensity","DirectionalLight","shadow","DirectionalLightShadow","_LightShadow2","HemisphereLight","skyColor","groundColor","Light","LightShadow","bias","mapSize","map","PointLight","decay","power","RectAreaLight","SpotLight","penumbra","SpotLightShadow","light","_Material2","LineBasicMaterial","setHex","lights","linecap","linejoin","linewidth","setValues","_LineBasicMaterial2","LineDashedMaterial","dashSize","gapSize","materialId","Material","alphaTest","blending","blendDst","blendDstAlpha","blendEquation","blendEquationAlpha","blendSrc","blendSrcAlpha","clipIntersection","clippingPlanes","clipShadows","colorWrite","depthFunc","depthTest","depthWrite","dithering","flatShading","fog","opacity","overdraw","onBeforeCompile","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","premultipliedAlpha","shadowSide","side","transparent","values","newValue","currentValue","setStyle","Number","srcPlanes","dstPlanes","_ShadowMaterial","_SpriteMaterial","_RawShaderMaterial","_ShaderMaterial","_PointsMaterial","_MeshPhysicalMaterial","_MeshStandardMaterial","_MeshPhongMaterial","_MeshToonMaterial","_MeshNormalMaterial","_MeshLambertMaterial","_MeshDepthMaterial","_MeshDistanceMaterial","_MeshBasicMaterial","_LineDashedMaterial","_LineBasicMaterial","_Material","MeshBasicMaterial","alphaMap","aoMap","aoMapIntensity","combine","envMap","lightMap","lightMapIntensity","reflectivity","refractionRatio","skinning","specularMap","wireframe","wireframeLinecap","wireframeLinejoin","wireframeLinewidth","MeshDepthMaterial","depthPacking","displacementMap","displacementScale","displacementBias","MeshDistanceMaterial","farDistance","nearDistance","referencePosition","MeshLambertMaterial","emissive","emissiveIntensity","emissiveMap","MeshNormalMaterial","paramenters","bumpMap","bumpScale","normalMap","normalScale","MeshPhongMaterial","shininess","specular","MeshPhysicalMaterial","clearCoat","clearCoatRoughness","defines","PHYSICAL","MeshStandardMaterial","STANDARD","envMapIntensity","metalness","metalnessMap","roughness","roughnessMap","_MeshPhongMaterial2","MeshToonMaterial","TOON","gradientMap","PointsMaterial","size","sizeAttenuation","_ShaderMaterial2","RawShaderMaterial","ShaderMaterial","uniforms","vertexShader","fragmentShader","clipping","extensions","derivatives","drawBuffers","fragDepth","shaderTextureLOD","defaultAttributeValues","UniformsUtils","ShadowMaterial","SpriteMaterial","minX","minY","minZ","maxX","maxY","maxZ","expandByPoint","halfSize","expandByObject","isEmpty","scalar","addScalar","node","v1","vectorFromBufferAttribute","sphere","closestPoint","clampPoint","plane","constant","clamp","clampedPoint","getSize","equals","HUE_TO_RGB","t","setRGB","hex","h","euclideanModulo","style","matches","exec","components","parseInt","parseFloat","setHSL","ColorKeywords","gammaFactor","safeInverse","getHex","toString","hsl","hue","saturation","lightness","delta","getHSL","alpha","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","EulerOrder","_order","DefaultOrder","onChangeCallback","_x","_y","_z","update","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","XYZ","asin","abs","atan2","YXZ","ZXY","ZYX","YZX","XZY","makeRotationFromQuaternion","newOrder","Frustum","p0","Plane","p1","p2","p3","p4","p5","planes","frustum","me","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setPlane","intersectsSphere","sprite","negRadius","distanceToPoint","d1","d2","Line3","end","line","clampToLine","startP","startEnd","startEnd2","dot","startEndStartP","closestPointToPointParameter","lut","toUpperCase","d0","random","d3","a1","a2","b1","b2","low","high","range","degrees","radians","ceil","log","LN2","Matrix2","n11","n12","n21","n22","mat2","ae","be","a11","a12","a21","a22","b11","b12","b21","b22","tmp","n13","n23","n31","n32","n33","mat3","mat4","a13","a23","a31","a32","a33","b13","b23","b31","b32","b33","e","throwOnDegenerate","t11","t12","t13","det","msg","Error","identity","detInv","matrix4","setFromMatrix4","transpose","tx","ty","sx","sy","n14","n24","n34","n41","n42","n43","n44","xAxis","yAxis","zAxis","scaleX","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","eye","lengthSquared","matA","matB","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","sz","determinant","invSX","invSY","invSZ","v2","setFromNormalAndCoplanarPoint","inverseNormalLength","denominator","startSign","endSign","intersectsPlane","optionalNormalMatrix","referencePoint","coplanarPoint","_w","_set","c1","c2","c3","s1","s2","s3","halfAngle","trace","vFrom","vTo","EPS","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","at","directionDistance","distanceSquaredToPoint","v0","optionalPointOnRay","optionalPointOnSegment","segCenter","segDir","segExtent","a01","b0","s0","sqrDist","extDet","invDet","tca","radius2","thc","t0","t1","distanceToPlane","isFinite","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectBox","triangle","backFaceCulling","edge1","edge2","DdN","DdQxE2","DdE1xQ","QdN","intersectTriangle","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSquared","expandByScalar","getMaxScaleOnAxis","Spherical","phi","other","vec3","acos","resultLengthSquared","setFromCoplanarPoints","dot00","dot01","dot02","dot11","dot12","denom","invDenom","barycoordFromPoint","projectedPoint","projectPoint","containsPoint","minDistance","edgeList","closestPointToPoint","divideScalar","qx","qy","qz","qw","iz","iw","ax","ay","az","bx","by","bz","planeNormal","projectOnVector","dz","sinPhiRadius","setFromMatrixColumn","epsilon","epsilon2","Bone","Group","levels","matrixPosition","getObjectForDistance","level","addLevel","precisionSquared","inverseMatrix","vStart","vEnd","interSegment","interRay","step","distSquared","distanceSquareToSegment","faceIndex","nbVertices","LineLoop","LineSegments","drawMode","morphTargetInfluences","morphTargetDictionary","updateMorphTargets","ml","String","intersectsBox","intersection","checkBufferGeometryIntersection","faceMaterial","fvA","fvB","fvC","tl","influence","targets","intersectionPoint","checkIntersection","uvsF","uvA","uvB","uvC","uvIntersection","uv1","uv3","baryCoord","intersect","intersectionPointWorld","testPoint","localThreshold","localThresholdSquare","rayPointDistanceSquare","intersectPoint","distanceToRay","offsetMatrix","identityMatrix","Skeleton","bones","boneInverses","boneMatrices","calculateInverses","inverse","bone","boneTexture","toArray","_Mesh2","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","initBones","skeleton","normalizeSkinWeights","gbone","pos","rotq","scl","pose","sw","manhattanLength","skinWeight","worldPosition","worldScale","setFromMatrixScale","guessSizeSq","WebGLRenderTarget","options","scissorTest","scissor","viewport","minFilter","texture","Texture","wrapS","wrapT","magFilter","format","anisotropy","encoding","depthBuffer","stencilBuffer","depthTexture","dispose","_WebGLRenderTarget2","WebGLRenderTargetCube","activeCubeFace","activeMipMapLevel","_WebGLUniforms","_WebGLShadowMap","_WebGLState","_WebGLClipping","_WebGLExtensions","_WebGLCapabilities","_WebGLProperties","_WebGLTextures","_WebGLAttributes","_WebGLGeometries","_WebGLObjects","_WebGLMorphtargets","_WebGLPrograms","_WebGLLights","_WebGLRenderLists","_WebGLBufferRenderer","_WebGLIndexedBufferRenderer","_WebGLSpriteRenderer","_WebGLBackground","WebGLRenderer","lightsArray","shadowsArray","spritesArray","autoClear","autoClearColor","autoClearDepth","autoClearStencil","sortObjects","gammaInput","gammaOutput","physicallyCorrectLights","toneMapping","toneMappingExposure","toneMappingWhitePoint","maxMorphNormals","maxMorphTargets","isContextLost","currentRenderTarget","currentFramebuffer","currentMaterialId","currentGeometryProgram","currentCamera","currentArrayCamera","currentViewport","currentScissor","currentScissorTest","usedTextureUnits","pixelRatio","WebGLClipping","clippingEnabled","localClippingEnabled","projScreenMatrix","tempVector3","infoMemory","geometries","textures","infoRender","frame","calls","info","render","memory","programs","autoReset","reset","onContextLost","preventDefault","onContextRestore","initGLContext","isAnimating","onAnimationFrame","time","requestAnimationFrame","onMaterialDispose","removeEventListener","deallocateMaterial","setTexture2DWarned","setTextureCubeWarned","domElement","canvas","document","createElementNS","stencil","antialias","preserveDrawingBuffer","powerPreference","contextAttributes","addEventListener","getShaderPrecisionFormat","rangeMin","rangeMax","message","shadowMap","WebGLShadowMap","capabilities","maxTextureSize","getContextAttributes","extension","loseContext","restoreContext","setSize","updateStyle","setViewport","state","setScissorTest","background","getClearColor","setClearColor","getClearAlpha","setClearAlpha","gl","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clear","renderTarget","setRenderTarget","renderLists","properties","WebGLExtensions","utils","WebGLUtils","WebGLCapabilities","WebGLState","WebGLProperties","WebGLTextures","WebGLAttributes","WebGLGeometries","WebGLObjects","morphtargets","WebGLMorphtargets","programCache","WebGLPrograms","WebGLLights","WebGLRenderLists","WebGLBackground","bufferRenderer","WebGLBufferRenderer","indexedBufferRenderer","WebGLIndexedBufferRenderer","spriteRenderer","WebGLSpriteRenderer","scene","setup","initMaterial","forceClear","autoUpdate","setFromMatrix","init","currentRenderList","projectObject","beginShadows","endShadows","opaqueObjects","opaque","transparentObjects","overrideMaterial","renderObjects","updateRenderTargetMipmap","buffers","setTest","setMask","setPolygonOffset","test","intersectsSprite","intersectsObject","groupMaterial","renderList","renderItem","camera2","bounds","renderObject","frontFaceCW","setMaterial","program","setProgram","renderObjectImmediate","renderBufferDirect","_this3","renderBufferImmediate","initAttributes","hasPositions","createBuffer","hasNormals","hasUvs","hasColors","programAttributes","getAttributes","bindBuffer","ARRAY_BUFFER","bufferData","positionArray","DYNAMIC_DRAW","enableAttribute","vertexAttribPointer","FLOAT","normalArray","nx","ny","nz","uvArray","colorArray","disableUnusedAttributes","drawArrays","TRIANGLES","geometryProgram","updateBuffers","rangeFactor","getWireframeAttribute","renderer","setupVertexAttributes","ELEMENT_ARRAY_BUFFER","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","setLineWidth","getTargetPixelRatio","setMode","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","lineWidth","LINE_LOOP","LINE_STRIP","POINTS","renderInstances","materialProperties","useCache","setState","lightsHash","hash","numClippingPlanes","numPlanes","numIntersection","refreshProgram","refreshMaterial","refreshLights","p_uniforms","getUniforms","m_uniforms","shader","useProgram","setValue","logarithmicDepthBuffer","uCamPos","cameraPosition","setOptional","floatVertexTextures","ceilPowerOfTwo","DataTexture","boneTextureSize","markUniformsLightsNeedsUpdate","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","refreshUniformsToon","refreshUniformsPhong","refreshUniformsPhysical","refreshUniformsStandard","refreshUniformsDepth","refreshUniformsDistance","refreshUniformsNormal","refreshUniformsLine","refreshUniformsDash","refreshUniformsPoints","WebGLUniformsWrapper","upload","uniformsList","startIndex","geometryAttributes","materialDefaultAttributeValues","programAttribute","geometryAttribute","bytesPerElement","enableAttributeAndDivisor","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","getParameters","code","getProgramCode","programChange","releaseMaterialProgramReference","shaderID","ShaderLib","acquireProgram","numSupportedMorphTargets","numSupportedMorphNormals","uniform","ambientLightColor","ambient","directionalLights","directional","spotLights","spot","rectAreaLights","rectArea","pointLights","hemisphereLights","hemi","directionalShadowMap","directionalShadowMatrix","spotShadowMap","spotShadowMatrix","pointShadowMap","pointShadowMatrix","progUniforms","seqWithValue","seq","programInfo","releaseProgram","cullFace","frontFaceDirection","setCullFace","setFlipSided","textureUnit","maxTextures","unit","setTexture2D","cubeTexture","slot","image","setTextureCube","setTextureCubeDynamic","__webglFramebuffer","setupRenderTarget","framebuffer","isCube","bindFramebuffer","FRAMEBUFFER","textureProperties","framebufferTexture2D","COLOR_ATTACHMENT0","TEXTURE_CUBE_MAP_POSITIVE_X","__webglTexture","restore","textureFormat","textureType","convert","getParameter","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","internalFormat","copyTexImage2D","TEXTURE_2D","diffuse","flipEnvMap","CubeTexture","uvScaleMap","repeat","setUvTransform","uvTransform","totalSize","fogColor","fogNear","fogFar","fogDensity","density","_alphamap_fragment","_interopRequireDefault","_alphamap_pars_fragment","_alphatest_fragment","_aomap_fragment","_aomap_pars_fragment","_begin_vertex","_beginnormal_vertex","_bsdfs","_bumpmap_pars_fragment","_clipping_planes_fragment","_clipping_planes_pars_fragment","_clipping_planes_pars_vertex","_clipping_planes_vertex","_color_fragment","_color_pars_fragment","_color_pars_vertex","_color_vertex","_common","_cube_uv_reflection_fragment","_defaultnormal_vertex","_displacementmap_pars_vertex","_displacementmap_vertex","_emissivemap_fragment","_emissivemap_pars_fragment","_encodings_fragment","_encodings_pars_fragment","_envmap_fragment","_envmap_pars_fragment","_envmap_pars_vertex","_envmap_vertex","_fog_vertex","_fog_pars_vertex","_fog_fragment","_fog_pars_fragment","_gradientmap_pars_fragment","_lightmap_fragment","_lightmap_pars_fragment","_lights_lambert_vertex","_lights_pars","_lights_phong_fragment","_lights_phong_pars_fragment","_lights_physical_fragment","_lights_physical_pars_fragment","_lights_template","_logdepthbuf_fragment","_logdepthbuf_pars_fragment","_logdepthbuf_pars_vertex","_logdepthbuf_vertex","_map_fragment","_map_pars_fragment","_map_particle_fragment","_map_particle_pars_fragment","_metalnessmap_fragment","_metalnessmap_pars_fragment","_morphnormal_vertex","_morphtarget_pars_vertex","_morphtarget_vertex","_normal_fragment","_normalmap_pars_fragment","_packing","_premultiplied_alpha_fragment","_project_vertex","_dithering_fragment","_dithering_pars_fragment","_roughnessmap_fragment","_roughnessmap_pars_fragment","_shadowmap_pars_fragment","_shadowmap_pars_vertex","_shadowmap_vertex","_shadowmask_pars_fragment","_skinbase_vertex","_skinning_pars_vertex","_skinning_vertex","_skinnormal_vertex","_specularmap_fragment","_specularmap_pars_fragment","_tonemapping_fragment","_tonemapping_pars_fragment","_uv_pars_fragment","_uv_pars_vertex","_uv_vertex","_uv2_pars_fragment","_uv2_pars_vertex","_uv2_vertex","_worldpos_vertex","_cube_frag","_cube_vert","_depth_frag","_depth_vert","_distanceRGBA_frag","_distanceRGBA_vert","_equirect_frag","_equirect_vert","_linedashed_frag","_linedashed_vert","_meshbasic_frag","_meshbasic_vert","_meshlambert_frag","_meshlambert_vert","_meshphong_frag","_meshphong_vert","_meshphysical_frag","_meshphysical_vert","_normal_frag","_normal_vert","_points_frag","_points_vert","_shadow_frag","_shadow_vert","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_template","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","__webpack_exports__","basic","UniformsLib","specularmap","envmap","aomap","lightmap","lambert","emissivemap","phong","bumpmap","normalmap","displacementmap","gradientmap","standard","roughnessmap","metalnessmap","dashed","cube","tCube","tFlip","equirect","tEquirect","distanceRGBA","physical","shadowBias","shadowRadius","shadowMapSize","coneCos","penumbraCos","shadowCameraNear","shadowCameraFar","merged","uniformsSrc","uniformsDst","parameterSrc","bufferType","usage","STATIC_DRAW","UNSIGNED_SHORT","SHORT","UNSIGNED_INT","INT","BYTE","UNSIGNED_BYTE","BYTES_PER_ELEMENT","bufferSubData","subarray","deleteBuffer","updateBuffer","clearColor","clearAlpha","setClear","boxMesh","removeAttribute","copyPosition","planeCamera","planeMesh","mode","drawArraysInstancedANGLE","maxVertexTextures","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","maxAnisotropy","maxPrecision","getMaxPrecision","MAX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","MAX_VERTEX_ATTRIBS","MAX_VERTEX_UNIFORM_VECTORS","MAX_VARYING_VECTORS","MAX_FRAGMENT_UNIFORM_VECTORS","getMaxAnisotropy","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","globalState","numGlobalPlanes","renderingShadows","dstOffset","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","viewNormalMatrix","i4","enableLocalClipping","projectPlanes","resetGlobalState","cache","fromCache","nGlobal","lGlobal","clippingState","getExtension","wireframeAttributes","bufferGeometry","onGeometryDispose","setFromObject","drawElements","drawElementsInstancedANGLE","LightUniformsCache","halfWidth","shadows","vector3","matrix42","directionalLength","pointLength","spotLength","rectAreaLength","hemisphereLength","extractRotation","influencesList","morphInfluences","objectInfluences","influences","updateList","updateFromObject","_WebGLShader","generateDefines","chunks","generateExtensions","rendererExtensions","envMapCubeUV","filterEmptyLine","getToneMappingFunction","functionName","toneMappingName","str","getEncodingComponents","getTexelDecodingFunction","getTexelEncodingFunction","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","parseIncludes","match","include","unrollLoops","pattern","snippet","unroll","fetchAttributeLocations","getProgramParameter","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","programIdCount","WebGLProgramWrapper","usedTimes","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","mapping","gammaFactorDefine","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","supportsVertexTextures","maxBones","useFog","fogExp","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","numClipIntersection","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","vertexGlsl","fragmentGlsl","glVertexShader","WebGLShaderWrapper","glFragmentShader","attachShader","index0AttributeName","bindAttribLocation","linkProgram","programLog","getProgramInfoLog","trim","vertexLog","getShaderInfoLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","cachedAttributes","cachedUniforms","deleteProgram","_WebGLProgram","getTextureEncodingFromMap","gammaOverrideLinear","nVertexUniforms","nVertexMatrices","nClipPlanes","nClipIntersection","shaderIDs","allocateBones","getRenderTarget","envMapMode","parameterNames","pl","pop","destroy","WebGLRenderList","renderItems","renderItemsIndex","lists","list","addLineNumbers","lines","split","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","lookTarget","lightPositionWorld","morphingFlag","skinningFlag","numberOfMaterialVariants","depthMaterials","distanceMaterials","materialCache","maxShadowMapSize","0","1","2","cubeDirections","cubeUps","cube2DViewPorts","useMorphing","useSkinning","depthMaterial","distanceMaterial","isPointLight","materialVariants","customMaterial","customDepthMaterial","customDistanceMaterial","variantIndex","keyA","keyB","materialsForVariant","cachedMaterial","disable","BLEND","faceCount","shadowCamera","vpWidth","vpHeight","pars","shadowMatrix","vpDimensions","getDepthMaterial","_Three","vertexBuffer","elementBuffer","uvOffset","getUniformLocation","uvScale","fogType","fogDepth","fillStyle","fillRect","CanvasTexture","sprites","CULL_FACE","enable","uniformMatrix4fv","activeTexture","TEXTURE0","uniform1i","oldFogType","sceneFogType","uniform3f","uniform1f","spritePosition","spriteRotation","spriteScale","uniform2f","uniform2fv","setBlending","ColorBuffer","locked","currentColorMask","currentColorClear","colorMask","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","depthMask","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","stencilFail","stencilZFail","stencilZPass","stencilOp","clearStencil","lineWidthAvailable","emptyTextures","currentFlipSided","currentCullFace","currentBlending","currentPremultipledAlpha","currentBlendEquation","currentBlendEquationAlpha","currentBlendSrc","currentBlendDst","currentBlendSrcAlpha","currentBlendDstAlpha","compressedTextureFormats","currentProgram","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","currentTextureSlot","currentBoundTextures","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","MAX_COMBINED_TEXTURE_IMAGE_UNITS","VERSION","createTexture","TEXTURE_CUBE_MAP","setFunc","frontFace","CW","CCW","BACK","FRONT","FRONT_AND_BACK","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","SRC_COLOR","disableVertexAttribArray","enableVertexAttribArray","vertexAttribDivisorANGLE","formats","COMPRESSED_TEXTURE_FORMATS","factor","units","POLYGON_OFFSET_FILL","SCISSOR_TEST","boundTexture","bindTexture","internalformat","border","compressedTexImage2D","pixels","texImage2D","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","RGBA","clampToMaxSize","maxSize","HTMLImageElement","HTMLCanvasElement","ImageBitmap","drawImage","isPowerOfTwo","makePowerOfTwo","floorPowerOfTwo","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","generateMipmaps","videoTextures","onTextureDispose","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","LINEAR","__image__webglTextureCube","deleteTexture","__webglInit","renderTargetProperties","deleteFramebuffer","__webglDepthbuffer","deleteRenderbuffer","pixelStorei","UNPACK_FLIP_Y_WEBGL","flipY","UNPACK_PREMULTIPLY_ALPHA_WEBGL","premultiplyAlpha","UNPACK_ALIGNMENT","unpackAlignment","isPowerOfTwoImage","glFormat","glType","setTextureParameters","mipmap","mipmaps","DEPTH_COMPONENT","DEPTH_STENCIL","getCompressedTextureFormats","generateMipmap","__version","updateVideoTexture","complete","uploadTexture","isCompressed","isDataTexture","cubeImage","TEXTURE_WRAP_S","TEXTURE_WRAP_T","CLAMP_TO_EDGE","filterFallback","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","attachment","textureTarget","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","DepthTexture","webglDepthTexture","setupDepthTexture","createRenderbuffer","setupRenderBufferStorage","isTargetPowerOfTwo","createFramebuffer","setupFrameBufferTexture","setupDepthRenderbuffer","webglTexture","emptyTexture","emptyCubeTexture","UniformSetter","activeInfo","addr","setValue1f","setValue1i","setValue2fv","setValue3fv","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","mat2array","uniformMatrix2fv","setValue3fm","mat3array","uniformMatrix3fv","setValue4fm","mat4array","setValueT1","allocTextureUnit","setValueT6","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","flatten","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","allocTexUnits","setValueT6a","arrayCacheI32","nBlocks","blockSize","arrayCacheF32","SingleUniformSetter","setter","getSingularSetter","PureArrayUniformSetter","getPureArraySetter","UniformContainer","StructuredUniformSetter","RePathPart","ACTIVE_UNIFORMS","getActiveUniform","path","parseUniform","container","pathLength","lastIndex","matchEnd","idIsIndex","subscript","addUniform","next","uniformObject","parameter","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","RGB","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","Fog","FogExp2","Scene","_Texture2","DEFAULT_IMAGE","CompressedTexture","images","textureId","DEFAULT_MAPPING","VideoTexture","video","readyState","HAVE_CURRENT_DATA","arrayMin"],"mappings":"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BAAA19D,uDAAA,sDACA,IAAAmkE,aAAAzG,uBAAA19D,uDAAA,sDACA,IAAAokE,aAAA1G,uBAAA19D,uDAAA,sDACA,IAAAqkE,aAAA3G,uBAAA19D,uDAAA,sDACA,IAAAskE,aAAA5G,uBAAA19D,uDAAA,wIACA,IAAMukE,aACFC,6CACAC,uDACAC,+CACAC,uCACAC,iDACAC,mCACAC,+CACAC,qBACAC,qDACAC,2DACAC,qEACAC,iEACAC,uDACAC,uCACAC,iDACAC,6CACAC,mCACAC,uBACAC,iEACAC,mDACAC,iEACAC,uDACAC,mDACAC,6DACAC,+CACAC,yDACAC,yCACAC,mDACAC,+CACAC,qCACAC,+BACAC,yCACAC,mCACAC,6CACAC,6DACAC,6CACAC,uDACAC,qDACAC,iCACAC,qDACAC,+DACAC,2DACAC,qEACAC,yCACAC,mDACAC,6DACAC,yDACAC,+CACAC,mCACAC,6CACAC,qDACAC,+DACAC,qDACAC,+DACAC,+CACAC,yDACAC,+CACAC,yCACAC,yDACAC,yBACAC,mEACAC,uCACAC,+CACAC,yDACAC,qDACAC,+DACAC,yDACAC,qDACAC,2CACAC,2DACAC,yCACAC,mDACAC,yCACAC,6CACAC,mDACAC,6DACAC,mDACAC,6DACAC,2CACAC,uCACAC,6BACAC,6CACAC,yCACAC,+BACAC,yCACAC,6BACAC,6BACAC,+BACAC,+BACAC,6CACAC,6CACAC,qCACAC,qCACAC,yCACAC,yCACAC,uCACAC,uCACAC,2CACAC,2CACAC,uCACAC,uCACAC,6CACAC,6CACAC,iCACAC,iCACAC,iCACAC,iCACAC,iCACAC;;;;;;;;4BC1NJC,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;;;4BCAAA,oBAAA;;;;;;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","file":"three.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./es/Three.js\");\n","export { WebGLRenderTargetCube } from \"./renderers/WebGLRenderTargetCube\";\nexport { WebGLRenderTarget } from \"./renderers/WebGLRenderTarget\";\nexport { WebGLRenderer } from \"./renderers/WebGLRenderer\";\n// export { WebGL2Renderer } from './renderers/WebGL2Renderer';\nexport { ShaderLib } from \"./renderers/shaders/ShaderLib\";\nexport { UniformsLib } from \"./renderers/shaders/UniformsLib\";\nexport { UniformsUtils } from \"./renderers/shaders/UniformsUtils\";\nexport { ShaderChunk } from \"./renderers/shaders/ShaderChunk\";\nexport { FogExp2 } from \"./scenes/FogExp2\";\nexport { Fog } from \"./scenes/Fog\";\nexport { Scene } from \"./scenes/Scene\";\nexport { Sprite } from \"./objects/Sprite\";\nexport { LOD } from \"./objects/LOD\";\nexport { SkinnedMesh } from \"./objects/SkinnedMesh\";\nexport { Skeleton } from \"./objects/Skeleton\";\nexport { Bone } from \"./objects/Bone\";\nexport { Mesh } from \"./objects/Mesh\";\nexport { LineSegments } from \"./objects/LineSegments\";\nexport { LineLoop } from \"./objects/LineLoop\";\nexport { Line } from \"./objects/Line\";\nexport { Points } from \"./objects/Points\";\nexport { Group } from \"./objects/Group\";\nexport { VideoTexture } from \"./textures/VideoTexture\";\nexport { DataTexture } from \"./textures/DataTexture\";\nexport { CompressedTexture } from \"./textures/CompressedTexture\";\nexport { CubeTexture } from \"./textures/CubeTexture\";\nexport { CanvasTexture } from \"./textures/CanvasTexture\";\nexport { DepthTexture } from \"./textures/DepthTexture\";\nexport { Texture } from \"./textures/Texture\";\nexport * from \"./geometries/Geometries\";\nexport * from \"./materials/Materials\";\n/*\nexport { CompressedTextureLoader } from './loaders/CompressedTextureLoader';\nexport { DataTextureLoader } from './loaders/DataTextureLoader';\nexport { CubeTextureLoader } from './loaders/CubeTextureLoader';\nexport { TextureLoader } from './loaders/TextureLoader';\nexport { ObjectLoader } from './loaders/ObjectLoader';\nexport { MaterialLoader } from './loaders/MaterialLoader';\nexport { BufferGeometryLoader } from './loaders/BufferGeometryLoader';\nexport { DefaultLoadingManager, LoadingManager } from './loaders/LoadingManager';\nexport { JSONLoader } from './loaders/JSONLoader';\nexport { ImageLoader } from './loaders/ImageLoader';\nexport { ImageBitmapLoader } from './loaders/ImageBitmapLoader';\nexport { FontLoader } from './loaders/FontLoader';\nexport { FileLoader } from './loaders/FileLoader';\nexport { Loader } from './loaders/Loader';\nexport { LoaderUtils } from './loaders/LoaderUtils';\nexport { Cache } from './loaders/Cache';\nexport { AudioLoader } from './loaders/AudioLoader';\n*/\nexport { SpotLightShadow } from \"./lights/SpotLightShadow\";\nexport { SpotLight } from \"./lights/SpotLight\";\nexport { PointLight } from \"./lights/PointLight\";\nexport { RectAreaLight } from \"./lights/RectAreaLight\";\nexport { HemisphereLight } from \"./lights/HemisphereLight\";\nexport { DirectionalLightShadow } from \"./lights/DirectionalLightShadow\";\nexport { DirectionalLight } from \"./lights/DirectionalLight\";\nexport { AmbientLight } from \"./lights/AmbientLight\";\nexport { LightShadow } from \"./lights/LightShadow\";\nexport { Light } from \"./lights/Light\";\n//export { StereoCamera } from './cameras/StereoCamera';\nexport { PerspectiveCamera } from \"./cameras/PerspectiveCamera\";\nexport { OrthographicCamera } from \"./cameras/OrthographicCamera\";\n//export { CubeCamera } from './cameras/CubeCamera';\nexport { ArrayCamera } from \"./cameras/ArrayCamera\";\nexport { Camera } from \"./cameras/Camera\";\nexport { AudioListenerWrapper as AudioListener } from \"./audio/AudioListener\";\nexport { PositionalAudio } from \"./audio/PositionalAudio\";\nexport { AudioContextWrapper as AudioContext } from \"./audio/AudioContext\";\nexport { AudioAnalyserWrapper as AudioAnalyser } from \"./audio/AudioAnalyser\";\nexport { AudioWrapper as Audio } from \"./audio/Audio\";\n/*\nexport { VectorKeyframeTrack } from './animation/tracks/VectorKeyframeTrack';\nexport { StringKeyframeTrack } from './animation/tracks/StringKeyframeTrack';\nexport { QuaternionKeyframeTrack } from './animation/tracks/QuaternionKeyframeTrack';\nexport { NumberKeyframeTrack } from './animation/tracks/NumberKeyframeTrack';\nexport { ColorKeyframeTrack } from './animation/tracks/ColorKeyframeTrack';\nexport { BooleanKeyframeTrack } from './animation/tracks/BooleanKeyframeTrack';\nexport { PropertyMixer } from './animation/PropertyMixer';\nexport { PropertyBinding } from './animation/PropertyBinding';\nexport { KeyframeTrack } from './animation/KeyframeTrack';\nexport { AnimationUtils } from './animation/AnimationUtils';\nexport { AnimationObjectGroup } from './animation/AnimationObjectGroup';\nexport { AnimationMixer } from './animation/AnimationMixer';\nexport { AnimationClip } from './animation/AnimationClip';\n*/\nexport { InstancedBufferGeometry } from \"./core/InstancedBufferGeometry\";\nexport { BufferGeometry } from \"./core/BufferGeometry\";\nexport { Geometry } from \"./core/Geometry\";\nexport { InterleavedBufferAttribute } from \"./core/InterleavedBufferAttribute\";\nexport { InstancedInterleavedBufferAttribute } from \"./core/InstancedInterleavedBufferAttribute\";\nexport { InstancedBufferAttribute } from \"./core/InstancedBufferAttribute\";\nexport * from \"./core/BufferAttribute\";\nexport { Face3 } from \"./core/Face3\";\nexport { Object3D } from \"./core/Object3D\";\nexport { Raycaster } from \"./core/Raycaster\";\nexport { Layers } from \"./core/Layers\";\nexport { EventDispatcher } from \"./core/EventDispatcher\";\nexport { Clock } from \"./core/Clock\";\n/*\nexport { QuaternionLinearInterpolant } from './math/interpolants/QuaternionLinearInterpolant';\nexport { LinearInterpolant } from './math/interpolants/LinearInterpolant';\nexport { DiscreteInterpolant } from './math/interpolants/DiscreteInterpolant';\nexport { CubicInterpolant } from './math/interpolants/CubicInterpolant';\nexport { Interpolant } from './math/Interpolant';\n*/\nexport { Triangle } from \"./math/Triangle\";\nexport { MathUtil as Math } from \"./math/Math\";\nexport { Spherical } from \"./math/Spherical\";\n//export { Cylindrical } from './math/Cylindrical';\nexport { Plane } from \"./math/Plane\";\nexport { Frustum } from \"./math/Frustum\";\nexport { Sphere } from \"./math/Sphere\";\nexport { Ray } from \"./math/Ray\";\nexport { Matrix2 } from \"./math/Matrix2\";\nexport { Matrix3 } from \"./math/Matrix3\";\nexport { Matrix4 } from \"./math/Matrix4\";\nexport { Box3 } from \"./math/Box3\";\n//export { Box2 } from './math/Box2';\nexport { Line3 } from \"./math/Line3\";\nexport { Euler } from \"./math/Euler\";\nexport { Vector4 } from \"./math/Vector4\";\nexport { Vector3 } from \"./math/Vector3\";\nexport { Vector2 } from \"./math/Vector2\";\nexport { Quaternion } from \"./math/Quaternion\";\nexport { Color } from \"./math/Color\";\nexport { ImmediateRenderObject } from \"./extras/objects/ImmediateRenderObject\";\n/*\nexport { VertexNormalsHelper } from './helpers/VertexNormalsHelper';\nexport { SpotLightHelper } from './helpers/SpotLightHelper';\nexport { SkeletonHelper } from './helpers/SkeletonHelper';\nexport { PointLightHelper } from './helpers/PointLightHelper';\nexport { RectAreaLightHelper } from './helpers/RectAreaLightHelper';\nexport { HemisphereLightHelper } from './helpers/HemisphereLightHelper';\nexport { GridHelper } from './helpers/GridHelper';\nexport { PolarGridHelper } from './helpers/PolarGridHelper';\nexport { FaceNormalsHelper } from './helpers/FaceNormalsHelper';\nexport { DirectionalLightHelper } from './helpers/DirectionalLightHelper';\nexport { CameraHelper } from './helpers/CameraHelper';\nexport { BoxHelper } from './helpers/BoxHelper';\nexport { Box3Helper } from './helpers/Box3Helper';\nexport { PlaneHelper } from './helpers/PlaneHelper';\nexport { ArrowHelper } from './helpers/ArrowHelper';\nexport { AxesHelper } from './helpers/AxesHelper';\nexport * from './extras/curves/Curves';\nexport { Shape } from './extras/core/Shape';\nexport { Path } from './extras/core/Path';\nexport { ShapePath } from './extras/core/ShapePath';\nexport { Font } from './extras/core/Font';\nexport { CurvePath } from './extras/core/CurvePath';\nexport { Curve } from './extras/core/Curve';\nexport { ShapeUtils } from './extras/ShapeUtils';\n*/\nexport { WebGLUtils } from \"./renderers/webgl/WebGLUtils\";\nexport * from \"./constants\";\n","import { Object3D } from \"../core/Object3D\";\nexport class AudioWrapper extends Object3D {\n    constructor(listener) {\n        super();\n        this.type = \"Audio\";\n        this.startTime = 0;\n        this.offset = 0;\n        this.isPlaying = false;\n        this.hasPlaybackControl = true;\n        this.sourceType = \"empty\";\n        this.autoplay = false;\n        this.buffer = null;\n        this.loop = false;\n        this.playbackRate = 1;\n        this.filters = [];\n        this.context = listener.context;\n        this.gain = this.context.createGain();\n        this.gain.connect(listener.getInput());\n    }\n    getOutput() {\n        return this.gain;\n    }\n    setNodeSource(audioNode) {\n        this.hasPlaybackControl = false;\n        this.source = audioNode;\n        this.sourceType = \"audioNode\";\n        this.connect();\n        return this;\n    }\n    setBuffer(audioBuffer) {\n        this.buffer = audioBuffer;\n        this.sourceType = \"buffer\";\n        if (this.autoplay)\n            this.play();\n        return this;\n    }\n    play() {\n        if (this.isPlaying === true) {\n            console.warn(`THREE.Audio: Audio is already playing.`);\n            return this;\n        }\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        const source = this.context.createBufferSource();\n        source.buffer = this.buffer;\n        source.loop = this.loop;\n        source.onended = this.onEnded.bind(this);\n        source.playbackRate.setValueAtTime(this.playbackRate, this.startTime);\n        this.startTime = this.context.currentTime;\n        source.start(this.startTime, this.offset);\n        this.isPlaying = true;\n        this.source = source;\n        return this.connect();\n    }\n    pause() {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        if (this.isPlaying === true) {\n            this.source.stop();\n            this.offset += (this.context.currentTime - this.startTime) * this.playbackRate;\n            this.isPlaying = false;\n        }\n        return this;\n    }\n    stop() {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        this.source.stop();\n        this.offset = 0;\n        this.isPlaying = false;\n        return this;\n    }\n    connect() {\n        if (this.filters.length > 0) {\n            this.source.connect(this.filters[0]);\n            for (let i = 1, l = this.filters.length; i < l; i++) {\n                this.filters[i - 1].connect(this.filters[i]);\n            }\n            this.filters[this.filters.length - 1].connect(this.getOutput());\n        }\n        else {\n            this.source.connect(this.getOutput());\n        }\n        return this;\n    }\n    disconnect() {\n        if (this.filters.length > 0) {\n            this.source.disconnect(this.filters[0]);\n            for (let i = 1, l = this.filters.length; i < l; i++) {\n                this.filters[i - 1].disconnect(this.filters[i]);\n            }\n            this.filters[this.filters.length - 1].disconnect(this.getOutput());\n        }\n        else {\n            this.source.disconnect(this.getOutput());\n        }\n        return this;\n    }\n    getFilters() {\n        return this.filters;\n    }\n    setFilters(value = []) {\n        if (this.isPlaying === true) {\n            this.disconnect();\n            this.filters = value;\n            this.connect();\n        }\n        else {\n            this.filters = value;\n        }\n        return this;\n    }\n    getFilter() {\n        return this.getFilters()[0];\n    }\n    setFilter(filter) {\n        return this.setFilters(filter ? [filter] : []);\n    }\n    setPlaybackRate(value) {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        this.playbackRate = value;\n        if (this.isPlaying === true) {\n            this.source.playbackRate.setValueAtTime(this.playbackRate, this.context.currentTime);\n        }\n        return this;\n    }\n    getPlaybackRate() {\n        return this.playbackRate;\n    }\n    onEnded() {\n        this.isPlaying = false;\n    }\n    getLoop() {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return false;\n        }\n        return this.loop;\n    }\n    setLoop(value) {\n        if (this.hasPlaybackControl === false) {\n            console.warn(`THREE.Audio: this Audio has no playback control.`);\n            return this;\n        }\n        this.loop = value;\n        if (this.isPlaying === true) {\n            this.source.loop = this.loop;\n        }\n        return this;\n    }\n    getVolume() {\n        return this.gain.gain.value;\n    }\n    setVolume(value) {\n        this.gain.gain.value = value;\n        return this;\n    }\n}\n","export class AudioAnalyserWrapper {\n    constructor(audio, fftSize = 2048) {\n        this.analyser = audio.context.createAnalyser();\n        this.analyser.fftSize = fftSize;\n        this.data = new Uint8Array(this.analyser.frequencyBinCount);\n        audio.getOutput().connect(this.analyser);\n    }\n    getFrequencyData() {\n        this.analyser.getByteFrequencyData(this.data);\n        return this.data;\n    }\n    getAverageFrequency() {\n        let value = 0;\n        const data = this.getFrequencyData();\n        for (let i = 0; i < data.length; i++) {\n            value += data[i];\n        }\n        return value / data.length;\n    }\n}\n","export class AudioContextWrapper {\n    static getContext() {\n        if (AudioContextWrapper.context === undefined) {\n            AudioContextWrapper.context = new (window.AudioContext ||\n                window.webkitAudioContext)();\n        }\n        return AudioContextWrapper.context;\n    }\n    static setContext(value) {\n        AudioContextWrapper.context = value;\n    }\n}\nAudioContextWrapper.context = undefined;\n","import { Object3D } from \"../core/Object3D\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { AudioContextWrapper } from \"./AudioContext\";\nexport class AudioListenerWrapper extends Object3D {\n    constructor() {\n        super();\n        this.type = \"AudioListener\";\n        this.context = AudioContextWrapper.getContext();\n        this.filter = null;\n        this.gain = this.context.createGain();\n        this.gain.connect(this.context.destination);\n    }\n    getInput() {\n        return this.gain;\n    }\n    removeFilter() {\n        if (this.filter !== null) {\n            this.gain.disconnect(this.filter);\n            this.filter.disconnect(this.context.destination);\n            this.gain.connect(this.context.destination);\n            this.filter = null;\n        }\n    }\n    getFilter() {\n        return this.filter;\n    }\n    setFilter(value) {\n        if (this.filter !== null) {\n            this.gain.disconnect(this.filter);\n            this.filter.disconnect(this.context.destination);\n        }\n        else {\n            this.gain.disconnect(this.context.destination);\n        }\n        this.filter = value;\n        this.gain.connect(this.filter);\n        this.filter.connect(this.context.destination);\n        return this;\n    }\n    getMasterVolume() {\n        return this.gain.gain.value;\n    }\n    setMasterVolume(value) {\n        this.gain.gain.value = value;\n        return this;\n    }\n    updateMatrixWorld(force = false) {\n        super.updateMatrixWorld(force);\n        const position = new Vector3();\n        const quaternion = new Quaternion();\n        const scale = new Vector3();\n        const orientation = new Vector3();\n        const listener = this.context.listener;\n        const up = this.up;\n        this.matrixWorld.decompose(position, quaternion, scale);\n        orientation.set(0, 0, -1).applyQuaternion(quaternion);\n        if (listener.positionX) {\n            listener.positionX.setValueAtTime(position.x, this.context.currentTime);\n            listener.positionY.setValueAtTime(position.y, this.context.currentTime);\n            listener.positionZ.setValueAtTime(position.z, this.context.currentTime);\n            listener.forwardX.setValueAtTime(orientation.x, this.context.currentTime);\n            listener.forwardY.setValueAtTime(orientation.y, this.context.currentTime);\n            listener.forwardZ.setValueAtTime(orientation.z, this.context.currentTime);\n            listener.upX.setValueAtTime(up.x, this.context.currentTime);\n            listener.upY.setValueAtTime(up.y, this.context.currentTime);\n            listener.upZ.setValueAtTime(up.z, this.context.currentTime);\n        }\n        else {\n            listener.setPosition(position.x, position.y, position.z);\n            listener.setOrientation(orientation.x, orientation.y, orientation.z, up.x, up.y, up.z);\n        }\n        return this;\n    }\n}\n","import { Vector3 } from \"../math/Vector3\";\nimport { AudioWrapper } from \"./Audio\";\nexport class PositionalAudio extends AudioWrapper {\n    constructor(listener) {\n        super(listener);\n        this.panner = this.context.createPanner();\n        this.panner.connect(this.gain);\n    }\n    getOutput() {\n        return this.panner;\n    }\n    getRefDistance() {\n        return this.panner.refDistance;\n    }\n    setRefDistance(value) {\n        this.panner.refDistance = value;\n    }\n    getRolloffFactor() {\n        return this.panner.rolloffFactor;\n    }\n    setRolloffFactor(value) {\n        this.panner.rolloffFactor = value;\n    }\n    getDistanceModel() {\n        return this.panner.distanceModel;\n    }\n    setDistanceModel(value) {\n        this.panner.distanceModel = value;\n    }\n    getMaxDistance() {\n        return this.panner.maxDistance;\n    }\n    setMaxDistance(value) {\n        this.panner.maxDistance = value;\n    }\n    updateMatrixWorld(force = false) {\n        super.updateMatrixWorld(force);\n        const position = new Vector3();\n        position.setFromMatrixPosition(this.matrixWorld);\n        this.panner.setPosition(position.x, position.y, position.z);\n        return this;\n    }\n}\n","import { PerspectiveCamera } from \"./PerspectiveCamera\";\nexport class ArrayCamera extends PerspectiveCamera {\n    constructor(cameras = []) {\n        super();\n        this.cameras = [];\n        this.cameras = cameras;\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class Camera extends Object3D {\n    constructor() {\n        super();\n        this.type = \"Camera\";\n        this.matrixWorldInverse = new Matrix4();\n        this.projectionMatrix = new Matrix4();\n    }\n    updateMatrixWorld(force = false) {\n        super.updateMatrixWorld(force);\n        this.matrixWorldInverse.getInverse(this.matrixWorld);\n        return this;\n    }\n    copy(source, recursive = true) {\n        super.copy(source, recursive);\n        this.matrixWorldInverse.copy(source.matrixWorldInverse);\n        this.projectionMatrix.copy(source.projectionMatrix);\n        return this;\n    }\n    get worldDirection() {\n        return new Vector3().set(0, 0, -1).applyQuaternion(this.worldQuaternion);\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Camera } from \"./Camera\";\nexport class OrthographicCamera extends Camera {\n    constructor(left = 0, right = 0, top = 0, bottom = 0, near = 0.1, far = 2000) {\n        super();\n        this.type = \"OrthographicCamera\";\n        this._left = 0;\n        this._right = 0;\n        this._top = 0;\n        this._bottom = 0;\n        this._zoom = 1;\n        this._near = 0.1;\n        this._far = 2000;\n        this._view = null;\n        this._left = left;\n        this._right = right;\n        this._top = top;\n        this._bottom = bottom;\n        this._near = near;\n        this._far = far;\n        this.updateProjectionMatrix();\n    }\n    get zoom() {\n        return this._zoom;\n    }\n    set zoom(_zoom) {\n        this._zoom = _zoom;\n        this.updateProjectionMatrix();\n    }\n    get near() {\n        return this._near;\n    }\n    set near(_near) {\n        this._near = _near;\n        this.updateProjectionMatrix();\n    }\n    get far() {\n        return this._far;\n    }\n    set far(_far) {\n        this._far = _far;\n        this.updateProjectionMatrix();\n    }\n    get left() {\n        return this._left;\n    }\n    set left(_left) {\n        this._left = _left;\n        this.updateProjectionMatrix();\n    }\n    get right() {\n        return this._right;\n    }\n    set right(_right) {\n        this._right = _right;\n        this.updateProjectionMatrix();\n    }\n    get top() {\n        return this._top;\n    }\n    set top(_top) {\n        this._top = _top;\n        this.updateProjectionMatrix();\n    }\n    get bottom() {\n        return this._bottom;\n    }\n    set bottom(_bottom) {\n        this._bottom = _bottom;\n        this.updateProjectionMatrix();\n    }\n    get view() {\n        return this._view;\n    }\n    setViewOffset(fullWidth, fullHeight, x, y, width, height) {\n        this._view = {\n            enabled: true,\n            fullHeight: fullHeight,\n            fullWidth: fullWidth,\n            height: height,\n            offsetX: x,\n            offsetY: y,\n            width: width,\n        };\n        return this.updateProjectionMatrix();\n    }\n    clearViewOffset() {\n        if (this.view !== null) {\n            this.view.enabled = false;\n        }\n        return this.updateProjectionMatrix();\n    }\n    updateProjectionMatrix() {\n        const dx = (this.right - this.left) / (2 * this.zoom);\n        const dy = (this.top - this.bottom) / (2 * this.zoom);\n        const cx = (this.right + this.left) / 2;\n        const cy = (this.top + this.bottom) / 2;\n        let left = cx - dx;\n        let right = cx + dx;\n        let top = cy + dy;\n        let bottom = cy - dy;\n        if (this.view !== null && this.view.enabled) {\n            const zoomW = this.zoom / (this.view.width / this.view.fullWidth);\n            const zoomH = this.zoom / (this.view.height / this.view.fullHeight);\n            const scaleW = (this.right - this.left) / this._view.width;\n            const scaleH = (this.top - this.bottom) / this._view.height;\n            left += scaleW * (this.view.offsetX / zoomW);\n            right = left + scaleW * (this.view.width / zoomW);\n            top -= scaleH * (this.view.offsetY / zoomH);\n            bottom = top - scaleH * (this.view.height / zoomH);\n        }\n        this.projectionMatrix.makeOrthographic(left, right, top, bottom, this.near, this.far);\n        return this;\n    }\n    copy(source) {\n        super.copy(source);\n        this._top = source.top;\n        this._bottom = source.bottom;\n        this._left = source.left;\n        this._right = source.right;\n        this._zoom = source.zoom;\n        this._near = source.near;\n        this._far = source.far;\n        this._view = source.view === null ? null : Object.assign({}, source.view);\n        return this.updateProjectionMatrix();\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { MathUtil } from \"../math/Math\";\nimport { Camera } from \"./Camera\";\nexport class PerspectiveCamera extends Camera {\n    constructor(fov = 50, aspect = 1, near = 0.1, far = 2000) {\n        super();\n        this.type = \"PerspectiveCamera\";\n        this.focus = 10;\n        this._fov = 50;\n        this._zoom = 1;\n        this._near = 0.1;\n        this._far = 2000;\n        this._aspect = 1;\n        this._view = null;\n        /**\n         * width of the film (default in millimeters)\n         * @type {number}\n         */\n        this._filmGauge = 35;\n        /**\n         * horizontal film offset (same unit as gauge)\n         * @type {number}\n         */\n        this._filmOffset = 0;\n        this._fov = fov;\n        this._aspect = aspect;\n        this._near = near;\n        this._far = far;\n        this.updateProjectionMatrix();\n    }\n    get fov() {\n        return this._fov;\n    }\n    set fov(_fov) {\n        this._fov = _fov;\n        this.updateProjectionMatrix();\n    }\n    get zoom() {\n        return this._zoom;\n    }\n    set zoom(_zoom) {\n        this._zoom = _zoom;\n        this.updateProjectionMatrix();\n    }\n    get near() {\n        return this._near;\n    }\n    set near(_near) {\n        this._near = _near;\n        this.updateProjectionMatrix();\n    }\n    get far() {\n        return this._far;\n    }\n    set far(_far) {\n        this._far = _far;\n        this.updateProjectionMatrix();\n    }\n    get aspect() {\n        return this._aspect;\n    }\n    set aspect(_aspect) {\n        this._aspect = _aspect;\n        this.updateProjectionMatrix();\n    }\n    get view() {\n        return this._view;\n    }\n    get filmGauge() {\n        return this._filmGauge;\n    }\n    set filmGauge(_filmGauge) {\n        this._filmGauge = _filmGauge;\n        this.updateProjectionMatrix();\n    }\n    get filmOffset() {\n        return this._filmOffset;\n    }\n    set filmOffset(_filmOffset) {\n        this._filmOffset = _filmOffset;\n        this.updateProjectionMatrix();\n    }\n    /**\n     * see http://www.bobatkins.com/photography/technical/field_of_view.html\n     * Sets the FOV by focal length in respect to the current .filmGauge.\n     *\n     * The default film gauge is 35, so that the focal length can be specified for\n     * a 35mm (full frame) camera.\n     *\n     * Values for focal length and film gauge must have the same unit.\n     * @param focalLength\n     * @returns {PerspectiveCamera}\n     */\n    setFocalLength(focalLength) {\n        const vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n        this._fov = MathUtil.RAD2DEG * 2 * Math.atan(vExtentSlope);\n        return this.updateProjectionMatrix();\n    }\n    getFocalLength() {\n        const vExtentSlope = Math.tan(MathUtil.DEG2RAD * 0.5 * this.fov);\n        return 0.5 * this.getFilmHeight() / vExtentSlope;\n    }\n    getEffectiveFOV() {\n        return MathUtil.RAD2DEG * 2 * Math.atan(Math.tan(MathUtil.DEG2RAD * 0.5 * this.fov) / this.zoom);\n    }\n    /**\n     * film not completely covered in portrait format (aspect < 1)\n     * @returns {number}\n     */\n    getFilmWidth() {\n        return this.filmGauge * Math.min(this.aspect, 1);\n    }\n    /**\n     * film not completely covered in landscape format (aspect > 1)\n     * @returns {number}\n     */\n    getFilmHeight() {\n        return this.filmGauge / Math.max(this.aspect, 1);\n    }\n    /**\n     * Sets an offset in a larger frustum. This is useful for multi-window or\n     * multi-monitor/multi-machine setups.\n     *\n     * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n     * the monitors are in grid like this\n     *\n     *   +---+---+---+\n     *   | A | B | C |\n     *   +---+---+---+\n     *   | D | E | F |\n     *   +---+---+---+\n     *\n     * then for each monitor you would call it like this\n     *\n     *   var w = 1920;\n     *   var h = 1080;\n     *   var fullWidth = w * 3;\n     *   var fullHeight = h * 2;\n     *\n     *   --A--\n     *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n     *   --B--\n     *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n     *   --C--\n     *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n     *   --D--\n     *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n     *   --E--\n     *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n     *   --F--\n     *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n     *\n     *   Note there is no reason monitors have to be the same size or in a grid.\n     */\n    setViewOffset(fullWidth, fullHeight, x, y, width, height) {\n        this._view = {\n            enabled: true,\n            fullHeight: fullHeight,\n            fullWidth: fullWidth,\n            height: height,\n            offsetX: x,\n            offsetY: y,\n            width: width,\n        };\n        return this.updateProjectionMatrix();\n    }\n    clearViewOffset() {\n        if (this.view !== null) {\n            this.view.enabled = false;\n        }\n        return this.updateProjectionMatrix();\n    }\n    updateProjectionMatrix() {\n        const near = this.near;\n        let top = near * Math.tan(MathUtil.DEG2RAD * 0.5 * this.fov) / this.zoom;\n        let height = 2 * top;\n        let width = this.aspect * height;\n        let left = -0.5 * width;\n        const view = this.view;\n        if (this.view !== null && this.view.enabled) {\n            const fullWidth = view.fullWidth, fullHeight = view.fullHeight;\n            left += view.offsetX * width / fullWidth;\n            top -= view.offsetY * height / fullHeight;\n            width *= view.width / fullWidth;\n            height *= view.height / fullHeight;\n        }\n        const skew = this.filmOffset;\n        if (skew !== 0)\n            left += near * skew / this.getFilmWidth();\n        this.projectionMatrix.makePerspective(left, left + width, top, top - height, near, this.far);\n        return this;\n    }\n    copy(source) {\n        super.copy(source);\n        this._fov = source.fov;\n        this._zoom = source.zoom;\n        this._near = source.near;\n        this._far = source.far;\n        this.focus = source.focus;\n        this._aspect = source.aspect;\n        this._view = source.view === null ? null : Object.assign({}, source.view);\n        this._filmGauge = source.filmGauge;\n        this._filmOffset = source.filmOffset;\n        return this.updateProjectionMatrix();\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","/* tslint:disable */\nexport const REVISION = \"90dev\";\nexport const MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\nexport const CullFaceNone = 0;\nexport const CullFaceBack = 1;\nexport const CullFaceFront = 2;\nexport const CullFaceFrontBack = 3;\nexport const FrontFaceDirectionCW = 0;\nexport const FrontFaceDirectionCCW = 1;\nexport const BasicShadowMap = 0;\nexport const PCFShadowMap = 1;\nexport const PCFSoftShadowMap = 2;\nexport const FrontSide = 0;\nexport const BackSide = 1;\nexport const DoubleSide = 2;\nexport const FlatShading = 1;\nexport const SmoothShading = 2;\nexport const NoColors = 0;\nexport const FaceColors = 1;\nexport const VertexColors = 2;\nexport const NoBlending = 0;\nexport const NormalBlending = 1;\nexport const AdditiveBlending = 2;\nexport const SubtractiveBlending = 3;\nexport const MultiplyBlending = 4;\nexport const CustomBlending = 5;\nexport const AddEquation = 100;\nexport const SubtractEquation = 101;\nexport const ReverseSubtractEquation = 102;\nexport const MinEquation = 103;\nexport const MaxEquation = 104;\nexport const ZeroFactor = 200;\nexport const OneFactor = 201;\nexport const SrcColorFactor = 202;\nexport const OneMinusSrcColorFactor = 203;\nexport const SrcAlphaFactor = 204;\nexport const OneMinusSrcAlphaFactor = 205;\nexport const DstAlphaFactor = 206;\nexport const OneMinusDstAlphaFactor = 207;\nexport const DstColorFactor = 208;\nexport const OneMinusDstColorFactor = 209;\nexport const SrcAlphaSaturateFactor = 210;\nexport const NeverDepth = 0;\nexport const AlwaysDepth = 1;\nexport const LessDepth = 2;\nexport const LessEqualDepth = 3;\nexport const EqualDepth = 4;\nexport const GreaterEqualDepth = 5;\nexport const GreaterDepth = 6;\nexport const NotEqualDepth = 7;\nexport const MultiplyOperation = 0;\nexport const MixOperation = 1;\nexport const AddOperation = 2;\nexport const NoToneMapping = 0;\nexport const LinearToneMapping = 1;\nexport const ReinhardToneMapping = 2;\nexport const Uncharted2ToneMapping = 3;\nexport const CineonToneMapping = 4;\nexport const UVMapping = 300;\nexport const CubeReflectionMapping = 301;\nexport const CubeRefractionMapping = 302;\nexport const EquirectangularReflectionMapping = 303;\nexport const EquirectangularRefractionMapping = 304;\nexport const SphericalReflectionMapping = 305;\nexport const CubeUVReflectionMapping = 306;\nexport const CubeUVRefractionMapping = 307;\nexport const RepeatWrapping = 1000;\nexport const ClampToEdgeWrapping = 1001;\nexport const MirroredRepeatWrapping = 1002;\nexport const NearestFilter = 1003;\nexport const NearestMipMapNearestFilter = 1004;\nexport const NearestMipMapLinearFilter = 1005;\nexport const LinearFilter = 1006;\nexport const LinearMipMapNearestFilter = 1007;\nexport const LinearMipMapLinearFilter = 1008;\nexport const UnsignedByteType = 1009;\nexport const ByteType = 1010;\nexport const ShortType = 1011;\nexport const UnsignedShortType = 1012;\nexport const IntType = 1013;\nexport const UnsignedIntType = 1014;\nexport const FloatType = 1015;\nexport const HalfFloatType = 1016;\nexport const UnsignedShort4444Type = 1017;\nexport const UnsignedShort5551Type = 1018;\nexport const UnsignedShort565Type = 1019;\nexport const UnsignedInt248Type = 1020;\nexport const AlphaFormat = 1021;\nexport const RGBFormat = 1022;\nexport const RGBAFormat = 1023;\nexport const LuminanceFormat = 1024;\nexport const LuminanceAlphaFormat = 1025;\nexport const RGBEFormat = RGBAFormat;\nexport const DepthFormat = 1026;\nexport const DepthStencilFormat = 1027;\nexport const RGB_S3TC_DXT1_Format = 33776;\nexport const RGBA_S3TC_DXT1_Format = 33777;\nexport const RGBA_S3TC_DXT3_Format = 33778;\nexport const RGBA_S3TC_DXT5_Format = 33779;\nexport const RGB_PVRTC_4BPPV1_Format = 35840;\nexport const RGB_PVRTC_2BPPV1_Format = 35841;\nexport const RGBA_PVRTC_4BPPV1_Format = 35842;\nexport const RGBA_PVRTC_2BPPV1_Format = 35843;\nexport const RGB_ETC1_Format = 36196;\nexport const RGBA_ASTC_4x4_Format = 37808;\nexport const RGBA_ASTC_5x4_Format = 37809;\nexport const RGBA_ASTC_5x5_Format = 37810;\nexport const RGBA_ASTC_6x5_Format = 37811;\nexport const RGBA_ASTC_6x6_Format = 37812;\nexport const RGBA_ASTC_8x5_Format = 37813;\nexport const RGBA_ASTC_8x6_Format = 37814;\nexport const RGBA_ASTC_8x8_Format = 37815;\nexport const RGBA_ASTC_10x5_Format = 37816;\nexport const RGBA_ASTC_10x6_Format = 37817;\nexport const RGBA_ASTC_10x8_Format = 37818;\nexport const RGBA_ASTC_10x10_Format = 37819;\nexport const RGBA_ASTC_12x10_Format = 37820;\nexport const RGBA_ASTC_12x12_Format = 37821;\nexport const LoopOnce = 2200;\nexport const LoopRepeat = 2201;\nexport const LoopPingPong = 2202;\nexport const InterpolateDiscrete = 2300;\nexport const InterpolateLinear = 2301;\nexport const InterpolateSmooth = 2302;\nexport const ZeroCurvatureEnding = 2400;\nexport const ZeroSlopeEnding = 2401;\nexport const WrapAroundEnding = 2402;\nexport const TrianglesDrawMode = 0;\nexport const TriangleStripDrawMode = 1;\nexport const TriangleFanDrawMode = 2;\nexport const LinearEncoding = 3000;\nexport const sRGBEncoding = 3001;\nexport const GammaEncoding = 3007;\nexport const RGBEEncoding = 3002;\nexport const LogLuvEncoding = 3003;\nexport const RGBM7Encoding = 3004;\nexport const RGBM16Encoding = 3005;\nexport const RGBDEncoding = 3006;\nexport const BasicDepthPacking = 3200;\nexport const RGBADepthPacking = 3201;\n","import { Color } from \"../math/Color\";\nimport { MathUtil } from \"../math/Math\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Vector4 } from \"../math/Vector4\";\nexport class BufferAttribute {\n    constructor(array, itemSize = 0, normalized = false) {\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.itemSize = 1;\n        this.count = 0;\n        this.normalized = false;\n        this.dynamic = false;\n        this.updateRange = { offset: 0, count: -1 };\n        this.version = 0;\n        this.array = array;\n        this.itemSize = itemSize;\n        this.count = array !== undefined ? array.length / itemSize : 0;\n        this.normalized = normalized;\n    }\n    set needsUpdate(value) {\n        if (value === true)\n            this.version++;\n    }\n    setArray(array) {\n        this.count = array !== undefined ? array.length / this.itemSize : 0;\n        this.array = array;\n        return this;\n    }\n    setDynamic(value) {\n        this.dynamic = value;\n        return this;\n    }\n    copy(source) {\n        this.array = new source.array.constructor();\n        this.itemSize = source.itemSize;\n        this.count = source.count;\n        this.normalized = source.normalized;\n        this.dynamic = source.dynamic;\n        return this;\n    }\n    set(value, offset = 0) {\n        this.array.set(value, offset);\n        return this;\n    }\n    get(offset = 0, length = 1) {\n        return this.array.slice(offset, length);\n    }\n    copyAt(index1, attribute, index2) {\n        index1 *= this.itemSize;\n        index2 *= attribute.itemSize;\n        for (let i = 0, l = this.itemSize; i < l; i++) {\n            this.array[index1 + i] = attribute.array[index2 + i];\n        }\n        return this;\n    }\n    copyArray(array) {\n        this.array.set(array);\n        return this;\n    }\n    copyColorsArray(colors) {\n        const array = this.array;\n        let offset = 0;\n        for (let i = 0, l = colors.length; i < l; i++) {\n            const color = colors[i] || new Color();\n            array[offset++] = color.r;\n            array[offset++] = color.g;\n            array[offset++] = color.b;\n        }\n        return this;\n    }\n    /**\n     * TODO question https://discourse.threejs.org/t/question-about-fromdirectgeometry-function-of-buffergeometry/1890/2\n     * @param indices\n     * @returns {BufferAttribute}\n     public copyIndicesArray(indices: Face3[]): BufferAttribute {\n        const array: TypedArray = this.array;\n        let offset: number = 0;\n        for (let i: number = 0, l: number = indices.length; i < l; i++) {\n            const index = indices[i];\n            array[offset++] = index.a;\n            array[offset++] = index.b;\n            array[offset++] = index.c;\n        }\n        return this;\n    }\n     */\n    copyVector2sArray(vectors) {\n        const array = this.array;\n        let offset = 0;\n        for (let i = 0, l = vectors.length; i < l; i++) {\n            const vector = vectors[i] || new Vector2();\n            array[offset++] = vector.x;\n            array[offset++] = vector.y;\n        }\n        return this;\n    }\n    copyVector3sArray(vectors) {\n        const array = this.array;\n        let offset = 0;\n        for (let i = 0, l = vectors.length; i < l; i++) {\n            const vector = vectors[i] || new Vector3();\n            array[offset++] = vector.x;\n            array[offset++] = vector.y;\n            array[offset++] = vector.z;\n        }\n        return this;\n    }\n    copyVector4sArray(vectors) {\n        const array = this.array;\n        let offset = 0;\n        for (let i = 0, l = vectors.length; i < l; i++) {\n            const vector = vectors[i] || new Vector4();\n            array[offset++] = vector.x;\n            array[offset++] = vector.y;\n            array[offset++] = vector.z;\n            array[offset++] = vector.w;\n        }\n        return this;\n    }\n    setProperty(index, property, value) {\n        property = property.toLowerCase();\n        if (property && property.length <= 4 && property.replace(/[xyzw]/g, \"\").length === 0) {\n            const offsetMap = { x: 0, y: 1, z: 2 };\n            if (property.length === 1 && typeof value === \"number\") {\n                this.array[index * this.itemSize + offsetMap[property.charAt(0)]] = value;\n            }\n            else if (property.length === 2 && value instanceof Vector2) {\n                this.array[index * this.itemSize + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.itemSize + offsetMap[property.charAt(1)]] = value.y;\n            }\n            else if (property.length === 3 && value instanceof Vector3) {\n                this.array[index * this.itemSize + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.itemSize + offsetMap[property.charAt(1)]] = value.y;\n                this.array[index * this.itemSize + offsetMap[property.charAt(2)]] = value.z;\n            }\n            else if (property.length === 4 && value instanceof Vector4) {\n                this.array[index * this.itemSize + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.itemSize + offsetMap[property.charAt(1)]] = value.y;\n                this.array[index * this.itemSize + offsetMap[property.charAt(2)]] = value.z;\n                this.array[index * this.itemSize + offsetMap[property.charAt(3)]] = value.w;\n            }\n        }\n        return this;\n    }\n    getProperty(index, property) {\n        property = property.toLowerCase();\n        if (property && property.length <= 4 && property.replace(/[xyzw]/g, \"\").length === 0) {\n            const offsetMap = { x: 0, y: 1, z: 2 };\n            if (property.length === 1) {\n                return this.array[index * this.itemSize + offsetMap[property.charAt(0)]];\n            }\n            else if (property.length === 2) {\n                return new Vector2(this.array[index * this.itemSize + offsetMap[property.charAt(0)]], this.array[index * this.itemSize + offsetMap[property.charAt(1)]]);\n            }\n            else if (property.length === 3) {\n                return new Vector3(this.array[index * this.itemSize + offsetMap[property.charAt(0)]], this.array[index * this.itemSize + offsetMap[property.charAt(1)]], this.array[index * this.itemSize + offsetMap[property.charAt(2)]]);\n            }\n            else if (property.length === 4) {\n                return new Vector4(this.array[index * this.itemSize + offsetMap[property.charAt(0)]], this.array[index * this.itemSize + offsetMap[property.charAt(1)]], this.array[index * this.itemSize + offsetMap[property.charAt(2)]], this.array[index * this.itemSize + offsetMap[property.charAt(3)]]);\n            }\n        }\n        return undefined;\n    }\n    clone() {\n        return new this.constructor(this.array, this.itemSize, true).copy(this);\n    }\n}\nexport class Int8BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Int8Array(array), itemSize, normalized);\n    }\n}\nexport class Uint8BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint8Array(array), itemSize, normalized);\n    }\n}\nexport class Uint8ClampedBufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint8ClampedArray(array), itemSize, normalized);\n    }\n}\nexport class Int16BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Int16Array(array), itemSize, normalized);\n    }\n}\nexport class Uint16BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint16Array(array), itemSize, normalized);\n    }\n}\nexport class Int32BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Int32Array(array), itemSize, normalized);\n    }\n}\nexport class Uint32BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint32Array(array), itemSize, normalized);\n    }\n}\nexport class Float32BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Float32Array(array), itemSize, normalized);\n    }\n}\nexport class Float64BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Float64Array(array), itemSize, normalized);\n    }\n}\n","import { Box3 } from \"../math/Box3\";\nimport { MathUtil } from \"../math/Math\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { applyMatrixToBufferAttribute, arrayMax, setBoxFromBufferAttribute } from \"../utils\";\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute, } from \"./BufferAttribute\";\nimport { DirectGeometry } from \"./DirectGeometry\";\nimport { EventDispatcher } from \"./EventDispatcher\";\nimport { Geometry } from \"./Geometry\";\nimport { Object3D } from \"./Object3D\";\nimport { Mesh } from \"../objects/Mesh\";\nimport { Line } from \"../objects/Line\";\nimport { Points } from \"../objects/Points\";\nconst object = new Object3D();\nlet bufferGeometryId = 1;\nexport class BufferGeometry extends EventDispatcher {\n    constructor() {\n        super(...arguments);\n        this.id = (bufferGeometryId += 2);\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.type = \"BufferGeometry\";\n        this.index = null;\n        this.attributes = {};\n        this.morphAttributes = {};\n        this.groups = [];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n        this.drawRange = { start: 0, count: Infinity };\n    }\n    setIndex(index) {\n        if (Array.isArray(index)) {\n            this.index = new (arrayMax(index) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(index, 1);\n        }\n        else {\n            this.index = index;\n        }\n        return this;\n    }\n    addAttribute(name, attribute) {\n        if (name === \"index\") {\n            this.setIndex(attribute);\n            return this;\n        }\n        this.attributes[name] = attribute;\n        return this;\n    }\n    getAttribute(name) {\n        return this.attributes[name];\n    }\n    removeAttribute(name) {\n        delete this.attributes[name];\n        return this;\n    }\n    addGroup(start, count, materialIndex = 0) {\n        this.groups.push({\n            count: count,\n            materialIndex: materialIndex,\n            start: start,\n        });\n        return this;\n    }\n    clearGroups() {\n        this.groups = [];\n        return this;\n    }\n    setDrawRange(start, count) {\n        this.drawRange.start = start;\n        this.drawRange.count = count;\n        return this;\n    }\n    applyMatrix(matrix) {\n        const position = this.attributes.position;\n        if (position !== undefined) {\n            applyMatrixToBufferAttribute(matrix, position);\n            position.needsUpdate = true;\n        }\n        const normal = this.attributes.normal;\n        if (normal !== undefined) {\n            const normalMatrix = new Matrix3().getNormalMatrix(matrix);\n            applyMatrixToBufferAttribute(normalMatrix, normal);\n            normal.needsUpdate = true;\n        }\n        if (this.boundingBox !== null) {\n            this.computeBoundingBox();\n        }\n        if (this.boundingSphere !== null) {\n            this.computeBoundingSphere();\n        }\n        return this;\n    }\n    rotateX(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationX(angle));\n    }\n    rotateY(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationY(angle));\n    }\n    rotateZ(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationZ(angle));\n    }\n    translate(x, y, z) {\n        return this.applyMatrix(new Matrix4().makeTranslation(x, y, z));\n    }\n    scale(x, y, z) {\n        return this.applyMatrix(new Matrix4().makeScale(x, y, z));\n    }\n    lookAt(vector) {\n        const obj = object.lookAt(vector);\n        obj.updateMatrix();\n        return this.applyMatrix(obj.matrix);\n    }\n    center() {\n        this.computeBoundingBox();\n        const offset = this.boundingBox.getCenter().negate();\n        this.translate(offset.x, offset.y, offset.z);\n        return offset;\n    }\n    /**\n     * Same as updateFromObject\n     * @param object\n     */\n    setFromObject(object) {\n        const geometry = object.geometry;\n        if (object instanceof Points || object instanceof Line) {\n            const positions = new Float32BufferAttribute(geometry.vertices.length * 3, 3);\n            const colors = new Float32BufferAttribute(geometry.colors.length * 3, 3);\n            this.addAttribute(\"position\", positions.copyVector3sArray(geometry.vertices));\n            this.addAttribute(\"color\", colors.copyColorsArray(geometry.colors));\n            if (geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length) {\n                const lineDistances = new Float32BufferAttribute(geometry.lineDistances.length, 1);\n                this.addAttribute(\"lineDistance\", lineDistances.copyArray(geometry.lineDistances));\n            }\n            if (geometry.boundingSphere !== null) {\n                this.boundingSphere = geometry.boundingSphere.clone();\n            }\n            if (geometry.boundingBox !== null) {\n                this.boundingBox = geometry.boundingBox.clone();\n            }\n        }\n        else if (object instanceof Mesh) {\n            this.fromGeometry(geometry);\n        }\n        return this;\n    }\n    setFromPoints(points) {\n        const position = [];\n        for (let i = 0, l = points.length; i < l; i++) {\n            const point = points[i];\n            position.push(point.x, point.y, point.z || 0);\n        }\n        this.addAttribute(\"position\", new Float32BufferAttribute(position, 3));\n        return this;\n    }\n    /**\n     * This function is a mess.\n     * The argument has implicit requirement for arg `object`\n     * Since the only use of this function is in `WebGLObjects`,\n     * and it requires the object's `geometry` property should be a `Geometry` instance,\n     * So we can/must assert the object.geometry as type `Geometry`.\n     * So the whole function is dealing with no BufferGeometry instance,\n     * which may be the reason why BufferGeometry is faster.\n     *\n     * @param object\n     * @returns {BufferGeometry}\n     */\n    updateFromObject(object) {\n        let geometry = object.geometry;\n        if (object instanceof Mesh) {\n            let direct = geometry.directGeometry;\n            if (geometry.elementsNeedUpdate === true) {\n                direct = undefined;\n                geometry.elementsNeedUpdate = false;\n            }\n            if (direct === undefined) {\n                // Geometry -> DirectGeometry -> BufferGeometry\n                return this.fromGeometry(geometry);\n            }\n            direct.verticesNeedUpdate = geometry.verticesNeedUpdate;\n            direct.normalsNeedUpdate = geometry.normalsNeedUpdate;\n            direct.colorsNeedUpdate = geometry.colorsNeedUpdate;\n            direct.uvsNeedUpdate = geometry.uvsNeedUpdate;\n            direct.groupsNeedUpdate = geometry.groupsNeedUpdate;\n            geometry.verticesNeedUpdate = false;\n            geometry.normalsNeedUpdate = false;\n            geometry.colorsNeedUpdate = false;\n            geometry.uvsNeedUpdate = false;\n            geometry.groupsNeedUpdate = false;\n            geometry = direct;\n        }\n        // Used by both Geometry and DirectGeometry\n        if (geometry.verticesNeedUpdate === true) {\n            const attribute = this.attributes.position;\n            if (attribute !== undefined) {\n                attribute.copyVector3sArray(geometry.vertices);\n                attribute.needsUpdate = true;\n            }\n            geometry.verticesNeedUpdate = false;\n        }\n        // Used only by DirectGeometry\n        if (geometry instanceof DirectGeometry && geometry.normalsNeedUpdate === true) {\n            const attribute = this.attributes.normal;\n            if (attribute !== undefined) {\n                attribute.copyVector3sArray(geometry.normals);\n                attribute.needsUpdate = true;\n            }\n            geometry.normalsNeedUpdate = false;\n        }\n        // Used by both Geometry and DirectGeometry\n        if (geometry.colorsNeedUpdate === true) {\n            const attribute = this.attributes.color;\n            if (attribute !== undefined) {\n                attribute.copyColorsArray(geometry.colors);\n                attribute.needsUpdate = true;\n            }\n            geometry.colorsNeedUpdate = false;\n        }\n        // Used only by DirectGeometry\n        if (geometry instanceof DirectGeometry && geometry.uvsNeedUpdate) {\n            const attribute = this.attributes.uv;\n            if (attribute !== undefined) {\n                attribute.copyVector2sArray(geometry.uvs);\n                attribute.needsUpdate = true;\n            }\n            geometry.uvsNeedUpdate = false;\n        }\n        // Used only by Geometry\n        if (geometry instanceof Geometry && geometry.lineDistancesNeedUpdate) {\n            const attribute = this.attributes.lineDistance;\n            if (attribute !== undefined) {\n                attribute.copyArray(geometry.lineDistances);\n                attribute.needsUpdate = true;\n            }\n            geometry.lineDistancesNeedUpdate = false;\n        }\n        // Used only by DirectGeometry\n        if (geometry instanceof DirectGeometry && geometry.groupsNeedUpdate) {\n            geometry.computeGroups(object.geometry);\n            this.groups = geometry.groups;\n            geometry.groupsNeedUpdate = false;\n        }\n        // Well, IMO!!\n        return this;\n    }\n    /**\n     * Geometry of a Mesh\n     * @param geometry\n     */\n    fromGeometry(geometry) {\n        geometry.directGeometry = new DirectGeometry().fromGeometry(geometry);\n        return this.fromDirectGeometry(geometry.directGeometry);\n    }\n    fromDirectGeometry(geometry) {\n        const positions = new Float32Array(geometry.vertices.length * 3);\n        this.addAttribute(\"position\", new BufferAttribute(positions, 3).copyVector3sArray(geometry.vertices));\n        if (geometry.normals.length > 0) {\n            const normals = new Float32Array(geometry.normals.length * 3);\n            this.addAttribute(\"normal\", new BufferAttribute(normals, 3).copyVector3sArray(geometry.normals));\n        }\n        if (geometry.colors.length > 0) {\n            const colors = new Float32Array(geometry.colors.length * 3);\n            this.addAttribute(\"color\", new BufferAttribute(colors, 3).copyColorsArray(geometry.colors));\n        }\n        if (geometry.uvs.length > 0) {\n            const uvs = new Float32Array(geometry.uvs.length * 2);\n            this.addAttribute(\"uv\", new BufferAttribute(uvs, 2).copyVector2sArray(geometry.uvs));\n        }\n        if (geometry.uvs2.length > 0) {\n            const uvs2 = new Float32Array(geometry.uvs2.length * 2);\n            this.addAttribute(\"uv2\", new BufferAttribute(uvs2, 2).copyVector2sArray(geometry.uvs2));\n        }\n        /**\n         * TODO question https://discourse.threejs.org/t/question-about-fromdirectgeometry-function-of-buffergeometry/1890/2\n         if (geometry.indices.length > 0) {\n            const indices: Uint32Array | Uint16Array = new (arrayMax(geometry.indices) > 65535 ? Uint32Array : Uint16Array)(geometry.indices.length * 3);\n            this.setIndex(new BufferAttribute(indices, 1).copyIndicesArray(geometry.indices));\n        }\n         */\n        // groups\n        this.groups = geometry.groups;\n        // morphs\n        for (const name in geometry.morphTargets) {\n            if (!geometry.morphTargets.hasOwnProperty(name))\n                continue;\n            const array = [];\n            const morphTargets = geometry.morphTargets[name];\n            for (let i = 0, l = morphTargets.length; i < l; i++) {\n                const morphTarget = morphTargets[i];\n                const attribute = new Float32BufferAttribute(new Array(morphTarget.length * 3), 3);\n                array.push(attribute.copyVector3sArray(morphTarget));\n            }\n            this.morphAttributes[name] = array;\n        }\n        // skinning\n        if (geometry.skinIndices.length > 0) {\n            const skinIndices = new Float32BufferAttribute(new Array(geometry.skinIndices.length * 4), 4);\n            this.addAttribute(\"skinIndex\", skinIndices.copyVector4sArray(geometry.skinIndices));\n        }\n        if (geometry.skinWeights.length > 0) {\n            const skinWeights = new Float32BufferAttribute(new Array(geometry.skinWeights.length * 4), 4);\n            this.addAttribute(\"skinWeight\", skinWeights.copyVector4sArray(geometry.skinWeights));\n        }\n        if (geometry.boundingSphere !== null) {\n            this.boundingSphere = geometry.boundingSphere.clone();\n        }\n        if (geometry.boundingBox !== null) {\n            this.boundingBox = geometry.boundingBox.clone();\n        }\n        return this;\n    }\n    computeBoundingBox() {\n        if (this.boundingBox === null) {\n            this.boundingBox = new Box3();\n        }\n        const position = this.attributes.position;\n        if (position !== undefined) {\n            setBoxFromBufferAttribute(this.boundingBox, position);\n        }\n        else {\n            this.boundingBox.makeEmpty();\n        }\n        if (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) {\n            console.error(`THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.`, this);\n        }\n    }\n    computeBoundingSphere() {\n        if (this.boundingSphere === null) {\n            this.boundingSphere = new Sphere();\n        }\n        const position = this.attributes.position;\n        if (position) {\n            const box = new Box3();\n            setBoxFromBufferAttribute(box, position);\n            const center = box.getCenter();\n            // hoping to find a boundingSphere with a radius smaller than the\n            // boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n            let maxRadiusSquare = 0;\n            for (let i = 0, il = position.count; i < il; i++) {\n                const vector = new Vector3();\n                vector.x = position.getProperty(i, \"x\");\n                vector.y = position.getProperty(i, \"y\");\n                vector.z = position.getProperty(i, \"z\");\n                maxRadiusSquare = Math.max(maxRadiusSquare, center.distanceToSquared(vector));\n            }\n            this.boundingSphere.radius = Math.sqrt(maxRadiusSquare);\n            if (isNaN(this.boundingSphere.radius)) {\n                console.error(`THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.`, this);\n            }\n        }\n    }\n    computeVertexNormals() {\n        const index = this.index;\n        const attributes = this.attributes;\n        const groups = this.groups;\n        if (attributes.position) {\n            const positions = attributes.position.array;\n            if (attributes.normal === undefined) {\n                this.addAttribute(\"normal\", new BufferAttribute(new Float32Array(positions.length), 3));\n            }\n            else {\n                // reset existing normals to zero\n                const array = attributes.normal.array;\n                for (let i = 0, il = array.length; i < il; i++) {\n                    array[i] = 0;\n                }\n            }\n            const normals = attributes.normal.array;\n            let vA, vB, vC;\n            const pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n            const cb = new Vector3(), ab = new Vector3();\n            // indexed elements\n            if (index) {\n                const indices = index.array;\n                if (groups.length === 0) {\n                    this.addGroup(0, indices.length);\n                }\n                for (let j = 0, jl = groups.length; j < jl; ++j) {\n                    const group = groups[j];\n                    const start = group.start;\n                    const count = group.count;\n                    for (let i = start, il = start + count; i < il; i += 3) {\n                        vA = indices[i] * 3;\n                        vB = indices[i + 1] * 3;\n                        vC = indices[i + 2] * 3;\n                        pA.fromArray(positions, vA);\n                        pB.fromArray(positions, vB);\n                        pC.fromArray(positions, vC);\n                        cb.copy(pC).sub(pB);\n                        ab.copy(pA).sub(pB);\n                        cb.cross(ab);\n                        normals[vA] += cb.x;\n                        normals[vA + 1] += cb.y;\n                        normals[vA + 2] += cb.z;\n                        normals[vB] += cb.x;\n                        normals[vB + 1] += cb.y;\n                        normals[vB + 2] += cb.z;\n                        normals[vC] += cb.x;\n                        normals[vC + 1] += cb.y;\n                        normals[vC + 2] += cb.z;\n                    }\n                }\n            }\n            else {\n                // non-indexed elements (unconnected triangle soup)\n                for (let i = 0, il = positions.length; i < il; i += 9) {\n                    pA.fromArray(positions, i);\n                    pB.fromArray(positions, i + 3);\n                    pC.fromArray(positions, i + 6);\n                    cb.copy(pC).sub(pB);\n                    ab.copy(pA).sub(pB);\n                    cb.cross(ab);\n                    normals[i] = cb.x;\n                    normals[i + 1] = cb.y;\n                    normals[i + 2] = cb.z;\n                    normals[i + 3] = cb.x;\n                    normals[i + 4] = cb.y;\n                    normals[i + 5] = cb.z;\n                    normals[i + 6] = cb.x;\n                    normals[i + 7] = cb.y;\n                    normals[i + 8] = cb.z;\n                }\n            }\n            this.normalizeNormals();\n            attributes.normal.needsUpdate = true;\n        }\n    }\n    normalizeNormals() {\n        const vector = new Vector3();\n        const normals = this.attributes.normal;\n        for (let i = 0, il = normals.count; i < il; i++) {\n            vector.x = normals.getProperty(i, \"x\");\n            vector.y = normals.getProperty(i, \"y\");\n            vector.z = normals.getProperty(i, \"z\");\n            vector.normalize();\n            normals.setProperty(i, \"xyz\", vector);\n        }\n    }\n    toNonIndexed() {\n        if (this.index === null) {\n            console.warn(`THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.`);\n            return this;\n        }\n        const geometry2 = new BufferGeometry();\n        const indices = this.index.array;\n        const attributes = this.attributes;\n        for (const name in attributes) {\n            if (!attributes.hasOwnProperty(name))\n                continue;\n            const attribute = attributes[name];\n            const array = attribute.array;\n            const itemSize = attribute.itemSize;\n            const array2 = new array.constructor(indices.length * itemSize);\n            let index = 0, index2 = 0;\n            for (let i = 0, l = indices.length; i < l; i++) {\n                index = indices[i] * itemSize;\n                for (let j = 0; j < itemSize; j++) {\n                    array2[index2++] = array[index++];\n                }\n            }\n            geometry2.addAttribute(name, new BufferAttribute(array2, itemSize));\n        }\n        return geometry2;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(source) {\n        // reset\n        this.index = null;\n        this.attributes = {};\n        this.morphAttributes = {};\n        this.groups = [];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n        // name\n        this.name = source.name;\n        // index\n        const index = source.index;\n        if (index !== null) {\n            this.setIndex(index.clone());\n        }\n        // attributes\n        const attributes = source.attributes;\n        for (const name in attributes) {\n            if (!attributes.hasOwnProperty(name))\n                continue;\n            const attribute = attributes[name];\n            this.addAttribute(name, attribute.clone());\n        }\n        // morph attributes\n        const morphAttributes = source.morphAttributes;\n        for (const name in morphAttributes) {\n            if (!attributes.hasOwnProperty(name))\n                continue;\n            const array = [];\n            const morphAttribute = morphAttributes[name]; // morphAttribute: array of Float32BufferAttributes\n            for (let i = 0, l = morphAttribute.length; i < l; i++) {\n                array.push(morphAttribute[i].clone());\n            }\n            this.morphAttributes[name] = array;\n        }\n        // groups\n        const groups = source.groups;\n        for (let i = 0, l = groups.length; i < l; i++) {\n            const group = groups[i];\n            this.addGroup(group.start, group.count, group.materialIndex);\n        }\n        // bounding box\n        const boundingBox = source.boundingBox;\n        if (boundingBox !== null) {\n            this.boundingBox = boundingBox.clone();\n        }\n        // bounding sphere\n        const boundingSphere = source.boundingSphere;\n        if (boundingSphere !== null) {\n            this.boundingSphere = boundingSphere.clone();\n        }\n        // draw range\n        this.drawRange.start = source.drawRange.start;\n        this.drawRange.count = source.drawRange.count;\n        return this;\n    }\n    dispose() {\n        this.dispatchEvent({ type: \"dispose\" });\n    }\n}\n","export class Clock {\n    constructor(autoStart = false) {\n        this.autoStart = false;\n        this.startTime = 0;\n        this.oldTime = 0;\n        this.elapsedTime = 0;\n        this.running = false;\n        this.autoStart = autoStart;\n    }\n    start() {\n        this.startTime = (typeof performance === \"undefined\" ? Date : performance).now(); // see #10732\n        this.oldTime = this.startTime;\n        this.elapsedTime = 0;\n        this.running = true;\n    }\n    stop() {\n        this.getElapsedTime();\n        this.running = false;\n        this.autoStart = false;\n    }\n    getElapsedTime() {\n        this.getDelta();\n        return this.elapsedTime;\n    }\n    getDelta() {\n        let diff = 0;\n        if (this.autoStart && !this.running) {\n            this.start();\n            return 0;\n        }\n        if (this.running) {\n            const newTime = (typeof performance === \"undefined\" ? Date : performance).now();\n            diff = (newTime - this.oldTime) / 1000;\n            this.oldTime = newTime;\n            this.elapsedTime += diff;\n        }\n        return diff;\n    }\n}\n","import { Vector2 } from \"../math/Vector2\";\nexport class DirectGeometry {\n    constructor() {\n        this.vertices = [];\n        this.normals = [];\n        this.colors = [];\n        this.uvs = [];\n        this.uvs2 = [];\n        this.groups = [];\n        this.morphTargets = {};\n        this.skinWeights = [];\n        this.skinIndices = [];\n        this.boundingSphere = null;\n        this.boundingBox = null;\n        this.verticesNeedUpdate = false;\n        this.uvsNeedUpdate = false;\n        this.normalsNeedUpdate = false;\n        this.colorsNeedUpdate = false;\n        this.groupsNeedUpdate = false;\n    }\n    computeGroups(geometry) {\n        let group;\n        const groups = [];\n        let materialIndex;\n        const faces = geometry.faces;\n        let i = 0;\n        for (; i < faces.length; i++) {\n            const face = faces[i];\n            // materials\n            if (face.materialIndex !== materialIndex) {\n                materialIndex = face.materialIndex;\n                if (group !== undefined) {\n                    group.count = i * 3 - group.start;\n                    groups.push(group);\n                }\n                group = {\n                    materialIndex: materialIndex,\n                    start: i * 3,\n                };\n            }\n        }\n        if (group !== undefined) {\n            group.count = i * 3 - group.start;\n            groups.push(group);\n        }\n        this.groups = groups;\n    }\n    fromGeometry(geometry) {\n        const faces = geometry.faces;\n        const vertices = geometry.vertices;\n        const faceVertexUvs = geometry.faceVertexUvs;\n        const hasFaceVertexUv = faceVertexUvs[0] && faceVertexUvs[0].length > 0;\n        const hasFaceVertexUv2 = faceVertexUvs[1] && faceVertexUvs[1].length > 0;\n        // morphs\n        const morphTargets = geometry.morphTargets;\n        const morphTargetsLength = morphTargets.length;\n        if (morphTargetsLength > 0) {\n            this.morphTargets.position = [];\n            for (let i = 0; i < morphTargetsLength; i++) {\n                this.morphTargets.position[i] = [];\n            }\n        }\n        const morphNormals = geometry.morphNormals;\n        const morphNormalsLength = morphNormals.length;\n        if (morphNormalsLength > 0) {\n            this.morphTargets.normal = [];\n            for (let i = 0; i < morphNormalsLength; i++) {\n                this.morphTargets.normal[i] = [];\n            }\n        }\n        // skins\n        const skinIndices = geometry.skinIndices;\n        const skinWeights = geometry.skinWeights;\n        const hasSkinIndices = skinIndices.length === vertices.length;\n        const hasSkinWeights = skinWeights.length === vertices.length;\n        for (let i = 0; i < faces.length; i++) {\n            const face = faces[i];\n            this.vertices.push(vertices[face.a], vertices[face.b], vertices[face.c]);\n            const vertexNormals = face.vertexNormals;\n            if (vertexNormals.length === 3) {\n                this.normals.push(vertexNormals[0], vertexNormals[1], vertexNormals[2]);\n            }\n            else {\n                const normal = face.normal;\n                this.normals.push(normal, normal, normal);\n            }\n            const vertexColors = face.vertexColors;\n            if (vertexColors.length === 3) {\n                this.colors.push(vertexColors[0], vertexColors[1], vertexColors[2]);\n            }\n            else {\n                const color = face.color;\n                this.colors.push(color, color, color);\n            }\n            if (hasFaceVertexUv === true) {\n                const vertexUvs = faceVertexUvs[0][i];\n                if (vertexUvs !== undefined) {\n                    this.uvs.push(vertexUvs[0], vertexUvs[1], vertexUvs[2]);\n                }\n                else {\n                    console.warn(`THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ${i}`);\n                    this.uvs.push(new Vector2(), new Vector2(), new Vector2());\n                }\n            }\n            if (hasFaceVertexUv2 === true) {\n                const vertexUvs = faceVertexUvs[1][i];\n                if (vertexUvs !== undefined) {\n                    this.uvs2.push(vertexUvs[0], vertexUvs[1], vertexUvs[2]);\n                }\n                else {\n                    console.warn(`THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ${i}`);\n                    this.uvs2.push(new Vector2(), new Vector2(), new Vector2());\n                }\n            }\n            // morphs\n            for (let j = 0; j < morphTargetsLength; j++) {\n                const morphTarget = morphTargets[j].vertices;\n                this.morphTargets.position[j].push(morphTarget[face.a], morphTarget[face.b], morphTarget[face.c]);\n            }\n            for (let j = 0; j < morphNormalsLength; j++) {\n                const morphNormal = morphNormals[j].vertexNormals[i];\n                this.morphTargets.normal[j].push(morphNormal.a, morphNormal.b, morphNormal.c);\n            }\n            // skins\n            if (hasSkinIndices) {\n                this.skinIndices.push(skinIndices[face.a], skinIndices[face.b], skinIndices[face.c]);\n            }\n            if (hasSkinWeights) {\n                this.skinWeights.push(skinWeights[face.a], skinWeights[face.b], skinWeights[face.c]);\n            }\n        }\n        if (geometry.boundingSphere !== null) {\n            this.boundingSphere = geometry.boundingSphere.clone();\n        }\n        if (geometry.boundingBox !== null) {\n            this.boundingBox = geometry.boundingBox.clone();\n        }\n        this.computeGroups(geometry);\n        this.verticesNeedUpdate = geometry.verticesNeedUpdate;\n        this.normalsNeedUpdate = geometry.normalsNeedUpdate;\n        this.colorsNeedUpdate = geometry.colorsNeedUpdate;\n        this.uvsNeedUpdate = geometry.uvsNeedUpdate;\n        this.groupsNeedUpdate = geometry.groupsNeedUpdate;\n        return this;\n    }\n}\n","export class EventDispatcher {\n    constructor() {\n        this._listeners = {};\n    }\n    addEventListener(type, listener) {\n        const listeners = this._listeners;\n        if (listeners[type] === undefined) {\n            listeners[type] = [];\n        }\n        if (listeners[type].indexOf(listener) === -1) {\n            listeners[type].push(listener);\n        }\n    }\n    hasEventListener(type, listener) {\n        if (this._listeners === undefined)\n            return false;\n        const listeners = this._listeners;\n        return listeners[type] !== undefined && listeners[type].indexOf(listener) !== -1;\n    }\n    removeEventListener(type, listener) {\n        if (this._listeners === undefined)\n            return;\n        const listeners = this._listeners;\n        const listenerArray = listeners[type];\n        if (listenerArray !== undefined) {\n            const index = listenerArray.indexOf(listener);\n            if (index !== -1) {\n                listenerArray.splice(index, 1);\n            }\n        }\n    }\n    dispatchEvent(event = {}) {\n        if (this._listeners === undefined)\n            return;\n        const listeners = this._listeners;\n        const listenerArray = listeners[event.type];\n        if (listenerArray !== undefined) {\n            event.target = this;\n            const array = listenerArray.slice(0);\n            for (let i = 0, l = array.length; i < l; i++) {\n                array[i].call(this, event);\n            }\n        }\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class Face3 {\n    constructor(a = 0, b = 0, c = 0, normal = new Vector3(), color = new Color(), materialIndex = 0) {\n        this.a = 0;\n        this.b = 0;\n        this.c = 0;\n        this.normal = new Vector3();\n        this.vertexNormals = [];\n        this.color = new Color();\n        this.vertexColors = [];\n        this.materialIndex = 0;\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        if (normal instanceof Vector3)\n            this.normal = normal;\n        if (Array.isArray(normal))\n            this.vertexNormals = normal;\n        if (color instanceof Color)\n            this.color = color;\n        if (Array.isArray(color))\n            this.vertexColors = color;\n        this.materialIndex = materialIndex;\n    }\n    copy(source) {\n        this.a = source.a;\n        this.b = source.b;\n        this.c = source.c;\n        this.normal.copy(source.normal);\n        this.color.copy(source.color);\n        this.materialIndex = source.materialIndex;\n        for (let i = 0, il = source.vertexNormals.length; i < il; i++) {\n            this.vertexNormals[i] = source.vertexNormals[i].clone();\n        }\n        for (let i = 0, il = source.vertexColors.length; i < il; i++) {\n            this.vertexColors[i] = source.vertexColors[i].clone();\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Box3 } from \"../math/Box3\";\nimport { Color } from \"../math/Color\";\nimport { MathUtil } from \"../math/Math\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Triangle } from \"../math/Triangle\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { EventDispatcher } from \"./EventDispatcher\";\nimport { Face3 } from \"./Face3\";\nimport { Object3D } from \"./Object3D\";\nconst object = new Object3D();\nexport class GeometryFace extends Face3 {\n}\nlet geometryId = 0;\nexport class Geometry extends EventDispatcher {\n    constructor() {\n        super(...arguments);\n        this.id = (geometryId += 2);\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.type = \"Geometry\";\n        this.vertices = [];\n        this.colors = [];\n        this.faces = [];\n        this.faceVertexUvs = [[]];\n        this.morphTargets = [];\n        this.morphNormals = [];\n        this.skinWeights = [];\n        this.skinIndices = [];\n        this.lineDistances = [];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n        this.elementsNeedUpdate = false;\n        this.verticesNeedUpdate = false;\n        this.uvsNeedUpdate = false;\n        this.normalsNeedUpdate = false;\n        this.colorsNeedUpdate = false;\n        this.lineDistancesNeedUpdate = false;\n        this.groupsNeedUpdate = false;\n    }\n    applyMatrix(matrix) {\n        const normalMatrix = new Matrix3().getNormalMatrix(matrix);\n        for (let i = 0, il = this.vertices.length; i < il; i++) {\n            this.vertices[i].applyMatrix4(matrix);\n        }\n        for (let i = 0, il = this.faces.length; i < il; i++) {\n            const face = this.faces[i];\n            face.normal.applyMatrix3(normalMatrix).normalize();\n            for (let j = 0, jl = face.vertexNormals.length; j < jl; j++) {\n                face.vertexNormals[j].applyMatrix3(normalMatrix).normalize();\n            }\n        }\n        if (this.boundingBox !== null) {\n            this.computeBoundingBox();\n        }\n        if (this.boundingSphere !== null) {\n            this.computeBoundingSphere();\n        }\n        this.verticesNeedUpdate = true;\n        this.normalsNeedUpdate = true;\n        return this;\n    }\n    rotateX(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationX(angle));\n    }\n    rotateY(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationY(angle));\n    }\n    rotateZ(angle) {\n        return this.applyMatrix(new Matrix4().makeRotationZ(angle));\n    }\n    translate(x, y, z) {\n        return this.applyMatrix(new Matrix4().makeTranslation(x, y, z));\n    }\n    scale(x, y, z) {\n        return this.applyMatrix(new Matrix4().makeScale(x, y, z));\n    }\n    lookAt(vector) {\n        const obj = object.lookAt(vector);\n        obj.updateMatrix();\n        return this.applyMatrix(obj.matrix);\n    }\n    fromBufferGeometry(geometry) {\n        const indices = geometry.index !== null ? geometry.index.array : undefined;\n        const attributes = geometry.attributes;\n        const positions = attributes.position.array;\n        const normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n        const colors = attributes.color !== undefined ? attributes.color.array : undefined;\n        const uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n        const uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n        if (uvs2 !== undefined)\n            this.faceVertexUvs[1] = [];\n        const tempNormals = [];\n        const tempUVs = [];\n        const tempUVs2 = [];\n        for (let i = 0, j = 0; i < positions.length; i += 3, j += 2) {\n            this.vertices.push(new Vector3(positions[i], positions[i + 1], positions[i + 2]));\n            if (normals !== undefined) {\n                tempNormals.push(new Vector3(normals[i], normals[i + 1], normals[i + 2]));\n            }\n            if (colors !== undefined) {\n                this.colors.push(new Color(colors[i], colors[i + 1], colors[i + 2]));\n            }\n            if (uvs !== undefined) {\n                tempUVs.push(new Vector2(uvs[j], uvs[j + 1]));\n            }\n            if (uvs2 !== undefined) {\n                tempUVs2.push(new Vector2(uvs2[j], uvs2[j + 1]));\n            }\n        }\n        const addFace = (a, b, c, materialIndex) => {\n            const vertexNormals = normals !== undefined ? [tempNormals[a].clone(), tempNormals[b].clone(), tempNormals[c].clone()] : [];\n            const vertexColors = colors !== undefined ? [this.colors[a].clone(), this.colors[b].clone(), this.colors[c].clone()] : [];\n            const face = new Face3(a, b, c, vertexNormals, vertexColors, materialIndex);\n            this.faces.push(face);\n            if (uvs !== undefined) {\n                this.faceVertexUvs[0].push([tempUVs[a].clone(), tempUVs[b].clone(), tempUVs[c].clone()]);\n            }\n            if (uvs2 !== undefined) {\n                this.faceVertexUvs[1].push([tempUVs2[a].clone(), tempUVs2[b].clone(), tempUVs2[c].clone()]);\n            }\n        };\n        const groups = geometry.groups;\n        if (groups.length > 0) {\n            for (let i = 0; i < groups.length; i++) {\n                const group = groups[i];\n                const start = group.start;\n                const count = group.count;\n                for (let j = start, jl = start + count; j < jl; j += 3) {\n                    if (indices !== undefined) {\n                        addFace(indices[j], indices[j + 1], indices[j + 2], group.materialIndex);\n                    }\n                    else {\n                        addFace(j, j + 1, j + 2, group.materialIndex);\n                    }\n                }\n            }\n        }\n        else {\n            if (indices !== undefined) {\n                for (let i = 0; i < indices.length; i += 3) {\n                    addFace(indices[i], indices[i + 1], indices[i + 2]);\n                }\n            }\n            else {\n                for (let i = 0; i < positions.length / 3; i += 3) {\n                    addFace(i, i + 1, i + 2);\n                }\n            }\n        }\n        this.computeFaceNormals();\n        if (geometry.boundingBox !== null) {\n            this.boundingBox = geometry.boundingBox.clone();\n        }\n        if (geometry.boundingSphere !== null) {\n            this.boundingSphere = geometry.boundingSphere.clone();\n        }\n        return this;\n    }\n    center() {\n        this.computeBoundingBox();\n        const offset = this.boundingBox.getCenter().negate();\n        this.translate(offset.x, offset.y, offset.z);\n        return offset;\n    }\n    normalize() {\n        this.computeBoundingSphere();\n        const center = this.boundingSphere.center;\n        const radius = this.boundingSphere.radius;\n        const s = radius === 0 ? 1 : 1.0 / radius;\n        const matrix = new Matrix4();\n        matrix.set(s, 0, 0, -s * center.x, 0, s, 0, -s * center.y, 0, 0, s, -s * center.z, 0, 0, 0, 1);\n        return this.applyMatrix(matrix);\n    }\n    computeFaceNormals() {\n        const cb = new Vector3(), ab = new Vector3();\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            const vA = this.vertices[face.a];\n            const vB = this.vertices[face.b];\n            const vC = this.vertices[face.c];\n            cb.copy(vC).sub(vB);\n            ab.copy(vA).sub(vB);\n            cb.cross(ab);\n            cb.normalize();\n            face.normal.copy(cb);\n        }\n        return this;\n    }\n    computeVertexNormals(areaWeighted = true) {\n        const vertices = new Array(this.vertices.length);\n        for (let v = 0, vl = this.vertices.length; v < vl; v++) {\n            vertices[v] = new Vector3();\n        }\n        if (areaWeighted) {\n            // vertex normals weighted by triangle areas\n            // http://www.iquilezles.org/www/articles/normals/normals.htm\n            for (let f = 0, fl = this.faces.length; f < fl; f++) {\n                const face = this.faces[f];\n                const vA = this.vertices[face.a];\n                const vB = this.vertices[face.b];\n                const vC = this.vertices[face.c];\n                const cb = new Vector3().copy(vC).sub(vB);\n                const ab = new Vector3().copy(vA).sub(vB);\n                cb.cross(ab);\n                vertices[face.a].add(cb);\n                vertices[face.b].add(cb);\n                vertices[face.c].add(cb);\n            }\n        }\n        else {\n            this.computeFaceNormals();\n            for (let f = 0, fl = this.faces.length; f < fl; f++) {\n                const face = this.faces[f];\n                vertices[face.a].add(face.normal);\n                vertices[face.b].add(face.normal);\n                vertices[face.c].add(face.normal);\n            }\n        }\n        for (let v = 0, vl = this.vertices.length; v < vl; v++) {\n            vertices[v].normalize();\n        }\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            const vertexNormals = face.vertexNormals;\n            if (vertexNormals.length === 3) {\n                vertexNormals[0].copy(vertices[face.a]);\n                vertexNormals[1].copy(vertices[face.b]);\n                vertexNormals[2].copy(vertices[face.c]);\n            }\n            else {\n                vertexNormals[0] = vertices[face.a].clone();\n                vertexNormals[1] = vertices[face.b].clone();\n                vertexNormals[2] = vertices[face.c].clone();\n            }\n        }\n        if (this.faces.length > 0) {\n            this.normalsNeedUpdate = true;\n        }\n        return this;\n    }\n    computeFlatVertexNormals() {\n        this.computeFaceNormals();\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            const vertexNormals = face.vertexNormals;\n            if (vertexNormals.length === 3) {\n                vertexNormals[0].copy(face.normal);\n                vertexNormals[1].copy(face.normal);\n                vertexNormals[2].copy(face.normal);\n            }\n            else {\n                vertexNormals[0] = face.normal.clone();\n                vertexNormals[1] = face.normal.clone();\n                vertexNormals[2] = face.normal.clone();\n            }\n        }\n        if (this.faces.length > 0) {\n            this.normalsNeedUpdate = true;\n        }\n        return this;\n    }\n    computeMorphNormals() {\n        // save original normals\n        // - create temp variables on first access\n        //   otherwise just copy (for faster repeated calls)\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            if (!face.originalFaceNormal) {\n                face.originalFaceNormal = face.normal.clone();\n            }\n            else {\n                face.originalFaceNormal.copy(face.normal);\n            }\n            if (!face.originalVertexNormals)\n                face.originalVertexNormals = [];\n            for (let i = 0, il = face.vertexNormals.length; i < il; i++) {\n                if (!face.originalVertexNormals[i]) {\n                    face.originalVertexNormals[i] = face.vertexNormals[i].clone();\n                }\n                else {\n                    face.originalVertexNormals[i].copy(face.vertexNormals[i]);\n                }\n            }\n        }\n        // use temp geometry to compute face and vertex normals for each morph\n        const tmpGeo = new Geometry();\n        tmpGeo.faces = this.faces;\n        for (let i = 0, il = this.morphTargets.length; i < il; i++) {\n            // create on first access\n            if (!this.morphNormals[i]) {\n                this.morphNormals[i] = {\n                    faceNormals: [],\n                    vertexNormals: [],\n                };\n                for (let f = 0, fl = this.faces.length; f < fl; f++) {\n                    this.morphNormals[i].faceNormals.push(new Vector3());\n                    this.morphNormals[i].vertexNormals.push(new Triangle());\n                }\n            }\n            const morphNormals = this.morphNormals[i];\n            // set vertices to morph target\n            tmpGeo.vertices = this.morphTargets[i].vertices;\n            // compute morph normals\n            tmpGeo.computeFaceNormals();\n            tmpGeo.computeVertexNormals();\n            // store morph normals\n            for (let f = 0, fl = this.faces.length; f < fl; f++) {\n                const face = this.faces[f];\n                const faceNormal = morphNormals.faceNormals[f];\n                const vertexNormals = morphNormals.vertexNormals[f];\n                faceNormal.copy(face.normal);\n                vertexNormals.a.copy(face.vertexNormals[0]);\n                vertexNormals.b.copy(face.vertexNormals[1]);\n                vertexNormals.c.copy(face.vertexNormals[2]);\n            }\n        }\n        // restore original normals\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\n            const face = this.faces[f];\n            face.normal = face.originalFaceNormal;\n            face.vertexNormals = face.originalVertexNormals;\n        }\n        return this;\n    }\n    computeLineDistances() {\n        let d = 0;\n        const vertices = this.vertices;\n        for (let i = 0, il = vertices.length; i < il; i++) {\n            if (i > 0) {\n                d += vertices[i].distanceTo(vertices[i - 1]);\n            }\n            this.lineDistances[i] = d;\n        }\n        return this;\n    }\n    computeBoundingBox() {\n        if (this.boundingBox === null) {\n            this.boundingBox = new Box3();\n        }\n        this.boundingBox.setFromPoints(this.vertices);\n        return this;\n    }\n    computeBoundingSphere() {\n        if (this.boundingSphere === null) {\n            this.boundingSphere = new Sphere();\n        }\n        this.boundingSphere.setFromPoints(this.vertices);\n        return this;\n    }\n    merge(geometry, matrix, materialIndexOffset = 0) {\n        let normalMatrix;\n        const vertexOffset = this.vertices.length, thisVertices = this.vertices, thatVertices = geometry.vertices, thisFaces = this.faces, thatFaces = geometry.faces, thisUvs = this.faceVertexUvs[0], thatUvs = geometry.faceVertexUvs[0], thisColors = this.colors, thatColors = geometry.colors;\n        if (matrix !== undefined) {\n            normalMatrix = new Matrix3().getNormalMatrix(matrix);\n        }\n        // vertices\n        for (let i = 0, il = thatVertices.length; i < il; i++) {\n            const vertexCopy = thatVertices[i].clone();\n            if (matrix !== undefined)\n                vertexCopy.applyMatrix4(matrix);\n            thisVertices.push(vertexCopy);\n        }\n        // colors\n        for (let i = 0, il = thatColors.length; i < il; i++) {\n            thisColors.push(thatColors[i].clone());\n        }\n        // faces\n        for (let i = 0, il = thatFaces.length; i < il; i++) {\n            const face = thatFaces[i], faceVertexNormals = face.vertexNormals, faceVertexColors = face.vertexColors;\n            const faceCopy = new GeometryFace(face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset);\n            faceCopy.normal.copy(face.normal);\n            if (normalMatrix !== undefined) {\n                faceCopy.normal.applyMatrix3(normalMatrix).normalize();\n            }\n            for (let j = 0, jl = faceVertexNormals.length; j < jl; j++) {\n                const normal = faceVertexNormals[j].clone();\n                if (normalMatrix !== undefined) {\n                    normal.applyMatrix3(normalMatrix).normalize();\n                }\n                faceCopy.vertexNormals.push(normal);\n            }\n            faceCopy.color.copy(face.color);\n            for (let j = 0, jl = faceVertexColors.length; j < jl; j++) {\n                const color = faceVertexColors[j];\n                faceCopy.vertexColors.push(color.clone());\n            }\n            faceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n            thisFaces.push(faceCopy);\n        }\n        // uvs\n        for (let i = 0, il = thatUvs.length; i < il; i++) {\n            const uv = thatUvs[i], uvCopy = [];\n            if (uv === undefined) {\n                continue;\n            }\n            for (let j = 0, jl = uv.length; j < jl; j++) {\n                uvCopy.push(uv[j].clone());\n            }\n            thisUvs.push(uvCopy);\n        }\n        return this;\n    }\n    mergeMesh(mesh) {\n        if (mesh.geometry instanceof Geometry) {\n            if (mesh.matrixAutoUpdate) {\n                mesh.updateMatrix();\n            }\n            this.merge(mesh.geometry, mesh.matrix);\n        }\n        else {\n            console.error(`THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.`, mesh.geometry);\n        }\n    }\n    /**\n     * Checks for duplicate vertices with hashmap.\n     * Duplicated vertices are removed\n     * and faces' vertices are updated.\n     * @returns {number}\n     */\n    mergeVertices() {\n        /**\n         * Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n         * @type {{}}\n         */\n        const verticesMap = {};\n        const unique = [], changes = [];\n        /**\n         * number of decimal points, e.g. 4 for epsilon of 0.0001\n         * @type {number}\n         */\n        const precisionPoints = 4;\n        const precision = Math.pow(10, precisionPoints);\n        for (let i = 0, il = this.vertices.length; i < il; i++) {\n            const v = this.vertices[i];\n            const key = [\n                Math.round(v.x * precision),\n                Math.round(v.y * precision),\n                Math.round(v.z * precision),\n            ].join(\"_\");\n            if (verticesMap[key] === undefined) {\n                verticesMap[key] = i;\n                unique.push(this.vertices[i]);\n                changes[i] = unique.length - 1;\n            }\n            else {\n                // console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n                changes[i] = changes[verticesMap[key]];\n            }\n        }\n        // if faces are completely degenerate after merging vertices, we\n        // have to remove them from the geometry.\n        const faceIndicesToRemove = [];\n        for (let i = 0, il = this.faces.length; i < il; i++) {\n            const face = this.faces[i];\n            face.a = changes[face.a];\n            face.b = changes[face.b];\n            face.c = changes[face.c];\n            const indices = [face.a, face.b, face.c];\n            // if any duplicate vertices are found in a Face3\n            // we have to remove the face as nothing can be saved\n            for (let n = 0; n < 3; n++) {\n                if (indices[n] === indices[(n + 1) % 3]) {\n                    faceIndicesToRemove.push(i);\n                    break;\n                }\n            }\n        }\n        for (let i = faceIndicesToRemove.length - 1; i >= 0; i--) {\n            const idx = faceIndicesToRemove[i];\n            this.faces.splice(idx, 1);\n            for (let j = 0, jl = this.faceVertexUvs.length; j < jl; j++) {\n                this.faceVertexUvs[j].splice(idx, 1);\n            }\n        }\n        // Use unique set of vertices\n        const diff = this.vertices.length - unique.length;\n        this.vertices = unique;\n        return diff;\n    }\n    setFromPoints(points) {\n        this.vertices = [];\n        for (let i = 0, l = points.length; i < l; i++) {\n            const point = points[i];\n            this.vertices.push(new Vector3(point.x, point.y, point.z || 0));\n        }\n        return this;\n    }\n    sortFacesByMaterialIndex() {\n        const faces = this.faces;\n        const length = faces.length;\n        // tag faces\n        for (let i = 0; i < length; i++) {\n            faces[i].id = i;\n        }\n        // sort faces\n        faces.sort((a, b) => {\n            return a.materialIndex - b.materialIndex;\n        });\n        // sort uvs\n        const uvs1 = this.faceVertexUvs[0];\n        const uvs2 = this.faceVertexUvs[1];\n        let newUvs1, newUvs2;\n        if (uvs1 && uvs1.length === length)\n            newUvs1 = [];\n        if (uvs2 && uvs2.length === length)\n            newUvs2 = [];\n        for (let i = 0; i < length; i++) {\n            const id = faces[i].id;\n            if (newUvs1)\n                newUvs1.push(uvs1[id]);\n            if (newUvs2)\n                newUvs2.push(uvs2[id]);\n        }\n        if (newUvs1)\n            this.faceVertexUvs[0] = newUvs1;\n        if (newUvs2)\n            this.faceVertexUvs[1] = newUvs2;\n        return this;\n    }\n    copy(source) {\n        // reset\n        this.vertices = [];\n        this.colors = [];\n        this.faces = [];\n        this.faceVertexUvs = [[]];\n        this.morphTargets = [];\n        this.morphNormals = [];\n        this.skinWeights = [];\n        this.skinIndices = [];\n        this.lineDistances = [];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n        // name\n        this.name = source.name;\n        // vertices\n        const vertices = source.vertices;\n        for (let i = 0, il = vertices.length; i < il; i++) {\n            this.vertices.push(vertices[i].clone());\n        }\n        // colors\n        const colors = source.colors;\n        for (let i = 0, il = colors.length; i < il; i++) {\n            this.colors.push(colors[i].clone());\n        }\n        // faces\n        const faces = source.faces;\n        for (let i = 0, il = faces.length; i < il; i++) {\n            this.faces.push(faces[i].clone());\n        }\n        // face vertex uvs\n        for (let i = 0, il = source.faceVertexUvs.length; i < il; i++) {\n            const faceVertexUvs = source.faceVertexUvs[i];\n            if (this.faceVertexUvs[i] === undefined) {\n                this.faceVertexUvs[i] = [];\n            }\n            for (let j = 0, jl = faceVertexUvs.length; j < jl; j++) {\n                const uvs = faceVertexUvs[j];\n                const uvsCopy = [];\n                for (let k = 0, kl = uvs.length; k < kl; k++) {\n                    uvsCopy.push(uvs[k].clone());\n                }\n                this.faceVertexUvs[i].push(uvsCopy);\n            }\n        }\n        // morph targets\n        const morphTargets = source.morphTargets;\n        for (let i = 0, il = morphTargets.length; i < il; i++) {\n            const morphTarget = { name: morphTargets[i].name };\n            // vertices\n            if (morphTargets[i].vertices !== undefined) {\n                morphTarget.vertices = [];\n                for (let j = 0, jl = morphTargets[i].vertices.length; j < jl; j++) {\n                    morphTarget.vertices.push(morphTargets[i].vertices[j].clone());\n                }\n            }\n            // normals\n            if (morphTargets[i].normals !== undefined) {\n                morphTarget.normals = [];\n                for (let j = 0, jl = morphTargets[i].normals.length; j < jl; j++) {\n                    morphTarget.normals.push(morphTargets[i].normals[j].clone());\n                }\n            }\n            this.morphTargets.push(morphTarget);\n        }\n        // morph normals\n        const morphNormals = source.morphNormals;\n        for (let i = 0, il = morphNormals.length; i < il; i++) {\n            const morphNormal = {};\n            // vertex normals\n            if (morphNormals[i].vertexNormals !== undefined) {\n                morphNormal.vertexNormals = [];\n                for (let j = 0, jl = morphNormals[i].vertexNormals.length; j < jl; j++) {\n                    morphNormal.vertexNormals.push(morphNormals[i].vertexNormals[j].clone());\n                }\n            }\n            // face normals\n            if (morphNormals[i].faceNormals !== undefined) {\n                morphNormal.faceNormals = [];\n                for (let j = 0, jl = morphNormals[i].faceNormals.length; j < jl; j++) {\n                    morphNormal.faceNormals.push(morphNormals[i].faceNormals[j].clone());\n                }\n            }\n            this.morphNormals.push(morphNormal);\n        }\n        // skin weights\n        const skinWeights = source.skinWeights;\n        for (let i = 0, il = skinWeights.length; i < il; i++) {\n            this.skinWeights.push(skinWeights[i].clone());\n        }\n        // skin indices\n        const skinIndices = source.skinIndices;\n        for (let i = 0, il = skinIndices.length; i < il; i++) {\n            this.skinIndices.push(skinIndices[i].clone());\n        }\n        // line distances\n        const lineDistances = source.lineDistances;\n        for (let i = 0, il = lineDistances.length; i < il; i++) {\n            this.lineDistances.push(lineDistances[i]);\n        }\n        // bounding box\n        const boundingBox = source.boundingBox;\n        if (boundingBox !== null) {\n            this.boundingBox = boundingBox.clone();\n        }\n        // bounding sphere\n        const boundingSphere = source.boundingSphere;\n        if (boundingSphere !== null) {\n            this.boundingSphere = boundingSphere.clone();\n        }\n        // update flags\n        this.elementsNeedUpdate = source.elementsNeedUpdate;\n        this.verticesNeedUpdate = source.verticesNeedUpdate;\n        this.uvsNeedUpdate = source.uvsNeedUpdate;\n        this.normalsNeedUpdate = source.normalsNeedUpdate;\n        this.colorsNeedUpdate = source.colorsNeedUpdate;\n        this.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n        this.groupsNeedUpdate = source.groupsNeedUpdate;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { BufferAttribute } from \"./BufferAttribute\";\nexport class InstancedBufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized = false, meshPerAttribute = 1) {\n        super(array, itemSize, normalized);\n        this.meshPerAttribute = 1;\n        this.meshPerAttribute = meshPerAttribute;\n    }\n    copy(source) {\n        super.copy(source);\n        this.meshPerAttribute = source.meshPerAttribute;\n        return this;\n    }\n}\n","import { BufferGeometry } from \"./BufferGeometry\";\nexport class InstancedBufferGeometry extends BufferGeometry {\n    constructor() {\n        super(...arguments);\n        this.type = \"InstancedBufferGeometry\";\n    }\n    copy(source) {\n        super.copy(source);\n        this.maxInstancedCount = source.maxInstancedCount;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { InterleavedBufferAttribute } from \"./InterleavedBufferAttribute\";\nexport class InstancedInterleavedBufferAttribute extends InterleavedBufferAttribute {\n    constructor(array, stride, itemSize, offset, normalized = false, meshPerAttribute = 1) {\n        super(array, stride, itemSize, offset, normalized);\n        this.meshPerAttribute = 1;\n        this.meshPerAttribute = meshPerAttribute;\n    }\n    copy(source) {\n        super.copy(source);\n        this.meshPerAttribute = source.meshPerAttribute;\n        return this;\n    }\n}\n","import { MathUtil } from \"../math/Math\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Vector4 } from \"../math/Vector4\";\nexport class InterleavedBufferAttribute {\n    constructor(array, stride, itemSize, offset, normalized = false) {\n        this.uuid = MathUtil.generateUUID();\n        this.array = undefined;\n        this.stride = 1;\n        this.count = 0;\n        this.dynamic = false;\n        this.updateRange = { offset: 0, count: -1 };\n        this.version = 0;\n        this.normalized = false;\n        this.array = array;\n        this.stride = stride;\n        this.count = array !== undefined ? array.length / stride : 0;\n        this.itemSize = itemSize;\n        this.offset = offset;\n        this.normalized = normalized;\n    }\n    set needsUpdate(value) {\n        if (value === true)\n            this.version++;\n    }\n    setArray(array) {\n        this.count = array !== undefined ? array.length / this.stride : 0;\n        this.array = array;\n        return this;\n    }\n    setDynamic(value) {\n        this.dynamic = value;\n        return this;\n    }\n    copy(source) {\n        this.array = new source.array.constructor(source.array);\n        this.stride = source.stride;\n        this.count = source.count;\n        this.dynamic = source.dynamic;\n        return this;\n    }\n    set(value, offset = 0) {\n        this.array.set(value, offset);\n        return this;\n    }\n    get(offset = 0, length = 1) {\n        return this.array.slice(offset, length);\n    }\n    copyAt(index1, attribute, index2) {\n        index1 *= this.stride;\n        index2 *= attribute.stride;\n        for (let i = 0, l = this.stride; i < l; i++) {\n            this.array[index1 + i] = attribute.array[index2 + i];\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor(this.array, this.stride).copy(this);\n    }\n    setProperty(index, property, value) {\n        property = property.toLowerCase();\n        if (property && property.length <= 4 && property.replace(/[xyzw]/g, \"\").length === 0) {\n            const offsetMap = { x: 0, y: 1, z: 2 };\n            if (property.length === 1 && typeof value === \"number\") {\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]] = value;\n            }\n            else if (property.length === 2 && value instanceof Vector2) {\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]] = value.y;\n            }\n            else if (property.length === 3 && value instanceof Vector3) {\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]] = value.y;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(2)]] = value.z;\n            }\n            else if (property.length === 4 && value instanceof Vector4) {\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]] = value.x;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]] = value.y;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(2)]] = value.z;\n                this.array[index * this.stride + this.offset + offsetMap[property.charAt(3)]] = value.w;\n            }\n        }\n        return this;\n    }\n    getProperty(index, property) {\n        property = property.toLowerCase();\n        if (property && property.length <= 4 && property.replace(/[xyzw]/g, \"\").length === 0) {\n            const offsetMap = { x: 0, y: 1, z: 2 };\n            if (property.length === 1) {\n                return this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]];\n            }\n            else if (property.length === 2) {\n                return new Vector2(this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]]);\n            }\n            else if (property.length === 3) {\n                return new Vector3(this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(2)]]);\n            }\n            else if (property.length === 4) {\n                return new Vector4(this.array[index * this.stride + this.offset + offsetMap[property.charAt(0)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(1)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(2)]], this.array[index * this.stride + this.offset + offsetMap[property.charAt(3)]]);\n            }\n        }\n        return undefined;\n    }\n}\n","export class Layers {\n    constructor() {\n        this.mask = 1 | 0;\n    }\n    set(channel) {\n        this.mask = (1 << channel) | 0;\n    }\n    enable(channel) {\n        this.mask |= (1 << channel) | 0;\n    }\n    toggle(channel) {\n        this.mask ^= (1 << channel) | 0;\n    }\n    disable(channel) {\n        this.mask &= ~((1 << channel) | 0);\n    }\n    test(layers) {\n        return (this.mask & layers.mask) !== 0;\n    }\n}\n","import { Camera } from \"../cameras/Camera\";\nimport { Euler } from \"../math/Euler\";\nimport { MathUtil } from \"../math/Math\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Quaternion } from \"../math/Quaternion\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { EventDispatcher } from \"./EventDispatcher\";\nimport { Layers } from \"./Layers\";\nlet object3DId = 0;\nexport class Object3D extends EventDispatcher {\n    constructor() {\n        super();\n        this.id = object3DId++;\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.type = \"Object3D\";\n        this.parent = null;\n        this.children = [];\n        this.up = new Vector3().copy(Object3D.DefaultUp);\n        this.matrix = new Matrix4();\n        this.matrixWorld = new Matrix4();\n        this.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n        this.matrixWorldNeedsUpdate = false;\n        this.layers = new Layers();\n        this.visible = true;\n        this.castShadow = false;\n        this.receiveShadow = false;\n        this.frustumCulled = true;\n        this.renderOrder = 0;\n        this.userData = {};\n        this.position = new Vector3();\n        this.rotation = new Euler();\n        this.quaternion = new Quaternion();\n        this.scale = new Vector3(1, 1, 1);\n        this.modelViewMatrix = new Matrix4();\n        this.normalMatrix = new Matrix3();\n        this.onBeforeRender = function () { };\n        this.onAfterRender = function () { };\n        this.rotation.onChange(() => {\n            this.quaternion.setFromEuler(this.rotation, false);\n        });\n        this.quaternion.onChange(() => {\n            this.rotation.setFromQuaternion(this.quaternion, undefined, false);\n        });\n    }\n    updateMatrix() {\n        this.matrix.compose(this.position, this.quaternion, this.scale);\n        this.matrixWorldNeedsUpdate = true;\n        return this;\n    }\n    updateMatrixWorld(force = false) {\n        if (this.matrixAutoUpdate) {\n            this.updateMatrix();\n        }\n        if (this.matrixWorldNeedsUpdate || force) {\n            if (this.parent === null) {\n                this.matrixWorld.copy(this.matrix);\n            }\n            else {\n                this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n            }\n            this.matrixWorldNeedsUpdate = false;\n            force = true;\n        }\n        // update children\n        const children = this.children;\n        for (let i = 0, l = children.length; i < l; i++) {\n            children[i].updateMatrixWorld(force);\n        }\n        return this;\n    }\n    raycast(raycaster, intersections) { }\n    applyMatrix(matrix) {\n        this.matrix.multiplyMatrices(matrix, this.matrix);\n        this.matrix.decompose(this.position, this.quaternion, this.scale);\n        return this;\n    }\n    applyQuaternion(q) {\n        this.quaternion.premultiply(q);\n        return this;\n    }\n    /**\n     * assumes axis is normalized\n     * @param axis\n     * @param angle\n     * @returns {Object3D}\n     */\n    setRotationFromAxisAngle(axis, angle) {\n        this.quaternion.setFromAxisAngle(axis, angle);\n        return this;\n    }\n    setRotationFromEuler(euler) {\n        this.quaternion.setFromEuler(euler);\n        return this;\n    }\n    /**\n     * assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n     * @param m\n     * @returns {Object3D}\n     */\n    setRotationFromMatrix(m) {\n        this.quaternion.setFromRotationMatrix(m);\n        return this;\n    }\n    /**\n     * assumes q is normalized\n     * @param q\n     * @returns {Object3D}\n     */\n    setRotationFromQuaternion(q) {\n        this.quaternion.copy(q);\n        return this;\n    }\n    rotateOnAxis(axis, angle) {\n        const q = new Quaternion();\n        q.setFromAxisAngle(axis, angle);\n        this.quaternion.multiply(q);\n        return this;\n    }\n    /**\n     * rotate object on axis in world space\n     * axis is assumed to be normalized\n     * method assumes no rotated parent\n     * @param axis\n     * @param angle\n     * @returns {Object3D}\n     */\n    rotateOnWorldAxis(axis, angle) {\n        const q = new Quaternion();\n        q.setFromAxisAngle(axis, angle);\n        this.quaternion.premultiply(q);\n        return this;\n    }\n    rotateX(angle) {\n        return this.rotateOnAxis(new Vector3(1, 0, 0), angle);\n    }\n    rotateY(angle) {\n        return this.rotateOnAxis(new Vector3(0, 1, 0), angle);\n    }\n    rotateZ(angle) {\n        return this.rotateOnAxis(new Vector3(0, 0, 1), angle);\n    }\n    /**\n     * translate object by distance along axis in object space\n     * axis is assumed to be normalized\n     * @param axis\n     * @param distance\n     * @returns {Object3D}\n     */\n    translateOnAxis(axis, distance) {\n        const vec = new Vector3();\n        vec.copy(axis).applyQuaternion(this.quaternion);\n        this.position.add(vec.multiplyScalar(distance));\n        return this;\n    }\n    translateX(distance) {\n        return this.translateOnAxis(new Vector3(1, 0, 0), distance);\n    }\n    translateY(distance) {\n        return this.translateOnAxis(new Vector3(0, 1, 0), distance);\n    }\n    translateZ(distance) {\n        return this.translateOnAxis(new Vector3(0, 0, 1), distance);\n    }\n    localToWorld(vector) {\n        return vector.applyMatrix4(this.matrixWorld);\n    }\n    worldToLocal(vector) {\n        return vector.applyMatrix4(new Matrix4().getInverse(this.matrixWorld));\n    }\n    lookAt(vec) {\n        const mat = new Matrix4();\n        if (this instanceof Camera) {\n            mat.lookAt(this.position, vec, this.up);\n        }\n        else {\n            mat.lookAt(vec, this.position, this.up);\n        }\n        this.quaternion.setFromRotationMatrix(mat);\n        return this;\n    }\n    add(object, ...objects) {\n        if (objects.length > 1) {\n            for (let i = 0; i < objects.length; i++) {\n                this.add(objects[i]);\n            }\n            return this;\n        }\n        if (object === this) {\n            console.error(`THREE.Object3D.add: object can't be added as a child of itself. ${object}`);\n            return this;\n        }\n        if (object.parent !== null) {\n            object.parent.remove(object);\n        }\n        object.parent = this;\n        object.dispatchEvent({ type: \"added\" });\n        this.children.push(object);\n        return this;\n    }\n    remove(object, ...objects) {\n        if (objects.length > 1) {\n            for (let i = 0; i < objects.length; i++) {\n                this.remove(objects[i]);\n            }\n            return this;\n        }\n        const index = this.children.indexOf(object);\n        if (index !== -1) {\n            object.parent = null;\n            object.dispatchEvent({ type: \"removed\" });\n            this.children.splice(index, 1);\n        }\n        return this;\n    }\n    get worldPosition() {\n        this.updateMatrixWorld(true);\n        return new Vector3().setFromMatrixPosition(this.matrixWorld);\n    }\n    get worldQuaternion() {\n        const position = new Vector3();\n        const scale = new Vector3();\n        const result = new Quaternion();\n        this.updateMatrixWorld(true);\n        this.matrixWorld.decompose(position, result, scale);\n        return result;\n    }\n    get worldRotation() {\n        return new Euler().setFromQuaternion(this.worldQuaternion, this.rotation.order, false);\n    }\n    get worldScale() {\n        const position = new Vector3();\n        const quaternion = new Quaternion();\n        const result = new Vector3();\n        this.updateMatrixWorld(true);\n        this.matrixWorld.decompose(position, quaternion, result);\n        return result;\n    }\n    get worldDirection() {\n        return new Vector3().set(0, 0, 1).applyQuaternion(this.worldQuaternion);\n    }\n    traverse(callback) {\n        callback(this);\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].traverse(callback);\n        }\n    }\n    traverseVisible(callback) {\n        if (this.visible === false)\n            return;\n        callback(this);\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].traverseVisible(callback);\n        }\n    }\n    traverseAncestors(callback) {\n        if (this.parent !== null) {\n            callback(this.parent);\n            this.parent.traverseAncestors(callback);\n        }\n    }\n    clone(recursive = false) {\n        return new this.constructor().copy(this, recursive);\n    }\n    copy(source, recursive = true) {\n        this.name = source.name;\n        this.up.copy(source.up);\n        this.position.copy(source.position);\n        this.quaternion.copy(source.quaternion);\n        this.scale.copy(source.scale);\n        this.matrix.copy(source.matrix);\n        this.matrixWorld.copy(source.matrixWorld);\n        this.matrixAutoUpdate = source.matrixAutoUpdate;\n        this.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n        this.layers.mask = source.layers.mask;\n        this.visible = source.visible;\n        this.castShadow = source.castShadow;\n        this.receiveShadow = source.receiveShadow;\n        this.frustumCulled = source.frustumCulled;\n        this.renderOrder = source.renderOrder;\n        this.userData = JSON.parse(JSON.stringify(source.userData));\n        if (recursive === true) {\n            for (let i = 0; i < source.children.length; i++) {\n                this.add(source.children[i].clone());\n            }\n        }\n        return this;\n    }\n}\nObject3D.DefaultUp = new Vector3(0, 1, 0);\nObject3D.DefaultMatrixAutoUpdate = true;\n","import { OrthographicCamera } from \"../cameras/OrthographicCamera\";\nimport { PerspectiveCamera } from \"../cameras/PerspectiveCamera\";\nimport { Ray } from \"../math/Ray\";\nimport { unprojectVector3onCamera } from \"../utils\";\nfunction intersectObject(object, raycaster, intersects, recursive = false) {\n    if (object.visible === false)\n        return;\n    object.raycast(raycaster, intersects);\n    if (recursive === true) {\n        const children = object.children;\n        for (let i = 0, l = children.length; i < l; i++) {\n            intersectObject(children[i], raycaster, intersects, true);\n        }\n    }\n}\nexport class Raycaster {\n    constructor(origin, direction, near = 0, far = Infinity) {\n        this.params = {\n            LOD: {},\n            Line: {},\n            Mesh: {},\n            Points: { threshold: 1 },\n            Sprite: {},\n        };\n        this.near = 0;\n        this.far = Infinity;\n        this.linePrecision = 1;\n        this.ray = new Ray(origin, direction);\n        this.near = near;\n        this.far = far;\n    }\n    set(origin, direction) {\n        this.ray.set(origin, direction);\n        return this;\n    }\n    setFromCamera(coords, camera) {\n        if (camera && camera instanceof PerspectiveCamera) {\n            this.ray.origin.setFromMatrixPosition(camera.matrixWorld);\n            this.ray.direction.set(coords.x, coords.y, 0.5);\n            unprojectVector3onCamera(this.ray.direction, camera);\n            this.ray.direction.sub(this.ray.origin).normalize();\n        }\n        else if (camera && camera instanceof OrthographicCamera) {\n            this.ray.origin.set(coords.x, coords.y, (camera.near + camera.far) / (camera.near - camera.far));\n            unprojectVector3onCamera(this.ray.origin, camera); // set origin in plane of camera\n            this.ray.direction.set(0, 0, -1).transformDirection(camera.matrixWorld);\n        }\n        else {\n            console.error(`THREE.Raycaster: Unsupported camera type.`);\n        }\n        return this;\n    }\n    intersectObject(object, recursive = false) {\n        const intersects = [];\n        intersectObject(object, this, intersects, recursive);\n        intersects.sort((a, b) => a.distance - b.distance);\n        return intersects;\n    }\n    intersectObjects(objects, recursive = false) {\n        const intersects = [];\n        for (let i = 0, l = objects.length; i < l; i++) {\n            intersectObject(objects[i], this, intersects, recursive);\n        }\n        intersects.sort((a, b) => a.distance - b.distance);\n        return intersects;\n    }\n}\n","import { Object3D } from \"../../core/Object3D\";\nexport class ImmediateRenderObject extends Object3D {\n    constructor(material) {\n        super();\n        this.material = material;\n    }\n}\n","import { Float32BufferAttribute } from \"../core/BufferAttribute\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class BoxGeometry extends Geometry {\n    constructor(width, height, depth, widthSegments, heightSegments, depthSegments) {\n        super();\n        this.type = \"BoxGeometry\";\n        this.parameters = {\n            depth: depth,\n            depthSegments: depthSegments,\n            height: height,\n            heightSegments: heightSegments,\n            width: width,\n            widthSegments: widthSegments,\n        };\n        this.fromBufferGeometry(new BoxBufferGeometry(width, height, depth, widthSegments, heightSegments, depthSegments));\n        this.mergeVertices();\n    }\n}\nexport class BoxBufferGeometry extends BufferGeometry {\n    constructor(width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1) {\n        super();\n        this.type = \"BoxBufferGeometry\";\n        this.parameters = {\n            depth: depth,\n            depthSegments: depthSegments,\n            height: height,\n            heightSegments: heightSegments,\n            width: width,\n            widthSegments: widthSegments,\n        };\n        widthSegments = Math.floor(widthSegments);\n        heightSegments = Math.floor(heightSegments);\n        depthSegments = Math.floor(depthSegments);\n        // buffers\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        // helper variables\n        let numberOfVertices = 0;\n        let groupStart = 0;\n        const buildPlane = (u, v, w, uDir, vDir, width2, height2, depth2, gridX, gridY, materialIndex) => {\n            const segmentWidth = width2 / gridX;\n            const segmentHeight = height2 / gridY;\n            const widthHalf = width2 / 2;\n            const heightHalf = height2 / 2;\n            const depthHalf = depth2 / 2;\n            const gridX1 = gridX + 1;\n            const gridY1 = gridY + 1;\n            let vertexCounter = 0;\n            let groupCount = 0;\n            // generate vertices, normals and uvs\n            for (let iy = 0; iy < gridY1; iy++) {\n                const y = iy * segmentHeight - heightHalf;\n                for (let ix = 0; ix < gridX1; ix++) {\n                    const x = ix * segmentWidth - widthHalf;\n                    const vector = new Vector3();\n                    // set values to correct vector component\n                    vector[u] = x * uDir;\n                    vector[v] = y * vDir;\n                    vector[w] = depthHalf;\n                    // now apply vector to vertex buffer\n                    vertices.push(vector.x, vector.y, vector.z);\n                    // set values to correct vector component\n                    vector[u] = 0;\n                    vector[v] = 0;\n                    vector[w] = depth2 > 0 ? 1 : -1;\n                    // now apply vector to normal buffer\n                    normals.push(vector.x, vector.y, vector.z);\n                    // uvs\n                    uvs.push(ix / gridX);\n                    uvs.push(1 - iy / gridY);\n                    // counters\n                    vertexCounter += 1;\n                }\n            }\n            // indices\n            // 1. you need three indices to draw a single face\n            // 2. a single segment consists of two faces\n            // 3. so we need to generate six (2*3) indices per segment\n            for (let iy = 0; iy < gridY; iy++) {\n                for (let ix = 0; ix < gridX; ix++) {\n                    const a = numberOfVertices + ix + gridX1 * iy;\n                    const b = numberOfVertices + ix + gridX1 * (iy + 1);\n                    const c = numberOfVertices + (ix + 1) + gridX1 * (iy + 1);\n                    const d = numberOfVertices + (ix + 1) + gridX1 * iy;\n                    // faces\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n                    // increase counter\n                    groupCount += 6;\n                }\n            }\n            // add a group to the geometry. this will ensure multi material support\n            this.addGroup(groupStart, groupCount, materialIndex);\n            // calculate new start value for groups\n            groupStart += groupCount;\n            // update total number of vertices\n            numberOfVertices += vertexCounter;\n        };\n        // build each side of the box geometry\n        buildPlane(\"z\", \"y\", \"x\", -1, -1, depth, height, width, depthSegments, heightSegments, 0); // px\n        buildPlane(\"z\", \"y\", \"x\", 1, -1, depth, height, -width, depthSegments, heightSegments, 1); // nx\n        buildPlane(\"x\", \"z\", \"y\", 1, 1, width, depth, height, widthSegments, depthSegments, 2); // py\n        buildPlane(\"x\", \"z\", \"y\", 1, -1, width, depth, -height, widthSegments, depthSegments, 3); // ny\n        buildPlane(\"x\", \"y\", \"z\", 1, -1, width, height, depth, widthSegments, heightSegments, 4); // pz\n        buildPlane(\"x\", \"y\", \"z\", -1, -1, width, height, -depth, widthSegments, heightSegments, 5); // nz\n        // build geometry\n        this.setIndex(indices);\n        this.addAttribute(\"position\", new Float32BufferAttribute(vertices, 3));\n        this.addAttribute(\"normal\", new Float32BufferAttribute(normals, 3));\n        this.addAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\n    }\n}\n","import { Float32BufferAttribute } from \"../core/BufferAttribute\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nexport class CircleGeometry extends Geometry {\n    constructor(radius, segments, thetaStart, thetaLength) {\n        super();\n        this.type = \"CircleGeometry\";\n        this.parameters = {\n            radius: radius,\n            segments: segments,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n        this.fromBufferGeometry(new CircleBufferGeometry(radius, segments, thetaStart, thetaLength));\n        this.mergeVertices();\n    }\n}\nexport class CircleBufferGeometry extends BufferGeometry {\n    constructor(radius = 1, segments, thetaStart = 0, thetaLength = Math.PI * 2) {\n        super();\n        this.type = \"CircleBufferGeometry\";\n        this.parameters = {\n            radius: radius,\n            segments: segments,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n        segments = segments !== undefined ? Math.max(3, segments) : 8;\n        // buffers\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        // center point\n        vertices.push(0, 0, 0);\n        normals.push(0, 0, 1);\n        uvs.push(0.5, 0.5);\n        for (let s = 0, i = 3; s <= segments; s++, i += 3) {\n            const segment = thetaStart + s / segments * thetaLength;\n            // vertex\n            vertices.push(radius * Math.cos(segment), radius * Math.sin(segment), 0);\n            // normal\n            normals.push(0, 0, 1);\n            // uvs\n            uvs.push((vertices[i] / radius + 1) / 2, (vertices[i + 1] / radius + 1) / 2);\n        }\n        // indices\n        for (let i = 1; i <= segments; i++) {\n            indices.push(i, i + 1, 0);\n        }\n        // build geometry\n        this.setIndex(indices);\n        this.addAttribute(\"position\", new Float32BufferAttribute(vertices, 3));\n        this.addAttribute(\"normal\", new Float32BufferAttribute(normals, 3));\n        this.addAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\n    }\n}\n","import { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { CylinderBufferGeometry, CylinderGeometry } from \"./CylinderGeometry\";\nexport class ConeGeometry extends Geometry {\n    constructor(radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength) {\n        super();\n        this.type = \"ConeGeometry\";\n        CylinderGeometry.call(this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength);\n        this.parameters = {\n            height: height,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            radialSegments: radialSegments,\n            radius: radius,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n    }\n}\nexport class ConeBufferGeometry extends BufferGeometry {\n    constructor(radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength) {\n        super();\n        this.type = \"ConeBufferGeometry\";\n        CylinderBufferGeometry.call(this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength);\n        this.parameters = {\n            height: height,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            radialSegments: radialSegments,\n            radius: radius,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n    }\n}\n","import { Float32BufferAttribute } from \"../core/BufferAttribute\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class CylinderGeometry extends Geometry {\n    constructor(radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength) {\n        super();\n        this.type = \"CylinderGeometry\";\n        this.parameters = {\n            height: height,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            radialSegments: radialSegments,\n            radiusBottom: radiusBottom,\n            radiusTop: radiusTop,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n        this.fromBufferGeometry(new CylinderBufferGeometry(radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength));\n        this.mergeVertices();\n    }\n}\nexport class CylinderBufferGeometry extends BufferGeometry {\n    constructor(radiusTop = 1, radiusBottom = 1, height = 1, radialSegments = 9, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2) {\n        super();\n        this.type = \"CylinderBufferGeometry\";\n        this.parameters = {\n            height: height,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            radialSegments: radialSegments,\n            radiusBottom: radiusBottom,\n            radiusTop: radiusTop,\n            thetaLength: thetaLength,\n            thetaStart: thetaStart,\n        };\n        radialSegments = Math.floor(radialSegments);\n        heightSegments = Math.floor(heightSegments);\n        // buffers\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        // helper variables\n        let index = 0;\n        const indexArray = [];\n        const halfHeight = height / 2;\n        let groupStart = 0;\n        const generateCap = (top) => {\n            let centerIndexStart, centerIndexEnd;\n            let groupCount = 0;\n            const radius = top ? radiusTop : radiusBottom;\n            const sign = top ? 1 : -1;\n            // save the index of the first center vertex\n            centerIndexStart = index;\n            // first we generate the center vertex data of the cap.\n            // because the geometry needs one set of uvs per face,\n            // we must generate a center vertex per face/segment\n            for (let x = 1; x <= radialSegments; x++) {\n                // vertex\n                vertices.push(0, halfHeight * sign, 0);\n                // normal\n                normals.push(0, sign, 0);\n                // uv\n                uvs.push(0.5, 0.5);\n                // increase index\n                index++;\n            }\n            // save the index of the last center vertex\n            centerIndexEnd = index;\n            // now we generate the surrounding vertices, normals and uvs\n            for (let x = 0; x <= radialSegments; x++) {\n                const u = x / radialSegments;\n                const theta = u * thetaLength + thetaStart;\n                const cosTheta = Math.cos(theta);\n                const sinTheta = Math.sin(theta);\n                // vertex\n                vertices.push(radius * sinTheta, halfHeight * sign, radius * cosTheta);\n                // normal\n                normals.push(0, sign, 0);\n                // uv\n                uvs.push(cosTheta * 0.5 + 0.5, sinTheta * 0.5 * sign + 0.5);\n                // increase index\n                index++;\n            }\n            // generate indices\n            for (let x = 0; x < radialSegments; x++) {\n                const c = centerIndexStart + x;\n                const i = centerIndexEnd + x;\n                if (top) {\n                    // face top\n                    indices.push(i, i + 1, c);\n                }\n                else {\n                    // face bottom\n                    indices.push(i + 1, i, c);\n                }\n                groupCount += 3;\n            }\n            // add a group to the geometry. this will ensure multi material support\n            this.addGroup(groupStart, groupCount, top === true ? 1 : 2);\n            // calculate new start value for groups\n            groupStart += groupCount;\n        };\n        const generateTorso = () => {\n            let groupCount = 0;\n            // this will be used to calculate the normal\n            const slope = (radiusBottom - radiusTop) / height;\n            // generate vertices, normals and uvs\n            for (let y = 0; y <= heightSegments; y++) {\n                const indexRow = [];\n                const v = y / heightSegments;\n                // calculate the radius of the current row\n                const radius = v * (radiusBottom - radiusTop) + radiusTop;\n                for (let x = 0; x <= radialSegments; x++) {\n                    const u = x / radialSegments;\n                    const theta = u * thetaLength + thetaStart;\n                    const sinTheta = Math.sin(theta);\n                    const cosTheta = Math.cos(theta);\n                    // vertex\n                    vertices.push(radius * sinTheta, -v * height + halfHeight, radius * cosTheta);\n                    // normal\n                    const normal = new Vector3();\n                    normal.set(sinTheta, slope, cosTheta).normalize();\n                    normals.push(normal.x, normal.y, normal.z);\n                    // uv\n                    uvs.push(u, 1 - v);\n                    // save index of vertex in respective row\n                    indexRow.push(index++);\n                }\n                // now save vertices of the row in our index array\n                indexArray.push(indexRow);\n            }\n            // generate indices\n            for (let x = 0; x < radialSegments; x++) {\n                for (let y = 0; y < heightSegments; y++) {\n                    // we use the index array to access the correct indices\n                    const a = indexArray[y][x];\n                    const b = indexArray[y + 1][x];\n                    const c = indexArray[y + 1][x + 1];\n                    const d = indexArray[y][x + 1];\n                    // faces\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n                    // update group counter\n                    groupCount += 6;\n                }\n            }\n            // add a group to the geometry. this will ensure multi material support\n            this.addGroup(groupStart, groupCount, 0);\n            // calculate new start value for groups\n            groupStart += groupCount;\n        };\n        // generate geometry\n        generateTorso();\n        if (openEnded === false) {\n            if (radiusTop > 0)\n                generateCap(true);\n            if (radiusBottom > 0)\n                generateCap(false);\n        }\n        // build geometry\n        this.setIndex(indices);\n        this.addAttribute(\"position\", new Float32BufferAttribute(vertices, 3));\n        this.addAttribute(\"normal\", new Float32BufferAttribute(normals, 3));\n        this.addAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\n    }\n}\n","/*\nexport { WireframeGeometry } from './WireframeGeometry';\nexport { ParametricGeometry, ParametricBufferGeometry } from './ParametricGeometry';\nexport { TetrahedronGeometry, TetrahedronBufferGeometry } from './TetrahedronGeometry';\nexport { OctahedronGeometry, OctahedronBufferGeometry } from './OctahedronGeometry';\nexport { IcosahedronGeometry, IcosahedronBufferGeometry } from './IcosahedronGeometry';\nexport { DodecahedronGeometry, DodecahedronBufferGeometry } from './DodecahedronGeometry';\nexport { PolyhedronGeometry, PolyhedronBufferGeometry } from './PolyhedronGeometry';\nexport { TubeGeometry, TubeBufferGeometry } from './TubeGeometry';\nexport { TorusKnotGeometry, TorusKnotBufferGeometry } from './TorusKnotGeometry';\nexport { TorusGeometry, TorusBufferGeometry } from './TorusGeometry';\nexport { TextGeometry, TextBufferGeometry } from './TextGeometry';\nexport { SphereGeometry, SphereBufferGeometry } from './SphereGeometry';\nexport { RingGeometry, RingBufferGeometry } from './RingGeometry';\nexport { LatheGeometry, LatheBufferGeometry } from './LatheGeometry';\nexport { ShapeGeometry, ShapeBufferGeometry } from './ShapeGeometry';\nexport { ExtrudeGeometry, ExtrudeBufferGeometry } from './ExtrudeGeometry';\nexport { EdgesGeometry } from './EdgesGeometry';\n*/\nexport { PlaneGeometry, PlaneBufferGeometry } from \"./PlaneGeometry\";\nexport { ConeGeometry, ConeBufferGeometry } from \"./ConeGeometry\";\nexport { CylinderGeometry, CylinderBufferGeometry } from \"./CylinderGeometry\";\nexport { CircleGeometry, CircleBufferGeometry } from \"./CircleGeometry\";\nexport { BoxGeometry, BoxBufferGeometry } from \"./BoxGeometry\";\n","import { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Float32BufferAttribute } from \"../core/BufferAttribute\";\nexport class PlaneGeometry extends Geometry {\n    constructor(width, height, widthSegments, heightSegments) {\n        super();\n        this.type = \"PlaneGeometry\";\n        this.parameters = {\n            width: width,\n            height: height,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments,\n        };\n        this.fromBufferGeometry(new PlaneBufferGeometry(width, height, widthSegments, heightSegments));\n        this.mergeVertices();\n    }\n}\nexport class PlaneBufferGeometry extends BufferGeometry {\n    constructor(width = 1, height = 1, widthSegments = 1, heightSegments = 1) {\n        super();\n        this.type = \"PlaneBufferGeometry\";\n        this.parameters = {\n            width: width,\n            height: height,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments,\n        };\n        const widthHalf = width / 2;\n        const heightHalf = height / 2;\n        const gridX = Math.floor(widthSegments) || 1;\n        const gridY = Math.floor(heightSegments) || 1;\n        const gridX1 = gridX + 1;\n        const gridY1 = gridY + 1;\n        const segmentWidth = width / gridX;\n        const segmentHeight = height / gridY;\n        // buffers\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        // generate vertices, normals and uvs\n        for (let iy = 0; iy < gridY1; iy++) {\n            const y = iy * segmentHeight - heightHalf;\n            for (let ix = 0; ix < gridX1; ix++) {\n                const x = ix * segmentWidth - widthHalf;\n                vertices.push(x, -y, 0);\n                normals.push(0, 0, 1);\n                uvs.push(ix / gridX);\n                uvs.push(1 - iy / gridY);\n            }\n        }\n        // indices\n        for (let iy = 0; iy < gridY; iy++) {\n            for (let ix = 0; ix < gridX; ix++) {\n                const a = ix + gridX1 * iy;\n                const b = ix + gridX1 * (iy + 1);\n                const c = ix + 1 + gridX1 * (iy + 1);\n                const d = ix + 1 + gridX1 * iy;\n                // faces\n                indices.push(a, b, d);\n                indices.push(b, c, d);\n            }\n        }\n        // build geometry\n        this.setIndex(indices);\n        this.addAttribute(\"position\", new Float32BufferAttribute(vertices, 3));\n        this.addAttribute(\"normal\", new Float32BufferAttribute(normals, 3));\n        this.addAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\n    }\n}\n","import { Light } from \"./Light\";\nexport class AmbientLight extends Light {\n    constructor(color, intensity) {\n        super(color, intensity);\n        this.type = \"AmbientLight\";\n        this.castShadow = false;\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { DirectionalLightShadow } from \"./DirectionalLightShadow\";\nimport { Light } from \"./Light\";\nexport class DirectionalLight extends Light {\n    constructor(color, intensity) {\n        super(color, intensity);\n        this.type = \"DirectionalLight\";\n        this.target = new Object3D();\n        this.shadow = new DirectionalLightShadow();\n        this.position = Object3D.DefaultUp.clone();\n        this.updateMatrix();\n    }\n    copy(source) {\n        super.copy(source);\n        this.target = source.target.clone();\n        this.shadow = source.shadow.clone();\n        return this;\n    }\n}\n","import { OrthographicCamera } from \"../cameras/OrthographicCamera\";\nimport { LightShadow } from \"./LightShadow\";\nexport class DirectionalLightShadow extends LightShadow {\n    constructor() {\n        super(new OrthographicCamera(-5, 5, 5, -5, 0.5, 500));\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Light } from \"./Light\";\nexport class HemisphereLight extends Light {\n    constructor(skyColor, groundColor, intensity) {\n        super(skyColor, intensity);\n        this.type = \"HemisphereLight\";\n        this.castShadow = false;\n        this.groundColor = groundColor;\n        this.position = Object3D.DefaultUp.clone();\n        this.updateMatrix();\n    }\n    copy(source) {\n        super.copy(source);\n        this.groundColor.copy(source.groundColor);\n        return this;\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Color } from \"../math/Color\";\nexport class Light extends Object3D {\n    constructor(color = new Color(), intensity = 1) {\n        super();\n        this.type = \"Light\";\n        this.intensity = 1;\n        this.receiveShadow = false;\n        this.color = color;\n        this.intensity = intensity;\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.intensity = source.intensity;\n        return this;\n    }\n}\n","import { Matrix4 } from \"../math/Matrix4\";\nimport { Vector2 } from \"../math/Vector2\";\nexport class LightShadow {\n    constructor(camera) {\n        this.bias = 0;\n        this.radius = 1;\n        this.mapSize = new Vector2(512, 512);\n        this.map = null;\n        this.matrix = new Matrix4();\n        this.camera = camera;\n    }\n    copy(source) {\n        this.camera = source.camera.clone();\n        this.bias = source.bias;\n        this.radius = source.radius;\n        this.mapSize.copy(source.mapSize);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { PerspectiveCamera } from \"../cameras/PerspectiveCamera\";\nimport { Light } from \"./Light\";\nimport { LightShadow } from \"./LightShadow\";\nexport class PointLight extends Light {\n    constructor(color, intensity, distance = 0, decay = 1) {\n        super(color, intensity);\n        this.type = \"PointLight\";\n        this.distance = 0;\n        this.decay = 1;\n        this.distance = distance;\n        this.decay = decay;\n        this.shadow = new LightShadow(new PerspectiveCamera(90, 1, 0.5, 500));\n    }\n    /**\n     * ntensity = power per solid angle.\n     * ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n     * @returns {number}\n     */\n    get power() {\n        return this.intensity * 4 * Math.PI;\n    }\n    set power(power) {\n        this.intensity = power / (4 * Math.PI);\n    }\n    copy(source) {\n        super.copy(source);\n        this.distance = source.distance;\n        this.decay = source.decay;\n        this.shadow = source.shadow.clone();\n        return this;\n    }\n}\n","import { Light } from \"./Light\";\nexport class RectAreaLight extends Light {\n    constructor(color, intensity, width = 10, height = 10) {\n        super(color, intensity);\n        this.type = \"RectAreaLight\";\n        this.width = 10;\n        this.height = 10;\n        this.width = width;\n        this.height = height;\n    }\n    copy(source) {\n        super.copy(source);\n        this.width = source.width;\n        this.height = source.height;\n        return this;\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Light } from \"./Light\";\nimport { SpotLightShadow } from \"./SpotLightShadow\";\nexport class SpotLight extends Light {\n    constructor(color, intensity, distance = 0, angle = Math.PI / 3, penumbra = 0, decay = 1) {\n        super(color, intensity);\n        this.type = \"SpotLight\";\n        this.target = new Object3D();\n        this.distance = 0;\n        this.angle = Math.PI / 3;\n        this.penumbra = 0;\n        this.decay = 0;\n        this.shadow = new SpotLightShadow();\n        this.position = Object3D.DefaultUp.clone();\n        this.updateMatrix();\n        this.distance = distance;\n        this.angle = angle;\n        this.penumbra = penumbra;\n        this.decay = decay;\n    }\n    get power() {\n        return this.intensity * Math.PI;\n    }\n    set power(power) {\n        this.intensity = power / Math.PI;\n    }\n    copy(source) {\n        super.copy(source);\n        this.distance = source.distance;\n        this.angle = source.angle;\n        this.penumbra = source.penumbra;\n        this.decay = source.decay;\n        this.target = source.target.clone();\n        this.shadow = source.shadow.clone();\n        return this;\n    }\n}\n","import { PerspectiveCamera } from \"../cameras/PerspectiveCamera\";\nimport { MathUtil } from \"../math/Math\";\nimport { LightShadow } from \"./LightShadow\";\nexport class SpotLightShadow extends LightShadow {\n    constructor() {\n        super(new PerspectiveCamera(50, 1, 0.5, 500));\n    }\n    update(light) {\n        const camera = this.camera;\n        const fov = MathUtil.RAD2DEG * 2 * light.angle;\n        const aspect = this.mapSize.width / this.mapSize.height;\n        const far = light.distance || camera.far;\n        if (fov !== camera.fov || aspect !== camera.aspect || far !== camera.far) {\n            camera.fov = fov;\n            camera.aspect = aspect;\n            camera.far = far;\n            camera.updateProjectionMatrix();\n        }\n        return this;\n    }\n    clone() {\n        return super.clone();\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class LineBasicMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"LineBasicMaterial\";\n        this.color = new Color().setHex(0xffffff);\n        this.lights = false;\n        this.linecap = \"round\";\n        this.linejoin = \"round\";\n        this.linewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.linewidth = source.linewidth;\n        this.linecap = source.linecap;\n        this.linejoin = source.linejoin;\n        return this;\n    }\n}\n","import { LineBasicMaterial } from \"./LineBasicMaterial\";\nexport class LineDashedMaterial extends LineBasicMaterial {\n    constructor(parameters) {\n        super(parameters);\n        this.type = \"LineDashedMaterial\";\n        this.dashSize = 3;\n        this.gapSize = 1;\n        this.scale = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        this.scale = source.scale;\n        this.dashSize = source.dashSize;\n        this.gapSize = source.gapSize;\n        return this;\n    }\n}\n","import { AddEquation, FlatShading, FrontSide, LessEqualDepth, NoColors, NormalBlending, OneMinusSrcAlphaFactor, SrcAlphaFactor, } from \"../constants\";\nimport { EventDispatcher } from \"../core/EventDispatcher\";\nimport { Color } from \"../math/Color\";\nimport { MathUtil } from \"../math/Math\";\nimport { Vector3 } from \"../math/Vector3\";\nlet materialId = 0;\nexport class Material extends EventDispatcher {\n    constructor() {\n        super(...arguments);\n        this.id = materialId++;\n        this.uuid = MathUtil.generateUUID();\n        this.type = \"Material\";\n        this.alphaTest = 0;\n        this.blending = NormalBlending;\n        this.blendDst = OneMinusSrcAlphaFactor;\n        this.blendDstAlpha = null;\n        this.blendEquation = AddEquation;\n        this.blendEquationAlpha = null;\n        this.blendSrc = SrcAlphaFactor;\n        this.blendSrcAlpha = null;\n        this.clipIntersection = false;\n        this.clippingPlanes = null;\n        this.clipShadows = false;\n        this.colorWrite = true;\n        this.depthFunc = LessEqualDepth;\n        this.depthTest = true;\n        this.depthWrite = true;\n        this.dithering = false;\n        this.flatShading = false;\n        this.fog = true;\n        this.lights = true;\n        /**\n         * For mesh type extension\n         */\n        this.morphTargets = false;\n        this.name = \"\";\n        this.needsUpdate = true;\n        this.opacity = 1;\n        this.overdraw = 0;\n        this.onBeforeCompile = function () { };\n        this.polygonOffset = false;\n        this.polygonOffsetFactor = 0;\n        this.polygonOffsetUnits = 0;\n        /**\n         * override the renderer's default precision for this material\n         * \"highp\", \"mediump\" or \"lowp\"\n         * @type {string}\n         */\n        this.precision = null; // Question type\n        this.premultipliedAlpha = false;\n        /**\n         * THREE.FrontSide  back side\n         * THREE.BackSide   front side\n         * THREE.DoubleSide both sides\n         * @type {number}\n         */\n        this.shadowSide = null; // Question type\n        this.side = FrontSide;\n        this.transparent = false;\n        this.userData = {};\n        /**\n         * THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n         */\n        this.vertexColors = NoColors;\n        /**\n         * Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n         * @type {number}\n         */\n        this.visible = true;\n    }\n    setValues(values) {\n        if (values === undefined)\n            return this;\n        for (const key in values) {\n            if (!values.hasOwnProperty(key))\n                continue;\n            const newValue = values[key];\n            if (newValue === undefined) {\n                console.warn(`THREE.Material: \"${key}\" parameter is undefined.`);\n                continue;\n            }\n            /**\n             * for backward compatability if shading is set in the constructor\n             */\n            if (key === \"shading\") {\n                console.warn(`THREE.${this.type}: .shading has been removed. Use the boolean .flatShading instead.`);\n                this.flatShading = newValue === FlatShading;\n                continue;\n            }\n            const currentValue = this[key];\n            if (currentValue === undefined) {\n                console.warn(`THREE.${this.type}: \"${key}\" is not a property of this material.`);\n                continue;\n            }\n            if (currentValue && currentValue instanceof Color) {\n                if (newValue instanceof Color)\n                    currentValue.copy(newValue);\n                else if (typeof newValue === \"number\") {\n                    currentValue.setHex(newValue);\n                }\n                else if (typeof newValue === \"string\") {\n                    currentValue.setStyle(newValue);\n                }\n            }\n            else if (currentValue && currentValue instanceof Vector3 && (newValue && newValue instanceof Vector3)) {\n                currentValue.copy(newValue);\n            }\n            else if (key === \"overdraw\") {\n                /**\n                 * ensure overdraw is backwards-compatible with legacy boolean type\n                 * @type {Number}\n                 */\n                this[key] = Number(newValue);\n            }\n            else {\n                this[key] = newValue;\n            }\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(source) {\n        this.name = source.name;\n        this.fog = source.fog;\n        this.lights = source.lights;\n        this.blending = source.blending;\n        this.side = source.side;\n        this.flatShading = source.flatShading;\n        this.vertexColors = source.vertexColors;\n        this.opacity = source.opacity;\n        this.transparent = source.transparent;\n        this.blendSrc = source.blendSrc;\n        this.blendDst = source.blendDst;\n        this.blendEquation = source.blendEquation;\n        this.blendSrcAlpha = source.blendSrcAlpha;\n        this.blendDstAlpha = source.blendDstAlpha;\n        this.blendEquationAlpha = source.blendEquationAlpha;\n        this.depthFunc = source.depthFunc;\n        this.depthTest = source.depthTest;\n        this.depthWrite = source.depthWrite;\n        this.colorWrite = source.colorWrite;\n        this.precision = source.precision;\n        this.polygonOffset = source.polygonOffset;\n        this.polygonOffsetFactor = source.polygonOffsetFactor;\n        this.polygonOffsetUnits = source.polygonOffsetUnits;\n        this.dithering = source.dithering;\n        this.alphaTest = source.alphaTest;\n        this.premultipliedAlpha = source.premultipliedAlpha;\n        this.overdraw = source.overdraw;\n        this.visible = source.visible;\n        this.userData = JSON.parse(JSON.stringify(source.userData));\n        this.clipShadows = source.clipShadows;\n        this.clipIntersection = source.clipIntersection;\n        const srcPlanes = source.clippingPlanes;\n        let dstPlanes = null;\n        if (srcPlanes !== null) {\n            const n = srcPlanes.length;\n            dstPlanes = new Array(n);\n            for (let i = 0; i !== n; ++i) {\n                dstPlanes[i] = srcPlanes[i].clone();\n            }\n        }\n        this.clippingPlanes = dstPlanes;\n        this.shadowSide = source.shadowSide;\n        return this;\n    }\n    dispose() {\n        this.dispatchEvent({ type: \"dispose\" });\n    }\n}\n","export { ShadowMaterial } from \"./ShadowMaterial\";\nexport { SpriteMaterial } from \"./SpriteMaterial\";\nexport { RawShaderMaterial } from \"./RawShaderMaterial\";\nexport { ShaderMaterial } from \"./ShaderMaterial\";\nexport { PointsMaterial } from \"./PointsMaterial\";\nexport { MeshPhysicalMaterial } from \"./MeshPhysicalMaterial\";\nexport { MeshStandardMaterial } from \"./MeshStandardMaterial\";\nexport { MeshPhongMaterial } from \"./MeshPhongMaterial\";\nexport { MeshToonMaterial } from \"./MeshToonMaterial\";\nexport { MeshNormalMaterial } from \"./MeshNormalMaterial\";\nexport { MeshLambertMaterial } from \"./MeshLambertMaterial\";\nexport { MeshDepthMaterial } from \"./MeshDepthMaterial\";\nexport { MeshDistanceMaterial } from \"./MeshDistanceMaterial\";\nexport { MeshBasicMaterial } from \"./MeshBasicMaterial\";\nexport { LineDashedMaterial } from \"./LineDashedMaterial\";\nexport { LineBasicMaterial } from \"./LineBasicMaterial\";\nexport { Material } from \"./Material\";\n","import { MultiplyOperation } from \"../constants\";\nimport { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class MeshBasicMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshBasicMaterial\";\n        this.alphaMap = null;\n        this.aoMap = null;\n        this.aoMapIntensity = 1.0;\n        this.color = new Color().setHex(0xffffff);\n        this.combine = MultiplyOperation;\n        this.envMap = null;\n        this.lights = false;\n        this.lightMap = null;\n        this.lightMapIntensity = 1.0;\n        this.map = null;\n        this.morphTargets = false;\n        this.reflectivity = 1;\n        this.refractionRatio = 0.98;\n        this.skinning = false;\n        this.specularMap = null;\n        this.wireframe = false;\n        this.wireframeLinecap = \"round\";\n        this.wireframeLinejoin = \"round\";\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.map = source.map;\n        this.lightMap = source.lightMap;\n        this.lightMapIntensity = source.lightMapIntensity;\n        this.aoMap = source.aoMap;\n        this.aoMapIntensity = source.aoMapIntensity;\n        this.specularMap = source.specularMap;\n        this.alphaMap = source.alphaMap;\n        this.envMap = source.envMap;\n        this.combine = source.combine;\n        this.reflectivity = source.reflectivity;\n        this.refractionRatio = source.refractionRatio;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.wireframeLinecap = source.wireframeLinecap;\n        this.wireframeLinejoin = source.wireframeLinejoin;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        return this;\n    }\n}\n","import { BasicDepthPacking } from \"../constants\";\nimport { Material } from \"./Material\";\nexport class MeshDepthMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshDepthMaterial\";\n        this.alphaMap = null;\n        this.depthPacking = BasicDepthPacking;\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.displacementBias = 0;\n        this.fog = false;\n        this.lights = false;\n        this.map = null;\n        this.morphTargets = false;\n        this.skinning = false;\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.depthPacking = source.depthPacking;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.map = source.map;\n        this.alphaMap = source.alphaMap;\n        this.displacementMap = source.displacementMap;\n        this.displacementScale = source.displacementScale;\n        this.displacementBias = source.displacementBias;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        return this;\n    }\n}\n","import { Vector3 } from \"../math/Vector3\";\nimport { Material } from \"./Material\";\nexport class MeshDistanceMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshDepthMaterial\";\n        this.alphaMap = null;\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.displacementBias = 0;\n        this.farDistance = 1;\n        this.fog = false;\n        this.lights = false;\n        this.map = null;\n        this.morphTargets = false;\n        this.nearDistance = 1;\n        this.referencePosition = new Vector3();\n        this.skinning = false;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.referencePosition.copy(source.referencePosition);\n        this.nearDistance = source.nearDistance;\n        this.farDistance = source.farDistance;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.map = source.map;\n        this.alphaMap = source.alphaMap;\n        this.displacementMap = source.displacementMap;\n        this.displacementScale = source.displacementScale;\n        this.displacementBias = source.displacementBias;\n        return this;\n    }\n}\n","import { MultiplyOperation } from \"../constants\";\nimport { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class MeshLambertMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshLambertMaterial\";\n        this.aoMap = null;\n        this.aoMapIntensity = 1;\n        this.alphaMap = null;\n        this.color = new Color().setHex(0xffffff);\n        this.combine = MultiplyOperation;\n        this.emissive = new Color().setHex(0x000000);\n        this.emissiveIntensity = 1;\n        this.emissiveMap = null;\n        this.envMap = null;\n        this.map = null;\n        this.morphNormals = true;\n        this.morphTargets = true;\n        this.lightMap = null;\n        this.lightMapIntensity = 1;\n        this.skinning = false;\n        this.specularMap = null;\n        this.reflectivity = 1;\n        this.refractionRatio = 0.98;\n        this.wireframe = false;\n        this.wireframeLinecap = \"round\";\n        this.wireframeLinejoin = \"round\";\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.map = source.map;\n        this.lightMap = source.lightMap;\n        this.lightMapIntensity = source.lightMapIntensity;\n        this.aoMap = source.aoMap;\n        this.aoMapIntensity = source.aoMapIntensity;\n        this.emissive.copy(source.emissive);\n        this.emissiveMap = source.emissiveMap;\n        this.emissiveIntensity = source.emissiveIntensity;\n        this.specularMap = source.specularMap;\n        this.alphaMap = source.alphaMap;\n        this.envMap = source.envMap;\n        this.combine = source.combine;\n        this.reflectivity = source.reflectivity;\n        this.refractionRatio = source.refractionRatio;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.wireframeLinecap = source.wireframeLinecap;\n        this.wireframeLinejoin = source.wireframeLinejoin;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.morphNormals = source.morphNormals;\n        return this;\n    }\n}\n","import { Vector2 } from \"../math/Vector2\";\nimport { Material } from \"./Material\";\nexport class MeshNormalMaterial extends Material {\n    constructor(paramenters) {\n        super();\n        this.type = \"MeshNormalMaterial\";\n        this.bumpMap = null;\n        this.bumpScale = 1;\n        this.normalMap = null;\n        this.normalScale = new Vector2(1, 1);\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.displacementBias = 0;\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n        this.fog = false;\n        this.lights = false;\n        this.skinning = false;\n        this.morphTargets = false;\n        this.morphNormals = false;\n        this.setValues(paramenters);\n    }\n}\n","import { MultiplyOperation } from \"../constants\";\nimport { Color } from \"../math/Color\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Material } from \"./Material\";\n/**\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\nexport class MeshPhongMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshPhongMaterial\";\n        this.alphaMap = null;\n        this.aoMap = null;\n        this.aoMapIntensity = 1.0;\n        this.bumpMap = null;\n        this.bumpScale = 1;\n        this.color = new Color().setHex(0xffffff);\n        this.combine = MultiplyOperation;\n        this.displacementBias = 0;\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.emissive = new Color().setHex(0x000000);\n        this.emissiveIntensity = 1.0;\n        this.emissiveMap = null;\n        this.envMap = null;\n        this.lightMap = null;\n        this.lightMapIntensity = 1.0;\n        this.map = null;\n        this.morphNormals = false;\n        this.morphTargets = false;\n        this.normalMap = null;\n        this.normalScale = new Vector2(1, 1);\n        this.reflectivity = 1;\n        this.refractionRatio = 0.98;\n        this.shininess = 30;\n        this.skinning = false;\n        this.specular = new Color().setHex(0x111111);\n        this.specularMap = null;\n        this.wireframe = false;\n        this.wireframeLinecap = \"round\";\n        this.wireframeLinejoin = \"round\";\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.specular.copy(source.specular);\n        this.shininess = source.shininess;\n        this.map = source.map;\n        this.lightMap = source.lightMap;\n        this.lightMapIntensity = source.lightMapIntensity;\n        this.aoMap = source.aoMap;\n        this.aoMapIntensity = source.aoMapIntensity;\n        this.emissive.copy(source.emissive);\n        this.emissiveMap = source.emissiveMap;\n        this.emissiveIntensity = source.emissiveIntensity;\n        this.bumpMap = source.bumpMap;\n        this.bumpScale = source.bumpScale;\n        this.normalMap = source.normalMap;\n        this.normalScale.copy(source.normalScale);\n        this.displacementMap = source.displacementMap;\n        this.displacementScale = source.displacementScale;\n        this.displacementBias = source.displacementBias;\n        this.specularMap = source.specularMap;\n        this.alphaMap = source.alphaMap;\n        this.envMap = source.envMap;\n        this.combine = source.combine;\n        this.reflectivity = source.reflectivity;\n        this.refractionRatio = source.refractionRatio;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.wireframeLinecap = source.wireframeLinecap;\n        this.wireframeLinejoin = source.wireframeLinejoin;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.morphNormals = source.morphNormals;\n        return this;\n    }\n}\n","import { Material } from \"./Material\";\nexport class MeshPhysicalMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshPhysicalMaterial\";\n        // maps to F0 = 0.04\n        this.clearCoat = 0.0;\n        this.clearCoatRoughness = 0.0;\n        this.defines = { PHYSICAL: \"\" };\n        this.reflectivity = 0.5;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        this.defines = { PHYSICAL: \"\" };\n        this.reflectivity = source.reflectivity;\n        this.clearCoat = source.clearCoat;\n        this.clearCoatRoughness = source.clearCoatRoughness;\n        return this;\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Material } from \"./Material\";\n/**\n *\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\nexport class MeshStandardMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"MeshStandardMaterial\";\n        this.alphaMap = null;\n        this.aoMap = null;\n        this.aoMapIntensity = 1.0;\n        this.bumpMap = null;\n        this.bumpScale = 1;\n        this.color = new Color().setHex(0xffffff);\n        this.defines = { STANDARD: \"\" };\n        this.displacementBias = 0;\n        this.displacementMap = null;\n        this.displacementScale = 1;\n        this.emissive = new Color().setHex(0x000000);\n        this.emissiveIntensity = 1.0;\n        this.emissiveMap = null;\n        this.envMap = null;\n        this.envMapIntensity = 1.0;\n        this.lightMap = null;\n        this.lightMapIntensity = 1.0;\n        this.map = null;\n        this.metalness = 0.5;\n        this.metalnessMap = null;\n        this.morphNormals = false;\n        this.morphTargets = false;\n        this.normalMap = null;\n        this.normalScale = new Vector2(1, 1);\n        this.refractionRatio = 0.98;\n        this.roughness = 0.5;\n        this.roughnessMap = null;\n        this.skinning = false;\n        this.wireframe = false;\n        this.wireframeLinecap = \"round\";\n        this.wireframeLinejoin = \"round\";\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.defines = { STANDARD: \"\" };\n        this.color.copy(source.color);\n        this.roughness = source.roughness;\n        this.metalness = source.metalness;\n        this.map = source.map;\n        this.lightMap = source.lightMap;\n        this.lightMapIntensity = source.lightMapIntensity;\n        this.aoMap = source.aoMap;\n        this.aoMapIntensity = source.aoMapIntensity;\n        this.emissive.copy(source.emissive);\n        this.emissiveMap = source.emissiveMap;\n        this.emissiveIntensity = source.emissiveIntensity;\n        this.bumpMap = source.bumpMap;\n        this.bumpScale = source.bumpScale;\n        this.normalMap = source.normalMap;\n        this.normalScale.copy(source.normalScale);\n        this.displacementMap = source.displacementMap;\n        this.displacementScale = source.displacementScale;\n        this.displacementBias = source.displacementBias;\n        this.roughnessMap = source.roughnessMap;\n        this.metalnessMap = source.metalnessMap;\n        this.alphaMap = source.alphaMap;\n        this.envMap = source.envMap;\n        this.envMapIntensity = source.envMapIntensity;\n        this.refractionRatio = source.refractionRatio;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.wireframeLinecap = source.wireframeLinecap;\n        this.wireframeLinejoin = source.wireframeLinejoin;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.morphNormals = source.morphNormals;\n        return this;\n    }\n}\n","import { MeshPhongMaterial } from \"./MeshPhongMaterial\";\nexport class MeshToonMaterial extends MeshPhongMaterial {\n    constructor(parameters) {\n        super(parameters);\n        this.type = \"MeshToonMaterial\";\n        this.defines = { TOON: \"\" };\n        this.gradientMap = null;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.gradientMap = source.gradientMap;\n        return this;\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class PointsMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"PointsMaterial\";\n        this.color = new Color().setHex(0xffffff);\n        this.lights = false;\n        this.map = null;\n        this.size = 1;\n        this.sizeAttenuation = true;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.map = source.map;\n        this.size = source.size;\n        this.sizeAttenuation = source.sizeAttenuation;\n        return this;\n    }\n}\n","import { ShaderMaterial } from \"./ShaderMaterial\";\nexport class RawShaderMaterial extends ShaderMaterial {\n}\n","import { UniformsUtils } from \"../renderers/shaders/UniformsUtils\";\nimport { Material } from \"./Material\";\nexport class ShaderMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"ShaderMaterial\";\n        this.defines = {};\n        this.uniforms = {};\n        this.vertexShader = `void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}`;\n        this.fragmentShader = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n        this.linewidth = 1;\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n        this.fog = false; // set to use scene fog\n        this.lights = false; // set to use scene lights\n        this.clipping = false; // set to use user-defined clipping planes\n        this.skinning = false; // set to use skinning attribute streams\n        this.morphTargets = false; // set to use morph targets\n        this.morphNormals = false; // set to use morph normals\n        this.extensions = {\n            derivatives: false,\n            drawBuffers: false,\n            fragDepth: false,\n            shaderTextureLOD: false,\n        };\n        // When rendered geometry doesn't include these attributes but the material does,\n        // use these default values in WebGL. This avoids errors when buffer data is missing.\n        this.defaultAttributeValues = {\n            color: [1, 1, 1],\n            uv: [0, 0],\n            uv2: [0, 0],\n        };\n        this.setValues(parameters);\n    }\n    copy(source) {\n        this.fragmentShader = source.fragmentShader;\n        this.vertexShader = source.vertexShader;\n        this.uniforms = UniformsUtils.clone(source.uniforms);\n        this.defines = source.defines;\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n        this.lights = source.lights;\n        this.clipping = source.clipping;\n        this.skinning = source.skinning;\n        this.morphTargets = source.morphTargets;\n        this.morphNormals = source.morphNormals;\n        this.extensions = source.extensions;\n        return this;\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class ShadowMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"ShadowMaterial\";\n        this.color = new Color().setHex(0x000000);\n        this.transparent = true;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        return this;\n    }\n}\n","import { Color } from \"../math/Color\";\nimport { Material } from \"./Material\";\nexport class SpriteMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = \"SpriteMaterial\";\n        this.color = new Color().setHex(0xffffff);\n        this.fog = false;\n        this.lights = false;\n        this.map = null;\n        this.rotation = 0;\n        this.setValues(parameters);\n    }\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.map = source.map;\n        this.rotation = source.rotation;\n        return this;\n    }\n}\n","import { Sphere } from \"./Sphere\";\nimport { Vector3 } from \"./Vector3\";\nimport { vectorFromBufferAttribute } from \"../utils\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nexport class Box3 {\n    constructor(min = new Vector3(+Infinity, +Infinity, +Infinity), max = new Vector3(-Infinity, -Infinity, -Infinity)) {\n        this.min = new Vector3(+Infinity, +Infinity, +Infinity);\n        this.max = new Vector3(-Infinity, -Infinity, -Infinity);\n        this.max = max;\n        this.min = min;\n    }\n    set(min, max) {\n        this.min.copy(min);\n        this.max.copy(max);\n        return this;\n    }\n    setFromArray(array) {\n        let minX = +Infinity, minY = +Infinity, minZ = +Infinity;\n        let maxX = -Infinity, maxY = -Infinity, maxZ = -Infinity;\n        for (let i = 0, l = array.length; i < l; i += 3) {\n            const x = array[i], y = array[i + 1], z = array[i + 2];\n            if (x < minX)\n                minX = x;\n            if (y < minY)\n                minY = y;\n            if (z < minZ)\n                minZ = z;\n            if (x > maxX)\n                maxX = x;\n            if (y > maxY)\n                maxY = y;\n            if (z > maxZ)\n                maxZ = z;\n        }\n        this.min.set(minX, minY, minZ);\n        this.max.set(maxX, maxY, maxZ);\n        return this;\n    }\n    setFromPoints(points) {\n        this.makeEmpty();\n        for (let i = 0, il = points.length; i < il; i++) {\n            this.expandByPoint(points[i]);\n        }\n        return this;\n    }\n    setFromCenterAndSize(center, size) {\n        const halfSize = new Vector3().copy(size).multiplyScalar(0.5);\n        this.min.copy(center).sub(halfSize);\n        this.max.copy(center).add(halfSize);\n        return this;\n    }\n    setFromObject(object) {\n        this.makeEmpty();\n        return this.expandByObject(object);\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(box) {\n        this.min.copy(box.min);\n        this.max.copy(box.max);\n        return this;\n    }\n    makeEmpty() {\n        this.min.x = this.min.y = this.min.z = +Infinity;\n        this.max.x = this.max.y = this.max.z = -Infinity;\n        return this;\n    }\n    /**\n     * this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n     * @returns {boolean}\n     */\n    isEmpty() {\n        return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;\n    }\n    getCenter() {\n        const result = new Vector3();\n        return this.isEmpty()\n            ? result.set(0, 0, 0)\n            : result\n                .copy(this.min)\n                .add(this.max)\n                .multiplyScalar(0.5);\n    }\n    getSize() {\n        const result = new Vector3();\n        return this.isEmpty() ? result.set(0, 0, 0) : result.copy(this.max).sub(this.min);\n    }\n    expandByPoint(point) {\n        this.min.min(point);\n        this.max.max(point);\n        return this;\n    }\n    expandByVector(vector) {\n        this.min.sub(vector);\n        this.max.add(vector);\n        return this;\n    }\n    expandByScalar(scalar) {\n        this.min.addScalar(-scalar);\n        this.max.addScalar(scalar);\n        return this;\n    }\n    /**\n     * TODO expandByObject\n     * @param object\n     * @returns {Box3}\n     */\n    expandByObject(object) {\n        // Computes the world-axis-aligned bounding box of an object (including its children),\n        // accounting for both the object's, and children's, world transforms\n        const traverse = (node) => {\n            const geometry = node.geometry;\n            if (geometry !== undefined) {\n                if (geometry instanceof Geometry) {\n                    const vertices = geometry.vertices;\n                    for (let i = 0, l = vertices.length; i < l; i++) {\n                        const v1 = new Vector3().copy(vertices[i]);\n                        v1.applyMatrix4(node.matrixWorld);\n                        this.expandByPoint(v1);\n                    }\n                }\n                else if (geometry instanceof BufferGeometry) {\n                    const attribute = geometry.attributes.position;\n                    if (attribute !== undefined) {\n                        for (let i = 0, l = attribute.count; i < l; i++) {\n                            const v1 = vectorFromBufferAttribute(new Vector3(), attribute, i).applyMatrix4(node.matrixWorld);\n                            this.expandByPoint(v1);\n                        }\n                    }\n                }\n            }\n        };\n        object.updateMatrixWorld(true);\n        object.traverse(traverse);\n        return this;\n    }\n    containsPoint(point) {\n        return !(point.x < this.min.x ||\n            point.x > this.max.x ||\n            point.y < this.min.y ||\n            point.y > this.max.y ||\n            point.z < this.min.z ||\n            point.z > this.max.z);\n    }\n    containsBox(box) {\n        return (this.min.x <= box.min.x &&\n            box.max.x <= this.max.x &&\n            this.min.y <= box.min.y &&\n            box.max.y <= this.max.y &&\n            this.min.z <= box.min.z &&\n            box.max.z <= this.max.z);\n    }\n    /**\n     * This can potentially have a divide by zero if the box has a size dimension of 0.\n     * @param point\n     * @returns {Vector3}\n     */\n    getParameter(point) {\n        const result = new Vector3();\n        return result.set((point.x - this.min.x) / (this.max.x - this.min.x), (point.y - this.min.y) / (this.max.y - this.min.y), (point.z - this.min.z) / (this.max.z - this.min.z));\n    }\n    /**\n     * using 6 splitting planes to rule out intersections\n     * @param box\n     * @returns {boolean}\n     */\n    intersectsBox(box) {\n        return !(box.max.x < this.min.x ||\n            box.min.x > this.max.x ||\n            box.max.y < this.min.y ||\n            box.min.y > this.max.y ||\n            box.max.z < this.min.z ||\n            box.min.z > this.max.z);\n    }\n    /**\n     * Find the point on the AABB closest to the sphere center.\n     * If that point is inside the sphere, the AABB and sphere intersect.\n     * @param sphere\n     * @returns {boolean}\n     */\n    intersectsSphere(sphere) {\n        const closestPoint = this.clampPoint(sphere.center);\n        return closestPoint.distanceToSquared(sphere.center) <= sphere.radius * sphere.radius;\n    }\n    /**\n     * We compute the minimum and maximum dot product values. If those values\n     * are on the same side (back or front) of the plane, then there is no intersection.\n     * @param plane\n     * @returns {boolean}\n     */\n    intersectsPlane(plane) {\n        let min, max;\n        if (plane.normal.x > 0) {\n            min = plane.normal.x * this.min.x;\n            max = plane.normal.x * this.max.x;\n        }\n        else {\n            min = plane.normal.x * this.max.x;\n            max = plane.normal.x * this.min.x;\n        }\n        if (plane.normal.y > 0) {\n            min += plane.normal.y * this.min.y;\n            max += plane.normal.y * this.max.y;\n        }\n        else {\n            min += plane.normal.y * this.max.y;\n            max += plane.normal.y * this.min.y;\n        }\n        if (plane.normal.z > 0) {\n            min += plane.normal.z * this.min.z;\n            max += plane.normal.z * this.max.z;\n        }\n        else {\n            min += plane.normal.z * this.max.z;\n            max += plane.normal.z * this.min.z;\n        }\n        return min <= plane.constant && max >= plane.constant;\n    }\n    clampPoint(point) {\n        return new Vector3().copy(point).clamp(this.min, this.max);\n    }\n    distanceToPoint(point) {\n        const clampedPoint = new Vector3().copy(point).clamp(this.min, this.max);\n        return clampedPoint.sub(point).length();\n    }\n    getBoundingSphere() {\n        const result = new Sphere();\n        result.center = this.getCenter();\n        result.radius = this.getSize().length() * 0.5;\n        return result;\n    }\n    intersect(box) {\n        this.min.max(box.min);\n        this.max.min(box.max);\n        // ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n        if (this.isEmpty())\n            this.makeEmpty();\n        return this;\n    }\n    union(box) {\n        this.min.min(box.min);\n        this.max.max(box.max);\n        return this;\n    }\n    applyMatrix4(matrix) {\n        // transform of empty box is an empty box.\n        if (this.isEmpty())\n            return this;\n        const points = [\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n            new Vector3(),\n        ];\n        // NOTE: I am using a binary pattern to specify all 2^3 combinations below\n        points[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(matrix); // 000\n        points[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(matrix); // 001\n        points[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(matrix); // 010\n        points[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(matrix); // 011\n        points[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(matrix); // 100\n        points[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(matrix); // 101\n        points[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(matrix); // 110\n        points[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(matrix); // 111\n        this.setFromPoints(points);\n        return this;\n    }\n    translate(offset) {\n        this.min.add(offset);\n        this.max.add(offset);\n        return this;\n    }\n    equals(box) {\n        return box.min.equals(this.min) && box.max.equals(this.max);\n    }\n}\n","import { MathUtil } from \"./Math\";\nfunction HUE_TO_RGB(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * 6 * (2 / 3 - t);\n    return p;\n}\nexport class Color {\n    constructor(r = 0, g = 0, b = 0) {\n        this.r = 1;\n        this.g = 1;\n        this.b = 1;\n        this.setRGB(r, g, b);\n    }\n    copy(color) {\n        this.r = color.r;\n        this.g = color.g;\n        this.b = color.b;\n        return this;\n    }\n    setScalar(scalar) {\n        this.r = scalar;\n        this.g = scalar;\n        this.b = scalar;\n        return this;\n    }\n    setHex(hex) {\n        hex = Math.floor(hex);\n        this.r = ((hex >> 16) & 255) / 255;\n        this.g = ((hex >> 8) & 255) / 255;\n        this.b = (hex & 255) / 255;\n        return this;\n    }\n    setRGB(r, g, b) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        return this;\n    }\n    /**\n     * HSL即是代表色相，饱和度，明度三个通道的颜色\n     * H: Hue 色相 S：Saturation 饱和度 L Lightness 明度\n     * @param h\n     * @param s\n     * @param l\n     * @returns {Color}\n     */\n    setHSL(h, s, l) {\n        // h,s,l ranges are in 0.0 - 1.0\n        h = MathUtil.euclideanModulo(h, 1);\n        s = MathUtil.clamp(s, 0, 1);\n        l = MathUtil.clamp(l, 0, 1);\n        if (s === 0) {\n            this.r = this.g = this.b = l;\n        }\n        else {\n            const p = l <= 0.5 ? l * (1 + s) : l + s - l * s;\n            const q = 2 * l - p;\n            this.r = HUE_TO_RGB(q, p, h + 1 / 3);\n            this.g = HUE_TO_RGB(q, p, h);\n            this.b = HUE_TO_RGB(q, p, h - 1 / 3);\n        }\n        return this;\n    }\n    setStyle(style) {\n        let matches;\n        /**\n         * rgb || hsl\n         */\n        if ((matches = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(style))) {\n            let color;\n            const name = matches[1];\n            const components = matches[2];\n            switch (name) {\n                case \"rgb\":\n                case \"rgba\":\n                    if ((color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components))) {\n                        // rgb(255,0,0) rgba(255,0,0,0.5)\n                        this.r = Math.min(255, parseInt(color[1], 10)) / 255;\n                        this.g = Math.min(255, parseInt(color[2], 10)) / 255;\n                        this.b = Math.min(255, parseInt(color[3], 10)) / 255;\n                        // handleAlpha(color[5]);\n                        return this;\n                    }\n                    if ((color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components))) {\n                        // rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n                        this.r = Math.min(100, parseInt(color[1], 10)) / 100;\n                        this.g = Math.min(100, parseInt(color[2], 10)) / 100;\n                        this.b = Math.min(100, parseInt(color[3], 10)) / 100;\n                        // handleAlpha(color[5]);\n                        return this;\n                    }\n                    break;\n                case \"hsl\":\n                case \"hsla\":\n                    if ((color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components))) {\n                        // hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n                        const h = parseFloat(color[1]) / 360;\n                        const s = parseInt(color[2], 10) / 100;\n                        const l = parseInt(color[3], 10) / 100;\n                        // handleAlpha(color[5]);\n                        return this.setHSL(h, s, l);\n                    }\n                    break;\n            }\n        }\n        else if ((matches = /^\\#([A-Fa-f0-9]+)$/.exec(style))) {\n            // hex color\n            const hex = matches[1];\n            const size = hex.length;\n            if (size === 3) {\n                // #ff0\n                this.r = parseInt(hex.charAt(0) + hex.charAt(0), 16) / 255;\n                this.g = parseInt(hex.charAt(1) + hex.charAt(1), 16) / 255;\n                this.b = parseInt(hex.charAt(2) + hex.charAt(2), 16) / 255;\n                return this;\n            }\n            else if (size === 6) {\n                // #ff0000\n                this.r = parseInt(hex.charAt(0) + hex.charAt(1), 16) / 255;\n                this.g = parseInt(hex.charAt(2) + hex.charAt(3), 16) / 255;\n                this.b = parseInt(hex.charAt(4) + hex.charAt(5), 16) / 255;\n                return this;\n            }\n        }\n        if (style && style.length > 0) {\n            // color keywords\n            const hex = Color.ColorKeywords[style];\n            if (hex !== undefined) {\n                // red\n                this.setHex(hex);\n            }\n            else {\n                console.warn(\"THREE.Color: Unknown color \" + style);\n            }\n        }\n        return this;\n    }\n    convertGammaToLinear(color, gammaFactor = 2.0) {\n        return this.setRGB(Math.pow(color.r, gammaFactor), Math.pow(color.g, gammaFactor), Math.pow(color.b, gammaFactor));\n    }\n    convertLinearToGamma(color, gammaFactor = 2.0) {\n        const safeInverse = gammaFactor > 0 ? 1.0 / gammaFactor : 1.0;\n        return this.setRGB(Math.pow(color.r, safeInverse), Math.pow(color.g, safeInverse), Math.pow(color.b, safeInverse));\n    }\n    getHex() {\n        return ((this.r * 255) << 16) ^ ((this.g * 255) << 8) ^ ((this.b * 255) << 0);\n    }\n    getHexString() {\n        return (\"000000\" + this.getHex().toString(16)).slice(-6);\n    }\n    getHSL(hsl = { h: 0, s: 0, l: 0 }) {\n        // h,s,l ranges are in 0.0 - 1.0\n        const { r, g, b } = this;\n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        let hue, saturation;\n        const lightness = (min + max) / 2.0;\n        if (min === max) {\n            hue = 0;\n            saturation = 0;\n        }\n        else {\n            const delta = max - min;\n            saturation = lightness <= 0.5 ? delta / (max + min) : delta / (2 - max - min);\n            switch (max) {\n                case r:\n                    hue = (g - b) / delta + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    hue = (b - r) / delta + 2;\n                    break;\n                case b:\n                    hue = (r - g) / delta + 4;\n                    break;\n            }\n            hue /= 6;\n        }\n        hsl.h = hue;\n        hsl.s = saturation;\n        hsl.l = lightness;\n        return hsl;\n    }\n    getStyle() {\n        const { r, g, b } = this;\n        return \"rgb(\" + ((r * 255) | 0) + \",\" + ((g * 255) | 0) + \",\" + ((b * 255) | 0) + \")\";\n    }\n    offsetHSL(h, s, l) {\n        const hsl = this.getHSL();\n        hsl.h += h;\n        hsl.s += s;\n        hsl.l += l;\n        return this.setHSL(hsl.h, hsl.s, hsl.l);\n    }\n    add(color) {\n        this.r = Math.min(1, this.r + color.r);\n        this.g = Math.min(1, this.g + color.g);\n        this.b = Math.min(1, this.b + color.b);\n        return this;\n    }\n    addScalar(scalar) {\n        this.r = Math.min(1, this.r + scalar);\n        this.g = Math.min(1, this.g + scalar);\n        this.b = Math.min(1, this.b + scalar);\n        return this;\n    }\n    sub(color) {\n        this.r = Math.max(0, this.r - color.r);\n        this.g = Math.max(0, this.g - color.g);\n        this.b = Math.max(0, this.b - color.b);\n        return this;\n    }\n    subScalar(scalar) {\n        this.r = Math.min(1, this.r - scalar);\n        this.g = Math.min(1, this.g - scalar);\n        this.b = Math.min(1, this.b - scalar);\n        return this;\n    }\n    multiply(color) {\n        this.r *= color.r;\n        this.g *= color.g;\n        this.b *= color.b;\n        return this;\n    }\n    multiplyScalar(scalar) {\n        this.r = Math.min(1, this.r * scalar);\n        this.g = Math.min(1, this.g * scalar);\n        this.b = Math.min(1, this.b * scalar);\n        return this;\n    }\n    lerp(color, alpha) {\n        this.r += (color.r - this.r) * alpha;\n        this.g += (color.g - this.g) * alpha;\n        this.b += (color.b - this.b) * alpha;\n        return this;\n    }\n    equals(c) {\n        return c.r === this.r && c.g === this.g && c.b === this.b;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\nColor.ColorKeywords = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32,\n};\n","import { MathUtil } from \"./Math\";\nimport { Matrix4 } from \"./Matrix4\";\nimport { Quaternion } from \"./Quaternion\";\nexport var EulerOrder;\n(function (EulerOrder) {\n    EulerOrder[EulerOrder[\"XYZ\"] = 0] = \"XYZ\";\n    EulerOrder[EulerOrder[\"YZX\"] = 1] = \"YZX\";\n    EulerOrder[EulerOrder[\"ZXY\"] = 2] = \"ZXY\";\n    EulerOrder[EulerOrder[\"XZY\"] = 3] = \"XZY\";\n    EulerOrder[EulerOrder[\"YXZ\"] = 4] = \"YXZ\";\n    EulerOrder[EulerOrder[\"ZYX\"] = 5] = \"ZYX\";\n})(EulerOrder || (EulerOrder = {}));\n/**\n * TODO: setFromVector3\n */\nexport class Euler {\n    constructor(x = 0, y = 0, z = 0) {\n        this._order = Euler.DefaultOrder;\n        this.onChangeCallback = function () { };\n        this._x = x;\n        this._y = y;\n        this._z = z;\n    }\n    onChange(callback) {\n        this.onChangeCallback = callback;\n        return this;\n    }\n    get x() {\n        return this._x;\n    }\n    set x(x) {\n        this._x = x;\n        this.onChangeCallback();\n    }\n    get y() {\n        return this._y;\n    }\n    set y(y) {\n        this._y = y;\n        this.onChangeCallback();\n    }\n    get z() {\n        return this._z;\n    }\n    set z(z) {\n        this._z = z;\n        this.onChangeCallback();\n    }\n    get order() {\n        return this._order;\n    }\n    set order(_order) {\n        this._order = _order;\n        this.onChangeCallback();\n    }\n    set(x, y, z, order) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._order = order;\n        this.onChangeCallback();\n        return this;\n    }\n    copy(euler) {\n        this.set(euler.x, euler.y, euler.z, euler.order);\n        this.onChangeCallback();\n        return this;\n    }\n    /**\n     * assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n     * @param m\n     * @param order\n     * @returns {Euler}\n     */\n    setFromRotationMatrix(m, order = this.order, update) {\n        const clamp = MathUtil.clamp;\n        const te = m.elements;\n        const m11 = te[0], m12 = te[4], m13 = te[8];\n        const m21 = te[1], m22 = te[5], m23 = te[9];\n        const m31 = te[2], m32 = te[6], m33 = te[10];\n        if (order === EulerOrder.XYZ) {\n            this._y = Math.asin(clamp(m13, -1, 1));\n            if (Math.abs(m13) < 0.99999) {\n                this._x = Math.atan2(-m23, m33);\n                this._z = Math.atan2(-m12, m11);\n            }\n            else {\n                this._x = Math.atan2(m32, m22);\n                this._z = 0;\n            }\n        }\n        else if (order === EulerOrder.YXZ) {\n            this._x = Math.asin(-clamp(m23, -1, 1));\n            if (Math.abs(m23) < 0.99999) {\n                this._y = Math.atan2(m13, m33);\n                this._z = Math.atan2(m21, m22);\n            }\n            else {\n                this._y = Math.atan2(-m31, m11);\n                this._z = 0;\n            }\n        }\n        else if (order === EulerOrder.ZXY) {\n            this._x = Math.asin(clamp(m32, -1, 1));\n            if (Math.abs(m32) < 0.99999) {\n                this._y = Math.atan2(-m31, m33);\n                this._z = Math.atan2(-m12, m22);\n            }\n            else {\n                this._y = 0;\n                this._z = Math.atan2(m21, m11);\n            }\n        }\n        else if (order === EulerOrder.ZYX) {\n            this._y = Math.asin(-clamp(m31, -1, 1));\n            if (Math.abs(m31) < 0.99999) {\n                this._x = Math.atan2(m32, m33);\n                this._z = Math.atan2(m21, m11);\n            }\n            else {\n                this._x = 0;\n                this._z = Math.atan2(-m12, m22);\n            }\n        }\n        else if (order === EulerOrder.YZX) {\n            this._z = Math.asin(clamp(m21, -1, 1));\n            if (Math.abs(m21) < 0.99999) {\n                this._x = Math.atan2(-m23, m22);\n                this._y = Math.atan2(-m31, m11);\n            }\n            else {\n                this._x = 0;\n                this._y = Math.atan2(m13, m33);\n            }\n        }\n        else if (order === EulerOrder.XZY) {\n            this._z = Math.asin(-clamp(m12, -1, 1));\n            if (Math.abs(m12) < 0.99999) {\n                this._x = Math.atan2(m32, m22);\n                this._y = Math.atan2(m13, m11);\n            }\n            else {\n                this._x = Math.atan2(-m23, m33);\n                this._y = 0;\n            }\n        }\n        this.order = order;\n        if (update !== false)\n            this.onChangeCallback();\n        return this;\n    }\n    setFromQuaternion(q, order, update) {\n        const matrix = new Matrix4();\n        matrix.makeRotationFromQuaternion(q);\n        return this.setFromRotationMatrix(matrix, order, update);\n    }\n    /**\n     * this discards revolution information -bhouston\n     * @param newOrder\n     * @returns {Euler}\n     */\n    reorder(newOrder) {\n        const q = new Quaternion();\n        q.setFromEuler(this);\n        return this.setFromQuaternion(q, newOrder);\n    }\n    equals(euler) {\n        return euler.x === this.x && euler.y === this.y && euler.z === this.z && euler.order === this.order;\n    }\n    fromArray(array) {\n        this._x = array[0];\n        this._y = array[1];\n        this._z = array[2];\n        this._order = array[3] || this.order;\n        this.onChangeCallback();\n        return this;\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        array[offset + 2] = this.z;\n        array[offset + 3] = this.order;\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\nEuler.DefaultOrder = EulerOrder.XYZ;\n","import { Plane } from \"./Plane\";\nimport { Sphere } from \"./Sphere\";\nimport { Vector3 } from \"./Vector3\";\nexport class Frustum {\n    constructor(p0 = new Plane(), p1 = new Plane(), p2 = new Plane(), p3 = new Plane(), p4 = new Plane(), p5 = new Plane()) {\n        this.planes = [p0, p1, p2, p3, p4, p5];\n    }\n    set(p0, p1, p2, p3, p4, p5) {\n        const planes = this.planes;\n        planes[0].copy(p0);\n        planes[1].copy(p1);\n        planes[2].copy(p2);\n        planes[3].copy(p3);\n        planes[4].copy(p4);\n        planes[5].copy(p5);\n        return this;\n    }\n    copy(frustum) {\n        const planes = this.planes;\n        for (let i = 0; i < 6; i++) {\n            planes[i].copy(frustum.planes[i]);\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    setFromMatrix(m) {\n        const planes = this.planes;\n        const me = m.elements;\n        const me0 = me[0], me1 = me[1], me2 = me[2], me3 = me[3];\n        const me4 = me[4], me5 = me[5], me6 = me[6], me7 = me[7];\n        const me8 = me[8], me9 = me[9], me10 = me[10], me11 = me[11];\n        const me12 = me[12], me13 = me[13], me14 = me[14], me15 = me[15];\n        const setPlane = (plane, x, y, z, w) => {\n            plane.normal.set(x, y, z);\n            plane.constant = w;\n            plane.normalize();\n        };\n        setPlane(planes[0], me3 - me0, me7 - me4, me11 - me8, me15 - me12);\n        setPlane(planes[1], me3 + me0, me7 + me4, me11 + me8, me15 + me12);\n        setPlane(planes[2], me3 + me1, me7 + me5, me11 + me9, me15 + me13);\n        setPlane(planes[3], me3 - me1, me7 - me5, me11 - me9, me15 - me13);\n        setPlane(planes[4], me3 - me2, me7 - me6, me11 - me10, me15 - me14);\n        setPlane(planes[5], me3 + me2, me7 + me6, me11 + me10, me15 + me14);\n        return this;\n    }\n    intersectsObject(object) {\n        const geometry = object.geometry;\n        if (geometry.boundingSphere === null) {\n            geometry.computeBoundingSphere();\n        }\n        const sphere = new Sphere().copy(geometry.boundingSphere).applyMatrix4(object.matrixWorld);\n        return this.intersectsSphere(sphere);\n    }\n    intersectsSprite(sprite) {\n        const sphere = new Sphere();\n        sphere.center.set(0, 0, 0);\n        sphere.radius = 0.7071067811865476;\n        sphere.applyMatrix4(sprite.matrixWorld);\n        return this.intersectsSphere(sphere);\n    }\n    intersectsSphere(sphere) {\n        const planes = this.planes;\n        const center = sphere.center;\n        const negRadius = -sphere.radius;\n        for (let i = 0; i < 6; i++) {\n            const distance = planes[i].distanceToPoint(center);\n            if (distance < negRadius) {\n                return false;\n            }\n        }\n        return true;\n    }\n    intersectsBox(box) {\n        const p1 = new Vector3(), p2 = new Vector3();\n        const planes = this.planes;\n        for (let i = 0; i < 6; i++) {\n            const plane = planes[i];\n            p1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n            p2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n            p1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n            p2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n            p1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n            p2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n            const d1 = plane.distanceToPoint(p1);\n            const d2 = plane.distanceToPoint(p2);\n            // if both outside plane, no intersection\n            if (d1 < 0 && d2 < 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n    containsPoint(point) {\n        const planes = this.planes;\n        for (let i = 0; i < 6; i++) {\n            if (planes[i].distanceToPoint(point) < 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n","import { MathUtil } from \"./Math\";\nimport { Vector3 } from \"./Vector3\";\nexport class Line3 {\n    constructor(start = new Vector3(), end = new Vector3()) {\n        this.start = new Vector3();\n        this.end = new Vector3();\n        this.start = start;\n        this.end = end;\n    }\n    set(start, end) {\n        this.start.copy(start);\n        this.end.copy(end);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(line) {\n        this.start.copy(line.start);\n        this.end.copy(line.end);\n        return this;\n    }\n    getCenter() {\n        return new Vector3()\n            .copy(this.start)\n            .add(this.end)\n            .multiplyScalar(0.5);\n    }\n    delta() {\n        return new Vector3().copy(this.end).sub(this.start);\n    }\n    distanceSquared() {\n        return this.start.distanceToSquared(this.end);\n    }\n    distance() {\n        return this.start.distanceTo(this.end);\n    }\n    at(t) {\n        return this.delta()\n            .multiplyScalar(t)\n            .add(this.start);\n    }\n    closestPointToPointParameter(point, clampToLine = false) {\n        const startP = new Vector3();\n        const startEnd = new Vector3();\n        startP.copy(point).sub(this.start);\n        startEnd.copy(this.end).sub(this.start);\n        const startEnd2 = startEnd.dot(startEnd);\n        const startEndStartP = startEnd.dot(startP);\n        let t = startEndStartP / startEnd2;\n        if (clampToLine) {\n            t = MathUtil.clamp(t, 0, 1);\n        }\n        return t;\n    }\n    closestPointToPoint(point, clampToLine = false) {\n        const t = this.closestPointToPointParameter(point, clampToLine);\n        return this.delta()\n            .multiplyScalar(t)\n            .add(this.start);\n    }\n    applyMatrix4(matrix) {\n        this.start.applyMatrix4(matrix);\n        this.end.applyMatrix4(matrix);\n        return this;\n    }\n    equals(line) {\n        return line.start.equals(this.start) && line.end.equals(this.end);\n    }\n}\n","const lut = [];\nfor (let i = 0; i < 256; i++) {\n    lut[i] = (i < 16 ? \"0\" : \"\") + i.toString(16).toUpperCase();\n}\n/**\n * Finished\n */\nexport class MathUtil {\n    /**\n     * 产生一个UUID的算法，主要是遵循UUID的规范来产生字符串\n     * http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n     * @returns {string}\n     */\n    static generateUUID() {\n        const d0 = (Math.random() * 0xffffffff) | 0;\n        const d1 = (Math.random() * 0xffffffff) | 0;\n        const d2 = (Math.random() * 0xffffffff) | 0;\n        const d3 = (Math.random() * 0xffffffff) | 0;\n        return (lut[d0 & 0xff] +\n            lut[(d0 >> 8) & 0xff] +\n            lut[(d0 >> 16) & 0xff] +\n            lut[(d0 >> 24) & 0xff] +\n            \"-\" +\n            lut[d1 & 0xff] +\n            lut[(d1 >> 8) & 0xff] +\n            \"-\" +\n            lut[((d1 >> 16) & 0x0f) | 0x40] +\n            lut[(d1 >> 24) & 0xff] +\n            \"-\" +\n            lut[(d2 & 0x3f) | 0x80] +\n            lut[(d2 >> 8) & 0xff] +\n            \"-\" +\n            lut[(d2 >> 16) & 0xff] +\n            lut[(d2 >> 24) & 0xff] +\n            lut[d3 & 0xff] +\n            lut[(d3 >> 8) & 0xff] +\n            lut[(d3 >> 16) & 0xff] +\n            lut[(d3 >> 24) & 0xff]);\n    }\n    /**\n     * 在一定范围内截断value的数值\n     * @param value\n     * @param min\n     * @param max\n     * @returns {number}\n     */\n    static clamp(value, min, max) {\n        return Math.max(min, Math.min(max, value));\n    }\n    /**\n     * 计算欧几里得取模算法\n     * 详见 https://en.wikipedia.org/wiki/Modulo_operation\n     * 这里还需要+m的原因是考虑负数取模的原因\n     * @param n\n     * @param m\n     * @returns {number}\n     */\n    static euclideanModulo(n, m) {\n        return (n % m + m) % m;\n    }\n    /**\n     * 将x在a范围内的值映射到b范围中\n     * @param x\n     * @param a1\n     * @param a2\n     * @param b1\n     * @param b2\n     * @returns {number}\n     */\n    static mapLinear(x, a1, a2, b1, b2) {\n        return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n    }\n    /**\n     * 线性插值\n     * https://en.wikipedia.org/wiki/Linear_interpolation\n     * @param x\n     * @param y\n     * @param t\n     * @returns {number}\n     */\n    static lerp(x, y, t) {\n        return (1 - t) * x + t * y;\n    }\n    /**\n     * 这个插值过程是将点原本的线性插值的点映射到f(x) = 3 * x^2 - 2 * x^3上，\n     * f\"(x) = 6 * x - 6 * x^2 x \\in [0, 1] \\geq 0\n     * 所以f(x)在[0, 1]上单调递增，\n     * 观察其二阶导可知f(x)在[0, 0.5]和[0.5 , 1]上分别为下凸和上凸函数，\n     * 所以其形状类似于电梯\n     * http://en.wikipedia.org/wiki/Smoothstep\n     * @param x\n     * @param min\n     * @param max\n     * @returns {number}\n     */\n    static smoothstep(x, min, max) {\n        if (x <= min)\n            return 0;\n        if (x >= max)\n            return 1;\n        x = (x - min) / (max - min);\n        return x * x * (3 - 2 * x);\n    }\n    /**\n     * 类似与上面的函数，计算量更大\n     * @param x\n     * @param min\n     * @param max\n     * @returns {number}\n     */\n    static smootherstep(x, min, max) {\n        if (x <= min)\n            return 0;\n        if (x >= max)\n            return 1;\n        x = (x - min) / (max - min);\n        return x * x * x * (x * (x * 6 - 15) + 10);\n    }\n    /**\n     * 随机整数\n     * @param low\n     * @param high\n     * @returns {number}\n     */\n    static randInt(low, high) {\n        return low + Math.floor(Math.random() * (high - low + 1));\n    }\n    /**\n     * 随机浮点数\n     * @param low\n     * @param high\n     * @returns {number}\n     */\n    static randFloat(low, high) {\n        return low + Math.random() * (high - low);\n    }\n    /**\n     * [-range/2, range/2]的随机浮点数\n     * @param range\n     * @returns {number}\n     */\n    static randFloatSpread(range) {\n        return range * (0.5 - Math.random());\n    }\n    /***************************** 下面的太简单了不说明了 *******************************/\n    static degToRad(degrees) {\n        return degrees * MathUtil.DEG2RAD;\n    }\n    static radToDeg(radians) {\n        return radians * MathUtil.RAD2DEG;\n    }\n    /**\n     * 这里用到了二进制的技巧\n     * @param value\n     * @returns {boolean}\n     */\n    static isPowerOfTwo(value) {\n        return (value & (value - 1)) === 0 && value !== 0;\n    }\n    static ceilPowerOfTwo(value) {\n        return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));\n    }\n    static floorPowerOfTwo(value) {\n        return Math.pow(2, Math.floor(Math.log(value) / Math.LN2));\n    }\n}\n/**\n * 弧度/角度\n * @type {number}\n */\nMathUtil.DEG2RAD = Math.PI / 180;\n/**\n * 角度/弧度\n * @type {number}\n */\nMathUtil.RAD2DEG = 180 / Math.PI;\n","export class Matrix2 {\n    constructor() {\n        this.elements = [1, 0, 0, 1];\n    }\n    set(n11, n12, n21, n22) {\n        const te = this.elements;\n        te[0] = n11;\n        te[1] = n21;\n        te[3] = n12;\n        te[4] = n22;\n        return this;\n    }\n    identity() {\n        return this.set(1, 0, 0, 1);\n    }\n    copy(mat2) {\n        const te = this.elements;\n        const me = mat2.elements;\n        te[0] = me[0];\n        te[1] = me[1];\n        te[2] = me[2];\n        te[3] = me[3];\n        return this;\n    }\n    setFromMatrix4(mat2) {\n        const me = mat2.elements;\n        return this.set(me[0], me[2], me[1], me[3]);\n    }\n    multiply(mat2) {\n        return this.multiplyMatrices(this, mat2);\n    }\n    premultiply(m) {\n        return this.multiplyMatrices(m, this);\n    }\n    multiplyMatrices(a, b) {\n        const ae = a.elements;\n        const be = b.elements;\n        const te = this.elements;\n        const a11 = ae[0], a12 = ae[2];\n        const a21 = ae[1], a22 = ae[3];\n        const b11 = be[0], b12 = be[2];\n        const b21 = be[1], b22 = be[3];\n        te[0] = a11 * b11 + a12 * b21;\n        te[2] = a11 * b12 + a12 * b22;\n        te[1] = a21 * b11 + a22 * b21;\n        te[3] = a21 * b12 + a22 * b22;\n        return this;\n    }\n    multiplyScalar(s) {\n        const te = this.elements;\n        te[0] *= s;\n        te[2] *= s;\n        te[1] *= s;\n        te[3] *= s;\n        return this;\n    }\n    determinant() {\n        const te = this.elements;\n        const a = te[0], b = te[1], c = te[2], d = te[3];\n        return a * d - b * c;\n    }\n    // getInverse\n    transpose() {\n        let tmp;\n        const m = this.elements;\n        tmp = m[1];\n        m[1] = m[2];\n        m[2] = tmp;\n        return this;\n    }\n    equals(matrix) {\n        const te = this.elements;\n        const me = matrix.elements;\n        for (let i = 0; i < 4; i++) {\n            if (te[i] !== me[i])\n                return false;\n        }\n        return true;\n    }\n    fromArray(array, offset = 0) {\n        for (let i = 0; i < 4; i++) {\n            this.elements[i] = array[i + offset];\n        }\n        return this;\n    }\n    toArray(array = [], offset = 0) {\n        const te = this.elements;\n        array[offset] = te[0];\n        array[offset + 1] = te[1];\n        array[offset + 2] = te[2];\n        array[offset + 3] = te[3];\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","export class Matrix3 {\n    constructor() {\n        this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    }\n    set(n11, n12, n13, n21, n22, n23, n31, n32, n33) {\n        const te = this.elements;\n        te[0] = n11;\n        te[1] = n21;\n        te[2] = n31;\n        te[3] = n12;\n        te[4] = n22;\n        te[5] = n32;\n        te[6] = n13;\n        te[7] = n23;\n        te[8] = n33;\n        return this;\n    }\n    identity() {\n        return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1);\n    }\n    copy(mat3) {\n        const te = this.elements;\n        const me = mat3.elements;\n        te[0] = me[0];\n        te[1] = me[1];\n        te[2] = me[2];\n        te[3] = me[3];\n        te[4] = me[4];\n        te[5] = me[5];\n        te[6] = me[6];\n        te[7] = me[7];\n        te[8] = me[8];\n        return this;\n    }\n    setFromMatrix4(mat4) {\n        const me = mat4.elements;\n        return this.set(me[0], me[4], me[8], me[1], me[5], me[9], me[2], me[6], me[10]);\n    }\n    multiply(mat3) {\n        return this.multiplyMatrices(this, mat3);\n    }\n    premultiply(m) {\n        return this.multiplyMatrices(m, this);\n    }\n    multiplyMatrices(a, b) {\n        const ae = a.elements;\n        const be = b.elements;\n        const te = this.elements;\n        const a11 = ae[0], a12 = ae[3], a13 = ae[6];\n        const a21 = ae[1], a22 = ae[4], a23 = ae[7];\n        const a31 = ae[2], a32 = ae[5], a33 = ae[8];\n        const b11 = be[0], b12 = be[3], b13 = be[6];\n        const b21 = be[1], b22 = be[4], b23 = be[7];\n        const b31 = be[2], b32 = be[5], b33 = be[8];\n        te[0] = a11 * b11 + a12 * b21 + a13 * b31;\n        te[3] = a11 * b12 + a12 * b22 + a13 * b32;\n        te[6] = a11 * b13 + a12 * b23 + a13 * b33;\n        te[1] = a21 * b11 + a22 * b21 + a23 * b31;\n        te[4] = a21 * b12 + a22 * b22 + a23 * b32;\n        te[7] = a21 * b13 + a22 * b23 + a23 * b33;\n        te[2] = a31 * b11 + a32 * b21 + a33 * b31;\n        te[5] = a31 * b12 + a32 * b22 + a33 * b32;\n        te[8] = a31 * b13 + a32 * b23 + a33 * b33;\n        return this;\n    }\n    multiplyScalar(s) {\n        const te = this.elements;\n        te[0] *= s;\n        te[3] *= s;\n        te[6] *= s;\n        te[1] *= s;\n        te[4] *= s;\n        te[7] *= s;\n        te[2] *= s;\n        te[5] *= s;\n        te[8] *= s;\n        return this;\n    }\n    determinant() {\n        const te = this.elements;\n        const a = te[0], b = te[1], c = te[2], d = te[3], e = te[4], f = te[5], g = te[6], h = te[7], i = te[8];\n        return a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n    }\n    getInverse(matrix, throwOnDegenerate = false) {\n        const me = matrix.elements, te = this.elements, n11 = me[0], n21 = me[1], n31 = me[2], n12 = me[3], n22 = me[4], n32 = me[5], n13 = me[6], n23 = me[7], n33 = me[8], t11 = n33 * n22 - n32 * n23, t12 = n32 * n13 - n33 * n12, t13 = n23 * n12 - n22 * n13, det = n11 * t11 + n21 * t12 + n31 * t13;\n        if (det === 0) {\n            const msg = `THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0`;\n            if (throwOnDegenerate === true) {\n                throw new Error(msg);\n            }\n            else {\n                console.warn(msg);\n            }\n            return this.identity();\n        }\n        const detInv = 1 / det;\n        te[0] = t11 * detInv;\n        te[1] = (n31 * n23 - n33 * n21) * detInv;\n        te[2] = (n32 * n21 - n31 * n22) * detInv;\n        te[3] = t12 * detInv;\n        te[4] = (n33 * n11 - n31 * n13) * detInv;\n        te[5] = (n31 * n12 - n32 * n11) * detInv;\n        te[6] = t13 * detInv;\n        te[7] = (n21 * n13 - n23 * n11) * detInv;\n        te[8] = (n22 * n11 - n21 * n12) * detInv;\n        return this;\n    }\n    transpose() {\n        let tmp;\n        const m = this.elements;\n        tmp = m[1];\n        m[1] = m[3];\n        m[3] = tmp;\n        tmp = m[2];\n        m[2] = m[6];\n        m[6] = tmp;\n        tmp = m[5];\n        m[5] = m[7];\n        m[7] = tmp;\n        return this;\n    }\n    getNormalMatrix(matrix4) {\n        return this.setFromMatrix4(matrix4)\n            .getInverse(this)\n            .transpose();\n    }\n    setUvTransform(tx, ty, sx, sy, rotation, cx, cy) {\n        const c = Math.cos(rotation);\n        const s = Math.sin(rotation);\n        return this.set(sx * c, sx * s, -sx * (c * cx + s * cy) + cx + tx, -sy * s, sy * c, -sy * (-s * cx + c * cy) + cy + ty, 0, 0, 1);\n    }\n    scale(sx, sy) {\n        const te = this.elements;\n        te[0] *= sx;\n        te[3] *= sx;\n        te[6] *= sx;\n        te[1] *= sy;\n        te[4] *= sy;\n        te[7] *= sy;\n        return this;\n    }\n    rotate(theta) {\n        const c = Math.cos(theta);\n        const s = Math.sin(theta);\n        const te = this.elements;\n        const a11 = te[0], a12 = te[3], a13 = te[6];\n        const a21 = te[1], a22 = te[4], a23 = te[7];\n        te[0] = c * a11 + s * a21;\n        te[3] = c * a12 + s * a22;\n        te[6] = c * a13 + s * a23;\n        te[1] = -s * a11 + c * a21;\n        te[4] = -s * a12 + c * a22;\n        te[7] = -s * a13 + c * a23;\n        return this;\n    }\n    translate(tx, ty) {\n        const te = this.elements;\n        te[0] += tx * te[2];\n        te[3] += tx * te[5];\n        te[6] += tx * te[8];\n        te[1] += ty * te[2];\n        te[4] += ty * te[5];\n        te[7] += ty * te[8];\n        return this;\n    }\n    equals(matrix) {\n        const te = this.elements;\n        const me = matrix.elements;\n        for (let i = 0; i < 9; i++) {\n            if (te[i] !== me[i])\n                return false;\n        }\n        return true;\n    }\n    fromArray(array, offset = 0) {\n        for (let i = 0; i < 9; i++) {\n            this.elements[i] = array[i + offset];\n        }\n        return this;\n    }\n    toArray(array = [], offset = 0) {\n        const te = this.elements;\n        array[offset] = te[0];\n        array[offset + 1] = te[1];\n        array[offset + 2] = te[2];\n        array[offset + 3] = te[3];\n        array[offset + 4] = te[4];\n        array[offset + 5] = te[5];\n        array[offset + 6] = te[6];\n        array[offset + 7] = te[7];\n        array[offset + 8] = te[8];\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { EulerOrder } from \"./Euler\";\nimport { Vector3 } from \"./Vector3\";\n/**\n * TODO: applyToBufferAttribute\n */\nexport class Matrix4 {\n    constructor() {\n        this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    }\n    copy(mat4) {\n        const te = this.elements;\n        const me = mat4.elements;\n        te[0] = me[0];\n        te[1] = me[1];\n        te[2] = me[2];\n        te[3] = me[3];\n        te[4] = me[4];\n        te[5] = me[5];\n        te[6] = me[6];\n        te[7] = me[7];\n        te[8] = me[8];\n        te[9] = me[9];\n        te[10] = me[10];\n        te[11] = me[11];\n        te[12] = me[12];\n        te[13] = me[13];\n        te[14] = me[14];\n        te[15] = me[15];\n        return this;\n    }\n    set(n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\n        const te = this.elements;\n        te[0] = n11;\n        te[4] = n12;\n        te[8] = n13;\n        te[12] = n14;\n        te[1] = n21;\n        te[5] = n22;\n        te[9] = n23;\n        te[13] = n24;\n        te[2] = n31;\n        te[6] = n32;\n        te[10] = n33;\n        te[14] = n34;\n        te[3] = n41;\n        te[7] = n42;\n        te[11] = n43;\n        te[15] = n44;\n        return this;\n    }\n    identity() {\n        return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    copyPosition(m) {\n        const te = this.elements, me = m.elements;\n        te[12] = me[12];\n        te[13] = me[13];\n        te[14] = me[14];\n        return this;\n    }\n    extractBasis(xAxis, yAxis, zAxis) {\n        xAxis.fromArray(this.elements, 0);\n        yAxis.fromArray(this.elements, 4);\n        zAxis.fromArray(this.elements, 8);\n        return this;\n    }\n    makeBasis(xAxis, yAxis, zAxis) {\n        return this.set(xAxis.x, yAxis.x, zAxis.x, 0, xAxis.y, yAxis.y, zAxis.y, 0, xAxis.z, yAxis.z, zAxis.z, 0, 0, 0, 0, 1);\n    }\n    extractRotation(mat4) {\n        const vec = new Vector3();\n        const te = this.elements;\n        const me = mat4.elements;\n        const scaleX = 1 / vec.fromArray(mat4.elements, 0).length();\n        const scaleY = 1 / vec.fromArray(mat4.elements, 4).length();\n        const scaleZ = 1 / vec.fromArray(mat4.elements, 8).length();\n        te[0] = me[0] * scaleX;\n        te[1] = me[1] * scaleX;\n        te[2] = me[2] * scaleX;\n        te[4] = me[4] * scaleY;\n        te[5] = me[5] * scaleY;\n        te[6] = me[6] * scaleY;\n        te[8] = me[8] * scaleZ;\n        te[9] = me[9] * scaleZ;\n        te[10] = me[10] * scaleZ;\n        return this;\n    }\n    makeRotationFromEuler(euler) {\n        const te = this.elements;\n        const x = euler.x, y = euler.y, z = euler.z;\n        const a = Math.cos(x), b = Math.sin(x);\n        const c = Math.cos(y), d = Math.sin(y);\n        const e = Math.cos(z), f = Math.sin(z);\n        if (euler.order === EulerOrder.XYZ) {\n            const ae = a * e, af = a * f, be = b * e, bf = b * f;\n            te[0] = c * e;\n            te[4] = -c * f;\n            te[8] = d;\n            te[1] = af + be * d;\n            te[5] = ae - bf * d;\n            te[9] = -b * c;\n            te[2] = bf - ae * d;\n            te[6] = be + af * d;\n            te[10] = a * c;\n        }\n        else if (euler.order === EulerOrder.YXZ) {\n            const ce = c * e, cf = c * f, de = d * e, df = d * f;\n            te[0] = ce + df * b;\n            te[4] = de * b - cf;\n            te[8] = a * d;\n            te[1] = a * f;\n            te[5] = a * e;\n            te[9] = -b;\n            te[2] = cf * b - de;\n            te[6] = df + ce * b;\n            te[10] = a * c;\n        }\n        else if (euler.order === EulerOrder.ZXY) {\n            const ce = c * e, cf = c * f, de = d * e, df = d * f;\n            te[0] = ce - df * b;\n            te[4] = -a * f;\n            te[8] = de + cf * b;\n            te[1] = cf + de * b;\n            te[5] = a * e;\n            te[9] = df - ce * b;\n            te[2] = -a * d;\n            te[6] = b;\n            te[10] = a * c;\n        }\n        else if (euler.order === EulerOrder.ZYX) {\n            const ae = a * e, af = a * f, be = b * e, bf = b * f;\n            te[0] = c * e;\n            te[4] = be * d - af;\n            te[8] = ae * d + bf;\n            te[1] = c * f;\n            te[5] = bf * d + ae;\n            te[9] = af * d - be;\n            te[2] = -d;\n            te[6] = b * c;\n            te[10] = a * c;\n        }\n        else if (euler.order === EulerOrder.YZX) {\n            const ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n            te[0] = c * e;\n            te[4] = bd - ac * f;\n            te[8] = bc * f + ad;\n            te[1] = f;\n            te[5] = a * e;\n            te[9] = -b * e;\n            te[2] = -d * e;\n            te[6] = ad * f + bc;\n            te[10] = ac - bd * f;\n        }\n        else if (euler.order === EulerOrder.XZY) {\n            const ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n            te[0] = c * e;\n            te[4] = -f;\n            te[8] = d * e;\n            te[1] = ac * f + bd;\n            te[5] = a * e;\n            te[9] = ad * f - bc;\n            te[2] = bc * f - ad;\n            te[6] = b * e;\n            te[10] = bd * f + ac;\n        }\n        // last column\n        te[3] = 0;\n        te[7] = 0;\n        te[11] = 0;\n        // bottom row\n        te[12] = 0;\n        te[13] = 0;\n        te[14] = 0;\n        te[15] = 1;\n        return this;\n    }\n    makeRotationFromQuaternion(quaternion) {\n        const te = this.elements;\n        const x = quaternion.x, y = quaternion.y, z = quaternion.z, w = quaternion.w;\n        const x2 = x + x, y2 = y + y, z2 = z + z;\n        const xx = x * x2, xy = x * y2, xz = x * z2;\n        const yy = y * y2, yz = y * z2, zz = z * z2;\n        const wx = w * x2, wy = w * y2, wz = w * z2;\n        te[0] = 1 - (yy + zz);\n        te[4] = xy - wz;\n        te[8] = xz + wy;\n        te[1] = xy + wz;\n        te[5] = 1 - (xx + zz);\n        te[9] = yz - wx;\n        te[2] = xz - wy;\n        te[6] = yz + wx;\n        te[10] = 1 - (xx + yy);\n        // last column\n        te[3] = 0;\n        te[7] = 0;\n        te[11] = 0;\n        // bottom row\n        te[12] = 0;\n        te[13] = 0;\n        te[14] = 0;\n        te[15] = 1;\n        return this;\n    }\n    lookAt(eye, target, up) {\n        const x = new Vector3();\n        const y = new Vector3();\n        const z = new Vector3();\n        const te = this.elements;\n        z.copy(eye).sub(target);\n        if (z.lengthSquared() === 0) {\n            // eye and target are in the same position\n            z.z = 1;\n        }\n        z.normalize();\n        x.copy(up).cross(z);\n        if (x.lengthSquared() === 0) {\n            // up and z are parallel\n            if (Math.abs(up.z) === 1) {\n                z.x += 0.0001;\n            }\n            else {\n                z.z += 0.0001;\n            }\n            z.normalize();\n            x.copy(up).cross(z);\n        }\n        x.normalize();\n        y.copy(z).cross(x);\n        te[0] = x.x;\n        te[4] = y.x;\n        te[8] = z.x;\n        te[1] = x.y;\n        te[5] = y.y;\n        te[9] = z.y;\n        te[2] = x.z;\n        te[6] = y.z;\n        te[10] = z.z;\n        return this;\n    }\n    multiply(mat) {\n        return this.multiplyMatrices(this, mat);\n    }\n    premultiply(mat) {\n        return this.multiplyMatrices(mat, this);\n    }\n    multiplyMatrices(matA, matB) {\n        const ae = matA.elements;\n        const be = matB.elements;\n        const te = this.elements;\n        const a11 = ae[0], a12 = ae[4], a13 = ae[8], a14 = ae[12];\n        const a21 = ae[1], a22 = ae[5], a23 = ae[9], a24 = ae[13];\n        const a31 = ae[2], a32 = ae[6], a33 = ae[10], a34 = ae[14];\n        const a41 = ae[3], a42 = ae[7], a43 = ae[11], a44 = ae[15];\n        const b11 = be[0], b12 = be[4], b13 = be[8], b14 = be[12];\n        const b21 = be[1], b22 = be[5], b23 = be[9], b24 = be[13];\n        const b31 = be[2], b32 = be[6], b33 = be[10], b34 = be[14];\n        const b41 = be[3], b42 = be[7], b43 = be[11], b44 = be[15];\n        te[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n        te[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n        te[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n        te[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n        te[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n        te[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n        te[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n        te[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n        te[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n        te[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n        te[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n        te[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n        te[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n        te[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n        te[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n        te[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n        return this;\n    }\n    multiplyScalar(s) {\n        const te = this.elements;\n        te[0] *= s;\n        te[4] *= s;\n        te[8] *= s;\n        te[12] *= s;\n        te[1] *= s;\n        te[5] *= s;\n        te[9] *= s;\n        te[13] *= s;\n        te[2] *= s;\n        te[6] *= s;\n        te[10] *= s;\n        te[14] *= s;\n        te[3] *= s;\n        te[7] *= s;\n        te[11] *= s;\n        te[15] *= s;\n        return this;\n    }\n    /**\n     * http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n     * @returns {number}\n     */\n    determinant() {\n        const te = this.elements;\n        const n11 = te[0], n12 = te[4], n13 = te[8], n14 = te[12];\n        const n21 = te[1], n22 = te[5], n23 = te[9], n24 = te[13];\n        const n31 = te[2], n32 = te[6], n33 = te[10], n34 = te[14];\n        const n41 = te[3], n42 = te[7], n43 = te[11], n44 = te[15];\n        return (n41 *\n            (+n14 * n23 * n32 -\n                n13 * n24 * n32 -\n                n14 * n22 * n33 +\n                n12 * n24 * n33 +\n                n13 * n22 * n34 -\n                n12 * n23 * n34) +\n            n42 *\n                (+n11 * n23 * n34 -\n                    n11 * n24 * n33 +\n                    n14 * n21 * n33 -\n                    n13 * n21 * n34 +\n                    n13 * n24 * n31 -\n                    n14 * n23 * n31) +\n            n43 *\n                (+n11 * n24 * n32 -\n                    n11 * n22 * n34 -\n                    n14 * n21 * n32 +\n                    n12 * n21 * n34 +\n                    n14 * n22 * n31 -\n                    n12 * n24 * n31) +\n            n44 *\n                (-n13 * n22 * n31 -\n                    n11 * n23 * n32 +\n                    n11 * n22 * n33 +\n                    n13 * n21 * n32 -\n                    n12 * n21 * n33 +\n                    n12 * n23 * n31));\n    }\n    transpose() {\n        const te = this.elements;\n        let tmp;\n        tmp = te[1];\n        te[1] = te[4];\n        te[4] = tmp;\n        tmp = te[2];\n        te[2] = te[8];\n        te[8] = tmp;\n        tmp = te[6];\n        te[6] = te[9];\n        te[9] = tmp;\n        tmp = te[3];\n        te[3] = te[12];\n        te[12] = tmp;\n        tmp = te[7];\n        te[7] = te[13];\n        te[13] = tmp;\n        tmp = te[11];\n        te[11] = te[14];\n        te[14] = tmp;\n        return this;\n    }\n    setPosition(v) {\n        const te = this.elements;\n        te[12] = v.x;\n        te[13] = v.y;\n        te[14] = v.z;\n        return this;\n    }\n    /**\n     * http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n     * @param m\n     * @param throwOnDegenerate\n     * @returns {Matrix4}\n     */\n    getInverse(m, throwOnDegenerate = false) {\n        const te = this.elements, me = m.elements;\n        const n11 = me[0], n21 = me[1], n31 = me[2], n41 = me[3], n12 = me[4], n22 = me[5], n32 = me[6], n42 = me[7], n13 = me[8], n23 = me[9], n33 = me[10], n43 = me[11], n14 = me[12], n24 = me[13], n34 = me[14], n44 = me[15], t11 = n23 * n34 * n42 -\n            n24 * n33 * n42 +\n            n24 * n32 * n43 -\n            n22 * n34 * n43 -\n            n23 * n32 * n44 +\n            n22 * n33 * n44, t12 = n14 * n33 * n42 -\n            n13 * n34 * n42 -\n            n14 * n32 * n43 +\n            n12 * n34 * n43 +\n            n13 * n32 * n44 -\n            n12 * n33 * n44, t13 = n13 * n24 * n42 -\n            n14 * n23 * n42 +\n            n14 * n22 * n43 -\n            n12 * n24 * n43 -\n            n13 * n22 * n44 +\n            n12 * n23 * n44, t14 = n14 * n23 * n32 -\n            n13 * n24 * n32 -\n            n14 * n22 * n33 +\n            n12 * n24 * n33 +\n            n13 * n22 * n34 -\n            n12 * n23 * n34;\n        const det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n        if (det === 0) {\n            const msg = `THREE.Matrix4: .getInverse() can\"t invert matrix, determinant is 0`;\n            if (throwOnDegenerate === true) {\n                throw new Error(msg);\n            }\n            else {\n                console.warn(msg);\n            }\n            return this.identity();\n        }\n        const detInv = 1 / det;\n        te[0] = t11 * detInv;\n        te[1] =\n            (n24 * n33 * n41 -\n                n23 * n34 * n41 -\n                n24 * n31 * n43 +\n                n21 * n34 * n43 +\n                n23 * n31 * n44 -\n                n21 * n33 * n44) *\n                detInv;\n        te[2] =\n            (n22 * n34 * n41 -\n                n24 * n32 * n41 +\n                n24 * n31 * n42 -\n                n21 * n34 * n42 -\n                n22 * n31 * n44 +\n                n21 * n32 * n44) *\n                detInv;\n        te[3] =\n            (n23 * n32 * n41 -\n                n22 * n33 * n41 -\n                n23 * n31 * n42 +\n                n21 * n33 * n42 +\n                n22 * n31 * n43 -\n                n21 * n32 * n43) *\n                detInv;\n        te[4] = t12 * detInv;\n        te[5] =\n            (n13 * n34 * n41 -\n                n14 * n33 * n41 +\n                n14 * n31 * n43 -\n                n11 * n34 * n43 -\n                n13 * n31 * n44 +\n                n11 * n33 * n44) *\n                detInv;\n        te[6] =\n            (n14 * n32 * n41 -\n                n12 * n34 * n41 -\n                n14 * n31 * n42 +\n                n11 * n34 * n42 +\n                n12 * n31 * n44 -\n                n11 * n32 * n44) *\n                detInv;\n        te[7] =\n            (n12 * n33 * n41 -\n                n13 * n32 * n41 +\n                n13 * n31 * n42 -\n                n11 * n33 * n42 -\n                n12 * n31 * n43 +\n                n11 * n32 * n43) *\n                detInv;\n        te[8] = t13 * detInv;\n        te[9] =\n            (n14 * n23 * n41 -\n                n13 * n24 * n41 -\n                n14 * n21 * n43 +\n                n11 * n24 * n43 +\n                n13 * n21 * n44 -\n                n11 * n23 * n44) *\n                detInv;\n        te[10] =\n            (n12 * n24 * n41 -\n                n14 * n22 * n41 +\n                n14 * n21 * n42 -\n                n11 * n24 * n42 -\n                n12 * n21 * n44 +\n                n11 * n22 * n44) *\n                detInv;\n        te[11] =\n            (n13 * n22 * n41 -\n                n12 * n23 * n41 -\n                n13 * n21 * n42 +\n                n11 * n23 * n42 +\n                n12 * n21 * n43 -\n                n11 * n22 * n43) *\n                detInv;\n        te[12] = t14 * detInv;\n        te[13] =\n            (n13 * n24 * n31 -\n                n14 * n23 * n31 +\n                n14 * n21 * n33 -\n                n11 * n24 * n33 -\n                n13 * n21 * n34 +\n                n11 * n23 * n34) *\n                detInv;\n        te[14] =\n            (n14 * n22 * n31 -\n                n12 * n24 * n31 -\n                n14 * n21 * n32 +\n                n11 * n24 * n32 +\n                n12 * n21 * n34 -\n                n11 * n22 * n34) *\n                detInv;\n        te[15] =\n            (n12 * n23 * n31 -\n                n13 * n22 * n31 +\n                n13 * n21 * n32 -\n                n11 * n23 * n32 -\n                n12 * n21 * n33 +\n                n11 * n22 * n33) *\n                detInv;\n        return this;\n    }\n    scale(v) {\n        const te = this.elements;\n        const x = v.x, y = v.y, z = v.z;\n        te[0] *= x;\n        te[4] *= y;\n        te[8] *= z;\n        te[1] *= x;\n        te[5] *= y;\n        te[9] *= z;\n        te[2] *= x;\n        te[6] *= y;\n        te[10] *= z;\n        te[3] *= x;\n        te[7] *= y;\n        te[11] *= z;\n        return this;\n    }\n    getMaxScaleOnAxis() {\n        const te = this.elements;\n        const scaleXSq = te[0] * te[0] + te[1] * te[1] + te[2] * te[2];\n        const scaleYSq = te[4] * te[4] + te[5] * te[5] + te[6] * te[6];\n        const scaleZSq = te[8] * te[8] + te[9] * te[9] + te[10] * te[10];\n        return Math.sqrt(Math.max(scaleXSq, scaleYSq, scaleZSq));\n    }\n    makeTranslation(x, y, z) {\n        return this.set(1, 0, 0, x, 0, 1, 0, y, 0, 0, 1, z, 0, 0, 0, 1);\n    }\n    makeRotationX(theta) {\n        const c = Math.cos(theta), s = Math.sin(theta);\n        return this.set(1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1);\n    }\n    makeRotationY(theta) {\n        const c = Math.cos(theta), s = Math.sin(theta);\n        return this.set(c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1);\n    }\n    makeRotationZ(theta) {\n        const c = Math.cos(theta), s = Math.sin(theta);\n        return this.set(c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    /**\n     * http://www.gamedev.net/reference/articles/article1199.asp\n     * @param axis\n     * @param angle\n     * @returns {Matrix4}\n     */\n    makeRotationAxis(axis, angle) {\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        const t = 1 - c;\n        const x = axis.x, y = axis.y, z = axis.z;\n        const tx = t * x, ty = t * y;\n        return this.set(tx * x + c, tx * y - s * z, tx * z + s * y, 0, tx * y + s * z, ty * y + c, ty * z - s * x, 0, tx * z - s * y, ty * z + s * x, t * z * z + c, 0, 0, 0, 0, 1);\n    }\n    makeScale(x, y, z) {\n        return this.set(x, 0, 0, 0, 0, y, 0, 0, 0, 0, z, 0, 0, 0, 0, 1);\n    }\n    makeShear(x, y, z) {\n        return this.set(1, y, z, 0, x, 1, z, 0, x, y, 1, 0, 0, 0, 0, 1);\n    }\n    compose(position, quaternion, scale) {\n        this.makeRotationFromQuaternion(quaternion);\n        this.scale(scale);\n        this.setPosition(position);\n        return this;\n    }\n    decompose(position, quaternion, scale) {\n        const vector = new Vector3();\n        const matrix = new Matrix4();\n        const te = this.elements;\n        let sx = vector.set(te[0], te[1], te[2]).length();\n        const sy = vector.set(te[4], te[5], te[6]).length();\n        const sz = vector.set(te[8], te[9], te[10]).length();\n        // if determine is negative, we need to invert one scale\n        const det = this.determinant();\n        if (det < 0)\n            sx = -sx;\n        position.x = te[12];\n        position.y = te[13];\n        position.z = te[14];\n        // scale the rotation part\n        matrix.copy(this);\n        const invSX = 1 / sx;\n        const invSY = 1 / sy;\n        const invSZ = 1 / sz;\n        matrix.elements[0] *= invSX;\n        matrix.elements[1] *= invSX;\n        matrix.elements[2] *= invSX;\n        matrix.elements[4] *= invSY;\n        matrix.elements[5] *= invSY;\n        matrix.elements[6] *= invSY;\n        matrix.elements[8] *= invSZ;\n        matrix.elements[9] *= invSZ;\n        matrix.elements[10] *= invSZ;\n        quaternion.setFromRotationMatrix(matrix);\n        scale.set(sx, sy, sz);\n        return this;\n    }\n    makePerspective(left, right, top, bottom, near, far) {\n        return this.set(2 * near / (right - left), 0, (right + left) / (right - left), 0, 0, 2 * near / (top - bottom), (top + bottom) / (top - bottom), 0, 0, 0, -(far + near) / (far - near), -2 * far * near / (far - near), 0, 0, -1, 0);\n    }\n    makeOrthographic(left, right, top, bottom, near, far) {\n        const w = 1.0 / (right - left);\n        const h = 1.0 / (top - bottom);\n        const p = 1.0 / (far - near);\n        const x = (right + left) * w;\n        const y = (top + bottom) * h;\n        const z = (far + near) * p;\n        return this.set(2 * w, 0, 0, -x, 0, 2 * h, 0, -y, 0, 0, -2 * p, -z, 0, 0, 0, 1);\n    }\n    equals(matrix) {\n        const me = matrix.elements;\n        for (let i = 0; i < 16; i++) {\n            if (this.elements[i] !== me[i])\n                return false;\n        }\n        return true;\n    }\n    fromArray(array, offset = 0) {\n        for (let i = 0; i < 16; i++) {\n            this.elements[i] = array[i + offset];\n        }\n        return this;\n    }\n    toArray(array = [], offset = 0) {\n        const te = this.elements;\n        array[offset] = te[0];\n        array[offset + 1] = te[1];\n        array[offset + 2] = te[2];\n        array[offset + 3] = te[3];\n        array[offset + 4] = te[4];\n        array[offset + 5] = te[5];\n        array[offset + 6] = te[6];\n        array[offset + 7] = te[7];\n        array[offset + 8] = te[8];\n        array[offset + 9] = te[9];\n        array[offset + 10] = te[10];\n        array[offset + 11] = te[11];\n        array[offset + 12] = te[12];\n        array[offset + 13] = te[13];\n        array[offset + 14] = te[14];\n        array[offset + 15] = te[15];\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Matrix3 } from \"./Matrix3\";\nimport { Vector3 } from \"./Vector3\";\nexport class Plane {\n    constructor(normal = new Vector3(1, 0, 0), constant = 0) {\n        this.normal = new Vector3(1, 0, 0);\n        this.constant = 0;\n        this.normal = normal;\n        this.constant = constant;\n    }\n    set(normal, constant) {\n        this.normal.copy(normal);\n        this.constant = constant;\n        return this;\n    }\n    setFromNormalAndCoplanarPoint(normal, point) {\n        this.normal.copy(normal);\n        this.constant = -point.dot(this.normal);\n        return this;\n    }\n    setFromCoplanarPoints(a, b, c) {\n        const v1 = new Vector3();\n        const v2 = new Vector3();\n        const normal = v1\n            .copy(c)\n            .sub(b)\n            .cross(v2.copy(a).sub(b))\n            .normalize();\n        // Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n        this.setFromNormalAndCoplanarPoint(normal, a);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(plane) {\n        this.normal.copy(plane.normal);\n        this.constant = plane.constant;\n        return this;\n    }\n    /**\n     * Note: will lead to a divide by zero if the plane is invalid\n     * @returns {Plane}\n     */\n    normalize() {\n        const inverseNormalLength = 1.0 / this.normal.length();\n        this.normal.multiplyScalar(inverseNormalLength);\n        this.constant *= inverseNormalLength;\n        return this;\n    }\n    negate() {\n        this.constant *= -1;\n        this.normal.negate();\n        return this;\n    }\n    distanceToPoint(point) {\n        return this.normal.dot(point) + this.constant;\n    }\n    distanceToSphere(sphere) {\n        return this.distanceToPoint(sphere.center) - sphere.radius;\n    }\n    projectPoint(point) {\n        return new Vector3()\n            .copy(this.normal)\n            .multiplyScalar(-this.distanceToPoint(point))\n            .add(point);\n    }\n    intersectLine(line) {\n        const direction = line.delta();\n        const denominator = this.normal.dot(direction);\n        if (denominator === 0) {\n            // line is coplanar, return origin\n            if (this.distanceToPoint(line.start) === 0) {\n                return new Vector3().copy(line.start);\n            }\n            // Unsure if this is the correct method to handle this case.\n            return undefined;\n        }\n        const t = -(line.start.dot(this.normal) + this.constant) / denominator;\n        if (t < 0 || t > 1) {\n            return undefined;\n        }\n        return new Vector3()\n            .copy(direction)\n            .multiplyScalar(t)\n            .add(line.start);\n    }\n    intersectsLine(line) {\n        // Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n        const startSign = this.distanceToPoint(line.start);\n        const endSign = this.distanceToPoint(line.end);\n        return (startSign < 0 && endSign > 0) || (endSign < 0 && startSign > 0);\n    }\n    intersectsBox(box) {\n        return box.intersectsPlane(this);\n    }\n    intersectsSphere(sphere) {\n        return sphere.intersectsPlane(this);\n    }\n    coplanarPoint() {\n        return new Vector3().copy(this.normal).multiplyScalar(-this.constant);\n    }\n    applyMatrix4(matrix, optionalNormalMatrix) {\n        const normalMatrix = optionalNormalMatrix || new Matrix3().getNormalMatrix(matrix);\n        const referencePoint = this.coplanarPoint().applyMatrix4(matrix);\n        const normal = this.normal.applyMatrix3(normalMatrix).normalize();\n        this.constant = -referencePoint.dot(normal);\n        return this;\n    }\n    translate(offset) {\n        this.constant -= offset.dot(this.normal);\n        return this;\n    }\n    equals(plane) {\n        return plane.normal.equals(this.normal) && plane.constant === this.constant;\n    }\n}\n","import { EulerOrder } from \"./Euler\";\nimport { Vector3 } from \"./Vector3\";\nexport class Quaternion {\n    constructor(x = 0, y = 0, z = 0, w = 1) {\n        this.onChangeCallback = function () { };\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n    }\n    onChange(callback) {\n        this.onChangeCallback = callback;\n        return this;\n    }\n    get x() {\n        return this._x;\n    }\n    set x(_x) {\n        this._x = _x;\n        this.onChangeCallback();\n    }\n    get y() {\n        return this._y;\n    }\n    set y(_y) {\n        this._y = _y;\n        this.onChangeCallback();\n    }\n    get z() {\n        return this._z;\n    }\n    set z(_z) {\n        this._z = _z;\n        this.onChangeCallback();\n    }\n    get w() {\n        return this._w;\n    }\n    set w(_w) {\n        this._w = _w;\n        this.onChangeCallback();\n    }\n    set(x, y, z, w) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n        this.onChangeCallback();\n        return this;\n    }\n    _set(x, y, z, w) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n        return this;\n    }\n    copy(quaternion) {\n        this._set(quaternion.x, quaternion.y, quaternion.z, quaternion.w);\n        this.onChangeCallback();\n        return this;\n    }\n    setFromEuler(euler, update) {\n        const { x, y, z, order } = euler;\n        const cos = Math.cos;\n        const sin = Math.sin;\n        const c1 = cos(x / 2);\n        const c2 = cos(y / 2);\n        const c3 = cos(z / 2);\n        const s1 = sin(x / 2);\n        const s2 = sin(y / 2);\n        const s3 = sin(z / 2);\n        if (order === EulerOrder.XYZ) {\n            return this._set(s1 * c2 * c3 + c1 * s2 * s3, c1 * s2 * c3 - s1 * c2 * s3, c1 * c2 * s3 + s1 * s2 * c3, c1 * c2 * c3 - s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.YXZ) {\n            return this._set(s1 * c2 * c3 + c1 * s2 * s3, c1 * s2 * c3 - s1 * c2 * s3, c1 * c2 * s3 - s1 * s2 * c3, c1 * c2 * c3 + s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.ZXY) {\n            return this._set(s1 * c2 * c3 - c1 * s2 * s3, c1 * s2 * c3 + s1 * c2 * s3, c1 * c2 * s3 + s1 * s2 * c3, c1 * c2 * c3 - s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.ZYX) {\n            return this._set(s1 * c2 * c3 - c1 * s2 * s3, c1 * s2 * c3 + s1 * c2 * s3, c1 * c2 * s3 - s1 * s2 * c3, c1 * c2 * c3 + s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.YZX) {\n            return this._set(s1 * c2 * c3 + c1 * s2 * s3, c1 * s2 * c3 + s1 * c2 * s3, c1 * c2 * s3 - s1 * s2 * c3, c1 * c2 * c3 - s1 * s2 * s3);\n        }\n        else if (order === EulerOrder.XZY) {\n            return this._set(s1 * c2 * c3 - c1 * s2 * s3, c1 * s2 * c3 - s1 * c2 * s3, c1 * c2 * s3 + s1 * s2 * c3, c1 * c2 * c3 + s1 * s2 * s3);\n        }\n        if (update !== false)\n            this.onChangeCallback();\n        return this;\n    }\n    /**\n     * !!! assumes axis is normalized\n     * http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n     * @param axis\n     * @param angle\n     * @returns {Quaternion}\n     */\n    setFromAxisAngle(axis, angle) {\n        const halfAngle = angle / 2, s = Math.sin(halfAngle);\n        this._set(axis.x * s, axis.y * s, axis.z * s, Math.cos(halfAngle));\n        this.onChangeCallback();\n        return this;\n    }\n    /**\n     * !!! assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n     * http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n     * @param m\n     * @returns {Quaternion}\n     */\n    setFromRotationMatrix(m) {\n        const te = m.elements, m11 = te[0], m12 = te[4], m13 = te[8], m21 = te[1], m22 = te[5], m23 = te[9], m31 = te[2], m32 = te[6], m33 = te[10], trace = m11 + m22 + m33;\n        let s;\n        if (trace > 0) {\n            s = 0.5 / Math.sqrt(trace + 1.0);\n            this._set((m32 - m23) * s, (m13 - m31) * s, (m21 - m12) * s, 0.25 / s);\n        }\n        else if (m11 > m22 && m11 > m33) {\n            s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n            this._set(0.25 * s, (m12 + m21) / s, (m13 + m31) / s, (m32 - m23) / s);\n        }\n        else if (m22 > m33) {\n            s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n            this._set((m12 + m21) / s, 0.25 * s, (m23 + m32) / s, (m13 - m31) / s);\n        }\n        else {\n            s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n            this._set((m13 + m31) / s, (m23 + m32) / s, 0.25 * s, (m21 - m12) / s);\n        }\n        this.onChangeCallback();\n        return this;\n    }\n    /**\n     * !! assumes direction vectors vFrom and vTo are normalized\n     * @param vFrom\n     * @param vTo\n     * @returns {Quaternion}\n     */\n    setFromUnitVectors(vFrom, vTo) {\n        const vec = new Vector3();\n        const EPS = 0.000001;\n        let r = vFrom.dot(vTo) + 1;\n        if (r < EPS) {\n            r = 0;\n            if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n                vec.set(-vFrom.y, vFrom.x, 0);\n            }\n            else {\n                vec.set(0, -vFrom.z, vFrom.y);\n            }\n        }\n        else {\n            vec.copy(vFrom).cross(vTo);\n        }\n        this._x = vec.x;\n        this._y = vec.y;\n        this._z = vec.z;\n        this._w = r;\n        return this.normalize();\n    }\n    inverse() {\n        return this.conjugate().normalize();\n    }\n    conjugate() {\n        this._set(this.x * -1, this.y * -1, this.z * -1, this.w);\n        this.onChangeCallback();\n        return this;\n    }\n    dot(vec) {\n        return this.x * vec.x + this.y * vec.y + this.z * vec.z + this.w * vec.w;\n    }\n    lengthSquared() {\n        const { x, y, z, w } = this;\n        return x * x + y * y + z * z + w * w;\n    }\n    length() {\n        return Math.sqrt(this.lengthSquared());\n    }\n    normalize() {\n        let l = this.length();\n        if (l === 0) {\n            this._set(0, 0, 0, 1);\n        }\n        else {\n            l = 1 / l;\n            this._set(this.x * l, this.y * l, this.z * l, this.w * l);\n        }\n        this.onChangeCallback();\n        return this;\n    }\n    multiply(quaternion) {\n        return this.multiplyQuaternions(this, quaternion);\n    }\n    premultiply(quaternion) {\n        return this.multiplyQuaternions(quaternion, this);\n    }\n    /**\n     * http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n     * @param a\n     * @param b\n     * @returns {Quaternion}\n     */\n    multiplyQuaternions(a, b) {\n        const qax = a.x, qay = a.y, qaz = a.z, qaw = a.w;\n        const qbx = b.x, qby = b.y, qbz = b.z, qbw = b.w;\n        this._set(qax * qbw + qaw * qbx + qay * qbz - qaz * qby, qay * qbw + qaw * qby + qaz * qbx - qax * qbz, qaz * qbw + qaw * qbz + qax * qby - qay * qbx, qaw * qbw - qax * qbx - qay * qby - qaz * qbz);\n        this.onChangeCallback();\n        return this;\n    }\n    /**\n     * http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n     * @param qb\n     * @param t\n     * @returns {Quaternion}\n     */\n    slerp(qb, t) {\n        if (t === 0)\n            return this;\n        if (t === 1)\n            return this.copy(qb);\n        const { x, y, z, w } = this;\n        let cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;\n        if (cosHalfTheta < 0) {\n            this._set(-qb.x, -qb.y, -qb.z, -qb.w);\n            cosHalfTheta = -cosHalfTheta;\n        }\n        else {\n            this.copy(qb);\n        }\n        if (cosHalfTheta >= 1.0) {\n            return this._set(x, y, z, w);\n        }\n        const sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n        if (Math.abs(sinHalfTheta) < 0.001) {\n            return this._set(0.5 * (x + this.x), 0.5 * (y + this.y), 0.5 * (z + this.z), 0.5 * (w + this.w));\n        }\n        const halfTheta = Math.atan2(sinHalfTheta, cosHalfTheta);\n        const ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta, ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n        this._set(x * ratioA + this.x * ratioB, y * ratioA + this.y * ratioB, z * ratioA + this.z * ratioB, w * ratioA + this.w * ratioB);\n        this.onChangeCallback();\n        return this;\n    }\n    equals(quaternion) {\n        const { x, y, z, w } = this;\n        return quaternion.x === x && quaternion.y === y && quaternion.z === z && quaternion.w === w;\n    }\n    fromArray(array, offset = 0) {\n        this._set(array[offset], array[offset + 1], array[offset + 2], array[offset + 3]);\n        this.onChangeCallback();\n        return this;\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        array[offset + 2] = this.z;\n        array[offset + 3] = this.w;\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Vector3 } from \"./Vector3\";\nexport class Ray {\n    constructor(origin = new Vector3(), direction = new Vector3()) {\n        this.origin = new Vector3();\n        this.direction = new Vector3();\n        this.origin = origin;\n        this.direction = direction;\n    }\n    set(origin, direction) {\n        this.origin.copy(origin);\n        this.direction.copy(direction);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(ray) {\n        this.origin.copy(ray.origin);\n        this.direction.copy(ray.direction);\n        return this;\n    }\n    at(t) {\n        return new Vector3()\n            .copy(this.direction)\n            .multiplyScalar(t)\n            .add(this.origin);\n    }\n    lookAt(v) {\n        this.direction\n            .copy(v)\n            .sub(this.origin)\n            .normalize();\n        return this;\n    }\n    recast(t) {\n        this.origin.copy(this.at(t));\n        return this;\n    }\n    closestPointToPoint(point) {\n        const result = new Vector3().copy(point).sub(this.origin);\n        const directionDistance = result.dot(this.direction);\n        if (directionDistance < 0) {\n            return result.copy(this.origin);\n        }\n        return result\n            .copy(this.direction)\n            .multiplyScalar(directionDistance)\n            .add(this.origin);\n    }\n    distanceToPoint(point) {\n        return Math.sqrt(this.distanceSquaredToPoint(point));\n    }\n    distanceSquaredToPoint(point) {\n        const directionDistance = new Vector3()\n            .copy(point)\n            .sub(this.origin)\n            .dot(this.direction);\n        // point behind the ray\n        if (directionDistance < 0) {\n            return this.origin.distanceToSquared(point);\n        }\n        return new Vector3()\n            .copy(this.direction)\n            .multiplyScalar(directionDistance)\n            .add(this.origin)\n            .distanceToSquared(point);\n    }\n    distanceSquareToSegment(v0, v1, optionalPointOnRay, optionalPointOnSegment) {\n        const segCenter = new Vector3();\n        const segDir = new Vector3();\n        const diff = new Vector3();\n        // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n        // It returns the min distance between the ray and the segment\n        // defined by v0 and v1\n        // It can also set two optional targets :\n        // - The closest point on the ray\n        // - The closest point on the segment\n        segCenter\n            .copy(v0)\n            .add(v1)\n            .multiplyScalar(0.5);\n        segDir\n            .copy(v1)\n            .sub(v0)\n            .normalize();\n        diff.copy(this.origin).sub(segCenter);\n        const segExtent = v0.distanceTo(v1) * 0.5;\n        const a01 = -this.direction.dot(segDir);\n        const b0 = diff.dot(this.direction);\n        const b1 = -diff.dot(segDir);\n        const c = diff.lengthSquared();\n        const det = Math.abs(1 - a01 * a01);\n        let s0, s1, sqrDist, extDet;\n        if (det > 0) {\n            // The ray and segment are not parallel.\n            s0 = a01 * b1 - b0;\n            s1 = a01 * b0 - b1;\n            extDet = segExtent * det;\n            if (s0 >= 0) {\n                if (s1 >= -extDet) {\n                    if (s1 <= extDet) {\n                        // region 0\n                        // Minimum at interior points of ray and segment.\n                        const invDet = 1 / det;\n                        s0 *= invDet;\n                        s1 *= invDet;\n                        sqrDist = s0 * (s0 + a01 * s1 + 2 * b0) + s1 * (a01 * s0 + s1 + 2 * b1) + c;\n                    }\n                    else {\n                        // region 1\n                        s1 = segExtent;\n                        s0 = Math.max(0, -(a01 * s1 + b0));\n                        sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n                    }\n                }\n                else {\n                    // region 5\n                    s1 = -segExtent;\n                    s0 = Math.max(0, -(a01 * s1 + b0));\n                    sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n                }\n            }\n            else {\n                if (s1 <= -extDet) {\n                    // region 4\n                    s0 = Math.max(0, -(-a01 * segExtent + b0));\n                    s1 = s0 > 0 ? -segExtent : Math.min(Math.max(-segExtent, -b1), segExtent);\n                    sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n                }\n                else if (s1 <= extDet) {\n                    // region 3\n                    s0 = 0;\n                    s1 = Math.min(Math.max(-segExtent, -b1), segExtent);\n                    sqrDist = s1 * (s1 + 2 * b1) + c;\n                }\n                else {\n                    // region 2\n                    s0 = Math.max(0, -(a01 * segExtent + b0));\n                    s1 = s0 > 0 ? segExtent : Math.min(Math.max(-segExtent, -b1), segExtent);\n                    sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n                }\n            }\n        }\n        else {\n            // Ray and segment are parallel.\n            s1 = a01 > 0 ? -segExtent : segExtent;\n            s0 = Math.max(0, -(a01 * s1 + b0));\n            sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n        }\n        if (optionalPointOnRay) {\n            optionalPointOnRay\n                .copy(this.direction)\n                .multiplyScalar(s0)\n                .add(this.origin);\n        }\n        if (optionalPointOnSegment) {\n            optionalPointOnSegment\n                .copy(segDir)\n                .multiplyScalar(s1)\n                .add(segCenter);\n        }\n        return sqrDist;\n    }\n    intersectSphere(sphere) {\n        const vec = new Vector3().copy(sphere.center).sub(this.origin);\n        const tca = vec.dot(this.direction);\n        const d2 = vec.dot(vec) - tca * tca;\n        const radius2 = sphere.radius * sphere.radius;\n        if (d2 > radius2)\n            return null;\n        const thc = Math.sqrt(radius2 - d2);\n        // t0 = first intersect point - entrance on front of sphere\n        const t0 = tca - thc;\n        // t1 = second intersect point - exit point on back of sphere\n        const t1 = tca + thc;\n        // test to see if both t0 and t1 are behind the ray - if so, return null\n        if (t0 < 0 && t1 < 0)\n            return null;\n        // test to see if t0 is behind the ray:\n        // if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n        // in order to always return an intersect point that is in front of the ray.\n        if (t0 < 0)\n            return this.at(t1);\n        // else t0 is in front of the ray, so return the first collision point scaled by t0\n        return this.at(t0);\n    }\n    intersectsSphere(sphere) {\n        return this.distanceToPoint(sphere.center) <= sphere.radius;\n    }\n    distanceToPlane(plane) {\n        const denominator = plane.normal.dot(this.direction);\n        if (denominator === 0) {\n            // line is coplanar, return origin\n            if (plane.distanceToPoint(this.origin) === 0) {\n                return 0;\n            }\n            // Null is preferable to undefined since undefined means.... it is undefined\n            return Infinity;\n        }\n        const t = -(this.origin.dot(plane.normal) + plane.constant) / denominator;\n        // Return if the ray never intersects the plane\n        return t >= 0 ? t : Infinity;\n    }\n    intersectPlane(plane) {\n        const t = this.distanceToPlane(plane);\n        if (!isFinite(t)) {\n            return null;\n        }\n        return this.at(t);\n    }\n    intersectsPlane(plane) {\n        // check if the ray lies on the plane first\n        const distToPoint = plane.distanceToPoint(this.origin);\n        if (distToPoint === 0) {\n            return true;\n        }\n        const denominator = plane.normal.dot(this.direction);\n        if (denominator * distToPoint < 0) {\n            return true;\n        }\n        // ray origin is behind the plane (and is pointing behind it)\n        return false;\n    }\n    intersectBox(box) {\n        let tmin, tmax, tymin, tymax, tzmin, tzmax;\n        const invdirx = 1 / this.direction.x, invdiry = 1 / this.direction.y, invdirz = 1 / this.direction.z;\n        const origin = this.origin;\n        if (invdirx >= 0) {\n            tmin = (box.min.x - origin.x) * invdirx;\n            tmax = (box.max.x - origin.x) * invdirx;\n        }\n        else {\n            tmin = (box.max.x - origin.x) * invdirx;\n            tmax = (box.min.x - origin.x) * invdirx;\n        }\n        if (invdiry >= 0) {\n            tymin = (box.min.y - origin.y) * invdiry;\n            tymax = (box.max.y - origin.y) * invdiry;\n        }\n        else {\n            tymin = (box.max.y - origin.y) * invdiry;\n            tymax = (box.min.y - origin.y) * invdiry;\n        }\n        if (tmin > tymax || tymin > tmax)\n            return null;\n        // These lines also handle the case where tmin or tmax is NaN\n        // (result of 0 * Infinity). x !== x returns true if x is NaN\n        if (tymin > tmin || tmin !== tmin)\n            tmin = tymin;\n        if (tymax < tmax || tmax !== tmax)\n            tmax = tymax;\n        if (invdirz >= 0) {\n            tzmin = (box.min.z - origin.z) * invdirz;\n            tzmax = (box.max.z - origin.z) * invdirz;\n        }\n        else {\n            tzmin = (box.max.z - origin.z) * invdirz;\n            tzmax = (box.min.z - origin.z) * invdirz;\n        }\n        if (tmin > tzmax || tzmin > tmax)\n            return null;\n        if (tzmin > tmin || tmin !== tmin)\n            tmin = tzmin;\n        if (tzmax < tmax || tmax !== tmax)\n            tmax = tzmax;\n        // return point closest to the ray (positive side)\n        if (tmax < 0)\n            return null;\n        return this.at(tmin >= 0 ? tmin : tmax);\n    }\n    intersectsBox(box) {\n        return this.intersectBox(box) !== null;\n    }\n    intersectTriangle(triangle, backFaceCulling = false) {\n        // Compute the offset origin, edges, and normal.\n        const a = triangle.a, b = triangle.b, c = triangle.c;\n        const edge1 = new Vector3().copy(b).sub(a);\n        const edge2 = new Vector3().copy(c).sub(a);\n        const normal = new Vector3().copy(edge1).cross(edge2);\n        // Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n        // E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n        //   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n        //   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n        //   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n        let DdN = this.direction.dot(normal);\n        let sign;\n        if (DdN > 0) {\n            if (backFaceCulling)\n                return null;\n            sign = 1;\n        }\n        else if (DdN < 0) {\n            sign = -1;\n            DdN = -DdN;\n        }\n        else {\n            return null;\n        }\n        const diff = new Vector3().copy(this.origin).sub(a);\n        const DdQxE2 = sign * this.direction.dot(edge2.copy(diff).cross(edge2));\n        // b1 < 0, no intersection\n        if (DdQxE2 < 0) {\n            return null;\n        }\n        const DdE1xQ = sign * this.direction.dot(edge1.cross(diff));\n        // b2 < 0, no intersection\n        if (DdE1xQ < 0) {\n            return null;\n        }\n        // b1+b2 > 1, no intersection\n        if (DdQxE2 + DdE1xQ > DdN) {\n            return null;\n        }\n        // Line intersects triangle, check if ray does.\n        const QdN = -sign * diff.dot(normal);\n        // t < 0, no intersection\n        if (QdN < 0) {\n            return null;\n        }\n        // Ray intersects triangle.\n        return this.at(QdN / DdN);\n    }\n    intersectsTriangle(triangle) {\n        return this.intersectTriangle(triangle) !== null;\n    }\n    applyMatrix4(matrix4) {\n        this.origin.applyMatrix4(matrix4);\n        this.direction.transformDirection(matrix4);\n        return this;\n    }\n    equals(ray) {\n        return ray.origin.equals(this.origin) && ray.direction.equals(this.direction);\n    }\n}\n","import { Box3 } from \"./Box3\";\nimport { Vector3 } from \"./Vector3\";\nexport class Sphere {\n    constructor(center = new Vector3(), radius = 0) {\n        this.center = new Vector3();\n        this.radius = 0;\n        this.center = center;\n        this.radius = radius;\n    }\n    set(center, radius) {\n        this.center.copy(center);\n        this.radius = radius;\n        return this;\n    }\n    setFromPoints(points, optionalCenter) {\n        if (optionalCenter !== undefined) {\n            this.center.copy(optionalCenter);\n        }\n        else {\n            this.center = new Box3().setFromPoints(points).getCenter();\n        }\n        let maxRadiusSq = 0;\n        for (let i = 0, il = points.length; i < il; i++) {\n            maxRadiusSq = Math.max(maxRadiusSq, this.center.distanceToSquared(points[i]));\n        }\n        this.radius = Math.sqrt(maxRadiusSq);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(sphere) {\n        this.center.copy(sphere.center);\n        this.radius = sphere.radius;\n        return this;\n    }\n    empty() {\n        return this.radius <= 0;\n    }\n    containsPoint(point) {\n        return point.distanceToSquared(this.center) <= this.radius * this.radius;\n    }\n    distanceToPoint(point) {\n        return point.distanceTo(this.center) - this.radius;\n    }\n    intersectsSphere(sphere) {\n        const radiusSum = this.radius + sphere.radius;\n        return sphere.center.distanceToSquared(this.center) <= radiusSum * radiusSum;\n    }\n    intersectsBox(box) {\n        return box.intersectsSphere(this);\n    }\n    intersectsPlane(plane) {\n        return Math.abs(plane.distanceToPoint(this.center)) <= this.radius;\n    }\n    clampPoint(point) {\n        const deltaLengthSquared = this.center.distanceToSquared(point);\n        const result = new Vector3().copy(point);\n        if (deltaLengthSquared > this.radius * this.radius) {\n            result.sub(this.center).normalize();\n            result.multiplyScalar(this.radius).add(this.center);\n        }\n        return result;\n    }\n    getBoundingBox() {\n        return new Box3().set(this.center, this.center).expandByScalar(this.radius);\n    }\n    applyMatrix4(matrix) {\n        this.center.applyMatrix4(matrix);\n        this.radius = this.radius * matrix.getMaxScaleOnAxis();\n        return this;\n    }\n    translate(offset) {\n        this.center.add(offset);\n        return this;\n    }\n    equals(sphere) {\n        return sphere.center.equals(this.center) && sphere.radius === this.radius;\n    }\n}\n","import { MathUtil } from \"./Math\";\nexport class Spherical {\n    constructor(radius = 1.0, phi = 0, theta = 0) {\n        this.radius = radius;\n        this.phi = phi;\n        this.theta = theta;\n    }\n    set(radius, phi, theta) {\n        this.radius = radius;\n        this.phi = phi;\n        this.theta = theta;\n        return this;\n    }\n    copy(other) {\n        this.radius = other.radius;\n        this.phi = other.phi;\n        this.theta = other.theta;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    // restrict phi to be betwee EPS and PI-EPS\n    makeSafe() {\n        const EPS = 0.000001;\n        this.phi = Math.max(EPS, Math.min(Math.PI - EPS, this.phi));\n        return this;\n    }\n    setFromVector3(vec3) {\n        this.radius = vec3.length();\n        if (this.radius === 0) {\n            this.theta = 0;\n            this.phi = 0;\n        }\n        else {\n            this.theta = Math.atan2(vec3.x, vec3.z); // equator angle around y-up axis\n            this.phi = Math.acos(MathUtil.clamp(vec3.y / this.radius, -1, 1)); // polar angle\n        }\n        return this;\n    }\n}\n","import { Line3 } from \"./Line3\";\nimport { Plane } from \"./Plane\";\nimport { Vector3 } from \"./Vector3\";\nexport class Triangle {\n    constructor(a = new Vector3(), b = new Vector3(), c = new Vector3()) {\n        this.a = new Vector3();\n        this.b = new Vector3();\n        this.c = new Vector3();\n        this.a = a;\n        this.b = b;\n        this.c = c;\n    }\n    set(a, b, c) {\n        this.a.copy(a);\n        this.b.copy(b);\n        this.c.copy(c);\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(triangle) {\n        this.a.copy(triangle.a);\n        this.b.copy(triangle.b);\n        this.c.copy(triangle.c);\n        return this;\n    }\n    area() {\n        const v0 = new Vector3().copy(this.c).sub(this.b);\n        const v1 = new Vector3().copy(this.a).sub(this.b);\n        return v0.cross(v1).length() * 0.5;\n    }\n    midpoint() {\n        return new Vector3()\n            .copy(this.a)\n            .add(this.b)\n            .add(this.c)\n            .multiplyScalar(1 / 3);\n    }\n    normal() {\n        const vec = new Vector3().copy(this.a).sub(this.b);\n        const result = new Vector3()\n            .copy(this.c)\n            .sub(this.b)\n            .cross(vec);\n        const resultLengthSquared = result.lengthSquared();\n        if (resultLengthSquared > 0) {\n            return result.multiplyScalar(1 / Math.sqrt(resultLengthSquared));\n        }\n        return result.set(0, 0, 0);\n    }\n    plane() {\n        return new Plane().setFromCoplanarPoints(this.a, this.b, this.c);\n    }\n    /**\n     * based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n     * @param point\n     */\n    barycoordFromPoint(point) {\n        const v0 = new Vector3().copy(this.c).sub(this.a);\n        const v1 = new Vector3().copy(this.b).sub(this.a);\n        const v2 = new Vector3().copy(point).sub(this.a);\n        const dot00 = v0.dot(v0);\n        const dot01 = v0.dot(v1);\n        const dot02 = v0.dot(v2);\n        const dot11 = v1.dot(v1);\n        const dot12 = v1.dot(v2);\n        const denom = dot00 * dot11 - dot01 * dot01;\n        // collinear or singular triangle\n        if (denom === 0) {\n            // arbitrary location outside of triangle?\n            // not sure if this is the best idea, maybe should be returning undefined\n            return new Vector3().set(-2, -1, -1);\n        }\n        const invDenom = 1 / denom;\n        const u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n        const v = (dot00 * dot12 - dot01 * dot02) * invDenom;\n        // barycentric coordinates must always sum to 1\n        return new Vector3().set(1 - u - v, v, u);\n    }\n    containsPoint(point) {\n        const result = this.barycoordFromPoint(point);\n        return result.x >= 0 && result.y >= 0 && result.x + result.y <= 1;\n    }\n    closestPointToPoint(point) {\n        // project the point onto the plane of the triangle\n        const plane = new Plane().setFromCoplanarPoints(this.a, this.b, this.c);\n        const projectedPoint = plane.projectPoint(point);\n        // check if the projection lies within the triangle\n        if (this.containsPoint(projectedPoint) === true) {\n            // if so, this is the closest point\n            return new Vector3().copy(projectedPoint);\n        }\n        else {\n            const result = new Vector3();\n            let minDistance = Infinity;\n            // if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\n            const edgeList = [new Line3(this.a, this.b), new Line3(this.b, this.c), new Line3(this.c, this.a)];\n            for (let i = 0; i < edgeList.length; i++) {\n                const closestPoint = edgeList[i].closestPointToPoint(projectedPoint, true);\n                const distance = projectedPoint.distanceToSquared(closestPoint);\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    result.copy(closestPoint);\n                }\n            }\n            return result;\n        }\n    }\n    equals(triangle) {\n        return triangle.a.equals(this.a) && triangle.b.equals(this.b) && triangle.c.equals(this.c);\n    }\n}\n","export class Vector2 {\n    get x() {\n        return this._x;\n    }\n    set x(x) {\n        this._x = x;\n    }\n    get y() {\n        return this._y;\n    }\n    set y(y) {\n        this._y = y;\n    }\n    get width() {\n        return this.x;\n    }\n    set width(width) {\n        this._x = width;\n    }\n    get height() {\n        return this.y;\n    }\n    set height(height) {\n        this._y = height;\n    }\n    constructor(x = 0, y = 0) {\n        this._x = x;\n        this._y = y;\n    }\n    set(x, y) {\n        this._x = x;\n        this._y = y;\n        return this;\n    }\n    setScalar(scalar) {\n        return this.set(scalar, scalar);\n    }\n    copy(v) {\n        return this.set(v.x, v.y);\n    }\n    add(v) {\n        return this.set(this.x + v.x, this.y + v.y);\n    }\n    addScalar(s) {\n        return this.set(this.x + s, this.y + s);\n    }\n    sub(v) {\n        return this.set(this.x - v.x, this.y - v.y);\n    }\n    subScalar(s) {\n        return this.set(this.x - s, this.y - s);\n    }\n    multiply(v) {\n        return this.set(this.x * v.x, this.y * v.y);\n    }\n    multiplyScalar(s) {\n        return this.set(this.x * s, this.y * s);\n    }\n    divide(v) {\n        return this.set(this.x / v.x, this.y / v.y);\n    }\n    divideScalar(s) {\n        return this.set(this.x / s, this.y / s);\n    }\n    applyMatrix3(m) {\n        const x = this.x, y = this.y;\n        const e = m.elements;\n        return this.set(e[0] * x + e[3] * y + e[6], e[1] * x + e[4] * y + e[7]);\n    }\n    min(v) {\n        this.x = Math.min(this.x, v.x);\n        this.y = Math.min(this.y, v.y);\n        return this;\n    }\n    max(v) {\n        this.x = Math.max(this.x, v.x);\n        this.y = Math.max(this.y, v.y);\n        return this;\n    }\n    clamp(min, max) {\n        return this.set(Math.max(min.x, Math.min(max.x, this.x)), Math.max(min.y, Math.min(max.y, this.y)));\n    }\n    negate() {\n        return this.set(-this.x, -this.y);\n    }\n    dot(v) {\n        return this.x * v.x + this.y * v.y;\n    }\n    lengthSquared() {\n        return this.x * this.x + this.y * this.y;\n    }\n    length() {\n        return Math.sqrt(this.lengthSquared());\n    }\n    manhattanLength() {\n        return Math.abs(this.x) + Math.abs(this.y);\n    }\n    normalize() {\n        return this.divideScalar(this.length() || 1);\n    }\n    setLength(length) {\n        return this.normalize().multiplyScalar(length);\n    }\n    lerp(v, alpha) {\n        return this.set(this.x + (v.x - this.x) * alpha, this.y + (v.y - this.y) * alpha);\n    }\n    lerpVectors(v1, v2, alpha) {\n        return this.copy(v2)\n            .sub(v1)\n            .multiplyScalar(alpha)\n            .add(v1);\n    }\n    equals(v) {\n        return v.x === this.x && v.y === this.y;\n    }\n    fromArray(array, offset = 0) {\n        return this.set(array[offset], array[offset + 1]);\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        return array;\n    }\n    rotateAround(center, angle) {\n        const c = Math.cos(angle), s = Math.sin(angle);\n        const x = this.x - center.x;\n        const y = this.y - center.y;\n        return this.set(x * c - y * s + center.x, x * s + y * c + center.y);\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { MathUtil } from \"./Math\";\nimport { Quaternion } from \"./Quaternion\";\nexport class Vector3 {\n    constructor(x = 0, y = 0, z = 0) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n    }\n    get x() {\n        return this._x;\n    }\n    set x(x) {\n        this._x = x;\n    }\n    get y() {\n        return this._y;\n    }\n    set y(y) {\n        this._y = y;\n    }\n    get z() {\n        return this._z;\n    }\n    set z(z) {\n        this._z = z;\n    }\n    set(x, y, z) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        return this;\n    }\n    setScalar(scalar) {\n        return this.set(scalar, scalar, scalar);\n    }\n    copy(vec) {\n        return this.set(vec.x, vec.y, vec.z);\n    }\n    add(vec) {\n        return this.set(this.x + vec.x, this.y + vec.y, this.z + vec.z);\n    }\n    addScalar(scalar) {\n        return this.set(this.x + scalar, this.y + scalar, this.z + scalar);\n    }\n    sub(vec) {\n        return this.set(this.x - vec.x, this.y - vec.y, this.z - vec.z);\n    }\n    subScalar(scalar) {\n        return this.set(this.x - scalar, this.y - scalar, this.z - scalar);\n    }\n    multiply(vec) {\n        return this.set(this.x * vec.x, this.y * vec.y, this.z * vec.z);\n    }\n    multiplyScalar(scalar) {\n        return this.set(this.x * scalar, this.y * scalar, this.z * scalar);\n    }\n    divide(vec) {\n        return this.set(this.x / vec.x, this.y / vec.y, this.z / vec.z);\n    }\n    divideScalar(scalar) {\n        return this.set(this.x / scalar, this.y / scalar, this.z / scalar);\n    }\n    applyEuler(euler) {\n        const quaternion = new Quaternion();\n        return this.applyQuaternion(quaternion.setFromEuler(euler));\n    }\n    applyAxisAngle(axis, angle) {\n        const quaternion = new Quaternion();\n        return this.applyQuaternion(quaternion.setFromAxisAngle(axis, angle));\n    }\n    applyMatrix3(m) {\n        const x = this.x, y = this.y, z = this.z;\n        const e = m.elements;\n        return this.set(e[0] * x + e[3] * y + e[6] * z, e[1] * x + e[4] * y + e[7] * z, e[2] * x + e[5] * y + e[8] * z);\n    }\n    applyMatrix4(matrix) {\n        const x = this.x, y = this.y, z = this.z;\n        const e = matrix.elements;\n        const w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n        return this.set((e[0] * x + e[4] * y + e[8] * z + e[12]) * w, (e[1] * x + e[5] * y + e[9] * z + e[13]) * w, (e[2] * x + e[6] * y + e[10] * z + e[14]) * w);\n    }\n    applyQuaternion(quaternion) {\n        const x = this.x, y = this.y, z = this.z;\n        const qx = quaternion.x, qy = quaternion.y, qz = quaternion.z, qw = quaternion.w;\n        // calculate quat * vector\n        const ix = qw * x + qy * z - qz * y;\n        const iy = qw * y + qz * x - qx * z;\n        const iz = qw * z + qx * y - qy * x;\n        const iw = -qx * x - qy * y - qz * z;\n        // calculate result * inverse quat\n        return this.set(ix * qw + iw * -qx + iy * -qz - iz * -qy, iy * qw + iw * -qy + iz * -qx - ix * -qz, iz * qw + iw * -qz + ix * -qy - iy * -qx);\n    }\n    transformDirection(mat4) {\n        const x = this.x, y = this.y, z = this.z;\n        const e = mat4.elements;\n        return this.set(e[0] * x + e[4] * y + e[8] * z, e[1] * x + e[5] * y + e[9] * z, e[2] * x + e[6] * y + e[10] * z).normalize();\n    }\n    min(vec) {\n        return this.set(Math.min(this.x, vec.x), Math.min(this.y, vec.y), Math.min(this.z, vec.z));\n    }\n    max(vec) {\n        return this.set(Math.max(this.x, vec.x), Math.max(this.y, vec.y), Math.max(this.z, vec.z));\n    }\n    clamp(min, max) {\n        return this.set(Math.max(min.x, Math.min(max.x, this.x)), Math.max(min.y, Math.min(max.y, this.y)), Math.max(min.z, Math.min(max.z, this.z)));\n    }\n    negate() {\n        return this.set(-this.x, -this.y, -this.z);\n    }\n    dot(v) {\n        return this.x * v.x + this.y * v.y + this.z * v.z;\n    }\n    lengthSquared() {\n        const x = this.x, y = this.y, z = this.z;\n        return x * x + y * y + z * z;\n    }\n    length() {\n        const x = this.x, y = this.y, z = this.z;\n        return Math.sqrt(x * x + y * y + z * z);\n    }\n    setLength(length) {\n        return this.normalize().multiplyScalar(length);\n    }\n    manhattanLength() {\n        const x = this.x, y = this.y, z = this.z;\n        return Math.abs(x) + Math.abs(y) + Math.abs(z);\n    }\n    normalize() {\n        return this.divideScalar(this.length() || 1);\n    }\n    lerp(vec, alpha) {\n        return this.set((vec.x - this.x) * alpha, (vec.y - this.y) * alpha, (vec.z - this.z) * alpha);\n    }\n    lerpVectors(v1, v2, alpha) {\n        return this.set(v2.x - v1.x, v2.y - v1.y, v2.z - v1.z)\n            .multiplyScalar(alpha)\n            .add(v1);\n    }\n    cross(vec) {\n        const ax = this.x, ay = this.y, az = this.z;\n        const bx = vec.x, by = vec.y, bz = vec.z;\n        return this.set(ay * bz - az * by, az * bx - ax * bz, ax * by - ay * bx);\n    }\n    projectOnVector(vector) {\n        const scalar = vector.dot(this) / vector.lengthSquared();\n        return this.copy(vector).multiplyScalar(scalar);\n    }\n    projectOnPlane(planeNormal) {\n        const vec = new Vector3();\n        vec.copy(this).projectOnVector(planeNormal);\n        return this.sub(vec);\n    }\n    /**\n     * reflect incident vector off plane orthogonal to normal\n     * normal is assumed to have unit length\n     * @param normal\n     * @returns {Vector3}\n     */\n    reflect(normal) {\n        const vec = new Vector3();\n        return this.sub(vec.copy(normal).multiplyScalar(2 * this.dot(normal)));\n    }\n    angleTo(v) {\n        const theta = this.dot(v) / Math.sqrt(this.lengthSquared() * v.lengthSquared());\n        return Math.acos(MathUtil.clamp(theta, -1, 1));\n    }\n    distanceTo(vec) {\n        return Math.sqrt(this.distanceToSquared(vec));\n    }\n    distanceToSquared(vec) {\n        const dx = this.x - vec.x, dy = this.y - vec.y, dz = this.z - vec.z;\n        return dx * dx + dy * dy + dz * dz;\n    }\n    equals(vec) {\n        return vec.x === this.x && vec.y === this.y && vec.z === this.z;\n    }\n    setFromSpherical(s) {\n        const sinPhiRadius = Math.sin(s.phi) * s.radius;\n        this.x = sinPhiRadius * Math.sin(s.theta);\n        this.y = Math.cos(s.phi) * s.radius;\n        this.z = sinPhiRadius * Math.cos(s.theta);\n        return this;\n    }\n    setFromMatrixPosition(m) {\n        const e = m.elements;\n        return this.set(e[12], e[13], e[14]);\n    }\n    setFromMatrixScale(m) {\n        const sx = this.setFromMatrixColumn(m, 0).length();\n        const sy = this.setFromMatrixColumn(m, 1).length();\n        const sz = this.setFromMatrixColumn(m, 2).length();\n        this.x = sx;\n        this.y = sy;\n        this.z = sz;\n        return this;\n    }\n    setFromMatrixColumn(m, index) {\n        return this.fromArray(m.elements, index * 4);\n    }\n    fromArray(array, offset = 0) {\n        return this.set(array[offset], array[offset + 1], array[offset + 2]);\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        array[offset + 2] = this.z;\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","export class Vector4 {\n    constructor(x = 0, y = 0, z = 0, w = 0) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n    }\n    get x() {\n        return this._x;\n    }\n    set x(x) {\n        this._x = x;\n    }\n    get y() {\n        return this._y;\n    }\n    set y(y) {\n        this._y = y;\n    }\n    get z() {\n        return this._z;\n    }\n    set z(z) {\n        this._z = z;\n    }\n    get w() {\n        return this._w;\n    }\n    set w(w) {\n        this._w = w;\n    }\n    set(x, y, z, w) {\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n        return this;\n    }\n    setScalar(scalar) {\n        return this.set(scalar, scalar, scalar, scalar);\n    }\n    copy(v) {\n        return this.set(v.x, v.y, v.z, (v instanceof Vector4 ? v.w : undefined) || 1);\n    }\n    add(v) {\n        return this.set(this.x + v.x, this.y + v.y, this.z + v.z, this.w + v.w);\n    }\n    addScalar(s) {\n        return this.set(this.x + s, this.y + s, this.z + s, this.w + s);\n    }\n    sub(v) {\n        return this.set(this.x - v.x, this.y - v.y, this.z - v.z, this.w - v.w);\n    }\n    subScalar(s) {\n        return this.set(this.x - s, this.y - s, this.z - s, this.w - s);\n    }\n    multiplyScalar(s) {\n        return this.set(this.x * s, this.y * s, this.z * s, this.w * s);\n    }\n    divideScalar(s) {\n        return this.set(this.x / s, this.y / s, this.z / s, this.w / s);\n    }\n    applyMatrix4(m) {\n        const x = this.x, y = this.y, z = this.z, w = this.w;\n        const e = m.elements;\n        return this.set(e[0] * x + e[4] * y + e[8] * z + e[12] * w, e[1] * x + e[5] * y + e[9] * z + e[13] * w, e[2] * x + e[6] * y + e[10] * z + e[14] * w, e[3] * x + e[7] * y + e[11] * z + e[15] * w);\n    }\n    /**\n     * http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n     * q is assumed to be normalized\n     * @param q\n     * @returns {Vector4}\n     */\n    setAxisAngleFromQuaternion(q) {\n        const s = Math.sqrt(1 - q.w * q.w);\n        if (s < 0.0001) {\n            return this.set(1, 0, 0, 2 * Math.acos(q.w));\n        }\n        else {\n            return this.set(q.x / s, q.y / s, q.z / s, 2 * Math.acos(q.w));\n        }\n    }\n    /**\n     * http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n     * @param m\n     * @returns {Vector4}\n     */\n    setAxisAngleFromRotationMatrix(m) {\n        // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n        let angle, x, y, z; // variables for result\n        const epsilon = 0.01, // margin to allow for rounding errors\n        epsilon2 = 0.1, // margin to distinguish between 0 and 180 degrees\n        te = m.elements, m11 = te[0], m12 = te[4], m13 = te[8], m21 = te[1], m22 = te[5], m23 = te[9], m31 = te[2], m32 = te[6], m33 = te[10];\n        if (Math.abs(m12 - m21) < epsilon && Math.abs(m13 - m31) < epsilon && Math.abs(m23 - m32) < epsilon) {\n            // singularity found\n            // first check for identity matrix which must have +1 for all terms\n            // in leading diagonal and zero in other terms\n            if (Math.abs(m12 + m21) < epsilon2 &&\n                Math.abs(m13 + m31) < epsilon2 &&\n                Math.abs(m23 + m32) < epsilon2 &&\n                Math.abs(m11 + m22 + m33 - 3) < epsilon2) {\n                // this singularity is identity matrix so angle = 0\n                // zero angle, arbitrary axis\n                return this.set(1, 0, 0, 0);\n            }\n            // otherwise this singularity is angle = 180\n            angle = Math.PI;\n            const xx = (m11 + 1) / 2;\n            const yy = (m22 + 1) / 2;\n            const zz = (m33 + 1) / 2;\n            const xy = (m12 + m21) / 4;\n            const xz = (m13 + m31) / 4;\n            const yz = (m23 + m32) / 4;\n            if (xx > yy && xx > zz) {\n                // m11 is the largest diagonal term\n                if (xx < epsilon) {\n                    x = 0;\n                    y = 0.707106781;\n                    z = 0.707106781;\n                }\n                else {\n                    x = Math.sqrt(xx);\n                    y = xy / x;\n                    z = xz / x;\n                }\n            }\n            else if (yy > zz) {\n                // m22 is the largest diagonal term\n                if (yy < epsilon) {\n                    x = 0.707106781;\n                    y = 0;\n                    z = 0.707106781;\n                }\n                else {\n                    y = Math.sqrt(yy);\n                    x = xy / y;\n                    z = yz / y;\n                }\n            }\n            else {\n                // m33 is the largest diagonal term so base result on this\n                if (zz < epsilon) {\n                    x = 0.707106781;\n                    y = 0.707106781;\n                    z = 0;\n                }\n                else {\n                    z = Math.sqrt(zz);\n                    x = xz / z;\n                    y = yz / z;\n                }\n            }\n            // return 180 deg rotation\n            return this.set(x, y, z, angle);\n        }\n        // as we have reached here there are no singularities so we can handle normally\n        let s = Math.sqrt((m32 - m23) * (m32 - m23) + (m13 - m31) * (m13 - m31) + (m21 - m12) * (m21 - m12)); // used to normalize\n        if (Math.abs(s) < 0.001)\n            s = 1;\n        // prevent divide by zero, should not happen if matrix is orthogonal and should be\n        // caught by singularity test above, but I\"ve left it in just in case\n        return this.set((m32 - m23) / s, (m13 - m31) / s, (m21 - m12) / s, Math.acos((m11 + m22 + m33 - 1) / 2));\n    }\n    min(v) {\n        return this.set(Math.min(this.x, v.x), Math.min(this.y, v.y), Math.min(this.z, v.z), Math.min(this.w, v.w));\n    }\n    max(v) {\n        return this.set(Math.max(this.x, v.x), Math.max(this.y, v.y), Math.max(this.z, v.z), Math.max(this.w, v.w));\n    }\n    clamp(min, max) {\n        return this.set(Math.max(min.x, Math.min(max.x, this.x)), Math.max(min.y, Math.min(max.y, this.y)), Math.max(min.z, Math.min(max.z, this.z)), Math.max(min.w, Math.min(max.w, this.w)));\n    }\n    negate() {\n        return this.set(-this.x, -this.y, -this.z, -this.w);\n    }\n    dot(v) {\n        return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n    }\n    lengthSquared() {\n        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n    }\n    length() {\n        return Math.sqrt(this.lengthSquared());\n    }\n    manhattanLength() {\n        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);\n    }\n    normalize() {\n        return this.divideScalar(this.length() || 1);\n    }\n    setLength(length) {\n        return this.normalize().multiplyScalar(length);\n    }\n    lerp(v, alpha) {\n        return this.set(this.x + (v.x - this.x) * alpha, this.y + (v.y - this.y) * alpha, this.z + (v.z - this.z) * alpha, this.w + (v.w - this.w) * alpha);\n    }\n    lerpVectors(v1, v2, alpha) {\n        return this.copy(v2)\n            .sub(v1)\n            .multiplyScalar(alpha)\n            .add(v1);\n    }\n    equals(v) {\n        return v.x === this.x && v.y === this.y && v.z === this.z && v.w === this.w;\n    }\n    fromArray(array, offset = 0) {\n        return this.set(array[offset], array[offset + 1], array[offset + 2], array[offset + 3]);\n    }\n    toArray(array = [], offset = 0) {\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        array[offset + 2] = this.z;\n        array[offset + 3] = this.w;\n        return array;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nexport class Bone extends Object3D {\n    constructor() {\n        super(...arguments);\n        this.type = \"Bone\";\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nexport class Group extends Object3D {\n    constructor() {\n        super(...arguments);\n        this.type = \"IGroup\";\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class LOD extends Object3D {\n    constructor() {\n        super(...arguments);\n        this.type = \"LOD\";\n        this.levels = [];\n    }\n    addLevel(object, distance = 0) {\n        const levels = this.levels;\n        distance = Math.abs(distance);\n        let l = 0;\n        for (; l < levels.length; l++) {\n            if (distance < levels[l].distance) {\n                break;\n            }\n        }\n        levels.splice(l, 0, { distance: distance, object: object });\n        this.add(object);\n        return this;\n    }\n    getObjectForDistance(distance) {\n        const levels = this.levels;\n        let i = 1;\n        for (const l = levels.length; i < l; i++) {\n            if (distance < levels[i].distance) {\n                break;\n            }\n        }\n        return levels[i - 1].object;\n    }\n    raycast(raycaster, intersects = []) {\n        const matrixPosition = new Vector3().setFromMatrixPosition(this.matrixWorld);\n        const distance = raycaster.ray.origin.distanceTo(matrixPosition);\n        this.getObjectForDistance(distance).raycast(raycaster, intersects);\n        return intersects;\n    }\n    update(camera) {\n        const levels = this.levels;\n        if (levels.length > 1) {\n            const v1 = new Vector3().setFromMatrixPosition(camera.matrixWorld);\n            const v2 = new Vector3().setFromMatrixPosition(this.matrixWorld);\n            const distance = v1.distanceTo(v2);\n            levels[0].object.visible = true;\n            let i = 1;\n            const l = levels.length;\n            for (; i < l; i++) {\n                if (distance >= levels[i].distance) {\n                    levels[i - 1].object.visible = false;\n                    levels[i].object.visible = true;\n                }\n                else {\n                    break;\n                }\n            }\n            for (; i < l; i++) {\n                levels[i].object.visible = false;\n            }\n        }\n        return this;\n    }\n    copy(source) {\n        super.copy(source);\n        const levels = source.levels;\n        for (let i = 0, l = levels.length; i < l; i++) {\n            const level = levels[i];\n            this.addLevel(level.object.clone(), level.distance);\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Object3D } from \"../core/Object3D\";\nimport { LineBasicMaterial } from \"../materials/LineBasicMaterial\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Ray } from \"../math/Ray\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Vector3 } from \"../math/Vector3\";\n// import { LineSegments } from \"./LineSegments\";\nexport class Line extends Object3D {\n    constructor(geometry = new BufferGeometry(), material = new LineBasicMaterial({\n        color: Math.random() * 0xffffff,\n    })) {\n        super();\n        this.type = \"Line\";\n        this.geometry = geometry;\n        this.material = material;\n    }\n    raycast(raycaster, intersects) {\n        const precision = raycaster.linePrecision;\n        const precisionSquared = precision * precision;\n        const geometry = this.geometry;\n        const matrixWorld = this.matrixWorld;\n        // Checking boundingSphere distance to ray\n        if (geometry.boundingSphere === null)\n            geometry.computeBoundingSphere();\n        const sphere = new Sphere().copy(geometry.boundingSphere);\n        sphere.applyMatrix4(matrixWorld);\n        if (raycaster.ray.intersectsSphere(sphere) === false)\n            return;\n        const inverseMatrix = new Matrix4().getInverse(matrixWorld);\n        const ray = new Ray();\n        ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);\n        const vStart = new Vector3();\n        const vEnd = new Vector3();\n        const interSegment = new Vector3();\n        const interRay = new Vector3();\n        //const step: number = this instanceof LineSegments ? 2 : 1;\n        const step = 1;\n        if (geometry instanceof BufferGeometry) {\n            const index = geometry.index;\n            const attributes = geometry.attributes;\n            const positions = attributes.position.array;\n            if (index !== null) {\n                const indices = index.array;\n                for (let i = 0, l = indices.length - 1; i < l; i += step) {\n                    const a = indices[i];\n                    const b = indices[i + 1];\n                    vStart.fromArray(positions, a * 3);\n                    vEnd.fromArray(positions, b * 3);\n                    const distSquared = ray.distanceSquareToSegment(vStart, vEnd, interRay, interSegment);\n                    if (distSquared > precisionSquared)\n                        continue;\n                    interRay.applyMatrix4(this.matrixWorld); // Move back to world space for distance calculation\n                    const distance = raycaster.ray.origin.distanceTo(interRay);\n                    if (distance < raycaster.near || distance > raycaster.far) {\n                        continue;\n                    }\n                    intersects.push({\n                        distance: distance,\n                        index: i,\n                        object: this,\n                        // What do we want? intersection point on the ray or on the segment??\n                        // point: raycaster.ray.at( distance ),\n                        point: interSegment.clone().applyMatrix4(this.matrixWorld),\n                    });\n                }\n            }\n            else {\n                for (let i = 0, l = positions.length / 3 - 1; i < l; i += step) {\n                    vStart.fromArray(positions, 3 * i);\n                    vEnd.fromArray(positions, 3 * i + 3);\n                    const distSquared = ray.distanceSquareToSegment(vStart, vEnd, interRay, interSegment);\n                    if (distSquared > precisionSquared)\n                        continue;\n                    interRay.applyMatrix4(this.matrixWorld); // Move back to world space for distance calculation\n                    const distance = raycaster.ray.origin.distanceTo(interRay);\n                    if (distance < raycaster.near || distance > raycaster.far) {\n                        continue;\n                    }\n                    intersects.push({\n                        distance: distance,\n                        face: null,\n                        faceIndex: null,\n                        index: i,\n                        object: this,\n                        // What do we want? intersection point on the ray or on the segment??\n                        // point: raycaster.ray.at( distance ),\n                        point: interSegment.clone().applyMatrix4(this.matrixWorld),\n                    });\n                }\n            }\n        }\n        else if (geometry instanceof Geometry) {\n            const vertices = geometry.vertices;\n            const nbVertices = vertices.length;\n            for (let i = 0; i < nbVertices - 1; i += step) {\n                const distSquared = ray.distanceSquareToSegment(vertices[i], vertices[i + 1], interRay, interSegment);\n                if (distSquared > precisionSquared)\n                    continue;\n                interRay.applyMatrix4(this.matrixWorld); // Move back to world space for distance calculation\n                const distance = raycaster.ray.origin.distanceTo(interRay);\n                if (distance < raycaster.near || distance > raycaster.far) {\n                    continue;\n                }\n                intersects.push({\n                    distance: distance,\n                    face: null,\n                    faceIndex: null,\n                    index: i,\n                    object: this,\n                    // What do we want? intersection point on the ray or on the segment??\n                    // point: raycaster.ray.at( distance ),\n                    point: interSegment.clone().applyMatrix4(this.matrixWorld),\n                });\n            }\n        }\n    }\n    clone() {\n        return new this.constructor(this.geometry, this.material).copy(this);\n    }\n}\n","import { Line } from \"./Line\";\nexport class LineLoop extends Line {\n    constructor() {\n        super(...arguments);\n        this.type = \"LineLoop\";\n    }\n}\n","import { Line } from \"./Line\";\nexport class LineSegments extends Line {\n    constructor() {\n        super(...arguments);\n        this.type = \"LineSegments\";\n    }\n}\n","import { BackSide, DoubleSide, TrianglesDrawMode } from \"../constants\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Face3 } from \"../core/Face3\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Object3D } from \"../core/Object3D\";\nimport { MeshBasicMaterial } from \"../materials/MeshBasicMaterial\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Ray } from \"../math/Ray\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Triangle } from \"../math/Triangle\";\nimport { Vector2 } from \"../math/Vector2\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { vectorFromBufferAttribute } from \"../utils\";\nexport class Mesh extends Object3D {\n    constructor(geometry = new BufferGeometry(), material = new MeshBasicMaterial({\n        color: Math.random() * 0xffffff,\n    })) {\n        super();\n        this.type = \"Mesh\";\n        this.drawMode = TrianglesDrawMode;\n        this.morphTargetInfluences = [];\n        this.morphTargetDictionary = {};\n        this.geometry = geometry;\n        this.material = material;\n        this.updateMorphTargets();\n    }\n    static uvIntersection(point, triangle, uv1, uv2, uv3) {\n        const baryCoord = triangle.barycoordFromPoint(point);\n        uv1.multiplyScalar(baryCoord.x);\n        uv2.multiplyScalar(baryCoord.y);\n        uv3.multiplyScalar(baryCoord.z);\n        uv1.add(uv2).add(uv3);\n        return uv1.clone();\n    }\n    static checkIntersection(object, material, raycaster, ray, pA, pB, pC, point) {\n        let intersect;\n        const intersectionPointWorld = new Vector3();\n        if (material.side === BackSide) {\n            intersect = ray.intersectTriangle(new Triangle(pC, pB, pA), true);\n        }\n        else {\n            intersect = ray.intersectTriangle(new Triangle(pC, pB, pA), material.side !== DoubleSide);\n        }\n        if (intersect === null)\n            return null;\n        point.copy(intersect);\n        intersectionPointWorld.copy(point);\n        intersectionPointWorld.applyMatrix4(object.matrixWorld);\n        const distance = raycaster.ray.origin.distanceTo(intersectionPointWorld);\n        if (distance < raycaster.near || distance > raycaster.far)\n            return null;\n        return {\n            distance: distance,\n            object: object,\n            point: intersectionPointWorld.clone(),\n        };\n    }\n    static checkBufferGeometryIntersection(object, raycaster, ray, position, uv, a, b, c) {\n        const intersectionPoint = new Vector3();\n        const vA = vectorFromBufferAttribute(new Vector3(), position, a);\n        const vB = vectorFromBufferAttribute(new Vector3(), position, b);\n        const vC = vectorFromBufferAttribute(new Vector3(), position, c);\n        const triangle = new Triangle(vectorFromBufferAttribute(new Vector3(), position, a), vectorFromBufferAttribute(new Vector3(), position, b), vectorFromBufferAttribute(new Vector3(), position, c));\n        const intersection = Mesh.checkIntersection(object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint);\n        if (intersection) {\n            if (uv) {\n                const uvA = vectorFromBufferAttribute(new Vector2(), uv, a);\n                const uvB = vectorFromBufferAttribute(new Vector2(), uv, b);\n                const uvC = vectorFromBufferAttribute(new Vector2(), uv, c);\n                intersection.uv = Mesh.uvIntersection(intersectionPoint, triangle, uvA, uvB, uvC);\n            }\n            intersection.face = new Face3(a, b, c, triangle.normal());\n            intersection.faceIndex = a;\n        }\n        return intersection;\n    }\n    setDrawMode(value) {\n        this.drawMode = value;\n        return this;\n    }\n    updateMorphTargets() {\n        const geometry = this.geometry;\n        if (geometry instanceof BufferGeometry) {\n            const morphAttributes = geometry.morphAttributes;\n            const keys = Object.keys(morphAttributes);\n            if (keys.length > 0) {\n                const morphAttribute = morphAttributes[keys[0]];\n                if (morphAttribute !== undefined) {\n                    for (let m = 0, ml = morphAttribute.length; m < ml; m++) {\n                        const name = morphAttribute[m].name || String(m);\n                        this.morphTargetInfluences.push(0);\n                        this.morphTargetDictionary[name] = m;\n                    }\n                }\n            }\n        }\n        else if (geometry instanceof Geometry) {\n            const morphTargets = geometry.morphTargets;\n            if (morphTargets !== undefined && morphTargets.length > 0) {\n                for (let m = 0, ml = morphTargets.length; m < ml; m++) {\n                    const name = morphTargets[m].name || String(m);\n                    this.morphTargetInfluences.push(0);\n                    this.morphTargetDictionary[name] = m;\n                }\n            }\n        }\n        return this;\n    }\n    raycast(raycaster, intersects) {\n        const geometry = this.geometry;\n        const material = this.material;\n        const matrixWorld = this.matrixWorld;\n        if (material === undefined)\n            return;\n        // Checking boundingSphere distance to ray\n        if (geometry.boundingSphere === null)\n            geometry.computeBoundingSphere();\n        const sphere = new Sphere().copy(geometry.boundingSphere).applyMatrix4(matrixWorld);\n        if (raycaster.ray.intersectsSphere(sphere) === false)\n            return;\n        const inverseMatrix = new Matrix4().getInverse(matrixWorld);\n        const ray = new Ray().copy(raycaster.ray).applyMatrix4(inverseMatrix);\n        // Check boundingBox before continuing\n        if (geometry.boundingBox !== null) {\n            if (ray.intersectsBox(geometry.boundingBox) === false)\n                return;\n        }\n        if (geometry instanceof BufferGeometry) {\n            const index = geometry.index;\n            const position = geometry.attributes.position;\n            const uv = geometry.attributes.uv;\n            if (index !== null) {\n                // indexed buffer geometry\n                for (let i = 0, l = index.count; i < l; i += 3) {\n                    const a = index.getProperty(i, \"x\");\n                    const b = index.getProperty(i + 1, \"x\");\n                    const c = index.getProperty(i + 2, \"x\");\n                    const intersection = Mesh.checkBufferGeometryIntersection(this, raycaster, ray, position, uv, a, b, c);\n                    if (intersection) {\n                        intersection.faceIndex = Math.floor(i / 3); // triangle number in indices buffer semantics\n                        intersects.push(intersection);\n                    }\n                }\n            }\n            else if (position !== undefined) {\n                // non-indexed buffer geometry\n                for (let i = 0, l = position.count; i < l; i += 3) {\n                    const a = i;\n                    const b = i + 1;\n                    const c = i + 2;\n                    const intersection = Mesh.checkBufferGeometryIntersection(this, raycaster, ray, position, uv, a, b, c);\n                    if (intersection) {\n                        intersection.index = a; // triangle number in positions buffer semantics\n                        intersects.push(intersection);\n                    }\n                }\n            }\n        }\n        else if (geometry instanceof Geometry) {\n            const vertices = geometry.vertices;\n            const faces = geometry.faces;\n            let uvs;\n            const faceVertexUvs = geometry.faceVertexUvs[0];\n            if (faceVertexUvs.length > 0)\n                uvs = faceVertexUvs;\n            for (let f = 0, fl = faces.length; f < fl; f++) {\n                const face = faces[f];\n                const faceMaterial = Array.isArray(material) ? material[face.materialIndex] : material;\n                if (faceMaterial === undefined)\n                    continue;\n                let fvA = vertices[face.a];\n                let fvB = vertices[face.b];\n                let fvC = vertices[face.c];\n                if (faceMaterial.morphTargets === true) {\n                    const morphTargets = geometry.morphTargets;\n                    const vA = new Vector3(), vB = new Vector3(), vC = new Vector3();\n                    for (let t = 0, tl = morphTargets.length; t < tl; t++) {\n                        const influence = this.morphTargetInfluences[t];\n                        if (influence === 0)\n                            continue;\n                        const targets = morphTargets[t].vertices;\n                        vA.add(new Vector3()\n                            .copy(targets[face.a])\n                            .sub(fvA)\n                            .multiplyScalar(influence));\n                        vB.add(new Vector3()\n                            .copy(targets[face.b])\n                            .sub(fvB)\n                            .multiplyScalar(influence));\n                        vC.add(new Vector3()\n                            .copy(targets[face.c])\n                            .sub(fvC)\n                            .multiplyScalar(influence));\n                    }\n                    vA.add(fvA);\n                    vB.add(fvB);\n                    vC.add(fvC);\n                    fvA = vA;\n                    fvB = vB;\n                    fvC = vC;\n                }\n                const intersectionPoint = new Vector3();\n                const intersection = Mesh.checkIntersection(this, faceMaterial, raycaster, ray, fvA, fvB, fvC, intersectionPoint);\n                if (intersection) {\n                    if (uvs && uvs[f]) {\n                        const uvsF = uvs[f];\n                        const uvA = new Vector2().copy(uvsF[0]);\n                        const uvB = new Vector2().copy(uvsF[1]);\n                        const uvC = new Vector2().copy(uvsF[2]);\n                        intersection.uv = Mesh.uvIntersection(intersectionPoint, new Triangle(fvA, fvB, fvC), uvA, uvB, uvC);\n                    }\n                    intersection.face = face;\n                    intersection.faceIndex = f;\n                    intersects.push(intersection);\n                }\n            }\n        }\n    }\n    clone() {\n        return new this.constructor(this.geometry, this.material).copy(this);\n    }\n}\n","import { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Object3D } from \"../core/Object3D\";\nimport { PointsMaterial } from \"../materials/PointsMaterial\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Ray } from \"../math/Ray\";\nimport { Sphere } from \"../math/Sphere\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class Points extends Object3D {\n    constructor(geometry = new BufferGeometry(), material = new PointsMaterial({\n        color: Math.random() * 0xffffff,\n    })) {\n        super();\n        this.type = \"Points\";\n        this.geometry = geometry;\n        this.material = material;\n    }\n    raycast(raycaster, intersects) {\n        const geometry = this.geometry;\n        const matrixWorld = this.matrixWorld;\n        const threshold = raycaster.params.Points.threshold;\n        // Checking boundingSphere distance to ray\n        if (geometry.boundingSphere === null)\n            geometry.computeBoundingSphere();\n        const sphere = new Sphere().copy(geometry.boundingSphere);\n        sphere.applyMatrix4(matrixWorld);\n        sphere.radius += threshold;\n        if (raycaster.ray.intersectsSphere(sphere) === false)\n            return;\n        const inverseMatrix = new Matrix4().getInverse(matrixWorld);\n        const ray = new Ray().copy(raycaster.ray).applyMatrix4(inverseMatrix);\n        const testPoint = (point, index2) => {\n            const localThreshold = threshold / ((this.scale.x + this.scale.y + this.scale.z) / 3);\n            const localThresholdSquare = localThreshold * localThreshold;\n            const rayPointDistanceSquare = ray.distanceSquaredToPoint(point);\n            if (rayPointDistanceSquare < localThresholdSquare) {\n                const intersectPoint = ray.closestPointToPoint(point);\n                intersectPoint.applyMatrix4(matrixWorld);\n                const distance = raycaster.ray.origin.distanceTo(intersectPoint);\n                if (distance < raycaster.near || distance > raycaster.far) {\n                    return;\n                }\n                intersects.push({\n                    distance: distance,\n                    distanceToRay: Math.sqrt(rayPointDistanceSquare),\n                    face: null,\n                    index: index2,\n                    object: this,\n                    point: intersectPoint.clone(),\n                });\n            }\n        };\n        if (geometry instanceof BufferGeometry) {\n            const position = new Vector3();\n            const index = geometry.index;\n            const positions = geometry.attributes.position.array;\n            if (index !== null) {\n                const indices = index.array;\n                for (let i = 0, il = indices.length; i < il; i++) {\n                    const a = indices[i];\n                    position.fromArray(positions, a * 3);\n                    testPoint(position, a);\n                }\n            }\n            else {\n                for (let i = 0, l = positions.length / 3; i < l; i++) {\n                    position.fromArray(positions, i * 3);\n                    testPoint(position, i);\n                }\n            }\n        }\n        else if (geometry instanceof Geometry) {\n            const vertices = geometry.vertices;\n            for (let i = 0, l = vertices.length; i < l; i++) {\n                testPoint(vertices[i], i);\n            }\n        }\n    }\n    clone() {\n        return new this.constructor(this.geometry, this.material).copy(this);\n    }\n}\n","import { Matrix4 } from \"../math/Matrix4\";\nimport { Bone } from \"./Bone\";\nconst offsetMatrix = new Matrix4();\nconst identityMatrix = new Matrix4();\nexport class Skeleton {\n    constructor(bones = [], boneInverses) {\n        this.bones = [];\n        this.boneInverses = [];\n        this.bones = bones.slice(0);\n        this.boneMatrices = new Float32Array(this.bones.length * 16);\n        if (boneInverses === undefined) {\n            this.calculateInverses();\n        }\n        else {\n            if (this.bones.length === boneInverses.length) {\n                this.boneInverses = boneInverses.slice(0);\n            }\n            else {\n                console.warn(\"THREE.Skeleton boneInverses is the wrong length.\");\n                for (let i = 0, il = this.bones.length; i < il; i++) {\n                    this.boneInverses.push(new Matrix4());\n                }\n            }\n        }\n    }\n    calculateInverses() {\n        this.boneInverses = [];\n        for (let i = 0, il = this.bones.length; i < il; i++) {\n            const inverse = new Matrix4();\n            if (this.bones[i]) {\n                inverse.getInverse(this.bones[i].matrixWorld);\n            }\n            this.boneInverses.push(inverse);\n        }\n    }\n    pose() {\n        // recover the bind-time world matrices\n        for (let i = 0, il = this.bones.length; i < il; i++) {\n            const bone = this.bones[i];\n            if (bone) {\n                bone.matrixWorld.getInverse(this.boneInverses[i]);\n            }\n        }\n        // compute the local matrices, positions, rotations and scales\n        for (let i = 0, il = this.bones.length; i < il; i++) {\n            const bone = this.bones[i];\n            if (bone) {\n                if (bone.parent && bone.parent instanceof Bone) {\n                    bone.matrix.getInverse(bone.parent.matrixWorld);\n                    bone.matrix.multiply(bone.matrixWorld);\n                }\n                else {\n                    bone.matrix.copy(bone.matrixWorld);\n                }\n                bone.matrix.decompose(bone.position, bone.quaternion, bone.scale);\n            }\n        }\n    }\n    update() {\n        const bones = this.bones;\n        const boneInverses = this.boneInverses;\n        const boneMatrices = this.boneMatrices;\n        const boneTexture = this.boneTexture;\n        // flatten bone matrices to array\n        for (let i = 0, il = bones.length; i < il; i++) {\n            // compute the offset between the current and the original transform\n            const matrix = bones[i] ? bones[i].matrixWorld : identityMatrix;\n            offsetMatrix.multiplyMatrices(matrix, boneInverses[i]);\n            offsetMatrix.toArray(boneMatrices, i * 16);\n        }\n        if (boneTexture !== undefined) {\n            boneTexture.needsUpdate = true;\n        }\n    }\n    getBoneByName(name) {\n        for (let i = 0, il = this.bones.length; i < il; i++) {\n            const bone = this.bones[i];\n            if (bone.name === name) {\n                return bone;\n            }\n        }\n        return undefined;\n    }\n    clone() {\n        return new this.constructor(this.bones, this.boneInverses);\n    }\n}\n","import { Mesh } from \"./Mesh\";\nimport { BufferGeometry } from \"../core/BufferGeometry\";\nimport { Geometry } from \"../core/Geometry\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { Bone } from \"./Bone\";\nimport { Skeleton } from \"./Skeleton\";\nimport { Vector4 } from \"../math/Vector4\";\nexport class SkinnedMesh extends Mesh {\n    /**\n     * skinIndices and skinWeights should be set to true on the Geometry\n     * skinIndex and skinWeights attribute on BufferGeometry\n     * @param geometry\n     * @param material\n     */\n    constructor(geometry, material) {\n        super(geometry, material);\n        this.type = \"SkinnedMesh\";\n        this.bindMode = \"attached\";\n        this.bindMatrix = new Matrix4();\n        this.bindMatrixInverse = new Matrix4();\n        const bones = this.initBones();\n        const skeleton = new Skeleton(bones);\n        this.bind(skeleton, this.matrixWorld);\n        this.normalizeSkinWeights();\n    }\n    initBones() {\n        const bones = [];\n        if (this.geometry && this.geometry instanceof Geometry && this.geometry.bones !== undefined) {\n            // first, create array of 'Bone' objects from geometry data\n            for (let i = 0, il = this.geometry.bones.length; i < il; i++) {\n                const gbone = this.geometry.bones[i];\n                // create new 'Bone' object\n                const bone = new Bone();\n                bones.push(bone);\n                // apply values\n                bone.name = gbone.name;\n                bone.position.fromArray(gbone.pos);\n                bone.quaternion.fromArray(gbone.rotq);\n                if (gbone.scl !== undefined) {\n                    bone.scale.fromArray(gbone.scl);\n                }\n            }\n            // second, create bone hierarchy\n            for (let i = 0, il = this.geometry.bones.length; i < il; i++) {\n                const gbone = this.geometry.bones[i];\n                if (gbone.parent !== -1 && gbone.parent !== null && bones[gbone.parent] !== undefined) {\n                    // subsequent bones in the hierarchy\n                    bones[gbone.parent].add(bones[i]);\n                }\n                else {\n                    // topmost bone, immediate child of the skinned mesh\n                    this.add(bones[i]);\n                }\n            }\n        }\n        // now the bones are part of the scene graph and children of the skinned mesh.\n        // let's update the corresponding matrices\n        this.updateMatrixWorld(true);\n        return bones;\n    }\n    bind(skeleton, bindMatrix) {\n        this.skeleton = skeleton;\n        if (bindMatrix === undefined) {\n            this.updateMatrixWorld(true);\n            this.skeleton.calculateInverses();\n            bindMatrix = this.matrixWorld;\n        }\n        this.bindMatrix.copy(bindMatrix);\n        this.bindMatrixInverse.getInverse(bindMatrix);\n    }\n    pose() {\n        this.skeleton.pose();\n    }\n    normalizeSkinWeights() {\n        if (this.geometry && this.geometry instanceof Geometry) {\n            for (let i = 0; i < this.geometry.skinWeights.length; i++) {\n                const sw = this.geometry.skinWeights[i];\n                const scale = 1.0 / sw.manhattanLength();\n                if (scale !== Infinity) {\n                    sw.multiplyScalar(scale);\n                }\n                else {\n                    sw.set(1, 0, 0, 0); // do something reasonable\n                }\n            }\n        }\n        else if (this.geometry && this.geometry instanceof BufferGeometry) {\n            const vec = new Vector4();\n            const skinWeight = this.geometry.attributes.skinWeight;\n            for (let i = 0; i < skinWeight.count; i++) {\n                vec.x = skinWeight.getProperty(i, \"x\");\n                vec.y = skinWeight.getProperty(i, \"y\");\n                vec.z = skinWeight.getProperty(i, \"z\");\n                vec.w = skinWeight.getProperty(i, \"w\");\n                const scale = 1.0 / vec.manhattanLength();\n                if (scale !== Infinity) {\n                    vec.multiplyScalar(scale);\n                }\n                else {\n                    vec.set(1, 0, 0, 0); // do something reasonable\n                }\n                skinWeight.setProperty(i, \"xyzw\", vec);\n            }\n        }\n    }\n    updateMatrixWorld(force = false) {\n        super.updateMatrixWorld(force);\n        if (this.bindMode === \"attached\") {\n            this.bindMatrixInverse.getInverse(this.matrixWorld);\n        }\n        else if (this.bindMode === \"detached\") {\n            this.bindMatrixInverse.getInverse(this.bindMatrix);\n        }\n        else {\n            console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \" + this.bindMode);\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor(this.geometry, this.material).copy(this);\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nimport { SpriteMaterial } from \"../materials/Materials\";\nimport { Vector3 } from \"../math/Vector3\";\nexport class Sprite extends Object3D {\n    constructor(material = new SpriteMaterial()) {\n        super();\n        this.type = \"Sprite\";\n        this.material = material;\n    }\n    raycast(raycaster, intersects) {\n        const worldPosition = new Vector3().setFromMatrixPosition(this.matrixWorld);\n        const intersectPoint = raycaster.ray.closestPointToPoint(worldPosition);\n        const worldScale = new Vector3().setFromMatrixScale(this.matrixWorld);\n        const guessSizeSq = worldScale.x * worldScale.y / 4;\n        if (worldPosition.distanceToSquared(intersectPoint) > guessSizeSq) {\n            return;\n        }\n        const distance = raycaster.ray.origin.distanceTo(intersectPoint);\n        if (distance < raycaster.near || distance > raycaster.far) {\n            return;\n        }\n        intersects.push({\n            distance: distance,\n            face: null,\n            point: intersectPoint.clone(),\n            object: this,\n        });\n    }\n    clone() {\n        return new this.constructor(this.material).copy(this);\n    }\n}\n","import { MathUtil } from \"../math/Math\";\nimport { Vector4 } from \"../math/Vector4\";\nimport { LinearFilter } from \"../constants\";\nimport { Texture } from \"../textures/Texture\";\nimport { EventDispatcher } from \"../core/EventDispatcher\";\nexport class WebGLRenderTarget extends EventDispatcher {\n    constructor(width, height, options = {}) {\n        super();\n        this.uuid = MathUtil.generateUUID();\n        this.scissorTest = false;\n        this.width = width;\n        this.height = height;\n        this.scissor = new Vector4(0, 0, width, height);\n        this.viewport = new Vector4(0, 0, width, height);\n        if (options.minFilter === undefined) {\n            options.minFilter = LinearFilter;\n        }\n        this.texture = new Texture(undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding);\n        this.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n        this.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n        this.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n    }\n    setSize(width, height) {\n        if (this.width !== width || this.height !== height) {\n            this.width = width;\n            this.height = height;\n            this.dispose();\n        }\n        this.viewport.set(0, 0, width, height);\n        this.scissor.set(0, 0, width, height);\n    }\n    copy(source) {\n        this.width = source.width;\n        this.height = source.height;\n        this.viewport.copy(source.viewport);\n        this.texture = source.texture.clone();\n        this.depthBuffer = source.depthBuffer;\n        this.stencilBuffer = source.stencilBuffer;\n        this.depthTexture = source.depthTexture;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    dispose() {\n        this.dispatchEvent({ type: \"dispose\" });\n    }\n}\n","import { WebGLRenderTarget } from \"./WebGLRenderTarget\";\nexport class WebGLRenderTargetCube extends WebGLRenderTarget {\n    constructor(width, height, options = {}) {\n        super(width, height, options);\n        // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\n        this.activeCubeFace = 0;\n        this.activeMipMapLevel = 0;\n    }\n}\n","import { REVISION, RGBAFormat, HalfFloatType, FloatType, UnsignedByteType, FrontFaceDirectionCW, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, NoColors, LinearToneMapping, } from \"../constants\";\nimport { Camera } from \"../cameras/Camera\";\nimport { ArrayCamera } from \"../cameras/ArrayCamera\";\nimport { InstancedBufferGeometry } from \"../core/InstancedBufferGeometry\";\nimport { InstancedInterleavedBufferAttribute } from \"../core/InstancedInterleavedBufferAttribute\";\nimport { InstancedBufferAttribute } from \"../core/InstancedBufferAttribute\";\nimport { Light } from \"../lights/Light\";\nimport { MathUtil } from \"../math/Math\";\nimport { Vector3 } from \"../math/Vector3\";\nimport { Vector4 } from \"../math/Vector4\";\nimport { Frustum } from \"../math/Frustum\";\nimport { Matrix4 } from \"../math/Matrix4\";\nimport { WebGLUniformsWrapper } from \"./webgl/WebGLUniforms\";\nimport { ShaderMaterial, MeshPhongMaterial, MeshStandardMaterial, MeshLambertMaterial, MeshBasicMaterial, MeshToonMaterial, MeshPhysicalMaterial, RawShaderMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshNormalMaterial, LineBasicMaterial, LineDashedMaterial, PointsMaterial, ShadowMaterial, } from \"../materials/Materials\";\nimport { Mesh } from \"../objects/Mesh\";\nimport { Line } from \"../objects/Line\";\nimport { Sprite } from \"../objects/Sprite\";\nimport { LineSegments } from \"../objects/LineSegments\";\nimport { LineLoop } from \"../objects/LineLoop\";\nimport { Points } from \"../objects/Points\";\nimport { SkinnedMesh } from \"../objects/SkinnedMesh\";\nimport { Fog } from \"../scenes/Fog\";\nimport { FogExp2 } from \"../scenes/FogExp2\";\nimport { DataTexture } from \"../textures/DataTexture\";\nimport { CubeTexture } from \"../textures/CubeTexture\";\nimport { ShaderLib } from \"./shaders/ShaderLib\";\nimport { UniformsUtils } from \"./shaders/UniformsUtils\";\nimport { WebGLShadowMap } from \"./webgl/WebGLShadowMap\";\nimport { WebGLState } from \"./webgl/WebGLState\";\nimport { WebGLUtils } from \"./webgl/WebGLUtils\";\nimport { WebGLClipping } from \"./webgl/WebGLClipping\";\nimport { WebGLExtensions } from \"./webgl/WebGLExtensions\";\nimport { WebGLCapabilities } from \"./webgl/WebGLCapabilities\";\nimport { WebGLProperties, } from \"./webgl/WebGLProperties\";\nimport { WebGLTextures } from \"./webgl/WebGLTextures\";\nimport { WebGLAttributes } from \"./webgl/WebGLAttributes\";\nimport { WebGLGeometries } from \"./webgl/WebGLGeometries\";\nimport { WebGLObjects } from \"./webgl/WebGLObjects\";\nimport { WebGLMorphtargets } from \"./webgl/WebGLMorphtargets\";\nimport { WebGLPrograms } from \"./webgl/WebGLPrograms\";\nimport { WebGLLights } from \"./webgl/WebGLLights\";\nimport { WebGLRenderLists } from \"./webgl/WebGLRenderLists\";\nimport { WebGLBufferRenderer } from \"./webgl/WebGLBufferRenderer\";\nimport { WebGLIndexedBufferRenderer } from \"./webgl/WebGLIndexedBufferRenderer\";\nimport { WebGLSpriteRenderer } from \"./webgl/WebGLSpriteRenderer\";\nimport { WebGLBackground } from \"./webgl/WebGLBackground\";\nimport { WebGLRenderTarget } from \"./WebGLRenderTarget\";\nimport { WebGLRenderTargetCube } from \"./WebGLRenderTargetCube\";\nimport { ImmediateRenderObject } from \"../extras/objects/ImmediateRenderObject\";\nexport class WebGLRenderer {\n    constructor(parameters = {}) {\n        this.lightsArray = [];\n        this.shadowsArray = [];\n        this.spritesArray = [];\n        // clearing\n        this.autoClear = true;\n        this.autoClearColor = true;\n        this.autoClearDepth = true;\n        this.autoClearStencil = true;\n        // scene graph\n        this.sortObjects = true;\n        // user-defined clipping\n        this.clippingPlanes = [];\n        // physically based shading\n        this.gammaInput = false; // for backwards compatibility\n        this.gammaFactor = 2.0;\n        this.gammaOutput = false;\n        // physical lights\n        this.physicallyCorrectLights = false;\n        // tone mapping\n        this.toneMapping = LinearToneMapping;\n        this.toneMappingExposure = 1.0;\n        this.toneMappingWhitePoint = 1.0;\n        // morphs\n        this.maxMorphNormals = 4;\n        this.maxMorphTargets = 8;\n        // internal properties\n        this.isContextLost = false;\n        // internal state cache\n        this.currentRenderTarget = null;\n        this.currentFramebuffer = null;\n        this.currentMaterialId = -1;\n        this.currentGeometryProgram = \"\";\n        this.currentCamera = null;\n        this.currentArrayCamera = null;\n        this.currentViewport = new Vector4();\n        this.currentScissor = new Vector4();\n        this.currentScissorTest = null;\n        //\n        this.usedTextureUnits = 0;\n        this.pixelRatio = 1;\n        this.scissorTest = false;\n        // frustum\n        this.frustum = new Frustum();\n        // clipping\n        this.clipping = new WebGLClipping();\n        this.clippingEnabled = false;\n        this.localClippingEnabled = false;\n        // camera matrices cache\n        this.projScreenMatrix = new Matrix4();\n        this.tempVector3 = new Vector3();\n        // info\n        this.infoMemory = {\n            geometries: 0,\n            textures: 0,\n        };\n        this.infoRender = {\n            frame: 0,\n            calls: 0,\n            vertices: 0,\n            faces: 0,\n            points: 0,\n        };\n        this.info = {\n            render: this.infoRender,\n            memory: this.infoMemory,\n            programs: null,\n            autoReset: true,\n            reset: () => {\n                this.infoRender.frame++;\n                this.infoRender.calls = 0;\n                this.infoRender.vertices = 0;\n                this.infoRender.faces = 0;\n                this.infoRender.points = 0;\n            },\n        };\n        this.onContextLost = (event) => {\n            event.preventDefault();\n            console.log(\"THREE.WebGLRenderer: Context Lost.\");\n            this.isContextLost = true;\n        };\n        this.onContextRestore = () => {\n            console.log(\"THREE.WebGLRenderer: Context Restored.\");\n            this.isContextLost = false;\n            this.initGLContext();\n        };\n        this.isAnimating = false;\n        this.onAnimationFrame = null;\n        this.loop = (time) => {\n            if (this.onAnimationFrame !== null)\n                this.onAnimationFrame(time);\n            window.requestAnimationFrame(this.loop);\n        };\n        this.onMaterialDispose = (event) => {\n            const material = event.target;\n            material.removeEventListener(\"dispose\", this.onMaterialDispose);\n            this.deallocateMaterial(material);\n        };\n        this.setTexture2DWarned = false;\n        this.setTextureCubeWarned = false;\n        this.parameters = parameters;\n        console.log(\"THREE.WebGLRenderer\", REVISION);\n        (this.domElement =\n            parameters.canvas !== undefined\n                ? parameters.canvas\n                : document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\")),\n            (this.context = parameters.context !== undefined ? parameters.context : null),\n            (this.alpha = parameters.alpha !== undefined ? parameters.alpha : false),\n            (this.depth = parameters.depth !== undefined ? parameters.depth : true),\n            (this.stencil = parameters.stencil !== undefined ? parameters.stencil : true),\n            (this.antialias = parameters.antialias !== undefined ? parameters.antialias : false),\n            (this.premultipliedAlpha =\n                parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true),\n            (this.preserveDrawingBuffer =\n                parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false),\n            (this.powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : \"default\");\n        this.width = this.domElement.width;\n        this.height = this.domElement.height;\n        this.viewport = new Vector4(0, 0, this.width, this.height);\n        this.scissor = new Vector4(0, 0, this.width, this.height);\n        try {\n            const contextAttributes = {\n                alpha: this.alpha,\n                depth: this.depth,\n                stencil: this.stencil,\n                antialias: this.antialias,\n                premultipliedAlpha: this.premultipliedAlpha,\n                preserveDrawingBuffer: this.preserveDrawingBuffer,\n                powerPreference: this.powerPreference,\n            };\n            // event listeners must be registered before WebGL context is created, see #12753\n            this.domElement.addEventListener(\"webglcontextlost\", this.onContextLost, false);\n            this.domElement.addEventListener(\"webglcontextrestored\", this.onContextRestore, false);\n            this.context =\n                this.context ||\n                    this.domElement.getContext(\"webgl\", contextAttributes) ||\n                    this.domElement.getContext(\"experimental-webgl\", contextAttributes);\n            if (this.context === null) {\n                if (this.domElement.getContext(\"webgl\") !== null) {\n                    throw new Error(\"Error creating WebGL context with your selected attributes.\");\n                }\n                else {\n                    throw new Error(\"Error creating WebGL context.\");\n                }\n            }\n            // Some experimental-webgl implementations do not have getShaderPrecisionFormat\n            if (this.domElement.getShaderPrecisionFormat === undefined) {\n                this.domElement.getShaderPrecisionFormat = function () {\n                    return { rangeMin: 1, rangeMax: 1, precision: 1 };\n                };\n            }\n        }\n        catch (error) {\n            console.error(\"THREE.WebGLRenderer: \" + error.message);\n        }\n        this.initGLContext();\n        this.shadowMap = new WebGLShadowMap(this, this.objects, this.capabilities.maxTextureSize);\n    }\n    getTargetPixelRatio() {\n        return this.currentRenderTarget === null ? this.pixelRatio : 1;\n    }\n    getContext() {\n        return this.context;\n    }\n    getContextAttributes() {\n        return this.context.getContextAttributes();\n    }\n    forceContextLoss() {\n        const extension = this.extensions.get(\"WEBGL_lose_context\");\n        if (extension)\n            extension.loseContext();\n    }\n    forceContextRestore() {\n        const extension = this.extensions.get(\"WEBGL_lose_context\");\n        if (extension)\n            extension.restoreContext();\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(value) {\n        if (value === undefined)\n            return;\n        this.pixelRatio = value;\n        this.setSize(this.width, this.height, false);\n    }\n    getSize() {\n        return {\n            width: this.width,\n            height: this.height,\n        };\n    }\n    setSize(width, height, updateStyle) {\n        this.width = width;\n        this.height = height;\n        this.domElement.width = width * this.pixelRatio;\n        this.domElement.height = height * this.pixelRatio;\n        if (updateStyle !== false) {\n            this.domElement.style.width = width + \"px\";\n            this.domElement.style.height = height + \"px\";\n        }\n        this.setViewport(0, 0, width, height);\n    }\n    getDrawingBufferSize() {\n        return {\n            width: this.width * this.pixelRatio,\n            height: this.height * this.pixelRatio,\n        };\n    }\n    setDrawingBufferSize(width, height, pixelRatio) {\n        this.width = width;\n        this.height = height;\n        this.pixelRatio = pixelRatio;\n        this.domElement.width = width * pixelRatio;\n        this.domElement.height = height * pixelRatio;\n        this.setViewport(0, 0, width, height);\n    }\n    getCurrentViewport() {\n        return this.currentViewport;\n    }\n    setViewport(x, y, width, height) {\n        this.viewport.set(x, this.height - y - height, width, height);\n        this.state.viewport(this.currentViewport.copy(this.viewport).multiplyScalar(this.pixelRatio));\n    }\n    setScissor(x, y, width, height) {\n        this.scissor.set(x, this.height - y - height, width, height);\n        this.state.scissor(this.currentScissor.copy(this.scissor).multiplyScalar(this.pixelRatio));\n    }\n    setScissorTest(value) {\n        this.state.setScissorTest((this.scissorTest = value));\n    }\n    getClearColor() {\n        return this.background.getClearColor();\n    }\n    setClearColor(color, alpha) {\n        this.background.setClearColor(color, alpha);\n    }\n    getClearAlpha() {\n        return this.background.getClearAlpha();\n    }\n    setClearAlpha(alpha) {\n        this.background.setClearAlpha(alpha);\n    }\n    clear(color, depth, stencil) {\n        const gl = this.context;\n        let bits = 0;\n        if (color === undefined || color)\n            bits |= gl.COLOR_BUFFER_BIT;\n        if (depth === undefined || depth)\n            bits |= gl.DEPTH_BUFFER_BIT;\n        if (stencil === undefined || stencil)\n            bits |= gl.STENCIL_BUFFER_BIT;\n        gl.clear(bits);\n    }\n    clearColor() {\n        this.clear(true, false, false);\n    }\n    clearDepth() {\n        this.clear(false, true, false);\n    }\n    clearStencil() {\n        this.clear(false, false, true);\n    }\n    clearTarget(renderTarget, color, depth, stencil) {\n        this.setRenderTarget(renderTarget);\n        this.clear(color, depth, stencil);\n    }\n    dispose() {\n        this.domElement.removeEventListener(\"webglcontextlost\", this.onContextLost, false);\n        this.domElement.removeEventListener(\"webglcontextrestored\", this.onContextRestore, false);\n        this.renderLists.dispose();\n        this.properties.dispose();\n        this.objects.dispose();\n    }\n    initGLContext() {\n        const gl = this.context;\n        const extensions = new WebGLExtensions(gl);\n        extensions.get(\"WEBGL_depth_texture\");\n        extensions.get(\"OES_texture_float\");\n        extensions.get(\"OES_texture_float_linear\");\n        extensions.get(\"OES_texture_half_float\");\n        extensions.get(\"OES_texture_half_float_linear\");\n        extensions.get(\"OES_standard_derivatives\");\n        extensions.get(\"OES_element_index_uint\");\n        extensions.get(\"ANGLE_instanced_arrays\");\n        const utils = new WebGLUtils(gl, extensions);\n        const capabilities = new WebGLCapabilities(gl, extensions, this.parameters);\n        const state = new WebGLState(gl, extensions, utils);\n        state.scissor(this.currentScissor.copy(this.scissor).multiplyScalar(this.pixelRatio));\n        state.viewport(this.currentViewport.copy(this.viewport).multiplyScalar(this.pixelRatio));\n        const properties = new WebGLProperties();\n        const textures = new WebGLTextures(gl, extensions, state, properties, capabilities, utils, this.infoMemory, this.infoRender);\n        const attributes = new WebGLAttributes(gl);\n        const geometries = new WebGLGeometries(gl, attributes, this.infoMemory);\n        const objects = new WebGLObjects(geometries, this.infoRender);\n        const morphtargets = new WebGLMorphtargets(gl);\n        const programCache = new WebGLPrograms(this, extensions, capabilities);\n        const lights = new WebGLLights();\n        const renderLists = new WebGLRenderLists();\n        const background = new WebGLBackground(this, state, geometries, this.premultipliedAlpha);\n        const bufferRenderer = new WebGLBufferRenderer(gl, extensions, this.infoRender);\n        const indexedBufferRenderer = new WebGLIndexedBufferRenderer(gl, extensions, this.infoRender);\n        const spriteRenderer = new WebGLSpriteRenderer(this, state, textures, capabilities);\n        this.info.programs = programCache.programs;\n        this.extensions = extensions;\n        this.utils = utils;\n        this.capabilities = capabilities;\n        this.state = state;\n        this.properties = properties;\n        this.textures = textures;\n        this.attributes = attributes;\n        this.geometries = geometries;\n        this.objects = objects;\n        this.morphtargets = morphtargets;\n        this.programCache = programCache;\n        this.lights = lights;\n        this.renderLists = renderLists;\n        this.background = background;\n        this.bufferRenderer = bufferRenderer;\n        this.indexedBufferRenderer = indexedBufferRenderer;\n        this.spriteRenderer = spriteRenderer;\n    }\n    compile(scene, camera) {\n        this.lightsArray.length = 0;\n        this.shadowsArray.length = 0;\n        scene.traverse((object) => {\n            if (object instanceof Light) {\n                this.lightsArray.push(object);\n                if (object.castShadow) {\n                    this.shadowsArray.push(object);\n                }\n            }\n        });\n        this.lights.setup(this.lightsArray, this.shadowsArray, camera);\n        scene.traverse((obj) => {\n            const object = obj;\n            if (object.material) {\n                if (Array.isArray(object.material)) {\n                    for (let i = 0; i < object.material.length; i++) {\n                        this.initMaterial(object.material[i], scene.fog, object);\n                    }\n                }\n                else {\n                    this.initMaterial(object.material, scene.fog, object);\n                }\n            }\n        });\n    }\n    start() {\n        if (this.isAnimating)\n            return;\n        window.requestAnimationFrame(this.loop);\n        this.isAnimating = true;\n    }\n    animate(callback) {\n        this.onAnimationFrame = callback;\n        this.start();\n    }\n    render(scene, camera, renderTarget, forceClear) {\n        if (!(camera && camera instanceof Camera)) {\n            console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");\n            return;\n        }\n        if (this.isContextLost)\n            return;\n        // reset caching for this frame\n        this.currentGeometryProgram = \"\";\n        this.currentMaterialId = -1;\n        this.currentCamera = null;\n        // update scene graph\n        if (scene.autoUpdate === true)\n            scene.updateMatrixWorld();\n        // update camera matrices and frustum\n        if (camera.parent === null)\n            camera.updateMatrixWorld();\n        scene.onBeforeRender(this, scene, camera, renderTarget);\n        this.projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n        this.frustum.setFromMatrix(this.projScreenMatrix);\n        this.lightsArray.length = 0;\n        this.shadowsArray.length = 0;\n        this.spritesArray.length = 0;\n        this.clippingEnabled = this.clipping.init(this.clippingPlanes, this.localClippingEnabled, camera);\n        this.currentRenderList = this.renderLists.get(scene, camera);\n        this.currentRenderList.init();\n        this.projectObject(scene, camera, this.sortObjects);\n        if (this.sortObjects === true) {\n            this.currentRenderList.sort();\n        }\n        //\n        if (this.clippingEnabled)\n            this.clipping.beginShadows();\n        this.shadowMap.render(this.shadowsArray, scene, camera);\n        this.lights.setup(this.lightsArray, this.shadowsArray, camera);\n        if (this.clippingEnabled)\n            this.clipping.endShadows();\n        //\n        if (this.info.autoReset)\n            this.info.reset();\n        if (renderTarget === undefined) {\n            renderTarget = null;\n        }\n        this.setRenderTarget(renderTarget);\n        //\n        this.background.render(this.currentRenderList, scene, camera, forceClear);\n        // render scene\n        const opaqueObjects = this.currentRenderList.opaque;\n        const transparentObjects = this.currentRenderList.transparent;\n        if (scene.overrideMaterial) {\n            const overrideMaterial = scene.overrideMaterial;\n            if (opaqueObjects.length)\n                this.renderObjects(opaqueObjects, scene, camera, overrideMaterial);\n            if (transparentObjects.length)\n                this.renderObjects(transparentObjects, scene, camera, overrideMaterial);\n        }\n        else {\n            // opaque pass (front-to-back order)\n            if (opaqueObjects.length)\n                this.renderObjects(opaqueObjects, scene, camera);\n            // transparent pass (back-to-front order)\n            if (transparentObjects.length)\n                this.renderObjects(transparentObjects, scene, camera);\n        }\n        // custom renderers\n        this.spriteRenderer.render(this.spritesArray, scene, camera);\n        // Generate mipmap if we're using any kind of mipmap filtering\n        if (renderTarget) {\n            this.textures.updateRenderTargetMipmap(renderTarget);\n        }\n        // Ensure depth buffer writing is enabled so it can be cleared on next render\n        const state = this.state;\n        state.buffers.depth.setTest(true);\n        state.buffers.depth.setMask(true);\n        state.buffers.color.setMask(true);\n        state.setPolygonOffset(false);\n        //scene.onAfterRender(this, scene, camera, renderTarget );\n        // _gl.finish();\n    }\n    projectObject(object, camera, sortObjects = false) {\n        if (object.visible === false)\n            return;\n        const visible = object.layers.test(camera.layers);\n        if (visible) {\n            if (object instanceof Light) {\n                this.lightsArray.push(object);\n                if (object.castShadow) {\n                    this.shadowsArray.push(object);\n                }\n            }\n            else if (object instanceof Sprite) {\n                if (!object.frustumCulled || this.frustum.intersectsSprite(object)) {\n                    this.spritesArray.push(object);\n                }\n            }\n            else if (object instanceof ImmediateRenderObject) {\n                if (sortObjects) {\n                    this.tempVector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(this.projScreenMatrix);\n                }\n                this.currentRenderList.push(object, null, object.material, this.tempVector3.z, null);\n            }\n            else if (object instanceof Mesh || object instanceof Line || object instanceof Points) {\n                if (object instanceof SkinnedMesh) {\n                    object.skeleton.update();\n                }\n                if (!object.frustumCulled || this.frustum.intersectsObject(object)) {\n                    if (sortObjects) {\n                        this.tempVector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(this.projScreenMatrix);\n                    }\n                    const geometry = this.objects.update(object);\n                    const material = object.material;\n                    if (Array.isArray(material)) {\n                        const groups = geometry.groups;\n                        for (let i = 0, l = groups.length; i < l; i++) {\n                            const group = groups[i];\n                            const groupMaterial = material[group.materialIndex];\n                            if (groupMaterial && groupMaterial.visible) {\n                                this.currentRenderList.push(object, geometry, groupMaterial, this.tempVector3.z, group);\n                            }\n                        }\n                    }\n                    else if (material.visible) {\n                        this.currentRenderList.push(object, geometry, material, this.tempVector3.z, null);\n                    }\n                }\n            }\n        }\n        const children = object.children;\n        for (let i = 0, l = children.length; i < l; i++) {\n            this.projectObject(children[i], camera, sortObjects);\n        }\n    }\n    renderObjects(renderList, scene, camera, overrideMaterial) {\n        for (let i = 0, l = renderList.length; i < l; i++) {\n            const renderItem = renderList[i];\n            const object = renderItem.object;\n            const geometry = renderItem.geometry;\n            const material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n            const group = renderItem.group;\n            if (camera instanceof ArrayCamera) {\n                this.currentArrayCamera = camera;\n                const cameras = camera.cameras;\n                for (var j = 0, jl = cameras.length; j < jl; j++) {\n                    var camera2 = cameras[j];\n                    if (object.layers.test(camera2.layers)) {\n                        var bounds = camera2.bounds;\n                        var x = bounds.x * this.width;\n                        var y = bounds.y * this.height;\n                        var width = bounds.z * this.width;\n                        var height = bounds.w * this.height;\n                        this.state.viewport(this.currentViewport.set(x, y, width, height).multiplyScalar(this.pixelRatio));\n                        this.renderObject(object, scene, camera2, geometry, material, group);\n                    }\n                }\n            }\n            else {\n                this.currentArrayCamera = null;\n                this.renderObject(object, scene, camera, geometry, material, group);\n            }\n        }\n    }\n    renderObject(object, scene, camera, geometry, material, group) {\n        object.onBeforeRender(this, scene, camera, geometry, material, group);\n        object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, object.matrixWorld);\n        object.normalMatrix.getNormalMatrix(object.modelViewMatrix);\n        if (object instanceof ImmediateRenderObject) {\n            //What???\n            var frontFaceCW = object instanceof Mesh && object.matrixWorld.determinant() < 0;\n            this.state.setMaterial(material, frontFaceCW);\n            var program = this.setProgram(camera, scene.fog, material, object);\n            this.currentGeometryProgram = \"\";\n            this.renderObjectImmediate(object, program, material);\n        }\n        else {\n            this.renderBufferDirect(camera, scene.fog, geometry, material, object, group);\n        }\n        //object.onAfterRender(this, scene, camera, geometry, material, group );\n    }\n    // Buffer rendering\n    // renderObjectImmediate 目前看来很有问题\n    renderObjectImmediate(object, program, material) {\n        object.render((object) => {\n            this.renderBufferImmediate(object, program, material);\n        });\n    }\n    renderBufferImmediate(object, program, material) {\n        const state = this.state;\n        const gl = this.context;\n        state.initAttributes();\n        const buffers = this.properties.get(object);\n        if (object.hasPositions && !buffers.position)\n            buffers.position = gl.createBuffer();\n        if (object.hasNormals && !buffers.normal)\n            buffers.normal = gl.createBuffer();\n        if (object.hasUvs && !buffers.uv)\n            buffers.uv = gl.createBuffer();\n        if (object.hasColors && !buffers.color)\n            buffers.color = gl.createBuffer();\n        const programAttributes = program.getAttributes();\n        if (object.hasPositions) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position);\n            gl.bufferData(gl.ARRAY_BUFFER, object.positionArray, gl.DYNAMIC_DRAW);\n            state.enableAttribute(programAttributes.position);\n            gl.vertexAttribPointer(programAttributes.position, 3, gl.FLOAT, false, 0, 0);\n        }\n        if (object.hasNormals) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffers.normal);\n            if (!(material instanceof MeshPhongMaterial) &&\n                !(material instanceof MeshStandardMaterial) &&\n                !(material instanceof MeshNormalMaterial) &&\n                material.flatShading === true) {\n                for (let i = 0, l = object.count * 3; i < l; i += 9) {\n                    const array = object.normalArray;\n                    const nx = (array[i + 0] + array[i + 3] + array[i + 6]) / 3;\n                    const ny = (array[i + 1] + array[i + 4] + array[i + 7]) / 3;\n                    const nz = (array[i + 2] + array[i + 5] + array[i + 8]) / 3;\n                    array[i + 0] = nx;\n                    array[i + 1] = ny;\n                    array[i + 2] = nz;\n                    array[i + 3] = nx;\n                    array[i + 4] = ny;\n                    array[i + 5] = nz;\n                    array[i + 6] = nx;\n                    array[i + 7] = ny;\n                    array[i + 8] = nz;\n                }\n            }\n            gl.bufferData(gl.ARRAY_BUFFER, object.normalArray, gl.DYNAMIC_DRAW);\n            state.enableAttribute(programAttributes.normal);\n            gl.vertexAttribPointer(programAttributes.normal, 3, gl.FLOAT, false, 0, 0);\n        }\n        if (object.hasUvs && material.map) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffers.uv);\n            gl.bufferData(gl.ARRAY_BUFFER, object.uvArray, gl.DYNAMIC_DRAW);\n            state.enableAttribute(programAttributes.uv);\n            gl.vertexAttribPointer(programAttributes.uv, 2, gl.FLOAT, false, 0, 0);\n        }\n        if (object.hasColors && material.vertexColors !== NoColors) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color);\n            gl.bufferData(gl.ARRAY_BUFFER, object.colorArray, gl.DYNAMIC_DRAW);\n            state.enableAttribute(programAttributes.color);\n            gl.vertexAttribPointer(programAttributes.color, 3, gl.FLOAT, false, 0, 0);\n        }\n        state.disableUnusedAttributes();\n        gl.drawArrays(gl.TRIANGLES, 0, object.count);\n        object.count = 0;\n    }\n    renderBufferDirect(camera, fog, geometry, material, object, group) {\n        const gl = this.context;\n        const frontFaceCW = object instanceof Mesh && object.matrixWorld.determinant() < 0;\n        this.state.setMaterial(material, frontFaceCW);\n        const program = this.setProgram(camera, fog, material, object);\n        const geometryProgram = geometry.id + \"_\" + program.id + \"_\" + (material.wireframe === true);\n        let updateBuffers = false;\n        if (geometryProgram !== this.currentGeometryProgram) {\n            this.currentGeometryProgram = geometryProgram;\n            updateBuffers = true;\n        }\n        if (object.morphTargetInfluences) {\n            this.morphtargets.update(object, geometry, material, program);\n            updateBuffers = true;\n        }\n        //\n        let index = geometry.index;\n        const position = geometry.attributes.position;\n        let rangeFactor = 1;\n        if (material.wireframe === true) {\n            index = this.geometries.getWireframeAttribute(geometry);\n            rangeFactor = 2;\n        }\n        let attribute;\n        let renderer = this.bufferRenderer;\n        if (index !== null) {\n            attribute = this.attributes.get(index);\n            renderer = this.indexedBufferRenderer;\n            renderer.setIndex(attribute);\n        }\n        if (updateBuffers) {\n            this.setupVertexAttributes(material, program, geometry);\n            if (index !== null) {\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, attribute.buffer);\n            }\n        }\n        //\n        let dataCount = 0;\n        if (index !== null) {\n            dataCount = index.count;\n        }\n        else if (position !== undefined) {\n            dataCount = position.count;\n        }\n        const rangeStart = geometry.drawRange.start * rangeFactor;\n        const rangeCount = geometry.drawRange.count * rangeFactor;\n        const groupStart = group !== null ? group.start * rangeFactor : 0;\n        const groupCount = group !== null ? group.count * rangeFactor : Infinity;\n        const drawStart = Math.max(rangeStart, groupStart);\n        const drawEnd = Math.min(dataCount, rangeStart + rangeCount, groupStart + groupCount) - 1;\n        const drawCount = Math.max(0, drawEnd - drawStart + 1);\n        if (drawCount === 0)\n            return;\n        //\n        if (object instanceof Mesh) {\n            if (material.wireframe === true) {\n                this.state.setLineWidth(material.wireframeLinewidth * this.getTargetPixelRatio());\n                renderer.setMode(gl.LINES);\n            }\n            else {\n                switch (object.drawMode) {\n                    case TrianglesDrawMode:\n                        renderer.setMode(gl.TRIANGLES);\n                        break;\n                    case TriangleStripDrawMode:\n                        renderer.setMode(gl.TRIANGLE_STRIP);\n                        break;\n                    case TriangleFanDrawMode:\n                        renderer.setMode(gl.TRIANGLE_FAN);\n                        break;\n                }\n            }\n        }\n        else if (object instanceof Line) {\n            let lineWidth = material.linewidth;\n            if (lineWidth === undefined)\n                lineWidth = 1; // Not using Line*Material\n            this.state.setLineWidth(lineWidth * this.getTargetPixelRatio());\n            if (object instanceof LineSegments) {\n                renderer.setMode(gl.LINES);\n            }\n            else if (object instanceof LineLoop) {\n                renderer.setMode(gl.LINE_LOOP);\n            }\n            else {\n                renderer.setMode(gl.LINE_STRIP);\n            }\n        }\n        else if (object instanceof Points) {\n            renderer.setMode(gl.POINTS);\n        }\n        if (geometry && geometry instanceof InstancedBufferGeometry) {\n            if (geometry.maxInstancedCount > 0) {\n                renderer.renderInstances(geometry, drawStart, drawCount);\n            }\n        }\n        else {\n            renderer.render(drawStart, drawCount);\n        }\n    }\n    setProgram(camera, fog, material, object) {\n        const gl = this.context;\n        this.usedTextureUnits = 0;\n        const materialProperties = this.properties.get(material);\n        if (this.clippingEnabled) {\n            if (this.localClippingEnabled || camera !== this.currentCamera) {\n                const useCache = camera === this.currentCamera && material.id === this.currentMaterialId;\n                // we might want to call this function with some ClippingGroup\n                // object instead of the material, once it becomes feasible\n                // (#8465, #8379)\n                this.clipping.setState(material.clippingPlanes, material.clipIntersection, material.clipShadows, camera, materialProperties, useCache);\n            }\n        }\n        if (material.needsUpdate === false) {\n            if (materialProperties.program === undefined) {\n                material.needsUpdate = true;\n            }\n            else if (material.fog && materialProperties.fog !== fog) {\n                material.needsUpdate = true;\n            }\n            else if (material.lights && materialProperties.lightsHash !== this.lights.state.hash) {\n                material.needsUpdate = true;\n            }\n            else if (materialProperties.numClippingPlanes !== undefined &&\n                (materialProperties.numClippingPlanes !== this.clipping.numPlanes ||\n                    materialProperties.numIntersection !== this.clipping.numIntersection)) {\n                material.needsUpdate = true;\n            }\n        }\n        if (material.needsUpdate) {\n            this.initMaterial(material, fog, object);\n            material.needsUpdate = false;\n        }\n        let refreshProgram = false;\n        let refreshMaterial = false;\n        let refreshLights = false;\n        const program = materialProperties.program, p_uniforms = program.getUniforms(), m_uniforms = materialProperties.shader.uniforms;\n        if (this.state.useProgram(program.program)) {\n            refreshProgram = true;\n            refreshMaterial = true;\n            refreshLights = true;\n        }\n        if (material.id !== this.currentMaterialId) {\n            this.currentMaterialId = material.id;\n            refreshMaterial = true;\n        }\n        if (refreshProgram || camera !== this.currentCamera) {\n            p_uniforms.setValue(\"projectionMatrix\", camera.projectionMatrix);\n            if (this.capabilities.logarithmicDepthBuffer) {\n                p_uniforms.setValue(\"logDepthBufFC\", 2.0 / (Math.log(camera.far + 1.0) / Math.LN2));\n            }\n            // Avoid unneeded uniform updates per ArrayCamera's sub-camera\n            if (this.currentCamera !== (this.currentArrayCamera || camera)) {\n                this.currentCamera = this.currentArrayCamera || camera;\n                // lighting uniforms depend on the camera so enforce an update\n                // now, in case this material supports lights - or later, when\n                // the next material that does gets activated:\n                refreshMaterial = true; // set to true on material change\n                refreshLights = true; // remains set until update done\n            }\n            // load material specific uniforms\n            // (shader material also gets them for the sake of genericity)\n            if (material instanceof ShaderMaterial ||\n                material instanceof MeshPhongMaterial ||\n                material instanceof MeshStandardMaterial ||\n                material.envMap) {\n                const uCamPos = p_uniforms.map.cameraPosition;\n                if (uCamPos !== undefined) {\n                    uCamPos.setValue(new Vector3().setFromMatrixPosition(camera.matrixWorld));\n                }\n            }\n            if (material instanceof MeshPhongMaterial ||\n                material instanceof MeshLambertMaterial ||\n                material instanceof MeshBasicMaterial ||\n                material instanceof MeshStandardMaterial ||\n                material instanceof ShaderMaterial ||\n                material.skinning) {\n                p_uniforms.setValue(\"viewMatrix\", camera.matrixWorldInverse);\n            }\n        }\n        // skinning uniforms must be set even if material didn't change\n        // auto-setting of texture unit for bone texture must go before other textures\n        // not sure why, but otherwise weird things happen\n        if (material.skinning) {\n            p_uniforms.setOptional(object, \"bindMatrix\");\n            p_uniforms.setOptional(object, \"bindMatrixInverse\");\n            const skeleton = object.skeleton;\n            if (skeleton) {\n                const bones = skeleton.bones;\n                if (this.capabilities.floatVertexTextures) {\n                    if (skeleton.boneTexture === undefined) {\n                        // layout (1 matrix = 4 pixels)\n                        //      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n                        //  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n                        //       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n                        //       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n                        //       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n                        let size = Math.sqrt(bones.length * 4); // 4 pixels needed for 1 matrix\n                        size = MathUtil.ceilPowerOfTwo(size);\n                        size = Math.max(size, 4);\n                        const boneMatrices = new Float32Array(size * size * 4); // 4 floats per RGBA pixel\n                        boneMatrices.set(skeleton.boneMatrices); // copy current values\n                        const boneTexture = new DataTexture(boneMatrices, size, size, RGBAFormat, FloatType);\n                        skeleton.boneMatrices = boneMatrices;\n                        skeleton.boneTexture = boneTexture;\n                        skeleton.boneTextureSize = size;\n                    }\n                    p_uniforms.setValue(\"boneTexture\", skeleton.boneTexture);\n                    p_uniforms.setValue(\"boneTextureSize\", skeleton.boneTextureSize);\n                }\n                else {\n                    p_uniforms.setOptional(skeleton, \"boneMatrices\");\n                }\n            }\n        }\n        if (refreshMaterial) {\n            p_uniforms.setValue(\"toneMappingExposure\", this.toneMappingExposure);\n            p_uniforms.setValue(\"toneMappingWhitePoint\", this.toneMappingWhitePoint);\n            if (material.lights) {\n                // the current material requires lighting info\n                // note: all lighting uniforms are always set correctly\n                // they simply reference the renderer's state for their\n                // values\n                //\n                // use the current material's .needsUpdate flags to set\n                // the GL state when required\n                this.markUniformsLightsNeedsUpdate(m_uniforms, refreshLights);\n            }\n            // refresh uniforms common to several materials\n            if (fog && material.fog) {\n                this.refreshUniformsFog(m_uniforms, fog);\n            }\n            if (material instanceof MeshBasicMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n            }\n            else if (material instanceof MeshLambertMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                this.refreshUniformsLambert(m_uniforms, material);\n            }\n            else if (material instanceof MeshPhongMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                if (material instanceof MeshToonMaterial) {\n                    this.refreshUniformsToon(m_uniforms, material);\n                }\n                else {\n                    this.refreshUniformsPhong(m_uniforms, material);\n                }\n            }\n            else if (material instanceof MeshStandardMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                if (material instanceof MeshPhysicalMaterial) {\n                    this.refreshUniformsPhysical(m_uniforms, material);\n                }\n                else {\n                    this.refreshUniformsStandard(m_uniforms, material);\n                }\n            }\n            else if (material instanceof MeshDepthMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                this.refreshUniformsDepth(m_uniforms, material);\n            }\n            else if (material instanceof MeshDistanceMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                this.refreshUniformsDistance(m_uniforms, material);\n            }\n            else if (material instanceof MeshNormalMaterial) {\n                this.refreshUniformsCommon(m_uniforms, material);\n                this.refreshUniformsNormal(m_uniforms, material);\n            }\n            else if (material instanceof LineBasicMaterial) {\n                this.refreshUniformsLine(m_uniforms, material);\n                if (material instanceof LineDashedMaterial) {\n                    this.refreshUniformsDash(m_uniforms, material);\n                }\n            }\n            else if (material instanceof PointsMaterial) {\n                this.refreshUniformsPoints(m_uniforms, material);\n            }\n            else if (material instanceof ShadowMaterial) {\n                m_uniforms.color.value = material.color;\n                m_uniforms.opacity.value = material.opacity;\n            }\n            // RectAreaLight Texture\n            // TODO (mrdoob): Find a nicer implementation\n            /**\n             * LTC_1? LTC_2?\n             */\n            // if (m_uniforms.ltc_1 !== undefined) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n            // if (m_uniforms.ltc_2 !== undefined) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n            WebGLUniformsWrapper.upload(materialProperties.uniformsList, m_uniforms);\n        }\n        // common matrices\n        p_uniforms.setValue(\"modelViewMatrix\", object.modelViewMatrix);\n        p_uniforms.setValue(\"normalMatrix\", object.normalMatrix);\n        p_uniforms.setValue(\"modelMatrix\", object.matrixWorld);\n        return program;\n    }\n    setupVertexAttributes(material, program, geometry, startIndex = 0) {\n        const state = this.state;\n        const gl = this.context;\n        if (geometry && geometry instanceof InstancedBufferGeometry) {\n            if (this.extensions.get(\"ANGLE_instanced_arrays\") === null) {\n                console.error(\"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");\n                return;\n            }\n        }\n        state.initAttributes();\n        const geometryAttributes = geometry.attributes;\n        const programAttributes = program.getAttributes();\n        // ShaderMaterial\n        const materialDefaultAttributeValues = material.defaultAttributeValues;\n        for (const name in programAttributes) {\n            const programAttribute = programAttributes[name];\n            if (programAttribute >= 0) {\n                const geometryAttribute = geometryAttributes[name];\n                if (geometryAttribute !== undefined) {\n                    const normalized = geometryAttribute.normalized;\n                    const size = geometryAttribute.itemSize;\n                    const attribute = this.attributes.get(geometryAttribute);\n                    // TODO Attribute may not be available on context restore\n                    if (attribute === undefined)\n                        continue;\n                    const buffer = attribute.buffer;\n                    const type = attribute.type;\n                    const bytesPerElement = attribute.bytesPerElement;\n                    if (geometryAttribute instanceof InstancedInterleavedBufferAttribute) {\n                        const stride = geometryAttribute.stride;\n                        const offset = geometryAttribute.offset;\n                        if (geometryAttribute) {\n                            state.enableAttributeAndDivisor(programAttribute, geometryAttribute.meshPerAttribute);\n                            if (geometry.maxInstancedCount === undefined) {\n                                geometry.maxInstancedCount =\n                                    geometryAttribute.meshPerAttribute * geometryAttribute.count;\n                            }\n                        }\n                        else {\n                            state.enableAttribute(programAttribute);\n                        }\n                        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n                        gl.vertexAttribPointer(programAttribute, size, type, normalized, stride * bytesPerElement, (startIndex * stride + offset) * bytesPerElement);\n                    }\n                    else {\n                        if (geometryAttribute instanceof InstancedBufferAttribute) {\n                            state.enableAttributeAndDivisor(programAttribute, geometryAttribute.meshPerAttribute);\n                            if (geometry.maxInstancedCount === undefined) {\n                                geometry.maxInstancedCount =\n                                    geometryAttribute.meshPerAttribute * geometryAttribute.count;\n                            }\n                        }\n                        else {\n                            state.enableAttribute(programAttribute);\n                        }\n                        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n                        gl.vertexAttribPointer(programAttribute, size, type, normalized, 0, startIndex * size * bytesPerElement);\n                    }\n                }\n                else if (materialDefaultAttributeValues !== undefined) {\n                    const value = materialDefaultAttributeValues[name];\n                    if (value !== undefined) {\n                        switch (value.length) {\n                            case 2:\n                                gl.vertexAttrib2fv(programAttribute, value);\n                                break;\n                            case 3:\n                                gl.vertexAttrib3fv(programAttribute, value);\n                                break;\n                            case 4:\n                                gl.vertexAttrib4fv(programAttribute, value);\n                                break;\n                            default:\n                                gl.vertexAttrib1fv(programAttribute, value);\n                        }\n                    }\n                }\n            }\n        }\n        state.disableUnusedAttributes();\n    }\n    initMaterial(material, fog, object) {\n        const lights = this.lights;\n        const clipping = this.clipping;\n        const materialProperties = this.properties.get(material);\n        const parameters = this.programCache.getParameters(material, this.lights.state, this.shadowsArray, fog, this.clipping.numPlanes, this.clipping.numIntersection, object);\n        const code = this.programCache.getProgramCode(material, parameters);\n        let program = materialProperties.program;\n        let programChange = true;\n        if (program === undefined) {\n            // new material\n            material.addEventListener(\"dispose\", this.onMaterialDispose);\n        }\n        else if (program.code !== code) {\n            // changed glsl or parameters\n            this.releaseMaterialProgramReference(material);\n        }\n        else if (parameters.shaderID !== undefined) {\n            // same glsl and uniform list\n            return;\n        }\n        else {\n            // only rebuild uniform list\n            programChange = false;\n        }\n        if (programChange) {\n            if (parameters.shaderID) {\n                const shader = ShaderLib[parameters.shaderID];\n                materialProperties.shader = {\n                    name: material.type,\n                    uniforms: UniformsUtils.clone(shader.uniforms),\n                    vertexShader: shader.vertexShader,\n                    fragmentShader: shader.fragmentShader,\n                };\n            }\n            else {\n                materialProperties.shader = {\n                    name: material.type,\n                    uniforms: material.uniforms,\n                    vertexShader: material.vertexShader,\n                    fragmentShader: material.fragmentShader,\n                };\n            }\n            material.onBeforeCompile(materialProperties.shader);\n            program = this.programCache.acquireProgram(material, materialProperties.shader, parameters, code);\n            materialProperties.program = program;\n            material.program = program;\n        }\n        const programAttributes = program.getAttributes();\n        if (material.morphTargets) {\n            material.numSupportedMorphTargets = 0;\n            for (let i = 0; i < this.maxMorphTargets; i++) {\n                if (programAttributes[\"morphTarget\" + i] >= 0) {\n                    material.numSupportedMorphTargets++;\n                }\n            }\n        }\n        if (material.morphNormals) {\n            material.numSupportedMorphNormals = 0;\n            for (let i = 0; i < this.maxMorphNormals; i++) {\n                if (programAttributes[\"morphNormal\" + i] >= 0) {\n                    material.numSupportedMorphNormals++;\n                }\n            }\n        }\n        const uniforms = materialProperties.shader.uniforms;\n        if ((!(material instanceof ShaderMaterial) && !(material instanceof RawShaderMaterial)) ||\n            material.clipping === true) {\n            materialProperties.numClippingPlanes = clipping.numPlanes;\n            materialProperties.numIntersection = clipping.numIntersection;\n            uniforms.clippingPlanes = clipping.uniform;\n        }\n        materialProperties.fog = fog;\n        // store the light setup it was created for\n        materialProperties.lightsHash = lights.state.hash;\n        if (material.lights) {\n            // wire up the material to this renderer's lighting state\n            uniforms.ambientLightColor.value = lights.state.ambient;\n            uniforms.directionalLights.value = lights.state.directional;\n            uniforms.spotLights.value = lights.state.spot;\n            uniforms.rectAreaLights.value = lights.state.rectArea;\n            uniforms.pointLights.value = lights.state.point;\n            uniforms.hemisphereLights.value = lights.state.hemi;\n            uniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n            uniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n            uniforms.spotShadowMap.value = lights.state.spotShadowMap;\n            uniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n            uniforms.pointShadowMap.value = lights.state.pointShadowMap;\n            uniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n            // TODO (abelnation): add area lights shadow info to uniforms\n        }\n        const progUniforms = materialProperties.program.getUniforms();\n        const uniformsList = WebGLUniformsWrapper.seqWithValue(progUniforms.seq, uniforms);\n        materialProperties.uniformsList = uniformsList;\n    }\n    deallocateMaterial(material) {\n        this.releaseMaterialProgramReference(material);\n        this.properties.remove(material);\n    }\n    releaseMaterialProgramReference(material) {\n        const programInfo = this.properties.get(material).program;\n        material.program = undefined;\n        if (programInfo !== undefined) {\n            this.programCache.releaseProgram(programInfo);\n        }\n    }\n    setFaceCulling(cullFace, frontFaceDirection) {\n        this.state.setCullFace(cullFace);\n        this.state.setFlipSided(frontFaceDirection === FrontFaceDirectionCW);\n    }\n    allocTextureUnit() {\n        const textureUnit = this.usedTextureUnits;\n        if (textureUnit >= this.capabilities.maxTextures) {\n            console.warn(\"THREE.WebGLRenderer: Trying to use \" +\n                textureUnit +\n                \" texture units while this GPU supports only \" +\n                this.capabilities.maxTextures);\n        }\n        this.usedTextureUnits += 1;\n        return textureUnit;\n    }\n    setTexture2D(texture, unit) {\n        if (texture && texture instanceof WebGLRenderTarget) {\n            if (!this.setTexture2DWarned) {\n                console.warn(\"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\");\n                this.setTexture2DWarned = true;\n            }\n            texture = texture.texture;\n        }\n        this.textures.setTexture2D(texture, unit);\n    }\n    setTextureCube(cubeTexture, slot) {\n        let texture = cubeTexture;\n        // backwards compatibility: peel texture.texture\n        if (cubeTexture && cubeTexture instanceof WebGLRenderTargetCube) {\n            if (!this.setTextureCubeWarned) {\n                console.warn(\"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\");\n                this.setTextureCubeWarned = true;\n            }\n            texture = cubeTexture.texture;\n        }\n        // currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n        // TODO: unify these code paths\n        if ((texture && texture instanceof CubeTexture) ||\n            (Array.isArray(texture.image) && texture.image.length === 6)) {\n            // CompressedTexture can have Array in image :/\n            // this function alone should take care of cube textures\n            this.textures.setTextureCube(texture, slot);\n        }\n        else {\n            // assumed: texture property of THREE.WebGLRenderTargetCube\n            this.textures.setTextureCubeDynamic(texture, slot);\n        }\n    }\n    getRenderTarget() {\n        return this.currentRenderTarget;\n    }\n    setRenderTarget(renderTarget) {\n        const properties = this.properties;\n        this.currentRenderTarget = renderTarget;\n        if (renderTarget && properties.get(renderTarget).__webglFramebuffer === undefined) {\n            this.textures.setupRenderTarget(renderTarget);\n        }\n        let framebuffer = null;\n        let isCube = false;\n        if (renderTarget) {\n            const __webglFramebuffer = properties.get(renderTarget).__webglFramebuffer;\n            if (renderTarget instanceof WebGLRenderTargetCube) {\n                framebuffer = __webglFramebuffer[renderTarget.activeCubeFace];\n                isCube = true;\n            }\n            else {\n                framebuffer = __webglFramebuffer;\n            }\n            this.currentViewport.copy(renderTarget.viewport);\n            this.currentScissor.copy(renderTarget.scissor);\n            this.currentScissorTest = renderTarget.scissorTest;\n        }\n        else {\n            this.currentViewport.copy(this.viewport).multiplyScalar(this.pixelRatio);\n            this.currentScissor.copy(this.scissor).multiplyScalar(this.pixelRatio);\n            this.currentScissorTest = this.scissorTest;\n        }\n        const gl = this.context;\n        const state = this.state;\n        if (this.currentFramebuffer !== framebuffer) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n            this.currentFramebuffer = framebuffer;\n        }\n        state.viewport(this.currentViewport);\n        state.scissor(this.currentScissor);\n        state.setScissorTest(this.currentScissorTest);\n        if (isCube) {\n            const textureProperties = properties.get(renderTarget.texture);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel);\n        }\n    }\n    readRenderTargetPixels(renderTarget, x, y, width, height, buffer) {\n        if (!(renderTarget && renderTarget instanceof WebGLRenderTarget)) {\n            console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\");\n            return;\n        }\n        const gl = this.context;\n        const utils = this.utils;\n        const extensions = this.extensions;\n        const framebuffer = this.properties.get(renderTarget).__webglFramebuffer;\n        if (framebuffer) {\n            let restore = false;\n            if (framebuffer !== this.currentFramebuffer) {\n                gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n                restore = true;\n            }\n            try {\n                var texture = renderTarget.texture;\n                var textureFormat = texture.format;\n                var textureType = texture.type;\n                if (textureFormat !== RGBAFormat &&\n                    utils.convert(textureFormat) !== gl.getParameter(gl.IMPLEMENTATION_COLOR_READ_FORMAT)) {\n                    console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\");\n                    return;\n                }\n                if (textureType !== UnsignedByteType &&\n                    utils.convert(textureType) !== gl.getParameter(gl.IMPLEMENTATION_COLOR_READ_TYPE) && // IE11, Edge and Chrome Mac < 52 (#9513)\n                    !(textureType === FloatType &&\n                        (extensions.get(\"OES_texture_float\") || extensions.get(\"WEBGL_color_buffer_float\"))) && // Chrome Mac >= 52 and Firefox\n                    !(textureType === HalfFloatType && extensions.get(\"EXT_color_buffer_half_float\"))) {\n                    console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\");\n                    return;\n                }\n                if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n                    // the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n                    if (x >= 0 && x <= renderTarget.width - width && (y >= 0 && y <= renderTarget.height - height)) {\n                        gl.readPixels(x, y, width, height, utils.convert(textureFormat), utils.convert(textureType), buffer);\n                    }\n                }\n                else {\n                    console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\");\n                }\n            }\n            finally {\n                if (restore) {\n                    gl.bindFramebuffer(gl.FRAMEBUFFER, this.currentFramebuffer);\n                }\n            }\n        }\n    }\n    copyFramebufferToTexture(position, texture, level) {\n        const gl = this.context;\n        const width = texture.image.width;\n        const height = texture.image.height;\n        const internalFormat = this.utils.convert(texture.format);\n        this.setTexture2D(texture, 0);\n        gl.copyTexImage2D(gl.TEXTURE_2D, level || 0, internalFormat, position.x, position.y, width, height, 0);\n    }\n    // Uniforms (refresh uniforms objects)\n    refreshUniformsCommon(uniforms, material) {\n        uniforms.opacity.value = material.opacity;\n        if (material.color) {\n            uniforms.diffuse.value = material.color;\n        }\n        if (material.emissive) {\n            uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);\n        }\n        if (material.map) {\n            uniforms.map.value = material.map;\n        }\n        if (material.alphaMap) {\n            uniforms.alphaMap.value = material.alphaMap;\n        }\n        if (material.specularMap) {\n            uniforms.specularMap.value = material.specularMap;\n        }\n        if (material.envMap) {\n            uniforms.envMap.value = material.envMap;\n            // don't flip CubeTexture envMaps, flip everything else:\n            //  WebGLRenderTargetCube will be flipped for backwards compatibility\n            //  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n            // this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n            uniforms.flipEnvMap.value = !(material.envMap && material.envMap instanceof CubeTexture) ? 1 : -1;\n            uniforms.reflectivity.value = material.reflectivity;\n            uniforms.refractionRatio.value = material.refractionRatio;\n        }\n        if (material.lightMap) {\n            uniforms.lightMap.value = material.lightMap;\n            uniforms.lightMapIntensity.value = material.lightMapIntensity;\n        }\n        if (material.aoMap) {\n            uniforms.aoMap.value = material.aoMap;\n            uniforms.aoMapIntensity.value = material.aoMapIntensity;\n        }\n        // uv repeat and offset setting priorities\n        // 1. color map\n        // 2. specular map\n        // 3. normal map\n        // 4. bump map\n        // 5. alpha map\n        // 6. emissive map\n        let uvScaleMap;\n        if (material.map) {\n            uvScaleMap = material.map;\n        }\n        else if (material.specularMap) {\n            uvScaleMap = material.specularMap;\n        }\n        else if (material.displacementMap) {\n            uvScaleMap = material.displacementMap;\n        }\n        else if (material.normalMap) {\n            uvScaleMap = material.normalMap;\n        }\n        else if (material.bumpMap) {\n            uvScaleMap = material.bumpMap;\n        }\n        else if (material.roughnessMap) {\n            uvScaleMap = material.roughnessMap;\n        }\n        else if (material.metalnessMap) {\n            uvScaleMap = material.metalnessMap;\n        }\n        else if (material.alphaMap) {\n            uvScaleMap = material.alphaMap;\n        }\n        else if (material.emissiveMap) {\n            uvScaleMap = material.emissiveMap;\n        }\n        if (uvScaleMap !== undefined) {\n            // backwards compatibility\n            if (uvScaleMap instanceof WebGLRenderTarget) {\n                uvScaleMap = uvScaleMap.texture;\n            }\n            if (uvScaleMap.matrixAutoUpdate === true) {\n                const offset = uvScaleMap.offset;\n                const repeat = uvScaleMap.repeat;\n                const rotation = uvScaleMap.rotation;\n                const center = uvScaleMap.center;\n                uvScaleMap.matrix.setUvTransform(offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y);\n            }\n            uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n        }\n    }\n    refreshUniformsLine(uniforms, material) {\n        uniforms.diffuse.value = material.color;\n        uniforms.opacity.value = material.opacity;\n    }\n    refreshUniformsDash(uniforms, material) {\n        uniforms.dashSize.value = material.dashSize;\n        uniforms.totalSize.value = material.dashSize + material.gapSize;\n        uniforms.scale.value = material.scale;\n    }\n    refreshUniformsPoints(uniforms, material) {\n        uniforms.diffuse.value = material.color;\n        uniforms.opacity.value = material.opacity;\n        uniforms.size.value = material.size * this.pixelRatio;\n        uniforms.scale.value = this.height * 0.5;\n        uniforms.map.value = material.map;\n        if (material.map !== null) {\n            if (material.map.matrixAutoUpdate === true) {\n                const offset = material.map.offset;\n                const repeat = material.map.repeat;\n                const rotation = material.map.rotation;\n                const center = material.map.center;\n                material.map.matrix.setUvTransform(offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y);\n            }\n            uniforms.uvTransform.value.copy(material.map.matrix);\n        }\n    }\n    refreshUniformsFog(uniforms, fog) {\n        uniforms.fogColor.value = fog.color;\n        if (fog instanceof Fog) {\n            uniforms.fogNear.value = fog.near;\n            uniforms.fogFar.value = fog.far;\n        }\n        else if (fog instanceof FogExp2) {\n            uniforms.fogDensity.value = fog.density;\n        }\n    }\n    refreshUniformsLambert(uniforms, material) {\n        if (material.emissiveMap) {\n            uniforms.emissiveMap.value = material.emissiveMap;\n        }\n    }\n    refreshUniformsPhong(uniforms, material) {\n        uniforms.specular.value = material.specular;\n        uniforms.shininess.value = Math.max(material.shininess, 1e-4); // to prevent pow( 0.0, 0.0 )\n        if (material.emissiveMap) {\n            uniforms.emissiveMap.value = material.emissiveMap;\n        }\n        if (material.bumpMap) {\n            uniforms.bumpMap.value = material.bumpMap;\n            uniforms.bumpScale.value = material.bumpScale;\n        }\n        if (material.normalMap) {\n            uniforms.normalMap.value = material.normalMap;\n            uniforms.normalScale.value.copy(material.normalScale);\n        }\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n    }\n    refreshUniformsToon(uniforms, material) {\n        this.refreshUniformsPhong(uniforms, material);\n        if (material.gradientMap) {\n            uniforms.gradientMap.value = material.gradientMap;\n        }\n    }\n    refreshUniformsStandard(uniforms, material) {\n        uniforms.roughness.value = material.roughness;\n        uniforms.metalness.value = material.metalness;\n        if (material.roughnessMap) {\n            uniforms.roughnessMap.value = material.roughnessMap;\n        }\n        if (material.metalnessMap) {\n            uniforms.metalnessMap.value = material.metalnessMap;\n        }\n        if (material.emissiveMap) {\n            uniforms.emissiveMap.value = material.emissiveMap;\n        }\n        if (material.bumpMap) {\n            uniforms.bumpMap.value = material.bumpMap;\n            uniforms.bumpScale.value = material.bumpScale;\n        }\n        if (material.normalMap) {\n            uniforms.normalMap.value = material.normalMap;\n            uniforms.normalScale.value.copy(material.normalScale);\n        }\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n        if (material.envMap) {\n            //uniforms.envMap.value = material.envMap; // part of uniforms common\n            uniforms.envMapIntensity.value = material.envMapIntensity;\n        }\n    }\n    refreshUniformsPhysical(uniforms, material) {\n        uniforms.clearCoat.value = material.clearCoat;\n        uniforms.clearCoatRoughness.value = material.clearCoatRoughness;\n        this.refreshUniformsStandard(uniforms, material);\n    }\n    refreshUniformsDepth(uniforms, material) {\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n    }\n    refreshUniformsDistance(uniforms, material) {\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n        uniforms.referencePosition.value.copy(material.referencePosition);\n        uniforms.nearDistance.value = material.nearDistance;\n        uniforms.farDistance.value = material.farDistance;\n    }\n    refreshUniformsNormal(uniforms, material) {\n        if (material.bumpMap) {\n            uniforms.bumpMap.value = material.bumpMap;\n            uniforms.bumpScale.value = material.bumpScale;\n        }\n        if (material.normalMap) {\n            uniforms.normalMap.value = material.normalMap;\n            uniforms.normalScale.value.copy(material.normalScale);\n        }\n        if (material.displacementMap) {\n            uniforms.displacementMap.value = material.displacementMap;\n            uniforms.displacementScale.value = material.displacementScale;\n            uniforms.displacementBias.value = material.displacementBias;\n        }\n    }\n    // If uniforms are marked as clean, they don't need to be loaded to the GPU.\n    markUniformsLightsNeedsUpdate(uniforms, value) {\n        uniforms.ambientLightColor.needsUpdate = value;\n        uniforms.directionalLights.needsUpdate = value;\n        uniforms.pointLights.needsUpdate = value;\n        uniforms.spotLights.needsUpdate = value;\n        uniforms.rectAreaLights.needsUpdate = value;\n        uniforms.hemisphereLights.needsUpdate = value;\n    }\n}\n","import alphamap_fragment from \"./ShaderChunk/alphamap_fragment.glsl\";\nimport alphamap_pars_fragment from \"./ShaderChunk/alphamap_pars_fragment.glsl\";\nimport alphatest_fragment from \"./ShaderChunk/alphatest_fragment.glsl\";\nimport aomap_fragment from \"./ShaderChunk/aomap_fragment.glsl\";\nimport aomap_pars_fragment from \"./ShaderChunk/aomap_pars_fragment.glsl\";\nimport begin_vertex from \"./ShaderChunk/begin_vertex.glsl\";\nimport beginnormal_vertex from \"./ShaderChunk/beginnormal_vertex.glsl\";\nimport bsdfs from \"./ShaderChunk/bsdfs.glsl\";\nimport bumpmap_pars_fragment from \"./ShaderChunk/bumpmap_pars_fragment.glsl\";\nimport clipping_planes_fragment from \"./ShaderChunk/clipping_planes_fragment.glsl\";\nimport clipping_planes_pars_fragment from \"./ShaderChunk/clipping_planes_pars_fragment.glsl\";\nimport clipping_planes_pars_vertex from \"./ShaderChunk/clipping_planes_pars_vertex.glsl\";\nimport clipping_planes_vertex from \"./ShaderChunk/clipping_planes_vertex.glsl\";\nimport color_fragment from \"./ShaderChunk/color_fragment.glsl\";\nimport color_pars_fragment from \"./ShaderChunk/color_pars_fragment.glsl\";\nimport color_pars_vertex from \"./ShaderChunk/color_pars_vertex.glsl\";\nimport color_vertex from \"./ShaderChunk/color_vertex.glsl\";\nimport common from \"./ShaderChunk/common.glsl\";\nimport cube_uv_reflection_fragment from \"./ShaderChunk/cube_uv_reflection_fragment.glsl\";\nimport defaultnormal_vertex from \"./ShaderChunk/defaultnormal_vertex.glsl\";\nimport displacementmap_pars_vertex from \"./ShaderChunk/displacementmap_pars_vertex.glsl\";\nimport displacementmap_vertex from \"./ShaderChunk/displacementmap_vertex.glsl\";\nimport emissivemap_fragment from \"./ShaderChunk/emissivemap_fragment.glsl\";\nimport emissivemap_pars_fragment from \"./ShaderChunk/emissivemap_pars_fragment.glsl\";\nimport encodings_fragment from \"./ShaderChunk/encodings_fragment.glsl\";\nimport encodings_pars_fragment from \"./ShaderChunk/encodings_pars_fragment.glsl\";\nimport envmap_fragment from \"./ShaderChunk/envmap_fragment.glsl\";\nimport envmap_pars_fragment from \"./ShaderChunk/envmap_pars_fragment.glsl\";\nimport envmap_pars_vertex from \"./ShaderChunk/envmap_pars_vertex.glsl\";\nimport envmap_vertex from \"./ShaderChunk/envmap_vertex.glsl\";\nimport fog_vertex from \"./ShaderChunk/fog_vertex.glsl\";\nimport fog_pars_vertex from \"./ShaderChunk/fog_pars_vertex.glsl\";\nimport fog_fragment from \"./ShaderChunk/fog_fragment.glsl\";\nimport fog_pars_fragment from \"./ShaderChunk/fog_pars_fragment.glsl\";\nimport gradientmap_pars_fragment from \"./ShaderChunk/gradientmap_pars_fragment.glsl\";\nimport lightmap_fragment from \"./ShaderChunk/lightmap_fragment.glsl\";\nimport lightmap_pars_fragment from \"./ShaderChunk/lightmap_pars_fragment.glsl\";\nimport lights_lambert_vertex from \"./ShaderChunk/lights_lambert_vertex.glsl\";\nimport lights_pars from \"./ShaderChunk/lights_pars.glsl\";\nimport lights_phong_fragment from \"./ShaderChunk/lights_phong_fragment.glsl\";\nimport lights_phong_pars_fragment from \"./ShaderChunk/lights_phong_pars_fragment.glsl\";\nimport lights_physical_fragment from \"./ShaderChunk/lights_physical_fragment.glsl\";\nimport lights_physical_pars_fragment from \"./ShaderChunk/lights_physical_pars_fragment.glsl\";\nimport lights_template from \"./ShaderChunk/lights_template.glsl\";\nimport logdepthbuf_fragment from \"./ShaderChunk/logdepthbuf_fragment.glsl\";\nimport logdepthbuf_pars_fragment from \"./ShaderChunk/logdepthbuf_pars_fragment.glsl\";\nimport logdepthbuf_pars_vertex from \"./ShaderChunk/logdepthbuf_pars_vertex.glsl\";\nimport logdepthbuf_vertex from \"./ShaderChunk/logdepthbuf_vertex.glsl\";\nimport map_fragment from \"./ShaderChunk/map_fragment.glsl\";\nimport map_pars_fragment from \"./ShaderChunk/map_pars_fragment.glsl\";\nimport map_particle_fragment from \"./ShaderChunk/map_particle_fragment.glsl\";\nimport map_particle_pars_fragment from \"./ShaderChunk/map_particle_pars_fragment.glsl\";\nimport metalnessmap_fragment from \"./ShaderChunk/metalnessmap_fragment.glsl\";\nimport metalnessmap_pars_fragment from \"./ShaderChunk/metalnessmap_pars_fragment.glsl\";\nimport morphnormal_vertex from \"./ShaderChunk/morphnormal_vertex.glsl\";\nimport morphtarget_pars_vertex from \"./ShaderChunk/morphtarget_pars_vertex.glsl\";\nimport morphtarget_vertex from \"./ShaderChunk/morphtarget_vertex.glsl\";\nimport normal_fragment from \"./ShaderChunk/normal_fragment.glsl\";\nimport normalmap_pars_fragment from \"./ShaderChunk/normalmap_pars_fragment.glsl\";\nimport packing from \"./ShaderChunk/packing.glsl\";\nimport premultiplied_alpha_fragment from \"./ShaderChunk/premultiplied_alpha_fragment.glsl\";\nimport project_vertex from \"./ShaderChunk/project_vertex.glsl\";\nimport dithering_fragment from \"./ShaderChunk/dithering_fragment.glsl\";\nimport dithering_pars_fragment from \"./ShaderChunk/dithering_pars_fragment.glsl\";\nimport roughnessmap_fragment from \"./ShaderChunk/roughnessmap_fragment.glsl\";\nimport roughnessmap_pars_fragment from \"./ShaderChunk/roughnessmap_pars_fragment.glsl\";\nimport shadowmap_pars_fragment from \"./ShaderChunk/shadowmap_pars_fragment.glsl\";\nimport shadowmap_pars_vertex from \"./ShaderChunk/shadowmap_pars_vertex.glsl\";\nimport shadowmap_vertex from \"./ShaderChunk/shadowmap_vertex.glsl\";\nimport shadowmask_pars_fragment from \"./ShaderChunk/shadowmask_pars_fragment.glsl\";\nimport skinbase_vertex from \"./ShaderChunk/skinbase_vertex.glsl\";\nimport skinning_pars_vertex from \"./ShaderChunk/skinning_pars_vertex.glsl\";\nimport skinning_vertex from \"./ShaderChunk/skinning_vertex.glsl\";\nimport skinnormal_vertex from \"./ShaderChunk/skinnormal_vertex.glsl\";\nimport specularmap_fragment from \"./ShaderChunk/specularmap_fragment.glsl\";\nimport specularmap_pars_fragment from \"./ShaderChunk/specularmap_pars_fragment.glsl\";\nimport tonemapping_fragment from \"./ShaderChunk/tonemapping_fragment.glsl\";\nimport tonemapping_pars_fragment from \"./ShaderChunk/tonemapping_pars_fragment.glsl\";\nimport uv_pars_fragment from \"./ShaderChunk/uv_pars_fragment.glsl\";\nimport uv_pars_vertex from \"./ShaderChunk/uv_pars_vertex.glsl\";\nimport uv_vertex from \"./ShaderChunk/uv_vertex.glsl\";\nimport uv2_pars_fragment from \"./ShaderChunk/uv2_pars_fragment.glsl\";\nimport uv2_pars_vertex from \"./ShaderChunk/uv2_pars_vertex.glsl\";\nimport uv2_vertex from \"./ShaderChunk/uv2_vertex.glsl\";\nimport worldpos_vertex from \"./ShaderChunk/worldpos_vertex.glsl\";\nimport cube_frag from \"./ShaderLib/cube_frag.glsl\";\nimport cube_vert from \"./ShaderLib/cube_vert.glsl\";\nimport depth_frag from \"./ShaderLib/depth_frag.glsl\";\nimport depth_vert from \"./ShaderLib/depth_vert.glsl\";\nimport distanceRGBA_frag from \"./ShaderLib/distanceRGBA_frag.glsl\";\nimport distanceRGBA_vert from \"./ShaderLib/distanceRGBA_vert.glsl\";\nimport equirect_frag from \"./ShaderLib/equirect_frag.glsl\";\nimport equirect_vert from \"./ShaderLib/equirect_vert.glsl\";\nimport linedashed_frag from \"./ShaderLib/linedashed_frag.glsl\";\nimport linedashed_vert from \"./ShaderLib/linedashed_vert.glsl\";\nimport meshbasic_frag from \"./ShaderLib/meshbasic_frag.glsl\";\nimport meshbasic_vert from \"./ShaderLib/meshbasic_vert.glsl\";\nimport meshlambert_frag from \"./ShaderLib/meshlambert_frag.glsl\";\nimport meshlambert_vert from \"./ShaderLib/meshlambert_vert.glsl\";\nimport meshphong_frag from \"./ShaderLib/meshphong_frag.glsl\";\nimport meshphong_vert from \"./ShaderLib/meshphong_vert.glsl\";\nimport meshphysical_frag from \"./ShaderLib/meshphysical_frag.glsl\";\nimport meshphysical_vert from \"./ShaderLib/meshphysical_vert.glsl\";\nimport normal_frag from \"./ShaderLib/normal_frag.glsl\";\nimport normal_vert from \"./ShaderLib/normal_vert.glsl\";\nimport points_frag from \"./ShaderLib/points_frag.glsl\";\nimport points_vert from \"./ShaderLib/points_vert.glsl\";\nimport shadow_frag from \"./ShaderLib/shadow_frag.glsl\";\nimport shadow_vert from \"./ShaderLib/shadow_vert.glsl\";\nconst ShaderChunk = {\n    alphamap_fragment: alphamap_fragment,\n    alphamap_pars_fragment: alphamap_pars_fragment,\n    alphatest_fragment: alphatest_fragment,\n    aomap_fragment: aomap_fragment,\n    aomap_pars_fragment: aomap_pars_fragment,\n    begin_vertex: begin_vertex,\n    beginnormal_vertex: beginnormal_vertex,\n    bsdfs: bsdfs,\n    bumpmap_pars_fragment: bumpmap_pars_fragment,\n    clipping_planes_fragment: clipping_planes_fragment,\n    clipping_planes_pars_fragment: clipping_planes_pars_fragment,\n    clipping_planes_pars_vertex: clipping_planes_pars_vertex,\n    clipping_planes_vertex: clipping_planes_vertex,\n    color_fragment: color_fragment,\n    color_pars_fragment: color_pars_fragment,\n    color_pars_vertex: color_pars_vertex,\n    color_vertex: color_vertex,\n    common: common,\n    cube_uv_reflection_fragment: cube_uv_reflection_fragment,\n    defaultnormal_vertex: defaultnormal_vertex,\n    displacementmap_pars_vertex: displacementmap_pars_vertex,\n    displacementmap_vertex: displacementmap_vertex,\n    emissivemap_fragment: emissivemap_fragment,\n    emissivemap_pars_fragment: emissivemap_pars_fragment,\n    encodings_fragment: encodings_fragment,\n    encodings_pars_fragment: encodings_pars_fragment,\n    envmap_fragment: envmap_fragment,\n    envmap_pars_fragment: envmap_pars_fragment,\n    envmap_pars_vertex: envmap_pars_vertex,\n    envmap_vertex: envmap_vertex,\n    fog_vertex: fog_vertex,\n    fog_pars_vertex: fog_pars_vertex,\n    fog_fragment: fog_fragment,\n    fog_pars_fragment: fog_pars_fragment,\n    gradientmap_pars_fragment: gradientmap_pars_fragment,\n    lightmap_fragment: lightmap_fragment,\n    lightmap_pars_fragment: lightmap_pars_fragment,\n    lights_lambert_vertex: lights_lambert_vertex,\n    lights_pars: lights_pars,\n    lights_phong_fragment: lights_phong_fragment,\n    lights_phong_pars_fragment: lights_phong_pars_fragment,\n    lights_physical_fragment: lights_physical_fragment,\n    lights_physical_pars_fragment: lights_physical_pars_fragment,\n    lights_template: lights_template,\n    logdepthbuf_fragment: logdepthbuf_fragment,\n    logdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n    logdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n    logdepthbuf_vertex: logdepthbuf_vertex,\n    map_fragment: map_fragment,\n    map_pars_fragment: map_pars_fragment,\n    map_particle_fragment: map_particle_fragment,\n    map_particle_pars_fragment: map_particle_pars_fragment,\n    metalnessmap_fragment: metalnessmap_fragment,\n    metalnessmap_pars_fragment: metalnessmap_pars_fragment,\n    morphnormal_vertex: morphnormal_vertex,\n    morphtarget_pars_vertex: morphtarget_pars_vertex,\n    morphtarget_vertex: morphtarget_vertex,\n    normal_fragment: normal_fragment,\n    normalmap_pars_fragment: normalmap_pars_fragment,\n    packing: packing,\n    premultiplied_alpha_fragment: premultiplied_alpha_fragment,\n    project_vertex: project_vertex,\n    dithering_fragment: dithering_fragment,\n    dithering_pars_fragment: dithering_pars_fragment,\n    roughnessmap_fragment: roughnessmap_fragment,\n    roughnessmap_pars_fragment: roughnessmap_pars_fragment,\n    shadowmap_pars_fragment: shadowmap_pars_fragment,\n    shadowmap_pars_vertex: shadowmap_pars_vertex,\n    shadowmap_vertex: shadowmap_vertex,\n    shadowmask_pars_fragment: shadowmask_pars_fragment,\n    skinbase_vertex: skinbase_vertex,\n    skinning_pars_vertex: skinning_pars_vertex,\n    skinning_vertex: skinning_vertex,\n    skinnormal_vertex: skinnormal_vertex,\n    specularmap_fragment: specularmap_fragment,\n    specularmap_pars_fragment: specularmap_pars_fragment,\n    tonemapping_fragment: tonemapping_fragment,\n    tonemapping_pars_fragment: tonemapping_pars_fragment,\n    uv_pars_fragment: uv_pars_fragment,\n    uv_pars_vertex: uv_pars_vertex,\n    uv_vertex: uv_vertex,\n    uv2_pars_fragment: uv2_pars_fragment,\n    uv2_pars_vertex: uv2_pars_vertex,\n    uv2_vertex: uv2_vertex,\n    worldpos_vertex: worldpos_vertex,\n    cube_frag: cube_frag,\n    cube_vert: cube_vert,\n    depth_frag: depth_frag,\n    depth_vert: depth_vert,\n    distanceRGBA_frag: distanceRGBA_frag,\n    distanceRGBA_vert: distanceRGBA_vert,\n    equirect_frag: equirect_frag,\n    equirect_vert: equirect_vert,\n    linedashed_frag: linedashed_frag,\n    linedashed_vert: linedashed_vert,\n    meshbasic_frag: meshbasic_frag,\n    meshbasic_vert: meshbasic_vert,\n    meshlambert_frag: meshlambert_frag,\n    meshlambert_vert: meshlambert_vert,\n    meshphong_frag: meshphong_frag,\n    meshphong_vert: meshphong_vert,\n    meshphysical_frag: meshphysical_frag,\n    meshphysical_vert: meshphysical_vert,\n    normal_frag: normal_frag,\n    normal_vert: normal_vert,\n    points_frag: points_frag,\n    points_vert: points_vert,\n    shadow_frag: shadow_frag,\n    shadow_vert: shadow_vert\n};\nexport { ShaderChunk };\n","export default \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";","export default \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\";","export default \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";","export default \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";","export default \"\\nvec3 transformed = vec3( position );\\n\";","export default \"\\nvec3 objectNormal = vec3( normal );\\n\";","export default \"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t}\\n\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";","export default \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\";","export default \"#if NUM_CLIPPING_PLANES > 0\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n#endif\\n\";","export default \"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\";","export default \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\";","export default \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\";","export default \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";","export default \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\";","export default \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";","export default \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";","export default \"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\n\";","export default \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";","export default \"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n\";","export default \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\";","export default \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";","export default \"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n\";","export default \"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\\n\";","export default \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";","export default \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\";","export default \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";","export default \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";","export default \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\";","export default \"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";","export default \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\";","export default \"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\";","export default \"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";","export default \"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";","export default \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";","export default \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";","export default \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\";","export default \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";","export default \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\";","export default \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\";","export default \"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";","export default \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\t#endif\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\";","export default \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";","export default \"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\";","export default \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\tgl_Position.z *= gl_Position.w;\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\";","export default \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\";","export default \"#ifdef USE_MAP\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";","export default \"#ifdef USE_MAP\\n\\tuniform mat3 uvTransform;\\n\\tuniform sampler2D map;\\n#endif\\n\";","export default \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n\";","export default \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";","export default \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";","export default \"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";","export default \"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";","export default \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\";","export default \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";","export default \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";","export default \"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\\n\";","export default \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n\";","export default \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";","export default \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";","export default \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\";","export default \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\";","export default \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";","export default \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\";","export default \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\\n\";","export default \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";","export default \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";","export default \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";","export default \"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";","export default \"#ifndef saturate\\n\\t#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";","export default \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";","export default \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\";","export default \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\";","export default \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\";","export default \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\\n\";","export default \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";","export default \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\\n\";","import { Color } from \"../../math/Color\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { ShaderChunk } from \"./ShaderChunk\";\nimport { UniformsLib } from \"./UniformsLib\";\nimport { UniformsUtils } from \"./UniformsUtils\";\nconst ShaderLib = {\n    basic: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.specularmap,\n            UniformsLib.envmap,\n            UniformsLib.aomap,\n            UniformsLib.lightmap,\n            UniformsLib.fog,\n        ]),\n        vertexShader: ShaderChunk.meshbasic_vert,\n        fragmentShader: ShaderChunk.meshbasic_frag,\n    },\n    lambert: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.specularmap,\n            UniformsLib.envmap,\n            UniformsLib.aomap,\n            UniformsLib.lightmap,\n            UniformsLib.emissivemap,\n            UniformsLib.fog,\n            UniformsLib.lights,\n            {\n                emissive: { value: new Color().setHex(0x000000) },\n            },\n        ]),\n        vertexShader: ShaderChunk.meshlambert_vert,\n        fragmentShader: ShaderChunk.meshlambert_frag,\n    },\n    phong: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.specularmap,\n            UniformsLib.envmap,\n            UniformsLib.aomap,\n            UniformsLib.lightmap,\n            UniformsLib.emissivemap,\n            UniformsLib.bumpmap,\n            UniformsLib.normalmap,\n            UniformsLib.displacementmap,\n            UniformsLib.gradientmap,\n            UniformsLib.fog,\n            UniformsLib.lights,\n            {\n                emissive: { value: new Color().setHex(0x000000) },\n                specular: { value: new Color().setHex(0x111111) },\n                shininess: { value: 30 },\n            },\n        ]),\n        vertexShader: ShaderChunk.meshphong_vert,\n        fragmentShader: ShaderChunk.meshphong_frag,\n    },\n    standard: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.envmap,\n            UniformsLib.aomap,\n            UniformsLib.lightmap,\n            UniformsLib.emissivemap,\n            UniformsLib.bumpmap,\n            UniformsLib.normalmap,\n            UniformsLib.displacementmap,\n            UniformsLib.roughnessmap,\n            UniformsLib.metalnessmap,\n            UniformsLib.fog,\n            UniformsLib.lights,\n            {\n                emissive: { value: new Color().setHex(0x000000) },\n                roughness: { value: 0.5 },\n                metalness: { value: 0.5 },\n                envMapIntensity: { value: 1 },\n            },\n        ]),\n        vertexShader: ShaderChunk.meshphysical_vert,\n        fragmentShader: ShaderChunk.meshphysical_frag,\n    },\n    points: {\n        uniforms: UniformsUtils.merge([UniformsLib.points, UniformsLib.fog]),\n        vertexShader: ShaderChunk.points_vert,\n        fragmentShader: ShaderChunk.points_frag,\n    },\n    dashed: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.fog,\n            {\n                scale: { value: 1 },\n                dashSize: { value: 1 },\n                totalSize: { value: 2 },\n            },\n        ]),\n        vertexShader: ShaderChunk.linedashed_vert,\n        fragmentShader: ShaderChunk.linedashed_frag,\n    },\n    depth: {\n        uniforms: UniformsUtils.merge([UniformsLib.common, UniformsLib.displacementmap]),\n        vertexShader: ShaderChunk.depth_vert,\n        fragmentShader: ShaderChunk.depth_frag,\n    },\n    normal: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.bumpmap,\n            UniformsLib.normalmap,\n            UniformsLib.displacementmap,\n            {\n                opacity: { value: 1.0 },\n            },\n        ]),\n        vertexShader: ShaderChunk.normal_vert,\n        fragmentShader: ShaderChunk.normal_frag,\n    },\n    /* -------------------------------------------------------------------------\n     //\tCube map shader\n     ------------------------------------------------------------------------- */\n    cube: {\n        uniforms: {\n            tCube: { value: null },\n            tFlip: { value: -1 },\n            opacity: { value: 1.0 },\n        },\n        vertexShader: ShaderChunk.cube_vert,\n        fragmentShader: ShaderChunk.cube_frag,\n    },\n    equirect: {\n        uniforms: {\n            tEquirect: { value: null },\n        },\n        vertexShader: ShaderChunk.equirect_vert,\n        fragmentShader: ShaderChunk.equirect_frag,\n    },\n    distanceRGBA: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.common,\n            UniformsLib.displacementmap,\n            {\n                referencePosition: { value: new Vector3() },\n                nearDistance: { value: 1 },\n                farDistance: { value: 1000 },\n            },\n        ]),\n        vertexShader: ShaderChunk.distanceRGBA_vert,\n        fragmentShader: ShaderChunk.distanceRGBA_frag,\n    },\n    shadow: {\n        uniforms: UniformsUtils.merge([\n            UniformsLib.lights,\n            UniformsLib.fog,\n            {\n                color: { value: new Color().setHex(0x00000) },\n                opacity: { value: 1.0 },\n            },\n        ]),\n        vertexShader: ShaderChunk.shadow_vert,\n        fragmentShader: ShaderChunk.shadow_frag,\n    },\n};\nShaderLib.physical = {\n    uniforms: UniformsUtils.merge([\n        ShaderLib.standard.uniforms,\n        {\n            clearCoat: { value: 0 },\n            clearCoatRoughness: { value: 0 },\n        },\n    ]),\n    vertexShader: ShaderChunk.meshphysical_vert,\n    fragmentShader: ShaderChunk.meshphysical_frag,\n};\nexport { ShaderLib };\n","export default \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\";","export default \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\\n\";","export default \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\";","export default \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\";","export default \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\\n\";","export default \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\\n\";","export default \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\";","export default \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\";","export default \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";","export default \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";","export default \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";","export default \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";","export default \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";","export default \"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";","export default \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";","export default \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";","export default \"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";","export default \"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";","export default \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\";","export default \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\";","export default \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";","export default \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";","export default \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <fog_fragment>\\n}\\n\";","export default \"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";","import { Color } from \"../../math/Color\";\nimport { Vector2 } from \"../../math/Vector2\";\nimport { Matrix3 } from \"../../math/Matrix3\";\n/**\n * Uniforms library for shared webgl shaders\n */\nconst UniformsLib = {\n    common: {\n        diffuse: { value: new Color().setHex(0xeeeeee) },\n        opacity: { value: 1.0 },\n        map: { value: null },\n        uvTransform: { value: new Matrix3() },\n        alphaMap: { value: null },\n    },\n    specularmap: {\n        specularMap: { value: null },\n    },\n    envmap: {\n        envMap: { value: null },\n        flipEnvMap: { value: -1 },\n        reflectivity: { value: 1.0 },\n        refractionRatio: { value: 0.98 },\n    },\n    aomap: {\n        aoMap: { value: null },\n        aoMapIntensity: { value: 1 },\n    },\n    lightmap: {\n        lightMap: { value: null },\n        lightMapIntensity: { value: 1 },\n    },\n    emissivemap: {\n        emissiveMap: { value: null },\n    },\n    bumpmap: {\n        bumpMap: { value: null },\n        bumpScale: { value: 1 },\n    },\n    normalmap: {\n        normalMap: { value: null },\n        normalScale: { value: new Vector2(1, 1) },\n    },\n    displacementmap: {\n        displacementMap: { value: null },\n        displacementScale: { value: 1 },\n        displacementBias: { value: 0 },\n    },\n    roughnessmap: {\n        roughnessMap: { value: null },\n    },\n    metalnessmap: {\n        metalnessMap: { value: null },\n    },\n    gradientmap: {\n        gradientMap: { value: null },\n    },\n    fog: {\n        fogDensity: { value: 0.00025 },\n        fogNear: { value: 1 },\n        fogFar: { value: 2000 },\n        fogColor: { value: new Color().setHex(0xffffff) },\n    },\n    lights: {\n        ambientLightColor: { value: [] },\n        directionalLights: {\n            value: [],\n            properties: {\n                direction: {},\n                color: {},\n                shadow: {},\n                shadowBias: {},\n                shadowRadius: {},\n                shadowMapSize: {},\n            },\n        },\n        directionalShadowMap: { value: [] },\n        directionalShadowMatrix: { value: [] },\n        spotLights: {\n            value: [],\n            properties: {\n                color: {},\n                position: {},\n                direction: {},\n                distance: {},\n                coneCos: {},\n                penumbraCos: {},\n                decay: {},\n                shadow: {},\n                shadowBias: {},\n                shadowRadius: {},\n                shadowMapSize: {},\n            },\n        },\n        spotShadowMap: { value: [] },\n        spotShadowMatrix: { value: [] },\n        pointLights: {\n            value: [],\n            properties: {\n                color: {},\n                position: {},\n                decay: {},\n                distance: {},\n                shadow: {},\n                shadowBias: {},\n                shadowRadius: {},\n                shadowMapSize: {},\n                shadowCameraNear: {},\n                shadowCameraFar: {},\n            },\n        },\n        pointShadowMap: { value: [] },\n        pointShadowMatrix: { value: [] },\n        hemisphereLights: {\n            value: [],\n            properties: {\n                direction: {},\n                skyColor: {},\n                groundColor: {},\n            },\n        },\n        // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n        rectAreaLights: {\n            value: [],\n            properties: {\n                color: {},\n                position: {},\n                width: {},\n                height: {},\n            },\n        },\n    },\n    points: {\n        diffuse: { value: new Color().setHex(0xeeeeee) },\n        opacity: { value: 1.0 },\n        size: { value: 1.0 },\n        scale: { value: 1.0 },\n        map: { value: null },\n        uvTransform: { value: new Matrix3() },\n    },\n};\nexport { UniformsLib };\n","import { Color } from \"../../math/Color\";\nimport { Matrix3 } from \"../../math/Matrix3\";\nimport { Matrix4 } from \"../../math/Matrix4\";\nimport { Vector2 } from \"../../math/Vector2\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { Vector4 } from \"../../math/Vector4\";\nimport { Texture } from \"../../textures/Texture\";\nexport class UniformsUtils {\n    static merge(uniforms) {\n        const merged = {};\n        for (let u = 0; u < uniforms.length; u++) {\n            const tmp = this.clone(uniforms[u]);\n            for (const p in tmp) {\n                if (tmp.hasOwnProperty(p)) {\n                    merged[p] = tmp[p];\n                }\n            }\n        }\n        return merged;\n    }\n    static clone(uniformsSrc) {\n        const uniformsDst = {};\n        for (const u in uniformsSrc) {\n            if (!uniformsSrc.hasOwnProperty(u))\n                continue;\n            uniformsDst[u] = {};\n            for (const p in uniformsSrc[u]) {\n                if (!uniformsSrc[u].hasOwnProperty(p))\n                    continue;\n                const parameterSrc = uniformsSrc[u][p];\n                if (parameterSrc &&\n                    (parameterSrc instanceof Color ||\n                        parameterSrc instanceof Matrix3 ||\n                        parameterSrc instanceof Matrix4 ||\n                        parameterSrc instanceof Vector2 ||\n                        parameterSrc instanceof Vector3 ||\n                        parameterSrc instanceof Vector4 ||\n                        parameterSrc instanceof Texture)) {\n                    uniformsDst[u][p] = parameterSrc.clone();\n                }\n                else if (Array.isArray(parameterSrc)) {\n                    uniformsDst[u][p] = parameterSrc.slice();\n                }\n                else {\n                    uniformsDst[u][p] = parameterSrc;\n                }\n            }\n        }\n        return uniformsDst;\n    }\n}\n","export class WebGLAttributes {\n    constructor(context) {\n        this.buffers = {};\n        this.context = context;\n    }\n    createBuffer(attribute, bufferType) {\n        const gl = this.context;\n        const array = attribute.array;\n        const usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n        const buffer = gl.createBuffer();\n        gl.bindBuffer(bufferType, buffer);\n        gl.bufferData(bufferType, array, usage);\n        // attribute.onUploadCallback();\n        let type = gl.FLOAT;\n        if (array instanceof Float32Array) {\n            type = gl.FLOAT;\n        }\n        else if (array instanceof Float64Array) {\n            console.warn(`THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.`);\n        }\n        else if (array instanceof Uint16Array) {\n            type = gl.UNSIGNED_SHORT;\n        }\n        else if (array instanceof Int16Array) {\n            type = gl.SHORT;\n        }\n        else if (array instanceof Uint32Array) {\n            type = gl.UNSIGNED_INT;\n        }\n        else if (array instanceof Int32Array) {\n            type = gl.INT;\n        }\n        else if (array instanceof Int8Array) {\n            type = gl.BYTE;\n        }\n        else if (array instanceof Uint8Array) {\n            type = gl.UNSIGNED_BYTE;\n        }\n        return {\n            buffer: buffer,\n            type: type,\n            bytesPerElement: array.BYTES_PER_ELEMENT,\n            version: attribute.version,\n        };\n    }\n    updateBuffer(buffer, attribute, bufferType) {\n        const gl = this.context;\n        const array = attribute.array;\n        const updateRange = attribute.updateRange;\n        gl.bindBuffer(bufferType, buffer);\n        if (attribute.dynamic === false) {\n            gl.bufferData(bufferType, array, gl.STATIC_DRAW);\n        }\n        else if (updateRange.count === -1) {\n            // Not using update ranges\n            gl.bufferSubData(bufferType, 0, array);\n        }\n        else if (updateRange.count === 0) {\n            console.error(`THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.`);\n        }\n        else {\n            gl.bufferSubData(bufferType, updateRange.offset * array.BYTES_PER_ELEMENT, array.subarray(updateRange.offset, updateRange.offset + updateRange.count));\n            updateRange.count = -1; // reset range\n        }\n        return this;\n    }\n    get(attribute) {\n        return this.buffers[attribute.uuid];\n    }\n    remove(attribute) {\n        const data = this.buffers[attribute.uuid];\n        if (data) {\n            const gl = this.context;\n            gl.deleteBuffer(data.buffer);\n            delete this.buffers[attribute.uuid];\n        }\n        return this;\n    }\n    update(attribute, bufferType) {\n        const data = this.buffers[attribute.uuid];\n        if (data === undefined) {\n            this.buffers[attribute.uuid] = this.createBuffer(attribute, bufferType);\n        }\n        else if (data.version < attribute.version) {\n            this.updateBuffer(data.buffer, attribute, bufferType);\n            data.version = attribute.version;\n        }\n        return this;\n    }\n}\n","import { BackSide } from \"../../constants\";\nimport { Color } from \"../../math/Color\";\nimport { Texture } from \"../../textures/Texture\";\nimport { CubeTexture } from \"../../textures/CubeTexture\";\nimport { Mesh } from \"../../objects/Mesh\";\nimport { BoxBufferGeometry } from \"../../geometries/Geometries\";\nimport { ShaderMaterial, MeshBasicMaterial } from \"../../materials/Materials\";\nimport { ShaderLib } from \"../shaders/ShaderLib\";\nimport { OrthographicCamera } from \"../../cameras/OrthographicCamera\";\nimport { PlaneBufferGeometry } from \"../../geometries/PlaneGeometry\";\nexport class WebGLBackground {\n    constructor(renderer, state, geometries, premultipliedAlpha) {\n        this.clearColor = new Color().setHex(0x000000);\n        this.clearAlpha = 0;\n        this.renderer = renderer;\n        this.state = state;\n        this.geometries = geometries;\n        this.premultipliedAlpha = premultipliedAlpha;\n    }\n    getClearColor() {\n        return this.clearColor;\n    }\n    setClearColor(color, alpha) {\n        this.clearColor.copy(color);\n        this.clearAlpha = alpha !== undefined ? alpha : 1;\n        this.setClear(this.clearColor, this.clearAlpha);\n    }\n    getClearAlpha() {\n        return this.clearAlpha;\n    }\n    setClearAlpha(alpha) {\n        this.clearAlpha = alpha;\n        this.setClear(this.clearColor, this.clearAlpha);\n    }\n    setClear(color, alpha) {\n        this.state.buffers.color.setClear(color.r, color.g, color.b, alpha, this.premultipliedAlpha);\n    }\n    render(renderList, scene, camera, forceClear) {\n        const background = scene.background;\n        const renderer = this.renderer;\n        if (background === null) {\n            this.setClear(this.clearColor, this.clearAlpha);\n        }\n        else if (background && background instanceof Color) {\n            this.setClear(background, 1);\n            forceClear = true;\n        }\n        if (this.renderer.autoClear || forceClear) {\n            renderer.clear(this.renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n        }\n        if (background && background instanceof CubeTexture) {\n            if (this.boxMesh === undefined) {\n                this.boxMesh = new Mesh(new BoxBufferGeometry(1, 1, 1), new ShaderMaterial({\n                    uniforms: ShaderLib.cube.uniforms,\n                    vertexShader: ShaderLib.cube.vertexShader,\n                    fragmentShader: ShaderLib.cube.fragmentShader,\n                    side: BackSide,\n                    depthTest: true,\n                    depthWrite: false,\n                    fog: false,\n                }));\n                this.boxMesh.geometry.removeAttribute(\"normal\");\n                this.boxMesh.geometry.removeAttribute(\"uv\");\n                this.boxMesh.onBeforeRender = function (renderer, scene, camera) {\n                    this.matrixWorld.copyPosition(camera.matrixWorld);\n                };\n                this.geometries.update(this.boxMesh.geometry);\n            }\n            this.boxMesh.material.uniforms.tCube.value = background;\n            renderList.push(this.boxMesh, this.boxMesh.geometry, this.boxMesh.material, 0, null);\n        }\n        else if (background && background instanceof Texture) {\n            if (this.planeCamera === undefined) {\n                this.planeCamera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n                this.planeMesh = new Mesh(new PlaneBufferGeometry(2, 2), new MeshBasicMaterial({ depthTest: false, depthWrite: false, fog: false }));\n                this.geometries.update(this.planeMesh.geometry);\n            }\n            this.planeMesh.material.map = background;\n            // TODO Push this to renderList\n            renderer.renderBufferDirect(this.planeCamera, null, this.planeMesh.geometry, this.planeMesh.material, this.planeMesh, null);\n        }\n    }\n}\n","import { InterleavedBufferAttribute } from \"../../core/InterleavedBufferAttribute\";\nexport class WebGLBufferRenderer {\n    constructor(context, extensions, infoRender) {\n        this.mode = 0;\n        this.context = context;\n        this.extensions = extensions;\n        this.infoRender = infoRender;\n    }\n    setMode(value) {\n        this.mode = value;\n        return this;\n    }\n    render(start, count) {\n        const gl = this.context;\n        gl.drawArrays(this.mode, start, count);\n        this.infoRender.calls++;\n        this.infoRender.vertices += count;\n        if (this.mode === gl.TRIANGLES) {\n            this.infoRender.faces += count / 3;\n        }\n        else if (this.mode === gl.POINTS) {\n            this.infoRender.points += count;\n        }\n        return this;\n    }\n    renderInstances(geometry, start, count) {\n        const gl = this.context;\n        const extension = this.extensions.get(\"ANGLE_instanced_arrays\");\n        if (extension === null) {\n            console.error(`THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.`);\n            return this;\n        }\n        const position = geometry.attributes.position;\n        if (position instanceof InterleavedBufferAttribute) {\n            count = position.count;\n            extension.drawArraysInstancedANGLE(this.mode, 0, count, geometry.maxInstancedCount);\n        }\n        else {\n            extension.drawArraysInstancedANGLE(this.mode, start, count, geometry.maxInstancedCount);\n        }\n        this.infoRender.calls++;\n        this.infoRender.vertices += count * geometry.maxInstancedCount;\n        if (this.mode === gl.TRIANGLES) {\n            this.infoRender.faces += geometry.maxInstancedCount * count / 3;\n        }\n        else if (this.mode === gl.POINTS) {\n            this.infoRender.points += geometry.maxInstancedCount * count;\n        }\n        return this;\n    }\n}\n","export class WebGLCapabilities {\n    constructor(context, extensions, parameters) {\n        this.logarithmicDepthBuffer = false;\n        this.maxTextures = 0;\n        this.maxVertexTextures = 0;\n        this.maxTextureSize = 0;\n        this.maxCubemapSize = 0;\n        this.maxAttributes = 0;\n        this.maxVertexUniforms = 0;\n        this.maxVaryings = 0;\n        this.maxFragmentUniforms = 0;\n        this.vertexTextures = false;\n        this.floatFragmentTextures = false;\n        this.floatVertexTextures = false;\n        this.maxAnisotropy = 0;\n        this.context = context;\n        this.extensions = extensions;\n        this.precision = parameters.precision !== undefined ? parameters.precision : \"highp\";\n        this.maxPrecision = this.getMaxPrecision(this.precision);\n        if (this.maxPrecision !== this.precision) {\n            console.warn(`THREE.WebGLRenderer: ${this.precision} not supported, using ${this.maxPrecision} instead.`);\n            this.precision = this.maxPrecision;\n        }\n        this.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n        this.maxTextures = context.getParameter(context.MAX_TEXTURE_IMAGE_UNITS);\n        this.maxVertexTextures = context.getParameter(context.MAX_VERTEX_TEXTURE_IMAGE_UNITS);\n        this.maxTextureSize = context.getParameter(context.MAX_TEXTURE_SIZE);\n        this.maxCubemapSize = context.getParameter(context.MAX_CUBE_MAP_TEXTURE_SIZE);\n        this.maxAttributes = context.getParameter(context.MAX_VERTEX_ATTRIBS);\n        this.maxVertexUniforms = context.getParameter(context.MAX_VERTEX_UNIFORM_VECTORS);\n        this.maxVaryings = context.getParameter(context.MAX_VARYING_VECTORS);\n        this.maxFragmentUniforms = context.getParameter(context.MAX_FRAGMENT_UNIFORM_VECTORS);\n        this.vertexTextures = this.maxVertexTextures > 0;\n        this.floatFragmentTextures = !!this.extensions.get(\"OES_texture_float\");\n        this.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\n        this.maxAnisotropy = this.getMaxAnisotropy();\n    }\n    getMaxPrecision(precision) {\n        const context = this.context;\n        if (precision === \"highp\") {\n            if (context.getShaderPrecisionFormat(context.VERTEX_SHADER, context.HIGH_FLOAT).precision > 0 &&\n                context.getShaderPrecisionFormat(context.FRAGMENT_SHADER, context.HIGH_FLOAT).precision > 0) {\n                return \"highp\";\n            }\n            precision = \"mediump\";\n        }\n        if (precision === \"mediump\") {\n            if (context.getShaderPrecisionFormat(context.VERTEX_SHADER, context.MEDIUM_FLOAT).precision > 0 &&\n                context.getShaderPrecisionFormat(context.FRAGMENT_SHADER, context.MEDIUM_FLOAT).precision > 0) {\n                return \"mediump\";\n            }\n        }\n        return \"lowp\";\n    }\n    getMaxAnisotropy() {\n        const extension = this.extensions.get(\"EXT_texture_filter_anisotropic\");\n        if (extension !== null) {\n            return this.context.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n        }\n        else {\n            return 0;\n        }\n    }\n}\n","import { Plane } from \"../../math/Plane\";\nimport { Matrix3 } from \"../../math/Matrix3\";\nexport class WebGLClipping {\n    constructor() {\n        this.globalState = null;\n        this.numGlobalPlanes = 0;\n        this.localClippingEnabled = false;\n        this.renderingShadows = false;\n        this.uniform = {\n            value: null,\n            needsUpdate: false,\n        };\n        this.numPlanes = 0;\n        this.numIntersection = 0;\n    }\n    projectPlanes(planes, camera, dstOffset, skipTransform = false) {\n        const nPlanes = planes !== null ? planes.length : 0;\n        let dstArray = null;\n        if (nPlanes !== 0) {\n            dstArray = this.uniform.value;\n            if (skipTransform !== true || dstArray === null) {\n                const flatSize = dstOffset + nPlanes * 4;\n                const viewMatrix = camera.matrixWorldInverse;\n                const viewNormalMatrix = new Matrix3().getNormalMatrix(viewMatrix);\n                if (dstArray === null || dstArray.length < flatSize) {\n                    dstArray = new Float32Array(flatSize);\n                }\n                for (let i = 0, i4 = dstOffset; i !== nPlanes; ++i, i4 += 4) {\n                    const plane = new Plane().copy(planes[i]).applyMatrix4(viewMatrix, viewNormalMatrix);\n                    plane.normal.toArray(dstArray, i4);\n                    dstArray[i4 + 3] = plane.constant;\n                }\n            }\n            this.uniform.value = dstArray;\n            this.uniform.needsUpdate = true;\n        }\n        this.numPlanes = nPlanes;\n        return dstArray;\n    }\n    init(planes, enableLocalClipping, camera) {\n        const enabled = planes.length !== 0 ||\n            enableLocalClipping ||\n            // enable state of previous frame - the clipping code has to\n            // run another frame in order to reset the state:\n            this.numGlobalPlanes !== 0 ||\n            this.localClippingEnabled;\n        this.localClippingEnabled = enableLocalClipping;\n        this.globalState = this.projectPlanes(planes, camera, 0);\n        this.numGlobalPlanes = planes.length;\n        return enabled;\n    }\n    beginShadows() {\n        this.renderingShadows = true;\n        this.projectPlanes(null);\n    }\n    endShadows() {\n        this.renderingShadows = false;\n        this.resetGlobalState();\n    }\n    resetGlobalState() {\n        if (this.uniform.value !== this.globalState) {\n            this.uniform.value = this.globalState;\n            this.uniform.needsUpdate = this.numGlobalPlanes > 0;\n        }\n        this.numPlanes = this.numGlobalPlanes;\n        this.numIntersection = 0;\n    }\n    setState(planes, clipIntersection, clipShadows, camera, cache, fromCache) {\n        if (!this.localClippingEnabled ||\n            planes === null ||\n            planes.length === 0 ||\n            (this.renderingShadows && !clipShadows)) {\n            // there's no local clipping\n            if (this.renderingShadows) {\n                // there's no global clipping\n                this.projectPlanes(null);\n            }\n            else {\n                this.resetGlobalState();\n            }\n        }\n        else {\n            const nGlobal = this.renderingShadows ? 0 : this.numGlobalPlanes, lGlobal = nGlobal * 4;\n            let dstArray = cache.clippingState || null;\n            this.uniform.value = dstArray; // ensure unique state\n            dstArray = this.projectPlanes(planes, camera, lGlobal, fromCache);\n            for (let i = 0; i !== lGlobal; ++i) {\n                dstArray[i] = this.globalState[i];\n            }\n            cache.clippingState = dstArray;\n            this.numIntersection = clipIntersection ? this.numPlanes : 0;\n            this.numPlanes += nGlobal;\n        }\n    }\n}\n","export class WebGLExtensions {\n    constructor(context) {\n        this.extensions = {};\n        this.context = context;\n    }\n    get(name) {\n        const gl = this.context;\n        if (this.extensions.hasOwnProperty(name)) {\n            return this.extensions[name];\n        }\n        let extension;\n        switch (name) {\n            case \"WEBGL_depth_texture\":\n                extension =\n                    gl.getExtension(\"WEBGL_depth_texture\") ||\n                        gl.getExtension(\"MOZ_WEBGL_depth_texture\") ||\n                        gl.getExtension(\"WEBKIT_WEBGL_depth_texture\");\n                break;\n            case \"EXT_texture_filter_anisotropic\":\n                extension =\n                    gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\n                        gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\n                        gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\n                break;\n            case \"WEBGL_compressed_texture_s3tc\":\n                extension =\n                    gl.getExtension(\"WEBGL_compressed_texture_s3tc\") ||\n                        gl.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\") ||\n                        gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");\n                break;\n            case \"WEBGL_compressed_texture_pvrtc\":\n                extension =\n                    gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") ||\n                        gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");\n                break;\n            case \"WEBGL_compressed_texture_etc1\":\n                extension = gl.getExtension(\"WEBGL_compressed_texture_etc1\");\n                break;\n            default:\n                extension = gl.getExtension(name);\n        }\n        if (extension === null) {\n            console.warn(`THREE.WebGLRenderer: ${name} extension not supported.`);\n        }\n        this.extensions[name] = extension;\n        return extension;\n    }\n}\n","import { Uint16BufferAttribute, Uint32BufferAttribute } from \"../../core/BufferAttribute\";\nimport { BufferGeometry } from \"../../core/BufferGeometry\";\nimport { Geometry } from \"../../core/Geometry\";\nimport { arrayMax } from \"../../utils\";\nexport class WebGLGeometries {\n    constructor(context, attributes, infoMemory) {\n        this.geometries = {};\n        this.wireframeAttributes = {};\n        this.context = context;\n        this.attributes = attributes;\n        this.infoMemory = infoMemory;\n    }\n    onGeometryDispose(event) {\n        const geometry = event.target;\n        const bufferGeometry = this.geometries[geometry.id];\n        if (bufferGeometry.index !== null) {\n            this.attributes.remove(bufferGeometry.index);\n        }\n        for (const name in bufferGeometry.attributes) {\n            if (!bufferGeometry.attributes.hasOwnProperty(name)) {\n                continue;\n            }\n            this.attributes.remove(bufferGeometry.attributes[name]);\n        }\n        geometry.removeEventListener(\"dispose\", this.onGeometryDispose);\n        delete this.geometries[geometry.id];\n        // TODO Remove duplicate code\n        let attribute = this.wireframeAttributes[geometry.id];\n        if (attribute) {\n            this.attributes.remove(attribute);\n            delete this.wireframeAttributes[geometry.id];\n        }\n        attribute = this.wireframeAttributes[bufferGeometry.id];\n        if (attribute) {\n            this.attributes.remove(attribute);\n            delete this.wireframeAttributes[bufferGeometry.id];\n        }\n        this.infoMemory.geometries--;\n    }\n    get(object, geometry) {\n        let bufferGeometry = this.geometries[geometry.id];\n        if (bufferGeometry)\n            return bufferGeometry;\n        geometry.addEventListener(\"dispose\", this.onGeometryDispose);\n        if (geometry instanceof BufferGeometry) {\n            bufferGeometry = geometry;\n        }\n        else if (geometry instanceof Geometry) {\n            if (geometry.bufferGeometry === undefined) {\n                geometry.bufferGeometry = new BufferGeometry().setFromObject(object);\n            }\n            bufferGeometry = geometry.bufferGeometry;\n        }\n        this.geometries[geometry.id] = bufferGeometry;\n        this.infoMemory.geometries++;\n        return bufferGeometry;\n    }\n    update(geometry) {\n        const index = geometry.index;\n        const geometryAttributes = geometry.attributes;\n        if (index !== null) {\n            this.attributes.update(index, this.context.ELEMENT_ARRAY_BUFFER);\n        }\n        for (const name in geometryAttributes) {\n            if (!geometryAttributes.hasOwnProperty(name)) {\n                continue;\n            }\n            this.attributes.update(geometryAttributes[name], this.context.ARRAY_BUFFER);\n        }\n        // morph targets\n        const morphAttributes = geometry.morphAttributes;\n        for (const name in morphAttributes) {\n            if (!morphAttributes.hasOwnProperty(name)) {\n                continue;\n            }\n            const array = morphAttributes[name];\n            for (let i = 0, l = array.length; i < l; i++) {\n                this.attributes.update(array[i], this.context.ARRAY_BUFFER);\n            }\n        }\n        return this;\n    }\n    getWireframeAttribute(geometry) {\n        let attribute = this.wireframeAttributes[geometry.id];\n        if (attribute)\n            return attribute;\n        const indices = [];\n        if (geometry.index !== null) {\n            const array = geometry.index.array;\n            for (let i = 0, l = array.length; i < l; i += 3) {\n                const a = array[i];\n                const b = array[i + 1];\n                const c = array[i + 2];\n                indices.push(a, b, b, c, c, a);\n            }\n        }\n        else {\n            const array = geometry.attributes.position.array;\n            for (let i = 0, l = array.length / 3 - 1; i < l; i += 3) {\n                const a = i;\n                const b = i + 1;\n                const c = i + 2;\n                indices.push(a, b, b, c, c, a);\n            }\n        }\n        attribute = new (arrayMax(indices) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(indices, 1);\n        this.attributes.update(attribute, this.context.ELEMENT_ARRAY_BUFFER);\n        this.wireframeAttributes[geometry.id] = attribute;\n        return attribute;\n    }\n}\n","export class WebGLIndexedBufferRenderer {\n    constructor(context, extensions, infoRender) {\n        this.mode = 0;\n        this.type = 0;\n        this.bytesPerElement = 0;\n        this.context = context;\n        this.extensions = extensions;\n        this.infoRender = infoRender;\n    }\n    setMode(value) {\n        this.mode = value;\n        return this;\n    }\n    setIndex(value) {\n        this.type = value.type;\n        this.bytesPerElement = value.bytesPerElement;\n        return this;\n    }\n    render(start, count) {\n        const gl = this.context;\n        gl.drawElements(this.mode, count, this.type, start * this.bytesPerElement);\n        this.infoRender.calls++;\n        this.infoRender.vertices += count;\n        if (this.mode === gl.TRIANGLES) {\n            this.infoRender.faces += count / 3;\n        }\n        else if (this.mode === gl.POINTS) {\n            this.infoRender.points += count;\n        }\n        return this;\n    }\n    renderInstances(geometry, start, count) {\n        const gl = this.context;\n        const extension = this.extensions.get(\"ANGLE_instanced_arrays\");\n        if (extension === null) {\n            console.error(`THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.`);\n            return this;\n        }\n        extension.drawElementsInstancedANGLE(this.mode, count, this.type, start * this.bytesPerElement, geometry.maxInstancedCount);\n        this.infoRender.calls++;\n        this.infoRender.vertices += count * geometry.maxInstancedCount;\n        if (this.mode === gl.TRIANGLES) {\n            this.infoRender.faces += geometry.maxInstancedCount * count / 3;\n        }\n        else if (this.mode === gl.POINTS) {\n            this.infoRender.points += geometry.maxInstancedCount * count;\n        }\n        return this;\n    }\n}\n","import { AmbientLight } from \"../../lights/AmbientLight\";\nimport { DirectionalLight } from \"../../lights/DirectionalLight\";\nimport { HemisphereLight } from \"../../lights/HemisphereLight\";\nimport { PointLight } from \"../../lights/PointLight\";\nimport { RectAreaLight } from \"../../lights/RectAreaLight\";\nimport { SpotLight } from \"../../lights/SpotLight\";\nimport { Color } from \"../../math/Color\";\nimport { Matrix4 } from \"../../math/Matrix4\";\nimport { Vector2 } from \"../../math/Vector2\";\nimport { Vector3 } from \"../../math/Vector3\";\nclass LightUniformsCache {\n    constructor() {\n        this.lights = {};\n    }\n    get(light) {\n        if (this.lights[light.id] !== undefined) {\n            return this.lights[light.id];\n        }\n        let uniforms;\n        switch (light.type) {\n            case \"DirectionalLight\":\n                uniforms = {\n                    direction: new Vector3(),\n                    color: new Color(),\n                    shadow: false,\n                    shadowBias: 0,\n                    shadowRadius: 1,\n                    shadowMapSize: new Vector2(),\n                };\n                break;\n            case \"SpotLight\":\n                uniforms = {\n                    position: new Vector3(),\n                    direction: new Vector3(),\n                    color: new Color(),\n                    distance: 0,\n                    coneCos: 0,\n                    penumbraCos: 0,\n                    decay: 0,\n                    shadow: false,\n                    shadowBias: 0,\n                    shadowRadius: 1,\n                    shadowMapSize: new Vector2(),\n                };\n                break;\n            case \"PointLight\":\n                uniforms = {\n                    position: new Vector3(),\n                    color: new Color(),\n                    distance: 0,\n                    decay: 0,\n                    shadow: false,\n                    shadowBias: 0,\n                    shadowRadius: 1,\n                    shadowMapSize: new Vector2(),\n                    shadowCameraNear: 1,\n                    shadowCameraFar: 1000,\n                };\n                break;\n            case \"HemisphereLight\":\n                uniforms = {\n                    direction: new Vector3(),\n                    skyColor: new Color(),\n                    groundColor: new Color(),\n                };\n                break;\n            case \"RectAreaLight\":\n                uniforms = {\n                    color: new Color(),\n                    position: new Vector3(),\n                    halfWidth: new Vector3(),\n                    halfHeight: new Vector3(),\n                };\n                break;\n        }\n        this.lights[light.id] = uniforms;\n        return uniforms;\n    }\n}\nexport class WebGLLights {\n    constructor() {\n        this.cache = new LightUniformsCache();\n        this.state = {\n            hash: \"\",\n            ambient: [0, 0, 0],\n            directional: [],\n            directionalShadowMap: [],\n            directionalShadowMatrix: [],\n            spot: [],\n            spotShadowMap: [],\n            spotShadowMatrix: [],\n            rectArea: [],\n            point: [],\n            pointShadowMap: [],\n            pointShadowMatrix: [],\n            hemi: [],\n        };\n    }\n    setup(lights, shadows, camera) {\n        const vector3 = new Vector3();\n        const matrix4 = new Matrix4();\n        const matrix42 = new Matrix4();\n        let r = 0, g = 0, b = 0;\n        const state = this.state;\n        const cache = this.cache;\n        let directionalLength = 0;\n        let pointLength = 0;\n        let spotLength = 0;\n        let rectAreaLength = 0;\n        let hemisphereLength = 0;\n        const viewMatrix = camera.matrixWorldInverse;\n        for (let i = 0, l = lights.length; i < l; i++) {\n            const light = lights[i];\n            const color = light.color;\n            const intensity = light.intensity;\n            const distance = light.distance;\n            const shadowMap = light.shadow && light.shadow.map ? light.shadow.map.texture : null;\n            if (light instanceof AmbientLight) {\n                r += color.r * intensity;\n                g += color.g * intensity;\n                b += color.b * intensity;\n            }\n            else if (light instanceof DirectionalLight) {\n                const uniforms = cache.get(light);\n                uniforms.color.copy(light.color).multiplyScalar(light.intensity);\n                uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                vector3.setFromMatrixPosition(light.target.matrixWorld);\n                uniforms.direction.sub(vector3);\n                uniforms.direction.transformDirection(viewMatrix);\n                uniforms.shadow = light.castShadow;\n                if (light.castShadow) {\n                    const shadow = light.shadow;\n                    uniforms.shadowBias = shadow.bias;\n                    uniforms.shadowRadius = shadow.radius;\n                    uniforms.shadowMapSize = shadow.mapSize;\n                }\n                state.directionalShadowMap[directionalLength] = shadowMap;\n                state.directionalShadowMatrix[directionalLength] = light.shadow.matrix;\n                state.directional[directionalLength] = uniforms;\n                directionalLength++;\n            }\n            else if (light instanceof SpotLight) {\n                const uniforms = cache.get(light);\n                uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                uniforms.position.applyMatrix4(viewMatrix);\n                uniforms.color.copy(color).multiplyScalar(intensity);\n                uniforms.distance = distance;\n                uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                vector3.setFromMatrixPosition(light.target.matrixWorld);\n                uniforms.direction.sub(vector3);\n                uniforms.direction.transformDirection(viewMatrix);\n                uniforms.coneCos = Math.cos(light.angle);\n                uniforms.penumbraCos = Math.cos(light.angle * (1 - light.penumbra));\n                uniforms.decay = light.distance === 0 ? 0.0 : light.decay;\n                uniforms.shadow = light.castShadow;\n                if (light.castShadow) {\n                    const shadow = light.shadow;\n                    uniforms.shadowBias = shadow.bias;\n                    uniforms.shadowRadius = shadow.radius;\n                    uniforms.shadowMapSize = shadow.mapSize;\n                }\n                state.spotShadowMap[spotLength] = shadowMap;\n                state.spotShadowMatrix[spotLength] = light.shadow.matrix;\n                state.spot[spotLength] = uniforms;\n                spotLength++;\n            }\n            else if (light instanceof RectAreaLight) {\n                const uniforms = cache.get(light);\n                // (a) intensity is the total visible light emitted\n                // uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n                // (b) intensity is the brightness of the light\n                uniforms.color.copy(color).multiplyScalar(intensity);\n                uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                uniforms.position.applyMatrix4(viewMatrix);\n                // extract local rotation of light to derive width/height half vectors\n                matrix42.identity();\n                matrix4.copy(light.matrixWorld);\n                matrix4.premultiply(viewMatrix);\n                matrix42.extractRotation(matrix4);\n                uniforms.halfWidth.set(light.width * 0.5, 0.0, 0.0);\n                uniforms.halfHeight.set(0.0, light.height * 0.5, 0.0);\n                uniforms.halfWidth.applyMatrix4(matrix42);\n                uniforms.halfHeight.applyMatrix4(matrix42);\n                // TODO (abelnation): RectAreaLight distance?\n                // uniforms.distance = distance;\n                state.rectArea[rectAreaLength] = uniforms;\n                rectAreaLength++;\n            }\n            else if (light instanceof PointLight) {\n                const uniforms = cache.get(light);\n                uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                uniforms.position.applyMatrix4(viewMatrix);\n                uniforms.color.copy(light.color).multiplyScalar(light.intensity);\n                uniforms.distance = light.distance;\n                uniforms.decay = light.distance === 0 ? 0.0 : light.decay;\n                uniforms.shadow = light.castShadow;\n                if (light.castShadow) {\n                    const shadow = light.shadow;\n                    uniforms.shadowBias = shadow.bias;\n                    uniforms.shadowRadius = shadow.radius;\n                    uniforms.shadowMapSize = shadow.mapSize;\n                    uniforms.shadowCameraNear = shadow.camera.near;\n                    uniforms.shadowCameraFar = shadow.camera.far;\n                }\n                state.pointShadowMap[pointLength] = shadowMap;\n                state.pointShadowMatrix[pointLength] = light.shadow.matrix;\n                state.point[pointLength] = uniforms;\n                pointLength++;\n            }\n            else if (light instanceof HemisphereLight) {\n                const uniforms = cache.get(light);\n                uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                uniforms.direction.transformDirection(viewMatrix);\n                uniforms.direction.normalize();\n                uniforms.skyColor.copy(light.color).multiplyScalar(intensity);\n                uniforms.groundColor.copy(light.groundColor).multiplyScalar(intensity);\n                state.hemi[hemisphereLength] = uniforms;\n                hemisphereLength++;\n            }\n        }\n        state.ambient[0] = r;\n        state.ambient[1] = g;\n        state.ambient[2] = b;\n        state.directional.length = directionalLength;\n        state.spot.length = spotLength;\n        state.rectArea.length = rectAreaLength;\n        state.point.length = pointLength;\n        state.hemi.length = hemisphereLength;\n        state.hash = [\n            directionalLength,\n            pointLength,\n            spotLength,\n            rectAreaLength,\n            hemisphereLength,\n            shadows.length,\n        ].join(\",\");\n        return this;\n    }\n}\n","export class WebGLMorphtargets {\n    constructor(context) {\n        this.influencesList = {};\n        this.morphInfluences = new Float32Array(8);\n        this.context = context;\n    }\n    update(object, geometry, material, program) {\n        /**\n         * Another not well designed\n         */\n        const objectInfluences = object.morphTargetInfluences;\n        const length = objectInfluences.length;\n        let influences = this.influencesList[geometry.id];\n        if (influences === undefined) {\n            // initialise list\n            influences = [];\n            for (let i = 0; i < length; i++) {\n                influences[i] = [i, 0];\n            }\n            this.influencesList[geometry.id] = influences;\n        }\n        const morphTargets = material.morphTargets && geometry.morphAttributes.position;\n        const morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n        // Remove current morphAttributes\n        for (let i = 0; i < length; i++) {\n            const influence = influences[i];\n            if (influence[1] !== 0) {\n                if (morphTargets)\n                    geometry.removeAttribute(\"morphTarget\" + i);\n                if (morphNormals)\n                    geometry.removeAttribute(\"morphNormal\" + i);\n            }\n        }\n        // Collect influences\n        for (let i = 0; i < length; i++) {\n            const influence = influences[i];\n            influence[0] = i;\n            influence[1] = objectInfluences[i];\n        }\n        influences.sort((a, b) => {\n            return Math.abs(b[1]) - Math.abs(a[1]);\n        });\n        // Add morphAttributes\n        for (let i = 0; i < 8; i++) {\n            const influence = influences[i];\n            if (influence) {\n                const index = influence[0];\n                const value = influence[1];\n                if (value) {\n                    if (morphTargets)\n                        geometry.addAttribute(\"morphTarget\" + i, morphTargets[index]);\n                    if (morphNormals)\n                        geometry.addAttribute(\"morphNormal\" + i, morphNormals[index]);\n                    this.morphInfluences[i] = value;\n                    continue;\n                }\n            }\n            this.morphInfluences[i] = 0;\n        }\n        program.getUniforms().setValue(\"morphTargetInfluences\", this.morphInfluences);\n    }\n}\n","import { Geometry } from \"../../core/Geometry\";\nexport class WebGLObjects {\n    constructor(geometries, infoRender) {\n        this.updateList = {};\n        this.geometries = geometries;\n        this.infoRender = infoRender;\n    }\n    update(object) {\n        const frame = this.infoRender.frame;\n        const geometry = object.geometry;\n        const bufferGeometry = this.geometries.get(object, geometry);\n        // Update once per frame\n        if (this.updateList[bufferGeometry.id] !== frame) {\n            if (geometry instanceof Geometry) {\n                bufferGeometry.updateFromObject(object);\n            }\n            this.geometries.update(bufferGeometry);\n            this.updateList[bufferGeometry.id] = frame;\n        }\n        return bufferGeometry;\n    }\n    dispose() {\n        this.updateList = {};\n    }\n}\n","import { ShaderChunk } from \"../shaders/ShaderChunk\";\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, EquirectangularRefractionMapping, CubeRefractionMapping, SphericalReflectionMapping, EquirectangularReflectionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, CineonToneMapping, Uncharted2ToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding, } from \"../../constants\";\nimport { RawShaderMaterial } from \"../../materials/RawShaderMaterial\";\nimport { WebGLShaderWrapper } from \"./WebGLShader\";\nimport { WebGLUniformsWrapper } from \"./WebGLUniforms\";\nimport { ShaderMaterial } from \"../../materials/Materials\";\nfunction generateDefines(defines) {\n    const chunks = [];\n    for (const name in defines) {\n        if (!defines.hasOwnProperty(name) || defines[name]) {\n            chunks.push(\"#define \" + name + \" \" + defines[name]);\n        }\n    }\n    return chunks.join(\"\\n\");\n}\nfunction generateExtensions(extensions, parameters, rendererExtensions) {\n    extensions = extensions || {};\n    const chunks = [\n        extensions.derivatives ||\n            parameters.envMapCubeUV ||\n            parameters.bumpMap ||\n            parameters.normalMap ||\n            parameters.flatShading\n            ? \"#extension GL_OES_standard_derivatives : enable\"\n            : \"\",\n        (extensions.fragDepth || parameters.logarithmicDepthBuffer) && rendererExtensions.get(\"EXT_frag_depth\")\n            ? \"#extension GL_EXT_frag_depth : enable\"\n            : \"\",\n        extensions.drawBuffers && rendererExtensions.get(\"WEBGL_draw_buffers\")\n            ? \"#extension GL_EXT_draw_buffers : require\"\n            : \"\",\n        (extensions.shaderTextureLOD || parameters.envMap) && rendererExtensions.get(\"EXT_shader_texture_lod\")\n            ? \"#extension GL_EXT_shader_texture_lod : enable\"\n            : \"\",\n    ];\n    return chunks.filter(filterEmptyLine).join(\"\\n\");\n}\nfunction getToneMappingFunction(functionName, toneMapping) {\n    let toneMappingName;\n    switch (toneMapping) {\n        case LinearToneMapping:\n            toneMappingName = \"Linear\";\n            break;\n        case ReinhardToneMapping:\n            toneMappingName = \"Reinhard\";\n            break;\n        case Uncharted2ToneMapping:\n            toneMappingName = \"Uncharted2\";\n            break;\n        case CineonToneMapping:\n            toneMappingName = \"OptimizedCineon\";\n            break;\n        default:\n            throw new Error(\"unsupported toneMapping: \" + toneMapping);\n    }\n    return \"vec3 \" + functionName + \"( vec3 color ) { return \" + toneMappingName + \"ToneMapping( color ); }\";\n}\nfunction filterEmptyLine(str) {\n    return str !== \"\";\n}\nfunction getEncodingComponents(encoding) {\n    switch (encoding) {\n        case LinearEncoding:\n            return [\"Linear\", \"( value )\"];\n        case sRGBEncoding:\n            return [\"sRGB\", \"( value )\"];\n        case RGBEEncoding:\n            return [\"RGBE\", \"( value )\"];\n        case RGBM7Encoding:\n            return [\"RGBM\", \"( value, 7.0 )\"];\n        case RGBM16Encoding:\n            return [\"RGBM\", \"( value, 16.0 )\"];\n        case RGBDEncoding:\n            return [\"RGBD\", \"( value, 256.0 )\"];\n        case GammaEncoding:\n            return [\"Gamma\", \"( value, float( GAMMA_FACTOR ) )\"];\n        default:\n            throw new Error(\"unsupported encoding: \" + encoding);\n    }\n}\nfunction getTexelDecodingFunction(functionName, encoding) {\n    const components = getEncodingComponents(encoding);\n    return \"vec4 \" + functionName + \"( vec4 value ) { return \" + components[0] + \"ToLinear\" + components[1] + \"; }\";\n}\nfunction getTexelEncodingFunction(functionName, encoding) {\n    const components = getEncodingComponents(encoding);\n    return \"vec4 \" + functionName + \"( vec4 value ) { return LinearTo\" + components[0] + components[1] + \"; }\";\n}\nfunction replaceLightNums(str, parameters) {\n    return str\n        .replace(/NUM_DIR_LIGHTS/g, parameters.numDirLights + \"\")\n        .replace(/NUM_SPOT_LIGHTS/g, parameters.numSpotLights + \"\")\n        .replace(/NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights + \"\")\n        .replace(/NUM_POINT_LIGHTS/g, parameters.numPointLights + \"\")\n        .replace(/NUM_HEMI_LIGHTS/g, parameters.numHemiLights + \"\");\n}\nfunction parseIncludes(str) {\n    return str.replace(/^[ \\t]*#include +<([\\w\\d.]+)>/gm, (match, include) => {\n        const replace = ShaderChunk[include];\n        if (replace === undefined) {\n            throw new Error(\"Can not resolve #include <\" + include + \">\");\n        }\n        return parseIncludes(replace);\n    });\n}\nfunction unrollLoops(str) {\n    const pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n    function replace(match, start, end, snippet) {\n        let unroll = \"\";\n        for (let i = parseInt(start, 10); i < parseInt(end, 10); i++) {\n            unroll += snippet.replace(/\\[ i \\]/g, \"[ \" + i + \" ]\");\n        }\n        return unroll;\n    }\n    return str.replace(pattern, replace);\n}\nfunction fetchAttributeLocations(gl, program) {\n    const attributes = {};\n    const n = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    for (let i = 0; i < n; i++) {\n        const info = gl.getActiveAttrib(program, i);\n        const name = info.name;\n        attributes[name] = gl.getAttribLocation(program, name);\n    }\n    return attributes;\n}\nlet programIdCount = 0;\nexport class WebGLProgramWrapper {\n    constructor(renderer, extensions, code, material, shader, parameters) {\n        this.usedTimes = 1;\n        this.id = programIdCount++;\n        this.renderer = renderer;\n        const gl = renderer.context;\n        const defines = material.defines;\n        let vertexShader = shader.vertexShader;\n        let fragmentShader = shader.fragmentShader;\n        let shadowMapTypeDefine = \"SHADOWMAP_TYPE_BASIC\";\n        if (parameters.shadowMapType === PCFShadowMap) {\n            shadowMapTypeDefine = \"SHADOWMAP_TYPE_PCF\";\n        }\n        else if (parameters.shadowMapType === PCFSoftShadowMap) {\n            shadowMapTypeDefine = \"SHADOWMAP_TYPE_PCF_SOFT\";\n        }\n        let envMapTypeDefine = \"ENVMAP_TYPE_CUBE\";\n        let envMapModeDefine = \"ENVMAP_MODE_REFLECTION\";\n        let envMapBlendingDefine = \"ENVMAP_BLENDING_MULTIPLY\";\n        if (parameters.envMap) {\n            switch (material.envMap.mapping) {\n                case CubeReflectionMapping:\n                case CubeRefractionMapping:\n                    envMapTypeDefine = \"ENVMAP_TYPE_CUBE\";\n                    break;\n                case CubeUVReflectionMapping:\n                case CubeUVRefractionMapping:\n                    envMapTypeDefine = \"ENVMAP_TYPE_CUBE_UV\";\n                    break;\n                case EquirectangularReflectionMapping:\n                case EquirectangularRefractionMapping:\n                    envMapTypeDefine = \"ENVMAP_TYPE_EQUIREC\";\n                    break;\n                case SphericalReflectionMapping:\n                    envMapTypeDefine = \"ENVMAP_TYPE_SPHERE\";\n                    break;\n            }\n            switch (material.envMap.mapping) {\n                case CubeRefractionMapping:\n                case EquirectangularRefractionMapping:\n                    envMapModeDefine = \"ENVMAP_MODE_REFRACTION\";\n                    break;\n            }\n            switch (material.combine) {\n                case MultiplyOperation:\n                    envMapBlendingDefine = \"ENVMAP_BLENDING_MULTIPLY\";\n                    break;\n                case MixOperation:\n                    envMapBlendingDefine = \"ENVMAP_BLENDING_MIX\";\n                    break;\n                case AddOperation:\n                    envMapBlendingDefine = \"ENVMAP_BLENDING_ADD\";\n                    break;\n            }\n        }\n        const gammaFactorDefine = renderer.gammaFactor > 0 ? renderer.gammaFactor : 1.0;\n        const customExtensions = generateExtensions(material.extensions, parameters, extensions);\n        const customDefines = generateDefines(defines);\n        const program = gl.createProgram();\n        let prefixVertex, prefixFragment;\n        if (material instanceof RawShaderMaterial) {\n            prefixVertex = [customDefines].filter(filterEmptyLine).join(\"\\n\");\n            if (prefixVertex.length > 0) {\n                prefixVertex += \"\\n\";\n            }\n            prefixFragment = [customExtensions, customDefines].filter(filterEmptyLine).join(\"\\n\");\n            if (prefixFragment.length > 0) {\n                prefixFragment += \"\\n\";\n            }\n        }\n        else {\n            prefixVertex = [\n                \"precision \" + parameters.precision + \" float;\",\n                \"precision \" + parameters.precision + \" int;\",\n                \"#define SHADER_NAME \" + shader.name,\n                customDefines,\n                parameters.supportsVertexTextures ? \"#define VERTEX_TEXTURES\" : \"\",\n                \"#define GAMMA_FACTOR \" + gammaFactorDefine,\n                \"#define MAX_BONES \" + parameters.maxBones,\n                parameters.useFog && parameters.fog ? \"#define USE_FOG\" : \"\",\n                parameters.useFog && parameters.fogExp ? \"#define FOG_EXP2\" : \"\",\n                parameters.map ? \"#define USE_MAP\" : \"\",\n                parameters.envMap ? \"#define USE_ENVMAP\" : \"\",\n                parameters.envMap ? \"#define \" + envMapModeDefine : \"\",\n                parameters.lightMap ? \"#define USE_LIGHTMAP\" : \"\",\n                parameters.aoMap ? \"#define USE_AOMAP\" : \"\",\n                parameters.emissiveMap ? \"#define USE_EMISSIVEMAP\" : \"\",\n                parameters.bumpMap ? \"#define USE_BUMPMAP\" : \"\",\n                parameters.normalMap ? \"#define USE_NORMALMAP\" : \"\",\n                parameters.displacementMap && parameters.supportsVertexTextures ? \"#define USE_DISPLACEMENTMAP\" : \"\",\n                parameters.specularMap ? \"#define USE_SPECULARMAP\" : \"\",\n                parameters.roughnessMap ? \"#define USE_ROUGHNESSMAP\" : \"\",\n                parameters.metalnessMap ? \"#define USE_METALNESSMAP\" : \"\",\n                parameters.alphaMap ? \"#define USE_ALPHAMAP\" : \"\",\n                parameters.vertexColors ? \"#define USE_COLOR\" : \"\",\n                parameters.flatShading ? \"#define FLAT_SHADED\" : \"\",\n                parameters.skinning ? \"#define USE_SKINNING\" : \"\",\n                parameters.useVertexTexture ? \"#define BONE_TEXTURE\" : \"\",\n                parameters.morphTargets ? \"#define USE_MORPHTARGETS\" : \"\",\n                parameters.morphNormals && parameters.flatShading === false ? \"#define USE_MORPHNORMALS\" : \"\",\n                parameters.doubleSided ? \"#define DOUBLE_SIDED\" : \"\",\n                parameters.flipSided ? \"#define FLIP_SIDED\" : \"\",\n                \"#define NUM_CLIPPING_PLANES \" + parameters.numClippingPlanes,\n                parameters.shadowMapEnabled ? \"#define USE_SHADOWMAP\" : \"\",\n                parameters.shadowMapEnabled ? \"#define \" + shadowMapTypeDefine : \"\",\n                parameters.sizeAttenuation ? \"#define USE_SIZEATTENUATION\" : \"\",\n                parameters.logarithmicDepthBuffer ? \"#define USE_LOGDEPTHBUF\" : \"\",\n                parameters.logarithmicDepthBuffer && extensions.get(\"EXT_frag_depth\")\n                    ? \"#define USE_LOGDEPTHBUF_EXT\"\n                    : \"\",\n                \"uniform mat4 modelMatrix;\",\n                \"uniform mat4 modelViewMatrix;\",\n                \"uniform mat4 projectionMatrix;\",\n                \"uniform mat4 viewMatrix;\",\n                \"uniform mat3 normalMatrix;\",\n                \"uniform vec3 cameraPosition;\",\n                \"attribute vec3 position;\",\n                \"attribute vec3 normal;\",\n                \"attribute vec2 uv;\",\n                \"#ifdef USE_COLOR\",\n                \"\tattribute vec3 color;\",\n                \"#endif\",\n                \"#ifdef USE_MORPHTARGETS\",\n                \"\tattribute vec3 morphTarget0;\",\n                \"\tattribute vec3 morphTarget1;\",\n                \"\tattribute vec3 morphTarget2;\",\n                \"\tattribute vec3 morphTarget3;\",\n                \"\t#ifdef USE_MORPHNORMALS\",\n                \"\t\tattribute vec3 morphNormal0;\",\n                \"\t\tattribute vec3 morphNormal1;\",\n                \"\t\tattribute vec3 morphNormal2;\",\n                \"\t\tattribute vec3 morphNormal3;\",\n                \"\t#else\",\n                \"\t\tattribute vec3 morphTarget4;\",\n                \"\t\tattribute vec3 morphTarget5;\",\n                \"\t\tattribute vec3 morphTarget6;\",\n                \"\t\tattribute vec3 morphTarget7;\",\n                \"\t#endif\",\n                \"#endif\",\n                \"#ifdef USE_SKINNING\",\n                \"\tattribute vec4 skinIndex;\",\n                \"\tattribute vec4 skinWeight;\",\n                \"#endif\",\n                \"\\n\",\n            ]\n                .filter(filterEmptyLine)\n                .join(\"\\n\");\n            prefixFragment = [\n                customExtensions,\n                \"precision \" + parameters.precision + \" float;\",\n                \"precision \" + parameters.precision + \" int;\",\n                \"#define SHADER_NAME \" + shader.name,\n                customDefines,\n                parameters.alphaTest ? \"#define ALPHATEST \" + parameters.alphaTest : \"\",\n                \"#define GAMMA_FACTOR \" + gammaFactorDefine,\n                parameters.useFog && parameters.fog ? \"#define USE_FOG\" : \"\",\n                parameters.useFog && parameters.fogExp ? \"#define FOG_EXP2\" : \"\",\n                parameters.map ? \"#define USE_MAP\" : \"\",\n                parameters.envMap ? \"#define USE_ENVMAP\" : \"\",\n                parameters.envMap ? \"#define \" + envMapTypeDefine : \"\",\n                parameters.envMap ? \"#define \" + envMapModeDefine : \"\",\n                parameters.envMap ? \"#define \" + envMapBlendingDefine : \"\",\n                parameters.lightMap ? \"#define USE_LIGHTMAP\" : \"\",\n                parameters.aoMap ? \"#define USE_AOMAP\" : \"\",\n                parameters.emissiveMap ? \"#define USE_EMISSIVEMAP\" : \"\",\n                parameters.bumpMap ? \"#define USE_BUMPMAP\" : \"\",\n                parameters.normalMap ? \"#define USE_NORMALMAP\" : \"\",\n                parameters.specularMap ? \"#define USE_SPECULARMAP\" : \"\",\n                parameters.roughnessMap ? \"#define USE_ROUGHNESSMAP\" : \"\",\n                parameters.metalnessMap ? \"#define USE_METALNESSMAP\" : \"\",\n                parameters.alphaMap ? \"#define USE_ALPHAMAP\" : \"\",\n                parameters.vertexColors ? \"#define USE_COLOR\" : \"\",\n                parameters.gradientMap ? \"#define USE_GRADIENTMAP\" : \"\",\n                parameters.flatShading ? \"#define FLAT_SHADED\" : \"\",\n                parameters.doubleSided ? \"#define DOUBLE_SIDED\" : \"\",\n                parameters.flipSided ? \"#define FLIP_SIDED\" : \"\",\n                \"#define NUM_CLIPPING_PLANES \" + parameters.numClippingPlanes,\n                \"#define UNION_CLIPPING_PLANES \" + (parameters.numClippingPlanes - parameters.numClipIntersection),\n                parameters.shadowMapEnabled ? \"#define USE_SHADOWMAP\" : \"\",\n                parameters.shadowMapEnabled ? \"#define \" + shadowMapTypeDefine : \"\",\n                parameters.premultipliedAlpha ? \"#define PREMULTIPLIED_ALPHA\" : \"\",\n                parameters.physicallyCorrectLights ? \"#define PHYSICALLY_CORRECT_LIGHTS\" : \"\",\n                parameters.logarithmicDepthBuffer ? \"#define USE_LOGDEPTHBUF\" : \"\",\n                parameters.logarithmicDepthBuffer && extensions.get(\"EXT_frag_depth\")\n                    ? \"#define USE_LOGDEPTHBUF_EXT\"\n                    : \"\",\n                parameters.envMap && extensions.get(\"EXT_shader_texture_lod\") ? \"#define TEXTURE_LOD_EXT\" : \"\",\n                \"uniform mat4 viewMatrix;\",\n                \"uniform vec3 cameraPosition;\",\n                parameters.toneMapping !== NoToneMapping ? \"#define TONE_MAPPING\" : \"\",\n                parameters.toneMapping !== NoToneMapping ? ShaderChunk[\"tonemapping_pars_fragment\"] : \"\",\n                parameters.toneMapping !== NoToneMapping\n                    ? getToneMappingFunction(\"toneMapping\", parameters.toneMapping)\n                    : \"\",\n                parameters.dithering ? \"#define DITHERING\" : \"\",\n                parameters.outputEncoding ||\n                    parameters.mapEncoding ||\n                    parameters.envMapEncoding ||\n                    parameters.emissiveMapEncoding\n                    ? ShaderChunk[\"encodings_pars_fragment\"]\n                    : \"\",\n                // this code is required here because it is used by the various encoding/decoding function defined below\n                parameters.mapEncoding ? getTexelDecodingFunction(\"mapTexelToLinear\", parameters.mapEncoding) : \"\",\n                parameters.envMapEncoding\n                    ? getTexelDecodingFunction(\"envMapTexelToLinear\", parameters.envMapEncoding)\n                    : \"\",\n                parameters.emissiveMapEncoding\n                    ? getTexelDecodingFunction(\"emissiveMapTexelToLinear\", parameters.emissiveMapEncoding)\n                    : \"\",\n                parameters.outputEncoding\n                    ? getTexelEncodingFunction(\"linearToOutputTexel\", parameters.outputEncoding)\n                    : \"\",\n                parameters.depthPacking ? \"#define DEPTH_PACKING \" + material.depthPacking : \"\",\n                \"\\n\",\n            ]\n                .filter(filterEmptyLine)\n                .join(\"\\n\");\n        }\n        vertexShader = parseIncludes(vertexShader);\n        vertexShader = replaceLightNums(vertexShader, parameters);\n        fragmentShader = parseIncludes(fragmentShader);\n        fragmentShader = replaceLightNums(fragmentShader, parameters);\n        if (!(material instanceof ShaderMaterial)) {\n            vertexShader = unrollLoops(vertexShader);\n            fragmentShader = unrollLoops(fragmentShader);\n        }\n        const vertexGlsl = prefixVertex + vertexShader;\n        const fragmentGlsl = prefixFragment + fragmentShader;\n        const glVertexShader = new WebGLShaderWrapper(gl, gl.VERTEX_SHADER, vertexGlsl).shader;\n        const glFragmentShader = new WebGLShaderWrapper(gl, gl.FRAGMENT_SHADER, fragmentGlsl).shader;\n        gl.attachShader(program, glVertexShader);\n        gl.attachShader(program, glFragmentShader);\n        // Force a particular attribute to index 0.\n        if (material.index0AttributeName !== undefined) {\n            gl.bindAttribLocation(program, 0, material.index0AttributeName);\n        }\n        else if (parameters.morphTargets === true) {\n            // programs with morphTargets displace position out of attribute 0\n            gl.bindAttribLocation(program, 0, \"position\");\n        }\n        gl.linkProgram(program);\n        const programLog = gl.getProgramInfoLog(program).trim();\n        const vertexLog = gl.getShaderInfoLog(glVertexShader).trim();\n        const fragmentLog = gl.getShaderInfoLog(glFragmentShader).trim();\n        let runnable = true;\n        let haveDiagnostics = true;\n        // console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n        // console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n        if (gl.getProgramParameter(program, gl.LINK_STATUS) === false) {\n            runnable = false;\n            console.error(\"THREE.WebGLProgram: shader error: \", gl.getError(), \"gl.VALIDATE_STATUS\", gl.getProgramParameter(program, gl.VALIDATE_STATUS), \"gl.getProgramInfoLog\", programLog, vertexLog, fragmentLog);\n        }\n        else if (programLog !== \"\") {\n            console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\", programLog);\n        }\n        else if (vertexLog === \"\" || fragmentLog === \"\") {\n            haveDiagnostics = false;\n        }\n        if (haveDiagnostics) {\n            this.diagnostics = {\n                runnable: runnable,\n                material: material,\n                programLog: programLog,\n                vertexShader: {\n                    log: vertexLog,\n                    prefix: prefixVertex,\n                },\n                fragmentShader: {\n                    log: fragmentLog,\n                    prefix: prefixFragment,\n                },\n            };\n        }\n        // clean up\n        gl.deleteShader(glVertexShader);\n        gl.deleteShader(glFragmentShader);\n        this.code = code;\n        this.program = program;\n        this.vertexShader = glVertexShader;\n        this.fragmentShader = glFragmentShader;\n    }\n    getAttributes() {\n        if (this.cachedAttributes === undefined) {\n            this.cachedAttributes = fetchAttributeLocations(this.renderer.context, this.program);\n        }\n        return this.cachedAttributes;\n    }\n    getUniforms() {\n        if (this.cachedUniforms === undefined) {\n            this.cachedUniforms = new WebGLUniformsWrapper(this.renderer, this.program);\n        }\n        return this.cachedUniforms;\n    }\n    // free resource\n    destroy() {\n        this.renderer.context.deleteProgram(this.program);\n        this.program = undefined;\n    }\n}\n","import { BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, GammaEncoding, LinearEncoding, } from \"../../constants\";\nimport { SkinnedMesh } from \"../../objects/SkinnedMesh\";\nimport { WebGLRenderTarget } from \"../WebGLRenderTarget\";\nimport { FogExp2 } from \"../../scenes/FogExp2\";\nimport { Texture } from \"../../textures/Texture\";\nimport { WebGLProgramWrapper } from \"./WebGLProgram\";\nfunction getTextureEncodingFromMap(map, gammaOverrideLinear) {\n    let encoding;\n    if (!map) {\n        encoding = LinearEncoding;\n    }\n    else if (map instanceof Texture) {\n        encoding = map.encoding;\n    }\n    else if (map instanceof WebGLRenderTarget) {\n        console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\");\n        encoding = map.texture.encoding;\n    }\n    // add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n    if (encoding === LinearEncoding && gammaOverrideLinear) {\n        encoding = GammaEncoding;\n    }\n    return encoding;\n}\nexport class WebGLPrograms {\n    constructor(renderer, extensions, capabilities) {\n        this.programs = [];\n        this.renderer = renderer;\n        this.extensions = extensions;\n        this.capabilities = capabilities;\n    }\n    allocateBones(object) {\n        const skeleton = object.skeleton;\n        const bones = skeleton.bones;\n        if (this.capabilities.floatVertexTextures) {\n            return 1024;\n        }\n        else {\n            // default for when object is not specified\n            // ( for example when prebuilding shader to be used with multiple objects )\n            //\n            //  - leave some extra space for other uniforms\n            //  - limit here is ANGLE's 254 max uniform vectors\n            //    (up to 54 should be safe)\n            const nVertexUniforms = this.capabilities.maxVertexUniforms;\n            const nVertexMatrices = Math.floor((nVertexUniforms - 20) / 4);\n            const maxBones = Math.min(nVertexMatrices, bones.length);\n            if (maxBones < bones.length) {\n                console.warn(\"THREE.WebGLRenderer: Skeleton has \" + bones.length + \" bones. This GPU supports \" + maxBones + \".\");\n                return 0;\n            }\n            return maxBones;\n        }\n    }\n    getParameters(material, lights, shadows, fog, nClipPlanes, nClipIntersection, object) {\n        const renderer = this.renderer;\n        const capabilities = this.capabilities;\n        const shaderID = WebGLPrograms.shaderIDs[material.type];\n        // heuristics to create shader parameters according to lights in the scene\n        // (not to blow over maxLights budget)\n        const maxBones = object instanceof SkinnedMesh ? this.allocateBones(object) : 0;\n        let precision = capabilities.precision;\n        if (material.precision !== null) {\n            precision = capabilities.getMaxPrecision(material.precision);\n            if (precision !== material.precision) {\n                console.warn(\"THREE.WebGLProgram.getParameters:\", material.precision, \"not supported, using\", precision, \"instead.\");\n            }\n        }\n        const currentRenderTarget = renderer.getRenderTarget();\n        const parameters = {\n            shaderID: shaderID,\n            precision: precision,\n            supportsVertexTextures: capabilities.vertexTextures,\n            outputEncoding: getTextureEncodingFromMap(!currentRenderTarget ? null : currentRenderTarget.texture, renderer.gammaOutput),\n            map: !!material.map,\n            mapEncoding: getTextureEncodingFromMap(material.map, renderer.gammaInput),\n            envMap: !!material.envMap,\n            envMapMode: material.envMap && material.envMap.mapping,\n            envMapEncoding: getTextureEncodingFromMap(material.envMap, renderer.gammaInput),\n            envMapCubeUV: !!material.envMap &&\n                (material.envMap.mapping === CubeUVReflectionMapping ||\n                    material.envMap.mapping === CubeUVRefractionMapping),\n            lightMap: !!material.lightMap,\n            aoMap: !!material.aoMap,\n            emissiveMap: !!material.emissiveMap,\n            emissiveMapEncoding: getTextureEncodingFromMap(material.emissiveMap, renderer.gammaInput),\n            bumpMap: !!material.bumpMap,\n            normalMap: !!material.normalMap,\n            displacementMap: !!material.displacementMap,\n            roughnessMap: !!material.roughnessMap,\n            metalnessMap: !!material.metalnessMap,\n            specularMap: !!material.specularMap,\n            alphaMap: !!material.alphaMap,\n            gradientMap: !!material.gradientMap,\n            combine: material.combine,\n            vertexColors: material.vertexColors,\n            fog: !!fog,\n            useFog: material.fog,\n            fogExp: fog && fog instanceof FogExp2,\n            flatShading: material.flatShading,\n            sizeAttenuation: material.sizeAttenuation,\n            logarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\n            skinning: material.skinning && maxBones > 0,\n            maxBones: maxBones,\n            useVertexTexture: capabilities.floatVertexTextures,\n            morphTargets: material.morphTargets,\n            morphNormals: material.morphNormals,\n            maxMorphTargets: renderer.maxMorphTargets,\n            maxMorphNormals: renderer.maxMorphNormals,\n            numDirLights: lights.directional.length,\n            numPointLights: lights.point.length,\n            numSpotLights: lights.spot.length,\n            numRectAreaLights: lights.rectArea.length,\n            numHemiLights: lights.hemi.length,\n            numClippingPlanes: nClipPlanes,\n            numClipIntersection: nClipIntersection,\n            dithering: material.dithering,\n            shadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && shadows.length > 0,\n            shadowMapType: renderer.shadowMap.type,\n            toneMapping: renderer.toneMapping,\n            physicallyCorrectLights: renderer.physicallyCorrectLights,\n            premultipliedAlpha: material.premultipliedAlpha,\n            alphaTest: material.alphaTest,\n            doubleSided: material.side === DoubleSide,\n            flipSided: material.side === BackSide,\n            depthPacking: material.depthPacking !== undefined ? material.depthPacking : false,\n        };\n        return parameters;\n    }\n    getProgramCode(material, parameters) {\n        const array = [];\n        if (parameters.shaderID) {\n            array.push(parameters.shaderID);\n        }\n        else {\n            array.push(material.fragmentShader);\n            array.push(material.vertexShader);\n        }\n        if (material.defines !== undefined) {\n            for (const name in material.defines) {\n                if (material.defines.hasOwnProperty(name)) {\n                    array.push(name);\n                    array.push(material.defines[name]);\n                }\n            }\n        }\n        for (let i = 0; i < WebGLPrograms.parameterNames.length; i++) {\n            array.push(parameters[WebGLPrograms.parameterNames[i]]);\n        }\n        array.push(material.onBeforeCompile.toString());\n        array.push(this.renderer.gammaOutput);\n        return array.join();\n    }\n    acquireProgram(material, shader, parameters, code) {\n        let program;\n        // Check if code has been already compiled\n        for (let p = 0, pl = this.programs.length; p < pl; p++) {\n            const programInfo = this.programs[p];\n            if (programInfo.code === code) {\n                program = programInfo;\n                ++program.usedTimes;\n                break;\n            }\n        }\n        if (program === undefined) {\n            program = new WebGLProgramWrapper(this.renderer, this.extensions, code, material, shader, parameters);\n            this.programs.push(program);\n        }\n        return program;\n    }\n    releaseProgram(program) {\n        if (--program.usedTimes === 0) {\n            // Remove from unordered set\n            const i = this.programs.indexOf(program);\n            this.programs[i] = this.programs[this.programs.length - 1];\n            this.programs.pop();\n            // Free WebGL resources\n            program.destroy();\n        }\n    }\n}\nWebGLPrograms.shaderIDs = {\n    MeshDepthMaterial: \"depth\",\n    MeshDistanceMaterial: \"distanceRGBA\",\n    MeshNormalMaterial: \"normal\",\n    MeshBasicMaterial: \"basic\",\n    MeshLambertMaterial: \"lambert\",\n    MeshPhongMaterial: \"phong\",\n    MeshToonMaterial: \"phong\",\n    MeshStandardMaterial: \"physical\",\n    MeshPhysicalMaterial: \"physical\",\n    LineBasicMaterial: \"basic\",\n    LineDashedMaterial: \"dashed\",\n    PointsMaterial: \"points\",\n    ShadowMaterial: \"shadow\",\n};\nWebGLPrograms.parameterNames = [\n    \"precision\",\n    \"supportsVertexTextures\",\n    \"map\",\n    \"mapEncoding\",\n    \"envMap\",\n    \"envMapMode\",\n    \"envMapEncoding\",\n    \"lightMap\",\n    \"aoMap\",\n    \"emissiveMap\",\n    \"emissiveMapEncoding\",\n    \"bumpMap\",\n    \"normalMap\",\n    \"displacementMap\",\n    \"specularMap\",\n    \"roughnessMap\",\n    \"metalnessMap\",\n    \"gradientMap\",\n    \"alphaMap\",\n    \"combine\",\n    \"vertexColors\",\n    \"fog\",\n    \"useFog\",\n    \"fogExp\",\n    \"flatShading\",\n    \"sizeAttenuation\",\n    \"logarithmicDepthBuffer\",\n    \"skinning\",\n    \"maxBones\",\n    \"useVertexTexture\",\n    \"morphTargets\",\n    \"morphNormals\",\n    \"maxMorphTargets\",\n    \"maxMorphNormals\",\n    \"premultipliedAlpha\",\n    \"numDirLights\",\n    \"numPointLights\",\n    \"numSpotLights\",\n    \"numHemiLights\",\n    \"numRectAreaLights\",\n    \"shadowMapEnabled\",\n    \"shadowMapType\",\n    \"toneMapping\",\n    \"physicallyCorrectLights\",\n    \"alphaTest\",\n    \"doubleSided\",\n    \"flipSided\",\n    \"numClippingPlanes\",\n    \"numClipIntersection\",\n    \"depthPacking\",\n    \"dithering\",\n];\n","export class WebGLProperties {\n    constructor() {\n        this.properties = {};\n    }\n    get(object) {\n        const uuid = object.uuid;\n        let map = this.properties[uuid];\n        if (map === undefined) {\n            map = {};\n            this.properties[uuid] = map;\n        }\n        return map;\n    }\n    remove(object) {\n        delete this.properties[object.uuid];\n    }\n    dispose() {\n        this.properties = {};\n    }\n}\n","export class WebGLRenderList {\n    constructor() {\n        this.opaque = [];\n        this.transparent = [];\n        this.renderItems = [];\n        this.renderItemsIndex = 0;\n    }\n    init() {\n        this.renderItemsIndex = 0;\n        this.opaque.length = 0;\n        this.transparent.length = 0;\n        return this;\n    }\n    push(object, geometry, material, z, group) {\n        let renderItem = this.renderItems[this.renderItemsIndex];\n        if (renderItem === undefined) {\n            renderItem = {\n                geometry: geometry,\n                group: group,\n                id: object.id,\n                material: material,\n                object: object,\n                program: material.program,\n                renderOrder: object.renderOrder,\n                z: z,\n            };\n            this.renderItems[this.renderItemsIndex] = renderItem;\n        }\n        else {\n            renderItem.id = object.id;\n            renderItem.object = object;\n            renderItem.geometry = geometry;\n            renderItem.material = material;\n            renderItem.program = material.program;\n            renderItem.renderOrder = object.renderOrder;\n            renderItem.z = z;\n            renderItem.group = group;\n        }\n        (material.transparent === true ? this.transparent : this.opaque).push(renderItem);\n        this.renderItemsIndex++;\n    }\n    sort() {\n        if (this.opaque.length > 1) {\n            this.opaque.sort((a, b) => {\n                if (a.renderOrder !== b.renderOrder) {\n                    return a.renderOrder - b.renderOrder;\n                }\n                else if (a.program && b.program && a.program !== b.program) {\n                    return a.program.id - b.program.id;\n                }\n                else if (a.material.id !== b.material.id) {\n                    return a.material.id - b.material.id;\n                }\n                else if (a.z !== b.z) {\n                    return a.z - b.z;\n                }\n                else {\n                    return a.id - b.id;\n                }\n            });\n        }\n        if (this.transparent.length > 1) {\n            this.transparent.sort((a, b) => {\n                if (a.renderOrder !== b.renderOrder) {\n                    return a.renderOrder - b.renderOrder;\n                }\n                if (a.z !== b.z) {\n                    return b.z - a.z;\n                }\n                else {\n                    return a.id - b.id;\n                }\n            });\n        }\n    }\n}\nexport class WebGLRenderLists {\n    constructor() {\n        this.lists = {};\n    }\n    get(scene, camera) {\n        const hash = scene.id + \",\" + camera.id;\n        let list = this.lists[hash];\n        if (list === undefined) {\n            list = new WebGLRenderList();\n            this.lists[hash] = list;\n        }\n        return list;\n    }\n    dispose() {\n        this.lists = {};\n    }\n}\n","function addLineNumbers(str) {\n    const lines = str.split(\"\\n\");\n    for (let i = 0; i < lines.length; i++) {\n        lines[i] = i + 1 + \": \" + lines[i];\n    }\n    return lines.join(\"\\n\");\n}\nexport class WebGLShaderWrapper {\n    constructor(gl, type, str) {\n        const shader = gl.createShader(type);\n        gl.shaderSource(shader, str);\n        gl.compileShader(shader);\n        if (gl.getShaderParameter(shader, gl.COMPILE_STATUS) === false) {\n            console.error(`THREE.WebGLShader: Shader couldn't compile.`);\n        }\n        if (gl.getShaderInfoLog(shader) !== \"\") {\n            console.warn(`THREE.WebGLShader: gl.getShaderInfoLog() ${type === gl.VERTEX_SHADER ? \"vertex\" : \"fragment\"} ${gl.getShaderInfoLog(shader)} ${addLineNumbers(str)}`);\n        }\n        this.shader = shader;\n    }\n}\n","import { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, PCFShadowMap, RGBADepthPacking, } from \"../../constants\";\nimport { Frustum } from \"../../math/Frustum\";\nimport { Matrix4 } from \"../../math/Matrix4\";\nimport { Vector2 } from \"../../math/Vector2\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { Vector4 } from \"../../math/Vector4\";\nimport { MeshDepthMaterial, MeshDistanceMaterial } from \"../../materials/Materials\";\nimport { PointLight } from \"../../lights/PointLight\";\nimport { WebGLRenderTarget } from \"../WebGLRenderTarget\";\nimport { SpotLightShadow } from \"../../lights/SpotLightShadow\";\nimport { Mesh } from \"../../objects/Mesh\";\nimport { Line } from \"../../objects/Line\";\nimport { Points } from \"../../objects/Points\";\nimport { BufferGeometry } from \"../../core/BufferGeometry\";\nimport { SkinnedMesh } from \"../../objects/SkinnedMesh\";\nimport { Geometry } from \"../../core/Geometry\";\nexport class WebGLShadowMap {\n    constructor(renderer, objects, maxTextureSize) {\n        this.type = PCFShadowMap;\n        this.enabled = false;\n        this.autoUpdate = true;\n        this.needsUpdate = false;\n        this.frustum = new Frustum();\n        this.projScreenMatrix = new Matrix4();\n        this.shadowMapSize = new Vector2();\n        this.lookTarget = new Vector3();\n        this.lightPositionWorld = new Vector3();\n        this.morphingFlag = 1;\n        this.skinningFlag = 2;\n        this.numberOfMaterialVariants = (this.morphingFlag | this.skinningFlag) + 1;\n        this.depthMaterials = new Array(this.numberOfMaterialVariants);\n        this.distanceMaterials = new Array(this.numberOfMaterialVariants);\n        this.materialCache = {};\n        this.renderer = renderer;\n        this.objects = objects;\n        this.maxShadowMapSize = new Vector2(maxTextureSize, maxTextureSize);\n        this.shadowSide = {\n            0: BackSide,\n            1: FrontSide,\n            2: DoubleSide,\n        };\n        this.cubeDirections = [\n            new Vector3(1, 0, 0),\n            new Vector3(-1, 0, 0),\n            new Vector3(0, 0, 1),\n            new Vector3(0, 0, -1),\n            new Vector3(0, 1, 0),\n            new Vector3(0, -1, 0),\n        ];\n        this.cubeUps = [\n            new Vector3(0, 1, 0),\n            new Vector3(0, 1, 0),\n            new Vector3(0, 1, 0),\n            new Vector3(0, 1, 0),\n            new Vector3(0, 0, 1),\n            new Vector3(0, 0, -1),\n        ];\n        this.cube2DViewPorts = [\n            new Vector4(),\n            new Vector4(),\n            new Vector4(),\n            new Vector4(),\n            new Vector4(),\n            new Vector4(),\n        ];\n        // init\n        for (let i = 0; i !== this.numberOfMaterialVariants; i++) {\n            const useMorphing = (i & this.morphingFlag) !== 0;\n            const useSkinning = (i & this.skinningFlag) !== 0;\n            const depthMaterial = new MeshDepthMaterial({\n                depthPacking: RGBADepthPacking,\n                morphTargets: useMorphing,\n                skinning: useSkinning,\n            });\n            this.depthMaterials[i] = depthMaterial;\n            const distanceMaterial = new MeshDistanceMaterial({\n                morphTargets: useMorphing,\n                skinning: useSkinning,\n            });\n            this.distanceMaterials[i] = distanceMaterial;\n        }\n    }\n    getDepthMaterial(object, material, isPointLight, lightPositionWorld, shadowCameraNear, shadowCameraFar) {\n        let result = null;\n        let materialVariants = this.depthMaterials;\n        let customMaterial = object.customDepthMaterial;\n        if (isPointLight) {\n            materialVariants = this.distanceMaterials;\n            customMaterial = object.customDistanceMaterial;\n        }\n        if (!customMaterial) {\n            let useMorphing = false;\n            if (material.morphTargets) {\n                const geometry = object.geometry;\n                if (geometry && geometry instanceof BufferGeometry) {\n                    useMorphing =\n                        geometry.morphAttributes &&\n                            geometry.morphAttributes.position &&\n                            geometry.morphAttributes.position.length > 0;\n                }\n                else if (geometry && geometry instanceof Geometry) {\n                    useMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n                }\n            }\n            if (object instanceof SkinnedMesh && material.skinning === false) {\n                console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\", object);\n            }\n            const useSkinning = object instanceof SkinnedMesh && material.skinning;\n            let variantIndex = 0;\n            if (useMorphing)\n                variantIndex |= this.morphingFlag;\n            if (useSkinning)\n                variantIndex |= this.skinningFlag;\n            result = materialVariants[variantIndex];\n        }\n        else {\n            result = customMaterial;\n        }\n        if (this.renderer.localClippingEnabled &&\n            material.clipShadows === true &&\n            material.clippingPlanes.length !== 0) {\n            // in this case we need a unique material instance reflecting the\n            // appropriate state\n            const keyA = result.uuid, keyB = material.uuid;\n            let materialsForVariant = this.materialCache[keyA];\n            if (materialsForVariant === undefined) {\n                materialsForVariant = {};\n                this.materialCache[keyA] = materialsForVariant;\n            }\n            let cachedMaterial = materialsForVariant[keyB];\n            if (cachedMaterial === undefined) {\n                cachedMaterial = result.clone();\n                materialsForVariant[keyB] = cachedMaterial;\n            }\n            result = cachedMaterial;\n        }\n        result.visible = material.visible;\n        result.wireframe = material.wireframe;\n        result.side = material.shadowSide !== null ? material.shadowSide : this.shadowSide[material.side];\n        result.clipShadows = material.clipShadows;\n        result.clippingPlanes = material.clippingPlanes;\n        result.clipIntersection = material.clipIntersection;\n        result.wireframeLinewidth = material.wireframeLinewidth;\n        result.linewidth = material.linewidth;\n        if (isPointLight && result instanceof MeshDistanceMaterial) {\n            result.referencePosition.copy(lightPositionWorld);\n            result.nearDistance = shadowCameraNear;\n            result.farDistance = shadowCameraFar;\n        }\n        return result;\n    }\n    /**\n     * Ambient lights cannot cast shadows.\n     * Hemisphere lights cannot cast shadows.\n     * RectAreaLight does not support shadows.\n     */\n    render(lights, scene, camera) {\n        if (this.enabled === false)\n            return;\n        if (this.autoUpdate === false && this.needsUpdate === false)\n            return;\n        if (lights.length === 0)\n            return;\n        // TODO Clean up (needed in case of contextlost)\n        const gl = this.renderer.context;\n        const state = this.renderer.state;\n        // Set GL state for depth map.\n        state.disable(gl.BLEND);\n        state.buffers.color.setClear(1, 1, 1, 1);\n        state.buffers.depth.setTest(true);\n        state.setScissorTest(false);\n        // render depth map\n        let faceCount;\n        for (let i = 0, il = lights.length; i < il; i++) {\n            const light = lights[i];\n            const shadow = light.shadow;\n            const isPointLight = light instanceof PointLight;\n            if (shadow === undefined) {\n                console.warn(\"THREE.WebGLShadowMap:\", light, \"has no shadow.\");\n                continue;\n            }\n            const shadowCamera = shadow.camera;\n            this.shadowMapSize.copy(shadow.mapSize);\n            this.shadowMapSize.min(this.maxShadowMapSize);\n            if (isPointLight) {\n                const vpWidth = this.shadowMapSize.x;\n                const vpHeight = this.shadowMapSize.y;\n                // These viewports map a cube-map onto a 2D texture with the\n                // following orientation:\n                //\n                //  xzXZ\n                //   y Y\n                //\n                // X - Positive x direction\n                // x - Negative x direction\n                // Y - Positive y direction\n                // y - Negative y direction\n                // Z - Positive z direction\n                // z - Negative z direction\n                // positive X\n                this.cube2DViewPorts[0].set(vpWidth * 2, vpHeight, vpWidth, vpHeight);\n                // negative X\n                this.cube2DViewPorts[1].set(0, vpHeight, vpWidth, vpHeight);\n                // positive Z\n                this.cube2DViewPorts[2].set(vpWidth * 3, vpHeight, vpWidth, vpHeight);\n                // negative Z\n                this.cube2DViewPorts[3].set(vpWidth, vpHeight, vpWidth, vpHeight);\n                // positive Y\n                this.cube2DViewPorts[4].set(vpWidth * 3, 0, vpWidth, vpHeight);\n                // negative Y\n                this.cube2DViewPorts[5].set(vpWidth, 0, vpWidth, vpHeight);\n                this.shadowMapSize.x *= 4.0;\n                this.shadowMapSize.y *= 2.0;\n            }\n            if (shadow.map === null) {\n                const pars = {\n                    minFilter: NearestFilter,\n                    magFilter: NearestFilter,\n                    format: RGBAFormat,\n                };\n                shadow.map = new WebGLRenderTarget(this.shadowMapSize.x, this.shadowMapSize.y, pars);\n                shadow.map.texture.name = light.name + \".shadowMap\";\n                shadowCamera.updateProjectionMatrix();\n            }\n            /**\n             * Only SpotLight haa a shadow of SpotLightShadow\n             */\n            if (shadow instanceof SpotLightShadow) {\n                shadow.update(light);\n            }\n            const shadowMap = shadow.map;\n            const shadowMatrix = shadow.matrix;\n            this.lightPositionWorld.setFromMatrixPosition(light.matrixWorld);\n            shadowCamera.position.copy(this.lightPositionWorld);\n            if (isPointLight) {\n                faceCount = 6;\n                // for point lights we set the shadow matrix to be a translation-only matrix\n                // equal to inverse of the light's position\n                shadowMatrix.makeTranslation(-this.lightPositionWorld.x, -this.lightPositionWorld.y, -this.lightPositionWorld.z);\n            }\n            else {\n                faceCount = 1;\n                /**\n                 * Not PointLight\n                 */\n                this.lookTarget.setFromMatrixPosition(light.target.matrixWorld);\n                shadowCamera.lookAt(this.lookTarget);\n                shadowCamera.updateMatrixWorld();\n                // compute shadow matrix\n                shadowMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n                shadowMatrix.multiply(shadowCamera.projectionMatrix);\n                shadowMatrix.multiply(shadowCamera.matrixWorldInverse);\n            }\n            this.renderer.setRenderTarget(shadowMap);\n            this.renderer.clear();\n            // render shadow map for each cube face (if omni-directional) or\n            // run a single pass if not\n            for (let face = 0; face < faceCount; face++) {\n                if (isPointLight) {\n                    this.lookTarget.copy(shadowCamera.position);\n                    this.lookTarget.add(this.cubeDirections[face]);\n                    shadowCamera.up.copy(this.cubeUps[face]);\n                    shadowCamera.lookAt(this.lookTarget);\n                    shadowCamera.updateMatrixWorld();\n                    const vpDimensions = this.cube2DViewPorts[face];\n                    state.viewport(vpDimensions);\n                }\n                // update camera matrices and frustum\n                this.projScreenMatrix.multiplyMatrices(shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse);\n                this.frustum.setFromMatrix(this.projScreenMatrix);\n                // set object matrices & frustum culling\n                this.renderObject(scene, camera, shadowCamera, isPointLight);\n            }\n        }\n        this.needsUpdate = false;\n    }\n    renderObject(object, camera, shadowCamera, isPointLight) {\n        if (object.visible === false)\n            return;\n        const visible = object.layers.test(camera.layers);\n        if (visible && (object instanceof Mesh || object instanceof Line || object instanceof Points)) {\n            if (object.castShadow && (!object.frustumCulled || this.frustum.intersectsObject(object))) {\n                object.modelViewMatrix.multiplyMatrices(shadowCamera.matrixWorldInverse, object.matrixWorld);\n                const geometry = this.objects.update(object);\n                const material = object.material;\n                if (Array.isArray(material)) {\n                    const groups = geometry.groups;\n                    for (let k = 0, kl = groups.length; k < kl; k++) {\n                        const group = groups[k];\n                        const groupMaterial = material[group.materialIndex];\n                        if (groupMaterial && groupMaterial.visible) {\n                            const depthMaterial = this.getDepthMaterial(object, groupMaterial, isPointLight, this.lightPositionWorld, shadowCamera.near, shadowCamera.far);\n                            this.renderer.renderBufferDirect(shadowCamera, null, geometry, depthMaterial, object, group);\n                        }\n                    }\n                }\n                else if (material.visible) {\n                    const depthMaterial = this.getDepthMaterial(object, material, isPointLight, this.lightPositionWorld, shadowCamera.near, shadowCamera.far);\n                    this.renderer.renderBufferDirect(shadowCamera, null, geometry, depthMaterial, object, null);\n                }\n            }\n        }\n        const children = object.children;\n        for (let i = 0, l = children.length; i < l; i++) {\n            this.renderObject(children[i], camera, shadowCamera, isPointLight);\n        }\n    }\n}\n","import { CanvasTexture } from \"../../textures/CanvasTexture\";\nimport { Vector3, Quaternion, Fog, FogExp2 } from \"../../Three\";\nexport class WebGLSpriteRenderer {\n    constructor(renderer, state, textures, capabilities) {\n        this.renderer = renderer;\n        this.state = state;\n        this.textures = textures;\n        this.capabilities = capabilities;\n    }\n    init() {\n        const gl = this.renderer.context;\n        const program = this.program;\n        const vertices = new Float32Array([\n            -0.5,\n            -0.5,\n            0,\n            0,\n            0.5,\n            -0.5,\n            1,\n            0,\n            0.5,\n            0.5,\n            1,\n            1,\n            -0.5,\n            0.5,\n            0,\n            1,\n        ]);\n        const faces = new Uint16Array([0, 1, 2, 0, 2, 3]);\n        this.vertexBuffer = gl.createBuffer();\n        this.elementBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.elementBuffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW);\n        this.program = this.createProgram();\n        this.attributes = {\n            position: gl.getAttribLocation(program, \"position\"),\n            uv: gl.getAttribLocation(program, \"uv\"),\n        };\n        this.uniforms = {\n            uvOffset: gl.getUniformLocation(program, \"uvOffset\"),\n            uvScale: gl.getUniformLocation(program, \"uvScale\"),\n            rotation: gl.getUniformLocation(program, \"rotation\"),\n            scale: gl.getUniformLocation(program, \"scale\"),\n            color: gl.getUniformLocation(program, \"color\"),\n            map: gl.getUniformLocation(program, \"map\"),\n            opacity: gl.getUniformLocation(program, \"opacity\"),\n            modelViewMatrix: gl.getUniformLocation(program, \"modelViewMatrix\"),\n            projectionMatrix: gl.getUniformLocation(program, \"projectionMatrix\"),\n            fogType: gl.getUniformLocation(program, \"fogType\"),\n            fogDensity: gl.getUniformLocation(program, \"fogDensity\"),\n            fogNear: gl.getUniformLocation(program, \"fogNear\"),\n            fogFar: gl.getUniformLocation(program, \"fogFar\"),\n            fogColor: gl.getUniformLocation(program, \"fogColor\"),\n            fogDepth: gl.getUniformLocation(program, \"fogDepth\"),\n            alphaTest: gl.getUniformLocation(program, \"alphaTest\"),\n        };\n        const canvas = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\");\n        canvas.width = 8;\n        canvas.height = 8;\n        const context = canvas.getContext(\"2d\");\n        context.fillStyle = \"white\";\n        context.fillRect(0, 0, 8, 8);\n        this.texture = new CanvasTexture(canvas);\n    }\n    createProgram() {\n        const gl = this.renderer.context;\n        const program = gl.createProgram();\n        const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(vertexShader, [\n            \"precision \" + this.capabilities.precision + \" float;\",\n            \"#define SHADER_NAME \" + \"SpriteMaterial\",\n            \"uniform mat4 modelViewMatrix;\",\n            \"uniform mat4 projectionMatrix;\",\n            \"uniform float rotation;\",\n            \"uniform vec2 scale;\",\n            \"uniform vec2 uvOffset;\",\n            \"uniform vec2 uvScale;\",\n            \"attribute vec2 position;\",\n            \"attribute vec2 uv;\",\n            \"varying vec2 vUV;\",\n            \"varying float fogDepth;\",\n            \"void main() {\",\n            \"\tvUV = uvOffset + uv * uvScale;\",\n            \"\tvec2 alignedPosition = position * scale;\",\n            \"\tvec2 rotatedPosition;\",\n            \"\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\",\n            \"\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\",\n            \"\tvec4 mvPosition;\",\n            \"\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\",\n            \"\tmvPosition.xy += rotatedPosition;\",\n            \"\tgl_Position = projectionMatrix * mvPosition;\",\n            \"\tfogDepth = - mvPosition.z;\",\n            \"}\",\n        ].join(\"\\n\"));\n        gl.shaderSource(fragmentShader, [\n            \"precision \" + this.capabilities.precision + \" float;\",\n            \"#define SHADER_NAME \" + \"SpriteMaterial\",\n            \"uniform vec3 color;\",\n            \"uniform sampler2D map;\",\n            \"uniform float opacity;\",\n            \"uniform int fogType;\",\n            \"uniform vec3 fogColor;\",\n            \"uniform float fogDensity;\",\n            \"uniform float fogNear;\",\n            \"uniform float fogFar;\",\n            \"uniform float alphaTest;\",\n            \"varying vec2 vUV;\",\n            \"varying float fogDepth;\",\n            \"void main() {\",\n            \"\tvec4 texture = texture2D( map, vUV );\",\n            \"\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\",\n            \"\tif ( gl_FragColor.a < alphaTest ) discard;\",\n            \"\tif ( fogType > 0 ) {\",\n            \"\t\tfloat fogFactor = 0.0;\",\n            \"\t\tif ( fogType == 1 ) {\",\n            \"\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\",\n            \"\t\t} else {\",\n            \"\t\t\tconst float LOG2 = 1.442695;\",\n            \"\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\",\n            \"\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\",\n            \"\t\t}\",\n            \"\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\",\n            \"\t}\",\n            \"}\",\n        ].join(\"\\n\"));\n        gl.compileShader(vertexShader);\n        gl.compileShader(fragmentShader);\n        gl.attachShader(program, vertexShader);\n        gl.attachShader(program, fragmentShader);\n        gl.linkProgram(program);\n        return program;\n    }\n    render(sprites, scene, camera) {\n        const gl = this.renderer.context;\n        const program = gl.createProgram();\n        const attributes = this.attributes;\n        const uniforms = this.uniforms;\n        const state = this.state;\n        if (sprites.length === 0)\n            return;\n        // setup gl\n        if (program === undefined) {\n            this.init();\n        }\n        state.useProgram(program);\n        state.initAttributes();\n        state.enableAttribute(attributes.position);\n        state.enableAttribute(attributes.uv);\n        state.disableUnusedAttributes();\n        state.disable(gl.CULL_FACE);\n        state.enable(gl.BLEND);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n        gl.vertexAttribPointer(attributes.position, 2, gl.FLOAT, false, 2 * 8, 0);\n        gl.vertexAttribPointer(attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.elementBuffer);\n        gl.uniformMatrix4fv(uniforms.projectionMatrix, false, camera.projectionMatrix.elements);\n        state.activeTexture(gl.TEXTURE0);\n        gl.uniform1i(uniforms.map, 0);\n        let oldFogType = 0;\n        let sceneFogType = 0;\n        const fog = scene.fog;\n        if (fog) {\n            gl.uniform3f(uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b);\n            if (fog instanceof Fog) {\n                gl.uniform1f(uniforms.fogNear, fog.near);\n                gl.uniform1f(uniforms.fogFar, fog.far);\n                gl.uniform1i(uniforms.fogType, 1);\n                oldFogType = 1;\n                sceneFogType = 1;\n            }\n            else if (fog instanceof FogExp2) {\n                gl.uniform1f(uniforms.fogDensity, fog.density);\n                gl.uniform1i(uniforms.fogType, 2);\n                oldFogType = 2;\n                sceneFogType = 2;\n            }\n        }\n        else {\n            gl.uniform1i(uniforms.fogType, 0);\n            oldFogType = 0;\n            sceneFogType = 0;\n        }\n        // update positions and sort\n        for (let i = 0, l = sprites.length; i < l; i++) {\n            const sprite = sprites[i];\n            sprite.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, sprite.matrixWorld);\n            sprite.z = -sprite.modelViewMatrix.elements[14];\n        }\n        sprites.sort((a, b) => {\n            if (a.renderOrder !== b.renderOrder) {\n                return a.renderOrder - b.renderOrder;\n            }\n            else if (a.z !== b.z) {\n                return b.z - a.z;\n            }\n            else {\n                return b.id - a.id;\n            }\n        });\n        // render all sprites\n        const scale = [];\n        for (let i = 0, l = sprites.length; i < l; i++) {\n            const sprite = sprites[i];\n            const material = sprite.material;\n            if (material.visible === false)\n                continue;\n            //sprite.onBeforeRender(this.renderer, scene, camera, undefined, material, undefined );\n            gl.uniform1f(uniforms.alphaTest, material.alphaTest);\n            gl.uniformMatrix4fv(uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements);\n            const spritePosition = new Vector3();\n            const spriteRotation = new Quaternion();\n            const spriteScale = new Vector3();\n            sprite.matrixWorld.decompose(spritePosition, spriteRotation, spriteScale);\n            scale[0] = spriteScale.x;\n            scale[1] = spriteScale.y;\n            let fogType = 0;\n            if (scene.fog && material.fog) {\n                fogType = sceneFogType;\n            }\n            if (oldFogType !== fogType) {\n                gl.uniform1i(uniforms.fogType, fogType);\n                oldFogType = fogType;\n            }\n            if (material.map !== null) {\n                gl.uniform2f(uniforms.uvOffset, material.map.offset.x, material.map.offset.y);\n                gl.uniform2f(uniforms.uvScale, material.map.repeat.x, material.map.repeat.y);\n            }\n            else {\n                gl.uniform2f(uniforms.uvOffset, 0, 0);\n                gl.uniform2f(uniforms.uvScale, 1, 1);\n            }\n            gl.uniform1f(uniforms.opacity, material.opacity);\n            gl.uniform3f(uniforms.color, material.color.r, material.color.g, material.color.b);\n            gl.uniform1f(uniforms.rotation, material.rotation);\n            gl.uniform2fv(uniforms.scale, scale);\n            state.setBlending(material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha);\n            state.buffers.depth.setTest(material.depthTest);\n            state.buffers.depth.setMask(material.depthWrite);\n            state.buffers.color.setMask(material.colorWrite);\n            this.textures.setTexture2D(material.map || this.texture, 0);\n            gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);\n            //sprite.onAfterRender( this.renderer, scene, camera, undefined, material, undefined );\n        }\n        // restore gl\n        state.enable(gl.CULL_FACE);\n        state.reset();\n    }\n}\n","import { AdditiveBlending, AlwaysDepth, BackSide, CullFaceFront, CullFaceBack, CullFaceNone, CustomBlending, DoubleSide, EqualDepth, GreaterDepth, GreaterEqualDepth, LessEqualDepth, LessDepth, MultiplyBlending, NeverDepth, NoBlending, NormalBlending, NotEqualDepth, SubtractiveBlending, } from \"../../constants\";\nimport { Vector4 } from \"../../math/Vector4\";\nexport class ColorBuffer {\n    constructor(context) {\n        this.locked = false;\n        this.color = new Vector4();\n        this.currentColorMask = null;\n        this.currentColorClear = new Vector4(0, 0, 0, 0);\n        this.context = context;\n    }\n    setMask(colorMask) {\n        if (this.currentColorMask !== colorMask && !this.locked) {\n            this.context.colorMask(colorMask, colorMask, colorMask, colorMask);\n            this.currentColorMask = colorMask;\n        }\n        return this;\n    }\n    setLocked(lock) {\n        this.locked = lock;\n        return this;\n    }\n    setClear(r, g, b, a, premultipliedAlpha = false) {\n        if (premultipliedAlpha === true) {\n            r *= a;\n            g *= a;\n            b *= a;\n        }\n        this.color.set(r, g, b, a);\n        if (this.currentColorClear.equals(this.color) === false) {\n            this.context.clearColor(r, g, b, a);\n            this.currentColorClear.copy(this.color);\n        }\n        return this;\n    }\n    reset() {\n        this.locked = false;\n        this.currentColorMask = null;\n        /**\n         * set to invalid state\n         */\n        this.currentColorClear.set(-1, 0, 0, 0);\n        return this;\n    }\n}\nexport class DepthBuffer {\n    constructor(context, capabilities) {\n        this.locked = false;\n        this.currentDepthMask = null;\n        this.currentDepthFunc = null;\n        this.currentDepthClear = null;\n        this.context = context;\n        this.capabilities = capabilities;\n    }\n    setTest(depthTest = false) {\n        if (depthTest) {\n            this.enable(this.context.DEPTH_TEST);\n        }\n        else {\n            this.disable(this.context.DEPTH_TEST);\n        }\n        return this;\n    }\n    setMask(depthMask) {\n        if (this.currentDepthMask !== depthMask && !this.locked) {\n            this.context.depthMask(depthMask);\n            this.currentDepthMask = depthMask;\n        }\n        return this;\n    }\n    /**\n     * 开启深度测试功能后才能设置对应的比较函数\n     * 启用方式gl.enable(gl.DEPTH_TEST)\n     * 用于指定深度缓冲比较值）\n     GL_NEVER,不通过（输入的深度值不取代参考值）\n     GL_LESS,如果输入的深度值小于参考值，则通过\n     GL_EQUAL,如果输入的深度值等于参考值，则通过\n     GL_LEQUAL,如果输入的深度值小于或等于参考值，则通过\n     GL_GREATER,如果输入的深度值大于参考值，则通过\n     GL_NOTEQUAL,如果输入的深度值不等于参考值，则通过\n     GL_GEQUAL,如果输入的深度值大于或等于参考值，则通过\n     GL_ALWAYS,总是通过（输入的深度值取代参考值）\n     * Z Buffer 值为具体的比较对象，在不使用深度测试的时候，\n     * 如果我们先绘制一个距离较近的物体，再绘制距离较远的物体，则距离远的物体因为后绘制，会把距离近的物体覆盖掉，这样的效果并不是我们所希望的。\n     * 而有了深度缓冲以后，绘制物体的顺序就不那么重要了，都能按照远近（Z值）正常显示，这很关键。\n     * 实际上，只要存在深度缓冲区，无论是否启用深度测试，OpenGL在像素被绘制时都会尝试将深度数据写入到缓冲区内，\n     * 除非调用了glDepthMask(GL_FALSE)来禁止写入。这些深度数据除了用于常规的测试外，还可以有一些有趣的用途，比如绘制阴影等等。\n     *\n     * 绘制半透明物体时，需注意：在绘制半透明物体时前，还需要利用glDepthMask(GL_FALSE)将深度缓冲区设置为只读形式，\n     * 否则可能出现画面错误。为什么呢，因为画透明物体时，将使用混色，这时就不能继续使用深度模式，\n     * 而是利用混色函数来进行混合。这一来，就可以使用混合函数绘制半透明物体了。\n     *\n     * @param depthFunc\n     */\n    setFunc(depthFunc) {\n        if (this.currentDepthFunc !== depthFunc) {\n            const gl = this.context;\n            if (depthFunc) {\n                switch (depthFunc) {\n                    case NeverDepth:\n                        gl.depthFunc(gl.NEVER);\n                        break;\n                    case AlwaysDepth:\n                        gl.depthFunc(gl.ALWAYS);\n                        break;\n                    case LessDepth:\n                        gl.depthFunc(gl.LESS);\n                        break;\n                    case LessEqualDepth:\n                        gl.depthFunc(gl.LEQUAL);\n                        break;\n                    case EqualDepth:\n                        gl.depthFunc(gl.EQUAL);\n                        break;\n                    case GreaterEqualDepth:\n                        gl.depthFunc(gl.GEQUAL);\n                        break;\n                    case GreaterDepth:\n                        gl.depthFunc(gl.GREATER);\n                        break;\n                    case NotEqualDepth:\n                        gl.depthFunc(gl.NOTEQUAL);\n                        break;\n                    default:\n                        gl.depthFunc(gl.LEQUAL);\n                }\n            }\n            else {\n                gl.depthFunc(gl.LEQUAL);\n            }\n            this.currentDepthFunc = depthFunc;\n        }\n        return this;\n    }\n    setLocked(lock = false) {\n        this.locked = lock;\n        return this;\n    }\n    setClear(depth) {\n        if (this.currentDepthClear !== depth) {\n            this.context.clearDepth(depth);\n            this.currentDepthClear = depth;\n        }\n        return this;\n    }\n    reset() {\n        this.locked = false;\n        this.currentDepthMask = null;\n        this.currentDepthFunc = null;\n        this.currentDepthClear = null;\n        return this;\n    }\n    enable(id) {\n        if (this.capabilities[id] !== true) {\n            this.context.enable(id);\n            this.capabilities[id] = true;\n        }\n        return this;\n    }\n    disable(id) {\n        if (this.capabilities[id] !== false) {\n            this.context.disable(id);\n            this.capabilities[id] = false;\n        }\n        return this;\n    }\n}\nexport class StencilBuffer {\n    constructor(context, capabilities) {\n        this.locked = false;\n        this.currentStencilMask = null;\n        this.currentStencilFunc = null;\n        this.currentStencilRef = null;\n        this.currentStencilFuncMask = null;\n        this.currentStencilFail = null;\n        this.currentStencilZFail = null;\n        this.currentStencilZPass = null;\n        this.currentStencilClear = null;\n        this.context = context;\n        this.capabilities = capabilities;\n    }\n    setTest(stencilTest) {\n        if (stencilTest) {\n            this.enable(this.context.STENCIL_TEST);\n        }\n        else {\n            this.disable(this.context.STENCIL_TEST);\n        }\n        return this;\n    }\n    setMask(stencilMask) {\n        if (this.currentStencilMask !== stencilMask && !this.locked) {\n            this.context.stencilMask(stencilMask);\n            this.currentStencilMask = stencilMask;\n        }\n        return this;\n    }\n    setFunc(stencilFunc, stencilRef, stencilMask) {\n        if (this.currentStencilFunc !== stencilFunc ||\n            this.currentStencilRef !== stencilRef ||\n            this.currentStencilFuncMask !== stencilMask) {\n            this.context.stencilFunc(stencilFunc, stencilRef, stencilMask);\n            this.currentStencilFunc = stencilFunc;\n            this.currentStencilRef = stencilRef;\n            this.currentStencilFuncMask = stencilMask;\n        }\n        return this;\n    }\n    setOp(stencilFail, stencilZFail, stencilZPass) {\n        if (this.currentStencilFail !== stencilFail ||\n            this.currentStencilZFail !== stencilZFail ||\n            this.currentStencilZPass !== stencilZPass) {\n            this.context.stencilOp(stencilFail, stencilZFail, stencilZPass);\n            this.currentStencilFail = stencilFail;\n            this.currentStencilZFail = stencilZFail;\n            this.currentStencilZPass = stencilZPass;\n        }\n        return this;\n    }\n    setLocked(lock) {\n        this.locked = lock;\n        return this;\n    }\n    setClear(stencil) {\n        if (this.currentStencilClear !== stencil) {\n            this.context.clearStencil(stencil);\n            this.currentStencilClear = stencil;\n        }\n        return this;\n    }\n    reset() {\n        this.locked = false;\n        this.currentStencilMask = null;\n        this.currentStencilFunc = null;\n        this.currentStencilRef = null;\n        this.currentStencilFuncMask = null;\n        this.currentStencilFail = null;\n        this.currentStencilZFail = null;\n        this.currentStencilZPass = null;\n        this.currentStencilClear = null;\n        return this;\n    }\n    enable(id) {\n        if (this.capabilities[id] !== true) {\n            this.context.enable(id);\n            this.capabilities[id] = true;\n        }\n        return this;\n    }\n    disable(id) {\n        if (this.capabilities[id] !== false) {\n            this.context.disable(id);\n            this.capabilities[id] = false;\n        }\n        return this;\n    }\n}\nexport class WebGLState {\n    constructor(context, extensions, utils) {\n        this.capabilities = {};\n        this.buffers = {\n            color: null,\n            depth: null,\n            stencil: null,\n        };\n        this.lineWidthAvailable = false;\n        this.currentScissor = new Vector4();\n        this.currentViewport = new Vector4();\n        this.emptyTextures = {};\n        this.currentFlipSided = null;\n        this.currentCullFace = null;\n        this.currentBlending = null;\n        this.currentPremultipledAlpha = false;\n        this.currentBlendEquation = null;\n        this.currentBlendEquationAlpha = null;\n        this.currentBlendSrc = null;\n        this.currentBlendDst = null;\n        this.currentBlendSrcAlpha = null;\n        this.currentBlendDstAlpha = null;\n        this.compressedTextureFormats = null;\n        this.currentProgram = null;\n        this.currentLineWidth = null;\n        this.currentPolygonOffsetFactor = null;\n        this.currentPolygonOffsetUnits = null;\n        this.currentTextureSlot = null;\n        this.currentBoundTextures = {};\n        this.context = context;\n        this.extensions = extensions;\n        this.utils = utils;\n        this.buffers.color = new ColorBuffer(context);\n        this.buffers.depth = new DepthBuffer(context, this.capabilities);\n        this.buffers.stencil = new StencilBuffer(context, this.capabilities);\n        this.maxVertexAttributes = context.getParameter(context.MAX_VERTEX_ATTRIBS);\n        this.newAttributes = new Uint8Array(this.maxVertexAttributes);\n        this.enabledAttributes = new Uint8Array(this.maxVertexAttributes);\n        this.attributeDivisors = new Uint8Array(this.maxVertexAttributes);\n        this.maxTextures = context.getParameter(context.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n        this.version = parseFloat(/^WebGL\\ ([0-9])/.exec(context.getParameter(context.VERSION))[1]);\n        this.lineWidthAvailable = this.version >= 1.0;\n        this.emptyTextures[context.TEXTURE_2D] = this.createTexture(context.TEXTURE_2D, context.TEXTURE_2D, 1);\n        this.emptyTextures[context.TEXTURE_CUBE_MAP] = this.createTexture(context.TEXTURE_CUBE_MAP, context.TEXTURE_CUBE_MAP_POSITIVE_X, 6);\n        /**\n         * initialize\n         */\n        this.buffers.color.setClear(0, 0, 0, 1);\n        this.buffers.depth.setClear(1);\n        this.buffers.stencil.setClear(0);\n        this.enable(context.DEPTH_TEST);\n        this.buffers.depth.setFunc(LessEqualDepth);\n        this.setFlipSided(false);\n        this.setCullFace(CullFaceBack);\n        this.enable(context.CULL_FACE);\n        this.enable(context.BLEND);\n        this.setBlending(NormalBlending);\n    }\n    enable(id) {\n        if (this.capabilities[id] !== true) {\n            this.context.enable(id);\n            this.capabilities[id] = true;\n        }\n        return this;\n    }\n    disable(id) {\n        if (this.capabilities[id] !== false) {\n            this.context.disable(id);\n            this.capabilities[id] = false;\n        }\n        return this;\n    }\n    /**\n     * 设置多边形的正反面（片元着色器？），这个和多边形的顶点连接顺序有关，CW为顺时针包围部分为正面，而CCW表示逆时针围绕部分为正面。\n     * @param flipSided\n     */\n    setFlipSided(flipSided = false) {\n        const gl = this.context;\n        if (this.currentFlipSided !== flipSided) {\n            if (flipSided) {\n                gl.frontFace(gl.CW);\n            }\n            else {\n                gl.frontFace(gl.CCW);\n            }\n            this.currentFlipSided = flipSided;\n        }\n        return this;\n    }\n    /**\n     * FRONT、BACK两个参数分别表示禁用多边形正面或者背面上的光照、阴影和颜色计算及操作，消除不必要的渲染计算。\n     * 例如某对象无论如何位置变化，我们都只能看到构成其组成的多边形的某一面时，可使用该函数。\n     *\n     * @param cullFace\n     */\n    setCullFace(cullFace) {\n        const gl = this.context;\n        if (cullFace !== CullFaceNone) {\n            this.enable(gl.CULL_FACE);\n            if (cullFace !== this.currentCullFace) {\n                if (cullFace === CullFaceBack) {\n                    gl.cullFace(gl.BACK);\n                }\n                else if (cullFace === CullFaceFront) {\n                    gl.cullFace(gl.FRONT);\n                }\n                else {\n                    gl.cullFace(gl.FRONT_AND_BACK);\n                }\n            }\n        }\n        else {\n            this.disable(gl.CULL_FACE);\n        }\n        this.currentCullFace = cullFace;\n        return this;\n    }\n    /**\n     * 采用标准混合方式时, 将帧缓存中的颜色和输入片元的颜色合并起来, 得到新的帧缓存颜色.\n     * 上面的函数用来指定其他数学运算,以计算帧缓存颜色和片元颜色的差, 它们中的最大值或最小值.\n     * 指定如何混合帧缓存中的颜色和片元颜色.\n     * Cs(Sr, Sg, Sb, Sa)和Cd(Dr,Dg,Db,Da)表示源颜色和目标颜色,\n     * S(Source)和D(Destination)表示函数glBlendFunc()或glBlendFuncSeparate()指定的源混合因子和目标混合因子.\n     *\n     * GL_FUNC_ADD                      CsS + CdD\n     * GL_FUNC_SUBTRACT                 CsS - CdD\n     * GL_FUNC_REVERSE_SUBTRACT        CdD - CsS\n     * GL_MIN                           min(CsS, CdD)\n     * GL_MAX                           max(CsS, CdD)\n     *\n     * 将该四元组的各个分量截取到[0,1].\n     *\n     * 选择源混合因子和目标混合因子的方式:\n     * 第一种方式是调用函数glBlendFunc(),并指定两个混合因子, 其中第一个参数为源RGBA的混合因子, 第二个参数为目标RGBA的混合因子.\n     * void glBlendFunc(GLenum srcfactor, GLenum destfactor);\n     *\n     * 第二种方法是调用glBlendFuncSeparate()并指定4个混合因子, 这样可以用不同的方式来混合RGB和alpha值.\n     * void glBlendFuncSeparate(GLenum srcRGB, GLenum destRGB, GLenum srcalpha, GLenum destalpha);\n     *\n     * 常量:                        RGB混合因子                        alpha混合因子\n     * GL_ZERO:                    (0, 0, 0)                        0\n     * GL_ONE:                    (1, 1, 1)                        1\n     * GL_DST_COLOR:            (Rd, Gd, Bd)\n     * GL_SRC_COLOR:            (Rs, Gs, Bs)                    A\n     * GL_ONE_MINUS_DST_COLOR:    (1, 1, 1) - (Rd, Gd, Bd)\n     * GL_ONE_MINUS_SRC_COLOR:    (1, 1, 1) - (Rs, Gs, Bs)        1 - A\n     * GL_SRC_ALPHA:            (As,As,As,As)\n     * GL_ONE_MINUS_SRC_ALPHA:    (1, 1, 1, 1) - (As,As,As,As)\n     * GL_DST_ALPHA:            (Ad, Ad, Ad, Ad)\n     * GL_ONE_MINUS_DST_ALPHA:    (1, 1, 1, 1) - (Ad, Ad, Ad, Ad)\n     * GL_SRC_ALPHA_STATURATE:    (f, f, f, 1); f = min(As, 1 - Ad)\n     *\n     * @param blending\n     * @param blendEquation\n     * @param blendSrc\n     * @param blendDst\n     * @param blendEquationAlpha\n     * @param blendSrcAlpha\n     * @param blendDstAlpha\n     * @param premultipliedAlpha\n     */\n    setBlending(blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha = false) {\n        const gl = this.context;\n        if (blending !== NoBlending) {\n            this.enable(gl.BLEND);\n        }\n        else {\n            this.disable(gl.BLEND);\n        }\n        if (blending !== CustomBlending) {\n            if (blending !== this.currentBlending || premultipliedAlpha !== this.currentPremultipledAlpha) {\n                switch (blending) {\n                    case AdditiveBlending:\n                        if (premultipliedAlpha) {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\n                        }\n                        else {\n                            gl.blendEquation(gl.FUNC_ADD);\n                            gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n                        }\n                        break;\n                    case SubtractiveBlending:\n                        if (premultipliedAlpha) {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA);\n                        }\n                        else {\n                            gl.blendEquation(gl.FUNC_ADD);\n                            gl.blendFunc(gl.ZERO, gl.ONE_MINUS_SRC_COLOR);\n                        }\n                        break;\n                    case MultiplyBlending:\n                        if (premultipliedAlpha) {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA);\n                        }\n                        else {\n                            gl.blendEquation(gl.FUNC_ADD);\n                            gl.blendFunc(gl.ZERO, gl.SRC_COLOR);\n                        }\n                        break;\n                    default:\n                        if (premultipliedAlpha) {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n                        }\n                        else {\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n                        }\n                }\n            }\n            this.currentBlendEquation = null;\n            this.currentBlendSrc = null;\n            this.currentBlendDst = null;\n            this.currentBlendEquationAlpha = null;\n            this.currentBlendSrcAlpha = null;\n            this.currentBlendDstAlpha = null;\n        }\n        else {\n            blendEquationAlpha = blendEquationAlpha || blendEquation;\n            blendSrcAlpha = blendSrcAlpha || blendSrc;\n            blendDstAlpha = blendDstAlpha || blendDst;\n            if (blendEquation !== this.currentBlendEquation || blendEquationAlpha !== this.currentBlendEquationAlpha) {\n                gl.blendEquationSeparate(this.utils.convert(blendEquation), this.utils.convert(blendEquationAlpha));\n                this.currentBlendEquation = blendEquation;\n                this.currentBlendEquationAlpha = blendEquationAlpha;\n            }\n            if (blendSrc !== this.currentBlendSrc ||\n                blendDst !== this.currentBlendDst ||\n                blendSrcAlpha !== this.currentBlendSrcAlpha ||\n                blendDstAlpha !== this.currentBlendDstAlpha) {\n                gl.blendFuncSeparate(this.utils.convert(blendSrc), this.utils.convert(blendDst), this.utils.convert(blendSrcAlpha), this.utils.convert(blendDstAlpha));\n                this.currentBlendSrc = blendSrc;\n                this.currentBlendDst = blendDst;\n                this.currentBlendSrcAlpha = blendSrcAlpha;\n                this.currentBlendDstAlpha = blendDstAlpha;\n            }\n        }\n        this.currentBlending = blending;\n        this.currentPremultipledAlpha = premultipliedAlpha;\n        return this;\n    }\n    setMaterial(material, frontFaceCW = false) {\n        const gl = this.context;\n        material.side === DoubleSide ? this.disable(gl.CULL_FACE) : this.enable(gl.CULL_FACE);\n        let flipSided = material.side === BackSide;\n        if (frontFaceCW)\n            flipSided = !flipSided;\n        this.setFlipSided(flipSided);\n        material.transparent === true\n            ? this.setBlending(material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha)\n            : this.setBlending(NoBlending);\n        this.buffers.depth.setFunc(material.depthFunc);\n        this.buffers.depth.setTest(material.depthTest);\n        this.buffers.depth.setMask(material.depthWrite);\n        this.buffers.depth.setMask(material.colorWrite);\n        this.setPolygonOffset(material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits);\n        return this;\n    }\n    initAttributes() {\n        for (let i = 0, l = this.newAttributes.length; i < l; i++) {\n            this.newAttributes[i] = 0;\n        }\n        return this;\n    }\n    enableAttribute(attribute) {\n        return this.enableAttributeAndDivisor(attribute);\n    }\n    disableUnusedAttributes() {\n        const gl = this.context;\n        for (let i = 0, l = this.enabledAttributes.length; i !== l; i++) {\n            if (this.enabledAttributes[i] !== this.newAttributes[i]) {\n                gl.disableVertexAttribArray(i);\n                this.enabledAttributes[i] = 0;\n            }\n        }\n        return this;\n    }\n    /**\n     * @param attribute\n     * @param meshPerAttribute\n     */\n    enableAttributeAndDivisor(attribute, meshPerAttribute = 0) {\n        this.newAttributes[attribute] = 1;\n        if (this.enabledAttributes[attribute] === 0) {\n            /**\n             * 处于性能的考虑默认情况下CPU即使上传数据到GPU，所有顶点着色器的属性（Attribute）变量都是关闭的。\n             * glEnableVertexAttribArray决定了着色器能否读取到数据，由是否启用了对应的属性决定。\n             * glEnableVertexAttribArray与glVertexAttribPointer是VAO（Vertex Array Objects）的处理函数，\n             * glVertexAttribPointer负责告知GPU传入数据（VBO）的类型、大小、单位等信息。\n             * glEnableVertexAttribArray与glVertexAttribPointer的调用顺序并不影响，\n             * 只要在设置完VBO之后和drawCall之前即可。\n             * 参数attribute，代表了需要传入的attribute的location信息。\n             * 所以这里可以看出enabledAttributes顾名思义就是记录着那些location的attribute被启用了。\n             * 而反观newAttributes，只要是使用过某个location的attribute，那么就会被永久占用为1，\n             * 即使是reset也没有用，除非调用initAttributes。\n             * 这么做是有道理的，因为MAX_VERTEX_ATTRIBS决定了系统最大的attribute数目，\n             * 这就意味着attribute的个数不能超过这一数目。\n             * 所以，推测reset的作用只是释放内存，并禁用所有的attribute。\n             * 而每次useProgram之后由于shader的改变，所以都需要调用initAttributes，\n             * 在Three.js的几个Renderer中，WebGLState的用法都是在切换过program之后，\n             * 调用initAttributes，然后使用enableAttribute设置新的attribute，\n             * 最后通过disableUnusedAttributes纠正状态。\n             */\n            this.context.enableVertexAttribArray(attribute);\n            this.enabledAttributes[attribute] = 1;\n        }\n        /**\n         * ANGLE_instanced_arrays是属于 WebGL API 的一个扩展API，\n         * 如果使用它们提供了相同的顶点数据或者是原始的数目和类型的话，\n         * 就可以绘制相同的对象或是被多次使用的相似的对象组。\n         */\n        if (this.attributeDivisors[attribute] !== meshPerAttribute) {\n            const extension = this.extensions.get(\"ANGLE_instanced_arrays\");\n            extension.vertexAttribDivisorANGLE(attribute, meshPerAttribute);\n            this.attributeDivisors[attribute] = meshPerAttribute;\n        }\n        return this;\n    }\n    getCompressedTextureFormats() {\n        if (this.compressedTextureFormats === null) {\n            this.compressedTextureFormats = [];\n            if (this.extensions.get(\"WEBGL_compressed_texture_pvrtc\") ||\n                this.extensions.get(\"WEBGL_compressed_texture_s3tc\") ||\n                this.extensions.get(\"WEBGL_compressed_texture_etc1\") ||\n                this.extensions.get(\"WEBGL_compressed_texture_astc\")) {\n                const formats = this.context.getParameter(this.context.COMPRESSED_TEXTURE_FORMATS);\n                for (let i = 0; i < formats.length; i++) {\n                    this.compressedTextureFormats.push(formats[i]);\n                }\n            }\n        }\n        return this.compressedTextureFormats;\n    }\n    useProgram(program) {\n        if (this.currentProgram !== program) {\n            this.context.useProgram(program);\n            this.currentProgram = program;\n            return true;\n        }\n        return false;\n    }\n    setLineWidth(width) {\n        if (width !== this.currentLineWidth) {\n            if (this.lineWidthAvailable)\n                this.context.lineWidth(width);\n            this.currentLineWidth = width;\n        }\n        return this;\n    }\n    /**\n     * 在OpenGL中，如果想绘制一个多边形同时绘制其边界，可是先使用多边形模式GL_FILL绘制物体，\n     * 然后使用多边形模式GL_LINE和不同的颜色再次绘制这个多边形。\n     * 但是由于直线和多边形的光栅化方式不同，导致位于同一位置的多边形和直线的深度值并不相同，\n     * 进而导致直线有时在多边形的里面，有时在多边形的外面，这种现象就是\"Stiching\"。\n     * 而Z-fighting主要是指当两个面共面时，二者的深度值一样，深度缓冲就不能清楚的将它们两者分离开来，\n     * 位于后面的图元上的一些像素就会被渲染到前面的图元上，最终导致图象在帧与帧之间产生微弱的闪光。\n     * 解决这两个问题的方法就是使用Polygon Offset，当然你也可以使用模板测试，但Polygon Offset的速度会比模板缓存快。\n     * 启用了Polygon Offset，就表示在执行深度测试前多边形的深度值被稍微增加了一点点，\n     * 这需要用glPolygonOffset来指定。glPolygonOffset需要2个参数：GLfloat factor 和GLfloat units。\n     * 每一个Fragment的深度值都会增加如下所示的偏移量：offset = (m * factor) + (r * units)\n     * m是多边形的深度的斜率（在光栅化阶段计算得出）中的最大值。\n     * 这句话难以理解，你只需知道，一个多边形越是与近裁剪面（near clipping plan）平行，m就越接近0。\n     * r是能产生在窗口坐标系的深度值中可分辨的差异的最小值，r是由具体实现OpenGL的平台指定的一个常量。\n     * 一个大于0的offset 会把模型推到离你（摄像机）更远一点的位置，相应地，一个小于0的offset 会把模型拉近。\n     * 如果想要非常好地使用Polygon Offset，你需要做一些数学上的研究。\n     * 不过一般而言，只需把1.0和0.0这样简单的值赋给glPolygonOffset即可满足需要。\n     *\n     * @param polygonOffset\n     * @param factor\n     * @param units\n     */\n    setPolygonOffset(polygonOffset, factor, units) {\n        const gl = this.context;\n        if (polygonOffset) {\n            this.enable(gl.POLYGON_OFFSET_FILL);\n            if (this.currentPolygonOffsetFactor !== factor || this.currentPolygonOffsetUnits !== units) {\n                gl.polygonOffset(factor, units);\n                this.currentPolygonOffsetFactor = factor;\n                this.currentPolygonOffsetUnits = units;\n            }\n        }\n        else {\n            this.disable(gl.POLYGON_OFFSET_FILL);\n        }\n        return this;\n    }\n    setScissorTest(scissorTest) {\n        if (scissorTest) {\n            this.enable(this.context.SCISSOR_TEST);\n        }\n        else {\n            this.disable(this.context.SCISSOR_TEST);\n        }\n        return this;\n    }\n    activeTexture(slot) {\n        const gl = this.context;\n        if (slot === undefined)\n            slot = gl.TEXTURE0 + this.maxTextures - 1;\n        /**\n         * 最后一个贴图空间用来做杂活...\n         */\n        if (this.currentTextureSlot !== slot) {\n            gl.activeTexture(slot);\n            this.currentTextureSlot = slot;\n        }\n        return this;\n    }\n    bindTexture(type, texture) {\n        if (this.currentTextureSlot === null) {\n            this.activeTexture();\n        }\n        let boundTexture = this.currentBoundTextures[this.currentTextureSlot];\n        if (boundTexture === undefined) {\n            boundTexture = { type: undefined, texture: undefined };\n            this.currentBoundTextures[this.currentTextureSlot] = boundTexture;\n        }\n        if (boundTexture.type !== type || boundTexture.texture !== texture) {\n            this.context.bindTexture(type, texture || this.emptyTextures[type]);\n            boundTexture.type = type;\n            boundTexture.texture = texture;\n        }\n        return this;\n    }\n    compressedTexImage2D(target, level, internalformat, width, height, border, data) {\n        /**\n         * 所支持压缩纹理格式数量可以查询GL_NUM_COMPRESSED_TEXTURE_FORMATS值来获取。\n         * 所支持的压缩格式列表可以查询GL_COMPRESSED_TEXTURE_FORMATS值来获取。\n         * getCompressedTextureFormats函数也是相关信息的查询工具\n         */\n        try {\n            this.context.compressedTexImage2D(target, level, internalformat, width, height, border, data);\n        }\n        catch (error) {\n            console.error(`THREE.WebGLState: ${error}`);\n        }\n        return this;\n    }\n    texImage2D(target, level, internalformat, a, b, c, format, type, pixels) {\n        /**\n         * 2D贴图，这里有重载是因为DOM的特殊关系，ImageBitmap | ImageData | HTMLVideoElement | HTMLImageElement | HTMLCanvasElement这些属性都有width，height属性包含在内，\n         * 而border值必须为0 ㄟ( ▔, ▔ )ㄏ\n         * 而且实际上internalformat与format的值必须一致 ㄟ( ▔, ▔ )ㄏ\n         * target的值必须为TEXTURE_2D与TEXTURE_CUBE_MAP_(NEGATIVE|POSITIVE)_(X|Y|Z)—之一\n         *\n         * Mipmap是一个功能强大的纹理技术，它可以提高渲染的性能以及提升场景的视觉质量。它可以用来解决使用一般的纹理贴图会出现的两个常见的问题：\n         *  1. 闪烁，当屏幕上被渲染物体的表面与它所应用的纹理图像相比显得非常小时，就会出现闪烁。尤其当相机和物体在移动的时候，这种负面效果更容易被看到。\n         *  2. 性能问题。加载了大量的纹理数据之后，还要对其进行过滤处理（缩小），在屏幕上显示的只是一小部分。纹理越大，所造成的性能影响就越大。\n         * Mipmap就可以解决上面那两个问题。当加载纹理的时候，不单单是加载一个纹理，而是加载一系列从大到小的纹理当mipmapped纹理状态中。\n         * 然后OpenGl会根据给定的几何图像的大小选择最合适的纹理。Mipmap是把纹理按照2的倍数进行缩放，直到图像为1x1的大小，然后把这些图都存储起来，当要使用的就选择一个合适的图像。\n         * 这会增加一些额外的内存。在正方形的纹理贴图中使用mipmap技术，大概要比原先多出三分之一的内存空间。\n         *\n         * Mipmap的纹理过滤模式如下表：\n         * 常量\t描述\n         * GL_NEAREST\t在mip基层上使用最邻近过滤\n         * GL_LINEAR\t在mip基层上使用线性过滤\n         * GL_NEAREST_MIPMAP_NEAREST\t选择最邻近的mip层，并使用最邻近过滤\n         * GL_NEAREST_MIPMAP_LINEAR\t在mip层之间使用线性插值和最邻近过滤\n         * GL_LINEAR_MIPMAP_NEAREST\t选择最邻近的mip层，使用线性过滤\n         * GL_LINEAR_MIPMAP_LINEAR\t在mip层之间使用线性插值和使用线性过滤，又称三线性mipmap\n         * 如果纹理过滤选择为GL_NEAREST或GL_LINEAR模式，那么只有基层的纹理会被加载，其他的纹理将会被忽略。\n         * 我们必须指定其中一个mipmap过滤器，这样才能使用所有已加载的纹理。\n         * 这个mipmap过滤器的常量是GL_[FILTER]_MIPMAP_[SELECTOR[的形式。\n         * 其中FLILTER指定了过滤模式，SELECTOR指定了如何选择mipmap层。例如GL_NEAREST_MIPMAP_LINEAR模式，\n         * 它的SELECTOR是GL_LINEAR，它会在两个最邻近的mip层中执行线性插值，然后得出的结果又由被选择的过滤器GL_NEAREST进行过滤。\n         *\n         * 其中GL_NEAREST_MIPMAP_NEAAREST具有很好的性能，也能够解决闪烁的问题，但在视觉效果上会比较差。\n         * 其中GL_LINEAR_MIPMAP_NEAREST常用于游戏加速，使用了质量较高的线性过滤，和快速的选择的方式(最邻近方式）。\n         * 使用最邻近的方式作为mipmap选择器的效果依然不能令人满意。从某一个角度去看，常常可以看到物体表面从一个mip层到另一个mip层的转变。\n         * GL_LINEAR_MIPMAP_LINEAR和GL_NEAREST_MIPMAP_LINEAR过滤器在mip层之间执行一些额外的线性插值，以消除不同层之间的变换痕迹，但也需要一些额外的性能开销。\n         * GL_LINEAR_MIPMAP_LINEAR具有最高的精度。\n         *\n         * 所以level参数就是用来指定这是低级级缩略图的，0代表基本，log_{2}(GL_MAX_TEXTURE_SIZE)为最大允许值\n         */\n        try {\n            this.context.texImage2D(target, level, internalformat, a, b, c, format, type, pixels);\n        }\n        catch (error) {\n            console.error(`THREE.WebGLState: ${error}`);\n        }\n        return this;\n    }\n    scissor(scissor) {\n        /**\n         * 对屏幕进行剪裁，x,y为起点，z,w分别表示width和height\n         * 剪裁功能\n         */\n        if (this.currentScissor.equals(scissor) === false) {\n            this.context.scissor(scissor.x, scissor.y, scissor.z, scissor.w);\n            this.currentScissor.copy(scissor);\n        }\n        return this;\n    }\n    viewport(viewport) {\n        /**\n         * 打开窗口的整个像素矩形，x,y为起点，z,w分别表示width和height\n         * 缩放功能\n         */\n        if (this.currentViewport.equals(viewport) === false) {\n            this.context.viewport(viewport.x, viewport.y, viewport.z, viewport.w);\n            this.currentViewport.copy(viewport);\n        }\n        return this;\n    }\n    reset() {\n        for (let i = 0; i < this.enabledAttributes.length; i++) {\n            if (this.enabledAttributes[i] === 1) {\n                this.context.disableVertexAttribArray(i);\n                this.enabledAttributes[i] = 0;\n            }\n        }\n        this.capabilities = {};\n        this.compressedTextureFormats = null;\n        this.currentTextureSlot = null;\n        this.currentBoundTextures = {};\n        this.currentProgram = null;\n        this.currentBlending = null;\n        this.currentFlipSided = null;\n        this.currentCullFace = null;\n        this.buffers.color.reset();\n        this.buffers.depth.reset();\n        this.buffers.stencil.reset();\n        return this;\n    }\n    createTexture(type, target, count) {\n        const gl = this.context;\n        /**\n         * 4 is required to match default unpack alignment of 4.\n         * @type {Uint8Array}\n         */\n        const data = new Uint8Array(4);\n        const texture = gl.createTexture();\n        gl.bindTexture(type, texture);\n        gl.texParameteri(type, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(type, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        for (let i = 0; i < count; i++) {\n            gl.texImage2D(target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\n        }\n        return texture;\n    }\n}\n","import { LinearFilter, NearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, ClampToEdgeWrapping, NearestMipMapLinearFilter, NearestMipMapNearestFilter, } from \"../../constants\";\nimport { MathUtil } from \"../../math/Math\";\nimport { VideoTexture } from \"../../textures/VideoTexture\";\nimport { WebGLRenderTargetCube } from \"../WebGLRenderTargetCube\";\nimport { DepthTexture } from \"../../textures/DepthTexture\";\nimport { DataTexture } from \"../../textures/DataTexture\";\nimport { CompressedTexture } from \"../../textures/CompressedTexture\";\nfunction clampToMaxSize(image, maxSize) {\n    if (image.width > maxSize || image.height > maxSize) {\n        const scale = maxSize / Math.max(image.width, image.height);\n        if (image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap) {\n            // Warning: Scaling through the canvas will only work with images that use\n            // premultiplied alpha.\n            const canvas = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\");\n            canvas.width = Math.max(Math.floor(image.width * scale), 1);\n            canvas.height = Math.max(Math.floor(image.height * scale), 1);\n            const context = canvas.getContext(\"2d\");\n            context.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n            console.warn(\"THREE.WebGLRenderer: image is too big (\" +\n                image.width +\n                \"x\" +\n                image.height +\n                \"). Resized to \" +\n                canvas.width +\n                \"x\" +\n                canvas.height, image);\n            return canvas;\n        }\n        else {\n            // https://github.com/mrdoob/three.js/issues/13454#issuecomment-369244843\n            const width = Math.max(Math.floor(image.width * scale), 1);\n            const height = Math.max(Math.floor(image.height * scale), 1);\n            console.warn(\"THREE.WebGLRenderer: image is too big (\" + image.width + \"x\" + image.height + \").\", image);\n        }\n    }\n    return image;\n}\nfunction isPowerOfTwo(image) {\n    return MathUtil.isPowerOfTwo(image.width) && MathUtil.isPowerOfTwo(image.height);\n}\nfunction makePowerOfTwo(image) {\n    if (image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap) {\n        const canvas = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\");\n        canvas.width = MathUtil.floorPowerOfTwo(image.width);\n        canvas.height = MathUtil.floorPowerOfTwo(image.height);\n        const context = canvas.getContext(\"2d\");\n        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n        console.warn(\"THREE.WebGLRenderer: image is not power of two (\" +\n            image.width +\n            \"x\" +\n            image.height +\n            \"). Resized to \" +\n            canvas.width +\n            \"x\" +\n            canvas.height, image);\n        return canvas;\n    }\n    return image;\n}\nfunction textureNeedsPowerOfTwo(texture) {\n    return (texture.wrapS !== ClampToEdgeWrapping ||\n        texture.wrapT !== ClampToEdgeWrapping ||\n        (texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter));\n}\nfunction textureNeedsGenerateMipmaps(texture, isPowerOfTwo) {\n    return (texture.generateMipmaps &&\n        isPowerOfTwo &&\n        texture.minFilter !== NearestFilter &&\n        texture.minFilter !== LinearFilter);\n}\nexport class WebGLTextures {\n    constructor(context, extensions, state, properties, capabilities, utils, infoMemory, infoRender) {\n        this.videoTextures = {};\n        this.onTextureDispose = (event) => {\n            const texture = event.target;\n            texture.removeEventListener(\"dispose\", this.onTextureDispose);\n            this.deallocateTexture(texture);\n            if (texture instanceof VideoTexture) {\n                delete this.videoTextures[texture.id];\n            }\n            this.infoMemory.textures--;\n        };\n        this.onRenderTargetDispose = (event) => {\n            const renderTarget = event.target;\n            renderTarget.removeEventListener(\"dispose\", this.onRenderTargetDispose);\n            this.deallocateRenderTarget(renderTarget);\n            this.infoMemory.textures--;\n        };\n        this.context = context;\n        this.extensions = extensions;\n        this.properties = properties;\n        this.capabilities = capabilities;\n        this.utils = utils;\n        this.state = state;\n        this.infoMemory = infoMemory;\n        this.infoRender = infoRender;\n    }\n    filterFallback(f) {\n        if (f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter) {\n            return this.context.NEAREST;\n        }\n        return this.context.LINEAR;\n    }\n    deallocateTexture(texture) {\n        const textureProperties = this.properties.get(texture);\n        if (texture.image && textureProperties.__image__webglTextureCube) {\n            // cube texture\n            this.context.deleteTexture(textureProperties.__image__webglTextureCube);\n        }\n        else {\n            // 2D texture\n            if (textureProperties.__webglInit === undefined)\n                return;\n            this.context.deleteTexture(textureProperties.__webglTexture);\n        }\n        // remove all webgl properties\n        this.properties.remove(texture);\n    }\n    deallocateRenderTarget(renderTarget) {\n        const renderTargetProperties = this.properties.get(renderTarget);\n        const textureProperties = this.properties.get(renderTarget.texture);\n        if (!renderTarget)\n            return;\n        if (textureProperties.__webglTexture !== undefined) {\n            this.context.deleteTexture(textureProperties.__webglTexture);\n        }\n        if (renderTarget.depthTexture) {\n            renderTarget.depthTexture.dispose();\n        }\n        if (renderTarget instanceof WebGLRenderTargetCube) {\n            for (let i = 0; i < 6; i++) {\n                this.context.deleteFramebuffer(renderTargetProperties.__webglFramebuffer[i]);\n                if (renderTargetProperties.__webglDepthbuffer) {\n                    this.context.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer[i]);\n                }\n            }\n        }\n        else {\n            this.context.deleteFramebuffer(renderTargetProperties.__webglFramebuffer);\n            if (renderTargetProperties.__webglDepthbuffer) {\n                this.context.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer);\n            }\n        }\n        this.properties.remove(renderTarget.texture);\n        this.properties.remove(renderTarget);\n    }\n    updateVideoTexture(texture) {\n        const id = texture.id;\n        const frame = this.infoRender.frame;\n        // Check the last frame we updated the VideoTexture\n        if (this.videoTextures[id] !== frame) {\n            this.videoTextures[id] = frame;\n            texture.update();\n        }\n    }\n    uploadTexture(textureProperties, texture, slot) {\n        const gl = this.context;\n        const state = this.state;\n        const utils = this.utils;\n        if (textureProperties.__webglInit === undefined) {\n            textureProperties.__webglInit = true;\n            texture.addEventListener(\"dispose\", this.onTextureDispose);\n            textureProperties.__webglTexture = gl.createTexture();\n            this.infoMemory.textures++;\n        }\n        state.activeTexture(gl.TEXTURE0 + slot);\n        state.bindTexture(gl.TEXTURE_2D, textureProperties.__webglTexture);\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, texture.flipY);\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha);\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, texture.unpackAlignment);\n        /**\n         * 为什么 texture.image 肯定是 HTMLTextureSource?\n         * Need to be fixed\n         */\n        let image = clampToMaxSize(texture.image, this.capabilities.maxTextureSize);\n        if (textureNeedsPowerOfTwo(texture) && isPowerOfTwo(image) === false) {\n            /**\n             * 为什么这里的 texture.image 肯定是 HTMLTextureSource?\n             * 因为在 WebGLRenderer.setProgram 中 SkinnedMesh 中的 Skeleton 的 boneTexture 被强制调整为2的幂次\n             * 所以这个判断中 DataTexture 永远到不了，只能是 CanvasTexture 或者 VideoTexture\n             *\n             * Edited: 原本是这么认为的，但是不是\n             */\n            image = makePowerOfTwo(image);\n        }\n        const isPowerOfTwoImage = isPowerOfTwo(image);\n        let glFormat = utils.convert(texture.format), glType = utils.convert(texture.type);\n        this.setTextureParameters(gl.TEXTURE_2D, texture, isPowerOfTwoImage);\n        let mipmap, mipmaps = texture.mipmaps;\n        if (texture instanceof DepthTexture) {\n            // populate depth texture with dummy data\n            let internalFormat = gl.DEPTH_COMPONENT;\n            /*\n            if ( texture.type === FloatType ) {\n                if ( ! _isWebGL2 ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\n                internalFormat = gl.DEPTH_COMPONENT32F;\n            } else if ( _isWebGL2 ) {\n                // WebGL 2.0 requires signed internalformat for glTexImage2D\n                internalFormat = gl.DEPTH_COMPONENT16;\n            }\n            */\n            if (texture.format === DepthFormat && internalFormat === gl.DEPTH_COMPONENT) {\n                // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n                // DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n                // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n                if (texture.type !== UnsignedShortType && texture.type !== UnsignedIntType) {\n                    console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\");\n                    texture.type = UnsignedShortType;\n                    glType = utils.convert(texture.type);\n                }\n            }\n            // Depth stencil textures need the DEPTH_STENCIL internal format\n            // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n            if (texture.format === DepthStencilFormat) {\n                internalFormat = gl.DEPTH_STENCIL;\n                // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n                // DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n                // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n                if (texture.type !== UnsignedInt248Type) {\n                    console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\");\n                    texture.type = UnsignedInt248Type;\n                    glType = utils.convert(texture.type);\n                }\n            }\n            state.texImage2D(gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null);\n        }\n        else if (texture instanceof DataTexture) {\n            // use manually created mipmaps if available\n            // if there are no manual mipmaps\n            // set 0 level mipmap and then use GL to generate other mipmap levels\n            if (mipmaps.length > 0 && isPowerOfTwoImage) {\n                for (let i = 0, il = mipmaps.length; i < il; i++) {\n                    mipmap = mipmaps[i];\n                    state.texImage2D(gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n                }\n                texture.generateMipmaps = false;\n            }\n            else {\n                state.texImage2D(gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data);\n            }\n        }\n        else if (texture instanceof CompressedTexture) {\n            for (let i = 0, il = mipmaps.length; i < il; i++) {\n                mipmap = mipmaps[i];\n                if (texture.format !== RGBAFormat && texture.format !== RGBFormat) {\n                    if (state.getCompressedTextureFormats().indexOf(glFormat) > -1) {\n                        state.compressedTexImage2D(gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data);\n                    }\n                    else {\n                        console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\");\n                    }\n                }\n                else {\n                    state.texImage2D(gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n                }\n            }\n        }\n        else {\n            // regular Texture (image, video, canvas)\n            // use manually created mipmaps if available\n            // if there are no manual mipmaps\n            // set 0 level mipmap and then use GL to generate other mipmap levels\n            if (mipmaps.length > 0 && isPowerOfTwoImage) {\n                for (let i = 0, il = mipmaps.length; i < il; i++) {\n                    mipmap = mipmaps[i];\n                    state.texImage2D(gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap);\n                }\n                texture.generateMipmaps = false;\n            }\n            else {\n                /**\n                 * WHY as HTMLTextureSource ????\n                 */\n                state.texImage2D(gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image);\n            }\n        }\n        if (textureNeedsGenerateMipmaps(texture, isPowerOfTwoImage))\n            gl.generateMipmap(gl.TEXTURE_2D);\n        textureProperties.__version = texture.version;\n        //if ( texture.onUpdate ) texture.onUpdate( texture );\n    }\n    setTexture2D(texture, slot) {\n        const textureProperties = this.properties.get(texture);\n        if (texture instanceof VideoTexture) {\n            this.updateVideoTexture(texture);\n        }\n        if (texture.version > 0 && textureProperties.__version !== texture.version) {\n            /**\n             * version > 0 不一样只能是needsUpdate被设为true的Texture\n             * 目前Three.js中只有CanvasTexture、 VideoTexture以及Skeleton.boneTexture（DataTexture）是这样的。\n             * 所以 uploadTexture 的 texture 参数必定是 CanvasTexture| VideoTexture | DataTexture 中的一个\n             */\n            const image = texture.image;\n            if (image === undefined) {\n                console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\", texture);\n            }\n            else if (image.complete === false) {\n                console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\", texture);\n            }\n            else {\n                this.uploadTexture(textureProperties, texture, slot);\n                return;\n            }\n        }\n        this.state.activeTexture(this.context.TEXTURE0 + slot);\n        this.state.bindTexture(this.context.TEXTURE_2D, textureProperties.__webglTexture);\n    }\n    setTextureCube(texture, slot) {\n        const gl = this.context;\n        const state = this.state;\n        const utils = this.utils;\n        const textureProperties = this.properties.get(texture);\n        if (texture.image.length === 6) {\n            if (texture.version > 0 && textureProperties.__version !== texture.version) {\n                if (!textureProperties.__image__webglTextureCube) {\n                    texture.addEventListener(\"dispose\", this.onTextureDispose);\n                    textureProperties.__image__webglTextureCube = gl.createTexture();\n                    this.infoMemory.textures++;\n                }\n                state.activeTexture(gl.TEXTURE0 + slot);\n                state.bindTexture(gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube);\n                gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, texture.flipY);\n                const isCompressed = texture && texture instanceof CompressedTexture;\n                const isDataTexture = texture.image[0] && texture.image[0] instanceof DataTexture;\n                const cubeImage = [];\n                for (let i = 0; i < 6; i++) {\n                    if (!isCompressed && !isDataTexture) {\n                        cubeImage[i] = clampToMaxSize(texture.image[i], this.capabilities.maxCubemapSize);\n                    }\n                    else {\n                        // CubeTexture with DataTexture or CompressedTexture\n                        cubeImage[i] = isDataTexture ? texture.image[i].image : texture.image[i];\n                    }\n                }\n                const image = cubeImage[0], isPowerOfTwoImage = isPowerOfTwo(image), glFormat = utils.convert(texture.format), glType = utils.convert(texture.type);\n                this.setTextureParameters(gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage);\n                for (let i = 0; i < 6; i++) {\n                    if (!isCompressed) {\n                        // CubeTexture\n                        if (isDataTexture) {\n                            state.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[i].width, cubeImage[i].height, 0, glFormat, glType, cubeImage[i].data);\n                        }\n                        else {\n                            state.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[i]);\n                        }\n                    }\n                    else {\n                        let mipmap;\n                        // 未能解决的疑惑！！！ as any\n                        const mipmaps = cubeImage[i].mipmaps;\n                        for (let j = 0, jl = mipmaps.length; j < jl; j++) {\n                            mipmap = mipmaps[j];\n                            if (texture.format !== RGBAFormat && texture.format !== RGBFormat) {\n                                if (state.getCompressedTextureFormats().indexOf(glFormat) > -1) {\n                                    state.compressedTexImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data);\n                                }\n                                else {\n                                    console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\");\n                                }\n                            }\n                            else {\n                                state.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n                            }\n                        }\n                    }\n                }\n                if (textureNeedsGenerateMipmaps(texture, isPowerOfTwoImage)) {\n                    gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\n                }\n                textureProperties.__version = texture.version;\n                //if ( texture.onUpdate ) texture.onUpdate( texture );\n            }\n            else {\n                state.activeTexture(gl.TEXTURE0 + slot);\n                state.bindTexture(gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube);\n            }\n        }\n    }\n    /**\n     * texture from WebGLRenderTargetCube\n     * @param texture\n     * @param slot\n     */\n    setTextureCubeDynamic(texture, slot) {\n        this.state.activeTexture(this.context.TEXTURE0 + slot);\n        this.state.bindTexture(this.context.TEXTURE_CUBE_MAP, this.properties.get(texture).__webglTexture);\n    }\n    setTextureParameters(textureType, texture, isPowerOfTwoImage) {\n        const gl = this.context;\n        const utils = this.utils;\n        const extensions = this.extensions;\n        const properties = this.properties;\n        let extension;\n        if (isPowerOfTwoImage) {\n            gl.texParameteri(textureType, gl.TEXTURE_WRAP_S, utils.convert(texture.wrapS));\n            gl.texParameteri(textureType, gl.TEXTURE_WRAP_T, utils.convert(texture.wrapT));\n            gl.texParameteri(textureType, gl.TEXTURE_MAG_FILTER, utils.convert(texture.magFilter));\n            gl.texParameteri(textureType, gl.TEXTURE_MIN_FILTER, utils.convert(texture.minFilter));\n        }\n        else {\n            gl.texParameteri(textureType, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(textureType, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            if (texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping) {\n                console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\", texture);\n            }\n            gl.texParameteri(textureType, gl.TEXTURE_MAG_FILTER, this.filterFallback(texture.magFilter));\n            gl.texParameteri(textureType, gl.TEXTURE_MIN_FILTER, this.filterFallback(texture.minFilter));\n            if (texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter) {\n                console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\", texture);\n            }\n        }\n        extension = extensions.get(\"EXT_texture_filter_anisotropic\");\n        if (extension) {\n            if (texture.type === FloatType && extensions.get(\"OES_texture_float_linear\") === null)\n                return;\n            if (texture.type === HalfFloatType && extensions.get(\"OES_texture_half_float_linear\") === null)\n                return;\n            if (texture.anisotropy > 1 || properties.get(texture).__currentAnisotropy) {\n                gl.texParameterf(textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(texture.anisotropy, this.capabilities.getMaxAnisotropy()));\n                properties.get(texture).__currentAnisotropy = texture.anisotropy;\n            }\n        }\n    }\n    /****************************  Render targets ***********************/\n    // Setup storage for target texture and bind it to correct framebuffer\n    setupFrameBufferTexture(framebuffer, renderTarget, attachment, textureTarget) {\n        const glFormat = this.utils.convert(renderTarget.texture.format);\n        const glType = this.utils.convert(renderTarget.texture.type);\n        this.state.texImage2D(textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null);\n        const gl = this.context;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, textureTarget, this.properties.get(renderTarget.texture).__webglTexture, 0);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n    // Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n    setupRenderBufferStorage(renderbuffer, renderTarget) {\n        const gl = this.context;\n        gl.bindRenderbuffer(gl.RENDERBUFFER, renderbuffer);\n        if (renderTarget.depthBuffer && !renderTarget.stencilBuffer) {\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, renderbuffer);\n        }\n        else if (renderTarget.depthBuffer && renderTarget.stencilBuffer) {\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, renderbuffer);\n        }\n        else {\n            // FIXME: We don't support !depth !stencil\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.RGBA4, renderTarget.width, renderTarget.height);\n        }\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n    }\n    // Setup resources for a Depth Texture for a FBO (needs an extension)\n    setupDepthTexture(framebuffer, renderTarget) {\n        const gl = this.context;\n        const isCube = renderTarget && renderTarget instanceof WebGLRenderTargetCube;\n        if (isCube) {\n            throw new Error(\"Depth Texture with cube render targets is not supported\");\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n        if (!(renderTarget.depthTexture && renderTarget.depthTexture instanceof DepthTexture)) {\n            throw new Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");\n        }\n        // upload an empty depth texture with framebuffer size\n        if (!this.properties.get(renderTarget.depthTexture).__webglTexture ||\n            renderTarget.depthTexture.image.width !== renderTarget.width ||\n            renderTarget.depthTexture.image.height !== renderTarget.height) {\n            renderTarget.depthTexture.image.width = renderTarget.width;\n            renderTarget.depthTexture.image.height = renderTarget.height;\n            renderTarget.depthTexture.needsUpdate = true;\n        }\n        this.setTexture2D(renderTarget.depthTexture, 0);\n        const webglDepthTexture = this.properties.get(renderTarget.depthTexture).__webglTexture;\n        if (renderTarget.depthTexture.format === DepthFormat) {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, webglDepthTexture, 0);\n        }\n        else if (renderTarget.depthTexture.format === DepthStencilFormat) {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.TEXTURE_2D, webglDepthTexture, 0);\n        }\n        else {\n            throw new Error(\"Unknown depthTexture format\");\n        }\n    }\n    // Setup GL resources for a non-texture depth buffer\n    setupDepthRenderbuffer(renderTarget) {\n        const gl = this.context;\n        const renderTargetProperties = this.properties.get(renderTarget);\n        const isCube = renderTarget instanceof WebGLRenderTargetCube;\n        if (renderTarget.depthTexture) {\n            if (isCube)\n                throw new Error(\"target.depthTexture not supported in Cube render targets\");\n            this.setupDepthTexture(renderTargetProperties.__webglFramebuffer, renderTarget);\n        }\n        else {\n            if (isCube) {\n                renderTargetProperties.__webglDepthbuffer = [];\n                for (let i = 0; i < 6; i++) {\n                    gl.bindFramebuffer(gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[i]);\n                    renderTargetProperties.__webglDepthbuffer[i] = gl.createRenderbuffer();\n                    this.setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer[i], renderTarget);\n                }\n            }\n            else {\n                gl.bindFramebuffer(gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer);\n                renderTargetProperties.__webglDepthbuffer = gl.createRenderbuffer();\n                this.setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer, renderTarget);\n            }\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n    // Set up GL resources for the render target\n    setupRenderTarget(renderTarget) {\n        const gl = this.context;\n        const state = this.state;\n        const properties = this.properties;\n        const renderTargetProperties = properties.get(renderTarget);\n        const textureProperties = properties.get(renderTarget.texture);\n        renderTarget.addEventListener(\"dispose\", this.onRenderTargetDispose);\n        textureProperties.__webglTexture = gl.createTexture();\n        this.infoMemory.textures++;\n        const isCube = renderTarget instanceof WebGLRenderTargetCube;\n        const isTargetPowerOfTwo = isPowerOfTwo(renderTarget);\n        // Setup framebuffer\n        if (isCube) {\n            renderTargetProperties.__webglFramebuffer = [];\n            for (let i = 0; i < 6; i++) {\n                renderTargetProperties.__webglFramebuffer[i] = gl.createFramebuffer();\n            }\n        }\n        else {\n            renderTargetProperties.__webglFramebuffer = gl.createFramebuffer();\n        }\n        // Setup color buffer\n        if (isCube) {\n            state.bindTexture(gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture);\n            this.setTextureParameters(gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo);\n            for (let i = 0; i < 6; i++) {\n                this.setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer[i], renderTarget, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + i);\n            }\n            if (textureNeedsGenerateMipmaps(renderTarget.texture, isTargetPowerOfTwo)) {\n                gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\n            }\n            state.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n        }\n        else {\n            state.bindTexture(gl.TEXTURE_2D, textureProperties.__webglTexture);\n            this.setTextureParameters(gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo);\n            this.setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer, renderTarget, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D);\n            if (textureNeedsGenerateMipmaps(renderTarget.texture, isTargetPowerOfTwo)) {\n                gl.generateMipmap(gl.TEXTURE_2D);\n            }\n            state.bindTexture(gl.TEXTURE_2D, null);\n        }\n        // Setup depth and stencil buffers\n        if (renderTarget.depthBuffer) {\n            this.setupDepthRenderbuffer(renderTarget);\n        }\n    }\n    updateRenderTargetMipmap(renderTarget) {\n        const gl = this.context;\n        const state = this.state;\n        const properties = this.properties;\n        const texture = renderTarget.texture;\n        const isTargetPowerOfTwo = isPowerOfTwo(renderTarget);\n        if (textureNeedsGenerateMipmaps(texture, isTargetPowerOfTwo)) {\n            const target = renderTarget instanceof WebGLRenderTargetCube ? gl.TEXTURE_CUBE_MAP : gl.TEXTURE_2D;\n            const webglTexture = properties.get(texture).__webglTexture;\n            state.bindTexture(target, webglTexture);\n            gl.generateMipmap(target);\n            state.bindTexture(target, null);\n        }\n    }\n}\n","import { CubeTexture } from \"../../textures/CubeTexture\";\nimport { Texture } from \"../../textures/Texture\";\nimport { Vector3 } from \"../../math/Vector3\";\nimport { Matrix2 } from \"../../math/Matrix2\";\nimport { Matrix3 } from \"../../math/Matrix3\";\nimport { Matrix4 } from \"../../math/Matrix4\";\nconst emptyTexture = new Texture();\nconst emptyCubeTexture = new CubeTexture();\nclass UniformSetter {\n    constructor(renderer, id, activeInfo, addr) {\n        this.addr = 0;\n        this.size = 0;\n        this.setValue1f = (v) => {\n            this.context.uniform1f(this.addr, v);\n        };\n        this.setValue1i = (v) => {\n            this.context.uniform1i(this.addr, v);\n        };\n        this.setValue2fv = (v) => {\n            if (v instanceof Float32Array || Array.isArray(v)) {\n                this.context.uniform2fv(this.addr, v);\n            }\n            else {\n                this.context.uniform2f(this.addr, v.x, v.y);\n            }\n        };\n        this.setValue3fv = (v) => {\n            if (v instanceof Float32Array || Array.isArray(v)) {\n                this.context.uniform3fv(this.addr, v);\n            }\n            else if (v instanceof Vector3) {\n                this.context.uniform3f(this.addr, v.x, v.y, v.z);\n            }\n            else {\n                this.context.uniform3f(this.addr, v.r, v.g, v.b);\n            }\n        };\n        this.setValue4fv = (v) => {\n            if (v instanceof Float32Array || Array.isArray(v)) {\n                this.context.uniform4fv(this.addr, v);\n            }\n            else {\n                this.context.uniform4f(this.addr, v.x, v.y, v.z, v.w);\n            }\n        };\n        this.setValue2fm = (v) => {\n            if (v instanceof Matrix2) {\n                UniformSetter.mat2array.set(v.elements);\n                this.context.uniformMatrix2fv(this.addr, false, UniformSetter.mat2array);\n            }\n            else {\n                this.context.uniformMatrix2fv(this.addr, false, v);\n            }\n        };\n        this.setValue3fm = (v) => {\n            if (v instanceof Matrix3) {\n                UniformSetter.mat3array.set(v.elements);\n                this.context.uniformMatrix3fv(this.addr, false, UniformSetter.mat3array);\n            }\n            else {\n                this.context.uniformMatrix3fv(this.addr, false, v);\n            }\n        };\n        this.setValue4fm = (v) => {\n            if (v instanceof Matrix4) {\n                UniformSetter.mat4array.set(v.elements);\n                this.context.uniformMatrix4fv(this.addr, false, UniformSetter.mat4array);\n            }\n            else {\n                this.context.uniformMatrix4fv(this.addr, false, v);\n            }\n        };\n        this.setValueT1 = (v) => {\n            const unit = this.renderer.allocTextureUnit();\n            this.context.uniform1i(this.addr, unit);\n            this.renderer.setTexture2D(v || emptyTexture, unit);\n        };\n        this.setValueT6 = (v) => {\n            const unit = this.renderer.allocTextureUnit();\n            this.context.uniform1i(this.addr, unit);\n            this.renderer.setTextureCube(v || emptyCubeTexture, unit);\n        };\n        this.setValue2iv = (v) => {\n            this.context.uniform2iv(this.addr, v);\n        };\n        this.setValue3iv = (v) => {\n            this.context.uniform3iv(this.addr, v);\n        };\n        this.setValue4iv = (v) => {\n            this.context.uniform4iv(this.addr, v);\n        };\n        this.setValue1fv = (v) => {\n            this.context.uniform1fv(this.addr, v);\n        };\n        this.setValue1iv = (v) => {\n            this.context.uniform1iv(this.addr, v);\n        };\n        this.setValueV2a = (v) => {\n            this.context.uniform2fv(this.addr, UniformSetter.flatten(v, this.size, 2));\n        };\n        this.setValueV3a = (v) => {\n            this.context.uniform3fv(this.addr, UniformSetter.flatten(v, this.size, 3));\n        };\n        this.setValueV4a = (v) => {\n            this.context.uniform4fv(this.addr, UniformSetter.flatten(v, this.size, 4));\n        };\n        this.setValueM2a = (v) => {\n            this.context.uniformMatrix2fv(this.addr, false, UniformSetter.flatten(v, this.size, 4));\n        };\n        this.setValueM3a = (v) => {\n            this.context.uniformMatrix3fv(this.addr, false, UniformSetter.flatten(v, this.size, 9));\n        };\n        this.setValueM4a = (v) => {\n            this.context.uniformMatrix4fv(this.addr, false, UniformSetter.flatten(v, this.size, 16));\n        };\n        this.setValueT1a = (v) => {\n            const n = v.length, units = this.allocTexUnits(n);\n            this.context.uniform1iv(this.addr, units);\n            for (let i = 0; i !== n; i++) {\n                this.renderer.setTexture2D(v[i] || emptyTexture, units[i]);\n            }\n        };\n        this.setValueT6a = (v) => {\n            const n = v.length, units = this.allocTexUnits(n);\n            this.context.uniform1iv(this.addr, units);\n            for (let i = 0; i !== n; i++) {\n                this.renderer.setTextureCube(v[i] || emptyCubeTexture, units[i]);\n            }\n        };\n        this.renderer = renderer;\n        this.context = renderer.context;\n        this.id = id;\n        this.activeInfo = activeInfo;\n        this.addr = addr;\n        this.size = activeInfo.size;\n    }\n    getSingularSetter() {\n        switch (this.activeInfo.type) {\n            case 0x1406:\n                return this.setValue1f; // FLOAT\n            case 0x8b50:\n                return this.setValue2fv; // _VEC2\n            case 0x8b51:\n                return this.setValue3fv; // _VEC3\n            case 0x8b52:\n                return this.setValue4fv; // _VEC4\n            case 0x8b5a:\n                return this.setValue2fm; // _MAT2\n            case 0x8b5b:\n                return this.setValue3fm; // _MAT3\n            case 0x8b5c:\n                return this.setValue4fm; // _MAT4\n            case 0x8b5e:\n            case 0x8d66:\n                return this.setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n            case 0x8b60:\n                return this.setValueT6; // SAMPLER_CUBE\n            case 0x1404:\n            case 0x8b56:\n                return this.setValue1i; // INT, BOOL\n            case 0x8b53:\n            case 0x8b57:\n                return this.setValue2iv; // _VEC2\n            case 0x8b54:\n            case 0x8b58:\n                return this.setValue3iv; // _VEC3\n            case 0x8b55:\n            case 0x8b59:\n                return this.setValue4iv; // _VEC4\n        }\n        throw new Error(`Unknown type for getSingularSetter: ${this.activeInfo.type}`);\n    }\n    static flatten(array, nBlocks, blockSize) {\n        if (array instanceof Float32Array) {\n            return array;\n        }\n        const n = nBlocks * blockSize;\n        let r = UniformSetter.arrayCacheF32[n];\n        if (r === undefined) {\n            r = new Float32Array(n);\n            UniformSetter.arrayCacheF32[n] = r;\n        }\n        if (nBlocks !== 0) {\n            for (let i = 0, offset = 0; i !== nBlocks; i++) {\n                array[i].toArray(r, offset);\n                offset += blockSize;\n            }\n        }\n        return r;\n    }\n    allocTexUnits(n) {\n        let r = UniformSetter.arrayCacheI32[n];\n        if (r === undefined) {\n            r = new Int32Array(n);\n            UniformSetter.arrayCacheI32[n] = r;\n        }\n        for (let i = 0; i !== n; i++) {\n            r[i] = this.renderer.allocTextureUnit();\n        }\n        return r;\n    }\n    getPureArraySetter() {\n        switch (this.activeInfo.type) {\n            case 0x1406:\n                return this.setValue1fv; // FLOAT\n            case 0x8b50:\n                return this.setValueV2a; // _VEC2\n            case 0x8b51:\n                return this.setValueV3a; // _VEC3\n            case 0x8b52:\n                return this.setValueV4a; // _VEC4\n            case 0x8b5a:\n                return this.setValueM2a; // _MAT2\n            case 0x8b5b:\n                return this.setValueM3a; // _MAT3\n            case 0x8b5c:\n                return this.setValueM4a; // _MAT4\n            case 0x8b5e:\n                return this.setValueT1a; // SAMPLER_2D\n            case 0x8b60:\n                return this.setValueT6a; // SAMPLER_CUBE\n            case 0x1404:\n            case 0x8b56:\n                return this.setValue1iv; // INT, BOOL\n            case 0x8b53:\n            case 0x8b57:\n                return this.setValue2iv; // _VEC2\n            case 0x8b54:\n            case 0x8b58:\n                return this.setValue3iv; // _VEC3\n            case 0x8b55:\n            case 0x8b59:\n                return this.setValue4iv; // _VEC4\n        }\n        throw new Error(`Unknown type for getSingularSetter: ${this.activeInfo.type}`);\n    }\n}\nUniformSetter.mat2array = new Float32Array(4);\nUniformSetter.mat3array = new Float32Array(9);\nUniformSetter.mat4array = new Float32Array(16);\nUniformSetter.arrayCacheF32 = [];\nUniformSetter.arrayCacheI32 = [];\nclass SingleUniformSetter {\n    constructor(renderer, id, activeInfo, addr) {\n        const setter = new UniformSetter(renderer, id, activeInfo, addr);\n        this.id = id;\n        this.setValue = setter.getSingularSetter();\n    }\n}\nclass PureArrayUniformSetter {\n    constructor(renderer, id, activeInfo, addr) {\n        const setter = new UniformSetter(renderer, id, activeInfo, addr);\n        this.id = id;\n        this.setValue = setter.getPureArraySetter();\n    }\n}\nclass UniformContainer {\n    constructor() {\n        this.seq = [];\n        this.map = {};\n    }\n}\nclass StructuredUniformSetter extends UniformContainer {\n    constructor(id) {\n        super();\n        this.id = id;\n    }\n    setValue(value) {\n        // Note: Don't need an extra 'renderer' parameter, since samplers\n        // are not allowed in structured uniforms.\n        for (let i = 0, n = this.seq.length; i !== n; i++) {\n            const u = this.seq[i];\n            const v = value[u.id];\n            /**\n             * Well the following is the actually type logic...\n             * if(u instanceof StructuredUniformSetter) {\n             *     u.setValue(v as {[key: string]: AllUniformType;});\n             * } else {\n             *     u.setValue(v as AllUniformType);\n             * }\n             */\n            u.setValue(v);\n        }\n    }\n}\nconst RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\nexport class WebGLUniformsWrapper extends UniformContainer {\n    constructor(renderer, program) {\n        super();\n        this.renderer = renderer;\n        this.program = program;\n        const gl = this.renderer.context;\n        const n = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n        for (let i = 0; i < n; ++i) {\n            const info = gl.getActiveUniform(program, i), path = info.name, addr = gl.getUniformLocation(program, path);\n            this.parseUniform(info, addr, this);\n        }\n    }\n    static addUniform(container, uniformObject) {\n        container.seq.push(uniformObject);\n        container.map[uniformObject.id] = uniformObject;\n    }\n    parseUniform(activeInfo, addr, container) {\n        /**\n         * Hard to explain, take an example.\n         * When there is a single basic type uniform the typeInfo will be [\\d\\w_]+\n         * and when there is an array of basic type uniform the typeInfo will be [\\d\\w_]+[0]\n         * So this is how matchEnd + 2 === pathLength works\n         *\n         * when path is \"spotLights[0].direction\"\n         * the first match will get [ \"spotLights[\", \"spotLights\", undefined, \"[\" ] lastIndex == 11\n         * This round the regex first get matchEnd + 2 !== pathLength, then we can get this is a\n         * StructuredUniformSetter, So all the thing dealing in else bracket is about StructuredUniformSetter\n         * The Setter from the map is sure to be StructuredUniformSetter.\n         * So we use as StructuredUniformSetter\n         */\n        const path = activeInfo.name;\n        const pathLength = path.length;\n        // reset RegExp object, because of the early exit of a previous run\n        RePathPart.lastIndex = 0;\n        for (;;) {\n            const match = RePathPart.exec(path);\n            const matchEnd = RePathPart.lastIndex;\n            let id = match[1];\n            const idIsIndex = match[2] === \"]\";\n            const subscript = match[3];\n            if (idIsIndex)\n                id = parseInt(id, 10); // convert to integer\n            if (subscript === undefined || (subscript === \"[\" && matchEnd + 2 === pathLength)) {\n                // bare name or \"pure\" bottom-level array \"[0]\" suffix\n                WebGLUniformsWrapper.addUniform(container, subscript === undefined\n                    ? new SingleUniformSetter(this.renderer, id, activeInfo, addr)\n                    : new PureArrayUniformSetter(this.renderer, id, activeInfo, addr));\n                break;\n            }\n            else {\n                // step into inner node / create it in case it doesn't exist\n                const map = container.map;\n                let next = map[id];\n                if (next === undefined) {\n                    next = new StructuredUniformSetter(id);\n                    WebGLUniformsWrapper.addUniform(container, next);\n                }\n                container = next;\n            }\n        }\n    }\n    setValue(name, value) {\n        const u = this.map[name];\n        if (u !== undefined) {\n            u.setValue(value);\n        }\n    }\n    setOptional(object, name) {\n        const v = object[name];\n        if (v !== undefined) {\n            this.setValue(name, v);\n        }\n    }\n    static upload(seq, values) {\n        for (let i = 0, n = seq.length; i !== n; i++) {\n            const u = seq[i], v = values[u.id];\n            if (v.needsUpdate !== false) {\n                // note: always updating when .needsUpdate is undefined\n                u.setValue(v.value);\n            }\n        }\n    }\n    static seqWithValue(seq, values) {\n        const r = [];\n        for (let i = 0, n = seq.length; i !== n; i++) {\n            const u = seq[i];\n            if (u.id in values)\n                r.push(u);\n        }\n        return r;\n    }\n}\n","import { AddEquation, AlphaFormat, ByteType, ClampToEdgeWrapping, DepthFormat, DepthStencilFormat, DstAlphaFactor, DstColorFactor, FloatType, HalfFloatType, IntType, LinearFilter, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LuminanceAlphaFormat, LuminanceFormat, MaxEquation, MinEquation, MirroredRepeatWrapping, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, RGBAFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBFormat, RGB_ETC1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RepeatWrapping, ReverseSubtractEquation, ShortType, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, SubtractEquation, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShort565Type, UnsignedShortType, ZeroFactor, } from \"../../constants\";\nexport class WebGLUtils {\n    constructor(context, extensions) {\n        this.context = context;\n        this.extensions = extensions;\n    }\n    convert(parameter) {\n        const extensions = this.extensions;\n        const context = this.context;\n        let extension;\n        if (parameter === RepeatWrapping) {\n            return context.REPEAT;\n        }\n        if (parameter === ClampToEdgeWrapping) {\n            return context.CLAMP_TO_EDGE;\n        }\n        if (parameter === MirroredRepeatWrapping) {\n            return context.MIRRORED_REPEAT;\n        }\n        if (parameter === NearestFilter) {\n            return context.NEAREST;\n        }\n        if (parameter === NearestMipMapNearestFilter) {\n            return context.NEAREST_MIPMAP_NEAREST;\n        }\n        if (parameter === NearestMipMapLinearFilter) {\n            return context.NEAREST_MIPMAP_LINEAR;\n        }\n        if (parameter === LinearFilter) {\n            return context.LINEAR;\n        }\n        if (parameter === LinearMipMapNearestFilter) {\n            return context.LINEAR_MIPMAP_NEAREST;\n        }\n        if (parameter === LinearMipMapLinearFilter) {\n            return context.LINEAR_MIPMAP_LINEAR;\n        }\n        if (parameter === UnsignedByteType) {\n            return context.UNSIGNED_BYTE;\n        }\n        if (parameter === UnsignedShort4444Type) {\n            return context.UNSIGNED_SHORT_4_4_4_4;\n        }\n        if (parameter === UnsignedShort5551Type) {\n            return context.UNSIGNED_SHORT_5_5_5_1;\n        }\n        if (parameter === UnsignedShort565Type) {\n            return context.UNSIGNED_SHORT_5_6_5;\n        }\n        if (parameter === ByteType) {\n            return context.BYTE;\n        }\n        if (parameter === ShortType) {\n            return context.SHORT;\n        }\n        if (parameter === UnsignedShortType) {\n            return context.UNSIGNED_SHORT;\n        }\n        if (parameter === IntType) {\n            return context.INT;\n        }\n        if (parameter === UnsignedIntType) {\n            return context.UNSIGNED_INT;\n        }\n        if (parameter === FloatType) {\n            return context.FLOAT;\n        }\n        if (parameter === HalfFloatType) {\n            extension = extensions.get(\"OES_texture_half_float\");\n            if (extension !== null) {\n                return extension.HALF_FLOAT_OES;\n            }\n        }\n        if (parameter === AlphaFormat) {\n            return context.ALPHA;\n        }\n        if (parameter === RGBFormat) {\n            return context.RGB;\n        }\n        if (parameter === RGBAFormat) {\n            return context.RGBA;\n        }\n        if (parameter === LuminanceFormat) {\n            return context.LUMINANCE;\n        }\n        if (parameter === LuminanceAlphaFormat) {\n            return context.LUMINANCE_ALPHA;\n        }\n        if (parameter === DepthFormat) {\n            return context.DEPTH_COMPONENT;\n        }\n        if (parameter === DepthStencilFormat) {\n            return context.DEPTH_STENCIL;\n        }\n        if (parameter === AddEquation) {\n            return context.FUNC_ADD;\n        }\n        if (parameter === SubtractEquation) {\n            return context.FUNC_SUBTRACT;\n        }\n        if (parameter === ReverseSubtractEquation) {\n            return context.FUNC_REVERSE_SUBTRACT;\n        }\n        if (parameter === ZeroFactor) {\n            return context.ZERO;\n        }\n        if (parameter === OneFactor) {\n            return context.ONE;\n        }\n        if (parameter === SrcColorFactor) {\n            return context.SRC_COLOR;\n        }\n        if (parameter === OneMinusSrcColorFactor) {\n            return context.ONE_MINUS_SRC_COLOR;\n        }\n        if (parameter === SrcAlphaFactor) {\n            return context.SRC_ALPHA;\n        }\n        if (parameter === OneMinusSrcAlphaFactor) {\n            return context.ONE_MINUS_SRC_ALPHA;\n        }\n        if (parameter === DstAlphaFactor) {\n            return context.DST_ALPHA;\n        }\n        if (parameter === OneMinusDstAlphaFactor) {\n            return context.ONE_MINUS_DST_ALPHA;\n        }\n        if (parameter === DstColorFactor) {\n            return context.DST_COLOR;\n        }\n        if (parameter === OneMinusDstColorFactor) {\n            return context.ONE_MINUS_DST_COLOR;\n        }\n        if (parameter === SrcAlphaSaturateFactor) {\n            return context.SRC_ALPHA_SATURATE;\n        }\n        if (parameter === RGB_S3TC_DXT1_Format ||\n            parameter === RGBA_S3TC_DXT1_Format ||\n            parameter === RGBA_S3TC_DXT3_Format ||\n            parameter === RGBA_S3TC_DXT5_Format) {\n            extension = extensions.get(\"WEBGL_compressed_texture_s3tc\");\n            if (extension !== null) {\n                if (parameter === RGB_S3TC_DXT1_Format) {\n                    return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n                }\n                if (parameter === RGBA_S3TC_DXT1_Format) {\n                    return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n                }\n                if (parameter === RGBA_S3TC_DXT3_Format) {\n                    return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n                }\n                if (parameter === RGBA_S3TC_DXT5_Format) {\n                    return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n                }\n            }\n        }\n        if (parameter === RGB_PVRTC_4BPPV1_Format ||\n            parameter === RGB_PVRTC_2BPPV1_Format ||\n            parameter === RGBA_PVRTC_4BPPV1_Format ||\n            parameter === RGBA_PVRTC_2BPPV1_Format) {\n            extension = extensions.get(\"WEBGL_compressed_texture_pvrtc\");\n            if (extension !== null) {\n                if (parameter === RGB_PVRTC_4BPPV1_Format) {\n                    return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n                }\n                if (parameter === RGB_PVRTC_2BPPV1_Format) {\n                    return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n                }\n                if (parameter === RGBA_PVRTC_4BPPV1_Format) {\n                    return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n                }\n                if (parameter === RGBA_PVRTC_2BPPV1_Format) {\n                    return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n                }\n            }\n        }\n        if (parameter === RGB_ETC1_Format) {\n            extension = extensions.get(\"WEBGL_compressed_texture_etc1\");\n            if (extension !== null) {\n                return extension.COMPRESSED_RGB_ETC1_WEBGL;\n            }\n        }\n        if (parameter === RGBA_ASTC_4x4_Format ||\n            parameter === RGBA_ASTC_5x4_Format ||\n            parameter === RGBA_ASTC_5x5_Format ||\n            parameter === RGBA_ASTC_6x5_Format ||\n            parameter === RGBA_ASTC_6x6_Format ||\n            parameter === RGBA_ASTC_8x5_Format ||\n            parameter === RGBA_ASTC_8x6_Format ||\n            parameter === RGBA_ASTC_8x8_Format ||\n            parameter === RGBA_ASTC_10x5_Format ||\n            parameter === RGBA_ASTC_10x6_Format ||\n            parameter === RGBA_ASTC_10x8_Format ||\n            parameter === RGBA_ASTC_10x10_Format ||\n            parameter === RGBA_ASTC_12x10_Format ||\n            parameter === RGBA_ASTC_12x12_Format) {\n            extension = extensions.get(\"WEBGL_compressed_texture_astc\");\n            if (extension !== null) {\n                return parameter;\n            }\n        }\n        if (parameter === MinEquation || parameter === MaxEquation) {\n            extension = extensions.get(\"EXT_blend_minmax\");\n            if (extension !== null) {\n                if (parameter === MinEquation) {\n                    return extension.MIN_EXT;\n                }\n                if (parameter === MaxEquation) {\n                    return extension.MAX_EXT;\n                }\n            }\n        }\n        if (parameter === UnsignedInt248Type) {\n            extension = extensions.get(\"WEBGL_depth_texture\");\n            if (extension !== null) {\n                return extension.UNSIGNED_INT_24_8_WEBGL;\n            }\n        }\n        return 0;\n    }\n}\n","import { Color } from \"../math/Color\";\nexport class Fog {\n    constructor(color, near = 1, far = 1000) {\n        this.name = \"\";\n        this.near = 1;\n        this.far = 1000;\n        if (color instanceof Color) {\n            this.color = new Color().copy(color);\n        }\n        else if (typeof color === \"number\") {\n            this.color = new Color().setHex(color);\n        }\n        else if (typeof color === \"string\") {\n            this.color = new Color().setStyle(color);\n        }\n        this.near = near;\n        this.far = far;\n    }\n    copy(source) {\n        this.color.copy(source.color);\n        this.near = source.near;\n        this.far = source.far;\n        return this;\n    }\n    clone() {\n        return new this.constructor(this.color, this.near, this.far).copy(this);\n    }\n}\n","import { Color } from \"../math/Color\";\nexport class FogExp2 {\n    constructor(color, density = 1) {\n        this.name = \"\";\n        this.density = 0.00025;\n        if (color instanceof Color) {\n            this.color = new Color().copy(color);\n        }\n        else if (typeof color === \"number\") {\n            this.color = new Color().setHex(color);\n        }\n        else if (typeof color === \"string\") {\n            this.color = new Color().setStyle(color);\n        }\n        this.density = density;\n    }\n    copy(source) {\n        this.color.copy(source.color);\n        this.density = source.density;\n        return this;\n    }\n    clone() {\n        return new this.constructor(this.color, this.density).copy(this);\n    }\n}\n","import { Object3D } from \"../core/Object3D\";\nexport class Scene extends Object3D {\n    constructor() {\n        super(...arguments);\n        this.type = \"Scene\";\n        this.background = null;\n        this.fog = null;\n        this.overrideMaterial = null;\n        this.autoUpdate = true; // checked by the renderer\n    }\n    copy(source) {\n        super.copy(source);\n        if (source.background !== null) {\n            this.background = source.background.clone();\n        }\n        if (source.fog !== null) {\n            this.fog = source.fog.clone();\n        }\n        if (source.overrideMaterial !== null) {\n            this.overrideMaterial = source.overrideMaterial.clone();\n        }\n        this.autoUpdate = source.autoUpdate;\n        // this.matrixAutoUpdate = source.matrixAutoUpdate;\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n}\n","import { Texture } from \"./Texture\";\nexport class CanvasTexture extends Texture {\n    constructor(canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy) {\n        super(canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy);\n        this.image = Texture.DEFAULT_IMAGE;\n        this.needsUpdate = true;\n    }\n}\n","import { Texture } from \"./Texture\";\nexport class CompressedTexture extends Texture {\n    constructor(mipmaps, width, height, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n        super(null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n        this.image = { width: width, height: height };\n        this.mipmaps = mipmaps;\n        /**\n         * no flipping for cube textures\n         * (also flipping doesn't work for compressed textures )\n         * @type {boolean}\n         */\n        this.flipY = false;\n        /**\n         * can't generate mipmaps for compressed textures\n         * mips must be embedded in DDS files\n         * @type {boolean}\n         */\n        this.generateMipmaps = false;\n    }\n}\n","import { CubeReflectionMapping } from \"../constants\";\nimport { Texture } from \"./Texture\";\nexport class CubeTexture extends Texture {\n    constructor(images = [], mapping = CubeReflectionMapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n        super(images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n        this.flipY = false;\n    }\n    get images() {\n        return this.image;\n    }\n    set images(images) {\n        this.image = images;\n    }\n}\n","import { NearestFilter } from \"../constants\";\nimport { Texture } from \"./Texture\";\nexport class DataTexture extends Texture {\n    constructor(data, width, height, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n        super(null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n        this.image = { data: data, width: width, height: height };\n        this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n        this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n        this.generateMipmaps = false;\n        this.flipY = false;\n        this.unpackAlignment = 1;\n    }\n}\n","import { DepthFormat, DepthStencilFormat, NearestFilter, UnsignedInt248Type, UnsignedShortType } from \"../constants\";\nimport { Texture } from \"./Texture\";\nexport class DepthTexture extends Texture {\n    constructor(width, height, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n        format = format !== undefined ? format : DepthFormat;\n        if (format !== DepthFormat && format !== DepthStencilFormat) {\n            throw new Error(`DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat`);\n        }\n        if (type === undefined && format === DepthFormat) {\n            type = UnsignedShortType;\n        }\n        if (type === undefined && format === DepthStencilFormat) {\n            type = UnsignedInt248Type;\n        }\n        super(null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n        this.image = { width: width, height: height };\n        this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n        this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n        this.flipY = false;\n        this.generateMipmaps = false;\n    }\n}\n","import { ClampToEdgeWrapping, LinearEncoding, LinearFilter, LinearMipMapLinearFilter, MirroredRepeatWrapping, RepeatWrapping, RGBAFormat, UnsignedByteType, UVMapping, } from \"../constants\";\nimport { EventDispatcher } from \"../core/EventDispatcher\";\nimport { MathUtil } from \"../math/Math\";\nimport { Matrix3 } from \"../math/Matrix3\";\nimport { Vector2 } from \"../math/Vector2\";\nlet textureId = 0;\nexport class Texture extends EventDispatcher {\n    constructor(image = Texture.DEFAULT_IMAGE, mapping = Texture.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipMapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = 1, encoding = LinearEncoding) {\n        super();\n        this.id = textureId++;\n        this.uuid = MathUtil.generateUUID();\n        this.name = \"\";\n        this.image = Texture.DEFAULT_IMAGE;\n        this.mipmaps = [];\n        this.mapping = Texture.DEFAULT_MAPPING;\n        this.wrapS = ClampToEdgeWrapping;\n        this.wrapT = ClampToEdgeWrapping;\n        this.magFilter = LinearFilter;\n        this.minFilter = LinearMipMapLinearFilter;\n        this.anisotropy = 1;\n        this.format = RGBAFormat;\n        this.type = UnsignedByteType;\n        this.offset = new Vector2(0, 0);\n        this.repeat = new Vector2(1, 1);\n        this.center = new Vector2(0, 0);\n        this.rotation = 0;\n        this.matrix = new Matrix3();\n        this.matrixAutoUpdate = true;\n        this.generateMipmaps = true;\n        this.premultiplyAlpha = false;\n        this.flipY = true;\n        /**\n         * valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n         * @type {number}\n         */\n        this.unpackAlignment = 4;\n        /**\n         * Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n         * Also changing the encoding after already used by a Material will not automatically make the Material update.\n         * You need to explicitly call Material.needsUpdate to trigger it to recompile.\n         */\n        this.encoding = LinearEncoding;\n        this.version = 0;\n        this.image = image;\n        this.mapping = mapping;\n        this.wrapS = wrapS;\n        this.wrapT = wrapT;\n        this.magFilter = magFilter;\n        this.minFilter = minFilter;\n        this.format = format;\n        this.type = type;\n        this.anisotropy = anisotropy;\n        this.encoding = encoding;\n    }\n    set needsUpdate(value) {\n        if (value === true)\n            this.version++;\n    }\n    dispose() {\n        this.dispatchEvent({ type: \"dispose\" });\n    }\n    transformUv(uv) {\n        if (this.mapping !== UVMapping)\n            return this;\n        uv.applyMatrix3(this.matrix);\n        if (uv.x < 0 || uv.x > 1) {\n            switch (this.wrapS) {\n                case RepeatWrapping:\n                    uv.x = uv.x - Math.floor(uv.x);\n                    break;\n                case ClampToEdgeWrapping:\n                    uv.x = uv.x < 0 ? 0 : 1;\n                    break;\n                case MirroredRepeatWrapping:\n                    if (Math.abs(Math.floor(uv.x) % 2) === 1) {\n                        uv.x = Math.ceil(uv.x) - uv.x;\n                    }\n                    else {\n                        uv.x = uv.x - Math.floor(uv.x);\n                    }\n                    break;\n            }\n        }\n        if (uv.y < 0 || uv.y > 1) {\n            switch (this.wrapT) {\n                case RepeatWrapping:\n                    uv.y = uv.y - Math.floor(uv.y);\n                    break;\n                case ClampToEdgeWrapping:\n                    uv.y = uv.y < 0 ? 0 : 1;\n                    break;\n                case MirroredRepeatWrapping:\n                    if (Math.abs(Math.floor(uv.y) % 2) === 1) {\n                        uv.y = Math.ceil(uv.y) - uv.y;\n                    }\n                    else {\n                        uv.y = uv.y - Math.floor(uv.y);\n                    }\n                    break;\n            }\n        }\n        if (this.flipY) {\n            uv.y = 1 - uv.y;\n        }\n        return this;\n    }\n    clone() {\n        return new this.constructor().copy(this);\n    }\n    copy(source) {\n        this.name = source.name;\n        this.image = source.image;\n        this.mipmaps = source.mipmaps.slice(0);\n        this.mapping = source.mapping;\n        this.wrapS = source.wrapS;\n        this.wrapT = source.wrapT;\n        this.magFilter = source.magFilter;\n        this.minFilter = source.minFilter;\n        this.anisotropy = source.anisotropy;\n        this.format = source.format;\n        this.type = source.type;\n        this.offset.copy(source.offset);\n        this.repeat.copy(source.repeat);\n        this.center.copy(source.center);\n        this.rotation = source.rotation;\n        this.matrixAutoUpdate = source.matrixAutoUpdate;\n        this.matrix.copy(source.matrix);\n        this.generateMipmaps = source.generateMipmaps;\n        this.premultiplyAlpha = source.premultiplyAlpha;\n        this.flipY = source.flipY;\n        this.unpackAlignment = source.unpackAlignment;\n        this.encoding = source.encoding;\n        return this;\n    }\n}\nTexture.DEFAULT_MAPPING = UVMapping;\n","import { Texture } from \"./Texture\";\nexport class VideoTexture extends Texture {\n    constructor(video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy) {\n        super(video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy);\n        this.image = Texture.DEFAULT_IMAGE;\n        this.generateMipmaps = false;\n    }\n    update() {\n        const video = this.image;\n        if (video.readyState >= video.HAVE_CURRENT_DATA) {\n            this.needsUpdate = true;\n        }\n        return this;\n    }\n}\n","import { Matrix4 } from \"./math/Matrix4\";\nimport { Matrix3 } from \"./math/Matrix3\";\nimport { Vector3 } from \"./math/Vector3\";\nimport { Vector2 } from \"./math/Vector2\";\nimport { Vector4 } from \"./math/Vector4\";\nexport function arrayMin(array) {\n    if (array.length === 0)\n        return Infinity;\n    let min = array[0];\n    for (let i = 1, l = array.length; i < l; ++i) {\n        if (array[i] < min)\n            min = array[i];\n    }\n    return min;\n}\nexport function arrayMax(array) {\n    if (array.length === 0)\n        return -Infinity;\n    let max = array[0];\n    for (let i = 1, l = array.length; i < l; ++i) {\n        if (array[i] > max)\n            max = array[i];\n    }\n    return max;\n}\nexport function applyMatrixToBufferAttribute(matrix, attribute) {\n    const vec = new Vector3();\n    for (let i = 0, l = attribute.count; i < l; i++) {\n        vec.x = attribute.getProperty(i, \"x\");\n        vec.y = attribute.getProperty(i, \"y\");\n        vec.z = attribute.getProperty(i, \"z\");\n        if (matrix instanceof Matrix4) {\n            vec.applyMatrix4(matrix);\n        }\n        else if (matrix instanceof Matrix3) {\n            vec.applyMatrix3(matrix);\n        }\n        attribute.setProperty(i, \"xyz\", vec);\n    }\n    return attribute;\n}\nexport function setBoxFromBufferAttribute(target, attribute) {\n    let minX = +Infinity;\n    let minY = +Infinity;\n    let minZ = +Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    let maxZ = -Infinity;\n    for (let i = 0, l = attribute.count; i < l; i++) {\n        const x = attribute.getProperty(i, \"x\");\n        const y = attribute.getProperty(i, \"y\");\n        const z = attribute.getProperty(i, \"z\");\n        if (x < minX)\n            minX = x;\n        if (y < minY)\n            minY = y;\n        if (z < minZ)\n            minZ = z;\n        if (x > maxX)\n            maxX = x;\n        if (y > maxY)\n            maxY = y;\n        if (z > maxZ)\n            maxZ = z;\n    }\n    target.min.set(minX, minY, minZ);\n    target.max.set(maxX, maxY, maxZ);\n}\nexport function unprojectVector3onCamera(vector, camera) {\n    const matrix = new Matrix4();\n    vector.applyMatrix4(matrix.multiplyMatrices(camera.matrixWorld, matrix.getInverse(camera.projectionMatrix)));\n    return vector;\n}\nexport function vectorFromBufferAttribute(vector, attribute, index = 0) {\n    if (vector instanceof Vector2) {\n        return vector.set(attribute.getProperty(index, \"x\"), attribute.getProperty(index, \"y\"));\n    }\n    else if (vector instanceof Vector3) {\n        return vector.set(attribute.getProperty(index, \"x\"), attribute.getProperty(index, \"y\"), attribute.getProperty(index, \"z\"));\n    }\n    else if (vector instanceof Vector4) {\n        return vector.set(attribute.getProperty(index, \"x\"), attribute.getProperty(index, \"y\"), attribute.getProperty(index, \"z\"), attribute.getProperty(index, \"w\"));\n    }\n    return vector;\n}\n"],"sourceRoot":""}